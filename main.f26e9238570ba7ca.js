"use strict";(self.webpackChunkprtflio=self.webpackChunkprtflio||[]).push([[179],{7520:(an,qe,$)=>{function U(v){return v}$.d(qe,{J:()=>U})},9274:(an,qe,$)=>{function U(m,e,t,r,l,d,p){try{var g=m[d](p),y=g.value}catch(b){return void t(b)}g.done?e(y):Promise.resolve(y).then(r,l)}$.d(qe,{P:()=>qy});const Qt=1e3,Lt=1001,fi=1003,Rn=1006,Zr=1008,yr=1009,Rr=1014,wr=1015,Ss=1016,Zi=1020,Ti=1023,Sn=1026,ri=1027,gs=3e3,Ai=3001,Kr="srgb",Es="srgb-linear",va="display-p3",V="300 es",K=1035;class ge{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const r=this._listeners;void 0===r[e]&&(r[e]=[]),-1===r[e].indexOf(t)&&r[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const r=this._listeners;return void 0!==r[e]&&-1!==r[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const l=this._listeners[e];if(void 0!==l){const d=l.indexOf(t);-1!==d&&l.splice(d,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const r=this._listeners[e.type];if(void 0!==r){e.target=this;const l=r.slice(0);for(let d=0,p=l.length;d<p;d++)l[d].call(this,e);e.target=null}}}const Ae=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],nn=Math.PI/180,Mi=180/Math.PI;function ai(){const m=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Ae[255&m]+Ae[m>>8&255]+Ae[m>>16&255]+Ae[m>>24&255]+"-"+Ae[255&e]+Ae[e>>8&255]+"-"+Ae[e>>16&15|64]+Ae[e>>24&255]+"-"+Ae[63&t|128]+Ae[t>>8&255]+"-"+Ae[t>>16&255]+Ae[t>>24&255]+Ae[255&r]+Ae[r>>8&255]+Ae[r>>16&255]+Ae[r>>24&255]).toLowerCase()}function Un(m,e,t){return Math.max(e,Math.min(t,m))}function nr(m,e,t){return(1-t)*m+t*e}function Yo(m){return 0==(m&m-1)&&0!==m}function es(m){return Math.pow(2,Math.floor(Math.log(m)/Math.LN2))}function Pi(m,e){switch(e.constructor){case Float32Array:return m;case Uint16Array:return m/65535;case Uint8Array:return m/255;case Int16Array:return Math.max(m/32767,-1);case Int8Array:return Math.max(m/127,-1);default:throw new Error("Invalid component type.")}}function On(m,e){switch(e.constructor){case Float32Array:return m;case Uint16Array:return Math.round(65535*m);case Uint8Array:return Math.round(255*m);case Int16Array:return Math.round(32767*m);case Int8Array:return Math.round(127*m);default:throw new Error("Invalid component type.")}}class gt{constructor(e=0,t=0){gt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,l=e.elements;return this.x=l[0]*t+l[3]*r+l[6],this.y=l[1]*t+l[4]*r+l[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),l=Math.sin(t),d=this.x-e.x,p=this.y-e.y;return this.x=d*r-p*l+e.x,this.y=d*l+p*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ki{constructor(){Ki.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,r,l,d,p,g,y,b){const M=this.elements;return M[0]=e,M[1]=l,M[2]=g,M[3]=t,M[4]=d,M[5]=y,M[6]=r,M[7]=p,M[8]=b,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,l=t.elements,d=this.elements,p=r[0],g=r[3],y=r[6],b=r[1],M=r[4],T=r[7],E=r[2],I=r[5],F=r[8],N=l[0],L=l[3],W=l[6],z=l[1],G=l[4],j=l[7],ee=l[2],ie=l[5],fe=l[8];return d[0]=p*N+g*z+y*ee,d[3]=p*L+g*G+y*ie,d[6]=p*W+g*j+y*fe,d[1]=b*N+M*z+T*ee,d[4]=b*L+M*G+T*ie,d[7]=b*W+M*j+T*fe,d[2]=E*N+I*z+F*ee,d[5]=E*L+I*G+F*ie,d[8]=E*W+I*j+F*fe,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],l=e[2],d=e[3],p=e[4],g=e[5],y=e[6],b=e[7],M=e[8];return t*p*M-t*g*b-r*d*M+r*g*y+l*d*b-l*p*y}invert(){const e=this.elements,t=e[0],r=e[1],l=e[2],d=e[3],p=e[4],g=e[5],y=e[6],b=e[7],M=e[8],T=M*p-g*b,E=g*y-M*d,I=b*d-p*y,F=t*T+r*E+l*I;if(0===F)return this.set(0,0,0,0,0,0,0,0,0);const N=1/F;return e[0]=T*N,e[1]=(l*b-M*r)*N,e[2]=(g*r-l*p)*N,e[3]=E*N,e[4]=(M*t-l*y)*N,e[5]=(l*d-g*t)*N,e[6]=I*N,e[7]=(r*y-b*t)*N,e[8]=(p*t-r*d)*N,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,l,d,p,g){const y=Math.cos(d),b=Math.sin(d);return this.set(r*y,r*b,-r*(y*p+b*g)+p+e,-l*b,l*y,-l*(-b*p+y*g)+g+t,0,0,1),this}scale(e,t){return this.premultiply(Ku.makeScale(e,t)),this}rotate(e){return this.premultiply(Ku.makeRotation(-e)),this}translate(e,t){return this.premultiply(Ku.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let l=0;l<9;l++)if(t[l]!==r[l])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const Ku=new Ki;function Qu(m){for(let e=m.length-1;e>=0;--e)if(m[e]>=65535)return!0;return!1}function As(m){return document.createElementNS("http://www.w3.org/1999/xhtml",m)}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;class Ns{constructor(e=0,t=0,r=0,l=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=l}static slerpFlat(e,t,r,l,d,p,g){let y=r[l+0],b=r[l+1],M=r[l+2],T=r[l+3];const E=d[p+0],I=d[p+1],F=d[p+2],N=d[p+3];if(0===g)return e[t+0]=y,e[t+1]=b,e[t+2]=M,void(e[t+3]=T);if(1===g)return e[t+0]=E,e[t+1]=I,e[t+2]=F,void(e[t+3]=N);if(T!==N||y!==E||b!==I||M!==F){let L=1-g;const W=y*E+b*I+M*F+T*N,z=W>=0?1:-1,G=1-W*W;if(G>Number.EPSILON){const ee=Math.sqrt(G),ie=Math.atan2(ee,W*z);L=Math.sin(L*ie)/ee,g=Math.sin(g*ie)/ee}const j=g*z;if(y=y*L+E*j,b=b*L+I*j,M=M*L+F*j,T=T*L+N*j,L===1-g){const ee=1/Math.sqrt(y*y+b*b+M*M+T*T);y*=ee,b*=ee,M*=ee,T*=ee}}e[t]=y,e[t+1]=b,e[t+2]=M,e[t+3]=T}static multiplyQuaternionsFlat(e,t,r,l,d,p){const g=r[l],y=r[l+1],b=r[l+2],M=r[l+3],T=d[p],E=d[p+1],I=d[p+2],F=d[p+3];return e[t]=g*F+M*T+y*I-b*E,e[t+1]=y*F+M*E+b*T-g*I,e[t+2]=b*F+M*I+g*E-y*T,e[t+3]=M*F-g*T-y*E-b*I,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,l){return this._x=e,this._y=t,this._z=r,this._w=l,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const r=e._x,l=e._y,d=e._z,p=e._order,g=Math.cos,y=Math.sin,b=g(r/2),M=g(l/2),T=g(d/2),E=y(r/2),I=y(l/2),F=y(d/2);switch(p){case"XYZ":this._x=E*M*T+b*I*F,this._y=b*I*T-E*M*F,this._z=b*M*F+E*I*T,this._w=b*M*T-E*I*F;break;case"YXZ":this._x=E*M*T+b*I*F,this._y=b*I*T-E*M*F,this._z=b*M*F-E*I*T,this._w=b*M*T+E*I*F;break;case"ZXY":this._x=E*M*T-b*I*F,this._y=b*I*T+E*M*F,this._z=b*M*F+E*I*T,this._w=b*M*T-E*I*F;break;case"ZYX":this._x=E*M*T-b*I*F,this._y=b*I*T+E*M*F,this._z=b*M*F-E*I*T,this._w=b*M*T+E*I*F;break;case"YZX":this._x=E*M*T+b*I*F,this._y=b*I*T+E*M*F,this._z=b*M*F-E*I*T,this._w=b*M*T-E*I*F;break;case"XZY":this._x=E*M*T-b*I*F,this._y=b*I*T-E*M*F,this._z=b*M*F+E*I*T,this._w=b*M*T+E*I*F;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+p)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,l=Math.sin(r);return this._x=e.x*l,this._y=e.y*l,this._z=e.z*l,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],l=t[4],d=t[8],p=t[1],g=t[5],y=t[9],b=t[2],M=t[6],T=t[10],E=r+g+T;if(E>0){const I=.5/Math.sqrt(E+1);this._w=.25/I,this._x=(M-y)*I,this._y=(d-b)*I,this._z=(p-l)*I}else if(r>g&&r>T){const I=2*Math.sqrt(1+r-g-T);this._w=(M-y)/I,this._x=.25*I,this._y=(l+p)/I,this._z=(d+b)/I}else if(g>T){const I=2*Math.sqrt(1+g-r-T);this._w=(d-b)/I,this._x=(l+p)/I,this._y=.25*I,this._z=(y+M)/I}else{const I=2*Math.sqrt(1+T-r-g);this._w=(p-l)/I,this._x=(d+b)/I,this._y=(y+M)/I,this._z=.25*I}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Un(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(0===r)return this;const l=Math.min(1,t/r);return this.slerp(e,l),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,l=e._y,d=e._z,p=e._w,g=t._x,y=t._y,b=t._z,M=t._w;return this._x=r*M+p*g+l*b-d*y,this._y=l*M+p*y+d*g-r*b,this._z=d*M+p*b+r*y-l*g,this._w=p*M-r*g-l*y-d*b,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const r=this._x,l=this._y,d=this._z,p=this._w;let g=p*e._w+r*e._x+l*e._y+d*e._z;if(g<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,g=-g):this.copy(e),g>=1)return this._w=p,this._x=r,this._y=l,this._z=d,this;const y=1-g*g;if(y<=Number.EPSILON){const I=1-t;return this._w=I*p+t*this._w,this._x=I*r+t*this._x,this._y=I*l+t*this._y,this._z=I*d+t*this._z,this.normalize(),this._onChangeCallback(),this}const b=Math.sqrt(y),M=Math.atan2(b,g),T=Math.sin((1-t)*M)/b,E=Math.sin(t*M)/b;return this._w=p*T+this._w*E,this._x=r*T+this._x*E,this._y=l*T+this._y*E,this._z=d*T+this._z*E,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),l=2*Math.PI*Math.random(),d=2*Math.PI*Math.random();return this.set(t*Math.cos(l),r*Math.sin(d),r*Math.cos(d),t*Math.sin(l))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ae{constructor(e=0,t=0,r=0){ae.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return void 0===r&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(mc.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(mc.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,l=this.z,d=e.elements;return this.x=d[0]*t+d[3]*r+d[6]*l,this.y=d[1]*t+d[4]*r+d[7]*l,this.z=d[2]*t+d[5]*r+d[8]*l,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,l=this.z,d=e.elements,p=1/(d[3]*t+d[7]*r+d[11]*l+d[15]);return this.x=(d[0]*t+d[4]*r+d[8]*l+d[12])*p,this.y=(d[1]*t+d[5]*r+d[9]*l+d[13])*p,this.z=(d[2]*t+d[6]*r+d[10]*l+d[14])*p,this}applyQuaternion(e){const t=this.x,r=this.y,l=this.z,d=e.x,p=e.y,g=e.z,y=e.w,b=y*t+p*l-g*r,M=y*r+g*t-d*l,T=y*l+d*r-p*t,E=-d*t-p*r-g*l;return this.x=b*y+E*-d+M*-g-T*-p,this.y=M*y+E*-p+T*-d-b*-g,this.z=T*y+E*-g+b*-p-M*-d,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,l=this.z,d=e.elements;return this.x=d[0]*t+d[4]*r+d[8]*l,this.y=d[1]*t+d[5]*r+d[9]*l,this.z=d[2]*t+d[6]*r+d[10]*l,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,l=e.y,d=e.z,p=t.x,g=t.y,y=t.z;return this.x=l*y-d*g,this.y=d*p-r*y,this.z=r*g-l*p,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return gc.copy(this).projectOnVector(e),this.sub(gc)}reflect(e){return this.sub(gc.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Un(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,l=this.z-e.z;return t*t+r*r+l*l}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const l=Math.sin(t)*e;return this.x=l*Math.sin(r),this.y=Math.cos(t)*e,this.z=l*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),l=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=l,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const gc=new ae,mc=new Ns;function Xo(m){return m<.04045?.0773993808*m:Math.pow(.9478672986*m+.0521327014,2.4)}function ba(m){return m<.0031308?12.92*m:1.055*Math.pow(m,.41666)-.055}const _c=(new Ki).fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),Al=(new Ki).fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]),Ni=new ae,Ya={[Es]:m=>m,[Kr]:m=>m.convertSRGBToLinear(),[va]:function jc(m){return m.convertSRGBToLinear(),Ni.set(m.r,m.g,m.b).applyMatrix3(Al),m.setRGB(Ni.x,Ni.y,Ni.z)}},ed={[Es]:m=>m,[Kr]:m=>m.convertLinearToSRGB(),[va]:function vc(m){return Ni.set(m.r,m.g,m.b).applyMatrix3(_c),m.setRGB(Ni.x,Ni.y,Ni.z).convertLinearToSRGB()}},vi={enabled:!1,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(m){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!m},get workingColorSpace(){return Es},set workingColorSpace(m){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(m,e,t){if(!1===this.enabled||e===t||!e||!t)return m;const r=Ya[e],l=ed[t];if(void 0===r||void 0===l)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return l(r(m))},fromWorkingColorSpace:function(m,e){return this.convert(m,this.workingColorSpace,e)},toWorkingColorSpace:function(m,e){return this.convert(m,e,this.workingColorSpace)}};let ts;class Li{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===ts&&(ts=As("canvas")),ts.width=e.width,ts.height=e.height;const r=ts.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=ts}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=As("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const l=r.getImageData(0,0,e.width,e.height),d=l.data;for(let p=0;p<d.length;p++)d[p]=255*Xo(d[p]/255);return r.putImageData(l,0,0),t}if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t[r]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*Xo(t[r]/255)):Xo(t[r]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class No{constructor(e=null){this.isSource=!0,this.uuid=ai(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const r={uuid:this.uuid,url:""},l=this.data;if(null!==l){let d;if(Array.isArray(l)){d=[];for(let p=0,g=l.length;p<g;p++)d.push(qa(l[p].isDataTexture?l[p].image:l[p]))}else d=qa(l);r.url=d}return t||(e.images[this.uuid]=r),r}}function qa(m){return typeof HTMLImageElement<"u"&&m instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&m instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&m instanceof ImageBitmap?Li.getDataURL(m):m.data?{data:Array.from(m.data),width:m.width,height:m.height,type:m.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let sf=0,xa=(()=>{class m extends ge{constructor(t=m.DEFAULT_IMAGE,r=m.DEFAULT_MAPPING,l=Lt,d=Lt,p=Rn,g=Zr,y=Ti,b=yr,M=m.DEFAULT_ANISOTROPY,T=gs){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:sf++}),this.uuid=ai(),this.name="",this.source=new No(t),this.mipmaps=[],this.mapping=r,this.wrapS=l,this.wrapT=d,this.magFilter=p,this.minFilter=g,this.anisotropy=M,this.format=y,this.internalFormat=null,this.type=b,this.offset=new gt(0,0),this.repeat=new gt(1,1),this.center=new gt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ki,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=T,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const r=void 0===t||"string"==typeof t;if(!r&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const l={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(l.userData=this.userData),r||(t.textures[this.uuid]=l),l}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Qt:t.x=t.x-Math.floor(t.x);break;case Lt:t.x=t.x<0?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case Qt:t.y=t.y-Math.floor(t.y);break;case Lt:t.y=t.y<0?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}return m.DEFAULT_IMAGE=null,m.DEFAULT_MAPPING=300,m.DEFAULT_ANISOTROPY=1,m})();class Fi{constructor(e=0,t=0,r=0,l=1){Fi.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=l}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,l){return this.x=e,this.y=t,this.z=r,this.w=l,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,l=this.z,d=this.w,p=e.elements;return this.x=p[0]*t+p[4]*r+p[8]*l+p[12]*d,this.y=p[1]*t+p[5]*r+p[9]*l+p[13]*d,this.z=p[2]*t+p[6]*r+p[10]*l+p[14]*d,this.w=p[3]*t+p[7]*r+p[11]*l+p[15]*d,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,l,d;const y=e.elements,b=y[0],M=y[4],T=y[8],E=y[1],I=y[5],F=y[9],N=y[2],L=y[6],W=y[10];if(Math.abs(M-E)<.01&&Math.abs(T-N)<.01&&Math.abs(F-L)<.01){if(Math.abs(M+E)<.1&&Math.abs(T+N)<.1&&Math.abs(F+L)<.1&&Math.abs(b+I+W-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const G=(b+1)/2,j=(I+1)/2,ee=(W+1)/2,ie=(M+E)/4,fe=(T+N)/4,X=(F+L)/4;return G>j&&G>ee?G<.01?(r=0,l=.707106781,d=.707106781):(r=Math.sqrt(G),l=ie/r,d=fe/r):j>ee?j<.01?(r=.707106781,l=0,d=.707106781):(l=Math.sqrt(j),r=ie/l,d=X/l):ee<.01?(r=.707106781,l=.707106781,d=0):(d=Math.sqrt(ee),r=fe/d,l=X/d),this.set(r,l,d,t),this}let z=Math.sqrt((L-F)*(L-F)+(T-N)*(T-N)+(E-M)*(E-M));return Math.abs(z)<.001&&(z=1),this.x=(L-F)/z,this.y=(T-N)/z,this.z=(E-M)/z,this.w=Math.acos((b+I+W-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Xa extends ge{constructor(e=1,t=1,r={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Fi(0,0,e,t),this.scissorTest=!1,this.viewport=new Fi(0,0,e,t),this.texture=new xa({width:e,height:t,depth:1},r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,this.texture.internalFormat=void 0!==r.internalFormat?r.internalFormat:null,this.texture.minFilter=void 0!==r.minFilter?r.minFilter:Rn,this.depthBuffer=void 0===r.depthBuffer||r.depthBuffer,this.stencilBuffer=void 0!==r.stencilBuffer&&r.stencilBuffer,this.depthTexture=void 0!==r.depthTexture?r.depthTexture:null,this.samples=void 0!==r.samples?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new No(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class yc extends xa{constructor(e=null,t=1,r=1,l=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:l},this.magFilter=fi,this.minFilter=fi,this.wrapR=Lt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Za extends xa{constructor(e=null,t=1,r=1,l=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:l},this.magFilter=fi,this.minFilter=fi,this.wrapR=Lt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Nl{constructor(e=new ae(1/0,1/0,1/0),t=new ae(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,l=1/0,d=-1/0,p=-1/0,g=-1/0;for(let y=0,b=e.length;y<b;y+=3){const M=e[y],T=e[y+1],E=e[y+2];M<t&&(t=M),T<r&&(r=T),E<l&&(l=E),M>d&&(d=M),T>p&&(p=T),E>g&&(g=E)}return this.min.set(t,r,l),this.max.set(d,p,g),this}setFromBufferAttribute(e){let t=1/0,r=1/0,l=1/0,d=-1/0,p=-1/0,g=-1/0;for(let y=0,b=e.count;y<b;y++){const M=e.getX(y),T=e.getY(y),E=e.getZ(y);M<t&&(t=M),T<r&&(r=T),E<l&&(l=E),M>d&&(d=M),T>p&&(p=T),E>g&&(g=E)}return this.min.set(t,r,l),this.max.set(d,p,g),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=io.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(void 0!==r)if(t&&null!=r.attributes&&void 0!==r.attributes.position){const d=r.attributes.position;for(let p=0,g=d.count;p<g;p++)io.fromBufferAttribute(d,p).applyMatrix4(e.matrixWorld),this.expandByPoint(io)}else null===r.boundingBox&&r.computeBoundingBox(),bc.copy(r.boundingBox),bc.applyMatrix4(e.matrixWorld),this.union(bc);const l=e.children;for(let d=0,p=l.length;d<p;d++)this.expandByObject(l[d],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,io),io.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter($c),Ma.subVectors(this.max,$c),wa.subVectors(e.a,$c),ro.subVectors(e.b,$c),Da.subVectors(e.c,$c),yo.subVectors(ro,wa),Zo.subVectors(Da,ro),Il.subVectors(wa,Da);let t=[0,-yo.z,yo.y,0,-Zo.z,Zo.y,0,-Il.z,Il.y,yo.z,0,-yo.x,Zo.z,0,-Zo.x,Il.z,0,-Il.x,-yo.y,yo.x,0,-Zo.y,Zo.x,0,-Il.y,Il.x,0];return!(!wc(t,wa,ro,Da,Ma)||(t=[1,0,0,0,1,0,0,0,1],!wc(t,wa,ro,Da,Ma)))&&(xc.crossVectors(yo,Zo),t=[xc.x,xc.y,xc.z],wc(t,wa,ro,Da,Ma))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,io).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(io).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(ns[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ns[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ns[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ns[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ns[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ns[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ns[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ns[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ns)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ns=[new ae,new ae,new ae,new ae,new ae,new ae,new ae,new ae],io=new ae,bc=new Nl,wa=new ae,ro=new ae,Da=new ae,yo=new ae,Zo=new ae,Il=new ae,$c=new ae,Ma=new ae,xc=new ae,Jo=new ae;function wc(m,e,t,r,l){for(let d=0,p=m.length-3;d<=p;d+=3){Jo.fromArray(m,d);const g=l.x*Math.abs(Jo.x)+l.y*Math.abs(Jo.y)+l.z*Math.abs(Jo.z),y=e.dot(Jo),b=t.dot(Jo),M=r.dot(Jo);if(Math.max(-Math.max(y,b,M),Math.min(y,b,M))>g)return!1}return!0}const td=new Nl,Rl=new ae,_s=new ae;class Ko{constructor(e=new ae,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;void 0!==t?r.copy(t):td.setFromPoints(e).getCenter(r);let l=0;for(let d=0,p=e.length;d<p;d++)l=Math.max(l,r.distanceToSquared(e[d]));return this.radius=Math.sqrt(l),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Rl.subVectors(e,this.center);const t=Rl.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),l=.5*(r-this.radius);this.center.addScaledVector(Rl,l/r),this.radius+=l}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(_s.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Rl.copy(e.center).add(_s)),this.expandByPoint(Rl.copy(e.center).sub(_s))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const vs=new ae,ys=new ae,Ca=new ae,Sa=new ae,nd=new ae,Ol=new ae,Sr=new ae;class Is{constructor(e=new ae,t=new ae(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,vs)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=vs.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(vs.copy(this.origin).addScaledVector(this.direction,t),vs.distanceToSquared(e))}distanceSqToSegment(e,t,r,l){ys.copy(e).add(t).multiplyScalar(.5),Ca.copy(t).sub(e).normalize(),Sa.copy(this.origin).sub(ys);const d=.5*e.distanceTo(t),p=-this.direction.dot(Ca),g=Sa.dot(this.direction),y=-Sa.dot(Ca),b=Sa.lengthSq(),M=Math.abs(1-p*p);let T,E,I,F;if(M>0)if(T=p*y-g,E=p*g-y,F=d*M,T>=0)if(E>=-F)if(E<=F){const N=1/M;T*=N,E*=N,I=T*(T+p*E+2*g)+E*(p*T+E+2*y)+b}else E=d,T=Math.max(0,-(p*E+g)),I=-T*T+E*(E+2*y)+b;else E=-d,T=Math.max(0,-(p*E+g)),I=-T*T+E*(E+2*y)+b;else E<=-F?(T=Math.max(0,-(-p*d+g)),E=T>0?-d:Math.min(Math.max(-d,-y),d),I=-T*T+E*(E+2*y)+b):E<=F?(T=0,E=Math.min(Math.max(-d,-y),d),I=E*(E+2*y)+b):(T=Math.max(0,-(p*d+g)),E=T>0?d:Math.min(Math.max(-d,-y),d),I=-T*T+E*(E+2*y)+b);else E=p>0?-d:d,T=Math.max(0,-(p*E+g)),I=-T*T+E*(E+2*y)+b;return r&&r.copy(this.origin).addScaledVector(this.direction,T),l&&l.copy(ys).addScaledVector(Ca,E),I}intersectSphere(e,t){vs.subVectors(e.center,this.origin);const r=vs.dot(this.direction),l=vs.dot(vs)-r*r,d=e.radius*e.radius;if(l>d)return null;const p=Math.sqrt(d-l),g=r-p,y=r+p;return y<0?null:this.at(g<0?y:g,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return null===r?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,l,d,p,g,y;const b=1/this.direction.x,M=1/this.direction.y,T=1/this.direction.z,E=this.origin;return b>=0?(r=(e.min.x-E.x)*b,l=(e.max.x-E.x)*b):(r=(e.max.x-E.x)*b,l=(e.min.x-E.x)*b),M>=0?(d=(e.min.y-E.y)*M,p=(e.max.y-E.y)*M):(d=(e.max.y-E.y)*M,p=(e.min.y-E.y)*M),r>p||d>l||((d>r||isNaN(r))&&(r=d),(p<l||isNaN(l))&&(l=p),T>=0?(g=(e.min.z-E.z)*T,y=(e.max.z-E.z)*T):(g=(e.max.z-E.z)*T,y=(e.min.z-E.z)*T),r>y||g>l)||((g>r||r!=r)&&(r=g),(y<l||l!=l)&&(l=y),l<0)?null:this.at(r>=0?r:l,t)}intersectsBox(e){return null!==this.intersectBox(e,vs)}intersectTriangle(e,t,r,l,d){nd.subVectors(t,e),Ol.subVectors(r,e),Sr.crossVectors(nd,Ol);let g,p=this.direction.dot(Sr);if(p>0){if(l)return null;g=1}else{if(!(p<0))return null;g=-1,p=-p}Sa.subVectors(this.origin,e);const y=g*this.direction.dot(Ol.crossVectors(Sa,Ol));if(y<0)return null;const b=g*this.direction.dot(nd.cross(Sa));if(b<0||y+b>p)return null;const M=-g*Sa.dot(Sr);return M<0?null:this.at(M/p,d)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class ni{constructor(){ni.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,r,l,d,p,g,y,b,M,T,E,I,F,N,L){const W=this.elements;return W[0]=e,W[4]=t,W[8]=r,W[12]=l,W[1]=d,W[5]=p,W[9]=g,W[13]=y,W[2]=b,W[6]=M,W[10]=T,W[14]=E,W[3]=I,W[7]=F,W[11]=N,W[15]=L,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new ni).fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,l=1/so.setFromMatrixColumn(e,0).length(),d=1/so.setFromMatrixColumn(e,1).length(),p=1/so.setFromMatrixColumn(e,2).length();return t[0]=r[0]*l,t[1]=r[1]*l,t[2]=r[2]*l,t[3]=0,t[4]=r[4]*d,t[5]=r[5]*d,t[6]=r[6]*d,t[7]=0,t[8]=r[8]*p,t[9]=r[9]*p,t[10]=r[10]*p,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,l=e.y,d=e.z,p=Math.cos(r),g=Math.sin(r),y=Math.cos(l),b=Math.sin(l),M=Math.cos(d),T=Math.sin(d);if("XYZ"===e.order){const E=p*M,I=p*T,F=g*M,N=g*T;t[0]=y*M,t[4]=-y*T,t[8]=b,t[1]=I+F*b,t[5]=E-N*b,t[9]=-g*y,t[2]=N-E*b,t[6]=F+I*b,t[10]=p*y}else if("YXZ"===e.order){const E=y*M,I=y*T,F=b*M,N=b*T;t[0]=E+N*g,t[4]=F*g-I,t[8]=p*b,t[1]=p*T,t[5]=p*M,t[9]=-g,t[2]=I*g-F,t[6]=N+E*g,t[10]=p*y}else if("ZXY"===e.order){const E=y*M,I=y*T,F=b*M,N=b*T;t[0]=E-N*g,t[4]=-p*T,t[8]=F+I*g,t[1]=I+F*g,t[5]=p*M,t[9]=N-E*g,t[2]=-p*b,t[6]=g,t[10]=p*y}else if("ZYX"===e.order){const E=p*M,I=p*T,F=g*M,N=g*T;t[0]=y*M,t[4]=F*b-I,t[8]=E*b+N,t[1]=y*T,t[5]=N*b+E,t[9]=I*b-F,t[2]=-b,t[6]=g*y,t[10]=p*y}else if("YZX"===e.order){const E=p*y,I=p*b,F=g*y,N=g*b;t[0]=y*M,t[4]=N-E*T,t[8]=F*T+I,t[1]=T,t[5]=p*M,t[9]=-g*M,t[2]=-b*M,t[6]=I*T+F,t[10]=E-N*T}else if("XZY"===e.order){const E=p*y,I=p*b,F=g*y,N=g*b;t[0]=y*M,t[4]=-T,t[8]=b*M,t[1]=E*T+N,t[5]=p*M,t[9]=I*T-F,t[2]=F*T-I,t[6]=g*M,t[10]=N*T+E}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Ja,e,ir)}lookAt(e,t,r){const l=this.elements;return is.subVectors(e,t),0===is.lengthSq()&&(is.z=1),is.normalize(),Os.crossVectors(r,is),0===Os.lengthSq()&&(1===Math.abs(r.z)?is.x+=1e-4:is.z+=1e-4,is.normalize(),Os.crossVectors(r,is)),Os.normalize(),oo.crossVectors(is,Os),l[0]=Os.x,l[4]=oo.x,l[8]=is.x,l[1]=Os.y,l[5]=oo.y,l[9]=is.y,l[2]=Os.z,l[6]=oo.z,l[10]=is.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,l=t.elements,d=this.elements,p=r[0],g=r[4],y=r[8],b=r[12],M=r[1],T=r[5],E=r[9],I=r[13],F=r[2],N=r[6],L=r[10],W=r[14],z=r[3],G=r[7],j=r[11],ee=r[15],ie=l[0],fe=l[4],X=l[8],re=l[12],ve=l[1],We=l[5],pt=l[9],Fe=l[13],De=l[2],Ze=l[6],_t=l[10],Nt=l[14],ft=l[3],wt=l[7],At=l[11],It=l[15];return d[0]=p*ie+g*ve+y*De+b*ft,d[4]=p*fe+g*We+y*Ze+b*wt,d[8]=p*X+g*pt+y*_t+b*At,d[12]=p*re+g*Fe+y*Nt+b*It,d[1]=M*ie+T*ve+E*De+I*ft,d[5]=M*fe+T*We+E*Ze+I*wt,d[9]=M*X+T*pt+E*_t+I*At,d[13]=M*re+T*Fe+E*Nt+I*It,d[2]=F*ie+N*ve+L*De+W*ft,d[6]=F*fe+N*We+L*Ze+W*wt,d[10]=F*X+N*pt+L*_t+W*At,d[14]=F*re+N*Fe+L*Nt+W*It,d[3]=z*ie+G*ve+j*De+ee*ft,d[7]=z*fe+G*We+j*Ze+ee*wt,d[11]=z*X+G*pt+j*_t+ee*At,d[15]=z*re+G*Fe+j*Nt+ee*It,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],l=e[8],d=e[12],p=e[1],g=e[5],y=e[9],b=e[13],M=e[2],T=e[6],E=e[10],I=e[14];return e[3]*(+d*y*T-l*b*T-d*g*E+r*b*E+l*g*I-r*y*I)+e[7]*(+t*y*I-t*b*E+d*p*E-l*p*I+l*b*M-d*y*M)+e[11]*(+t*b*T-t*g*I-d*p*T+r*p*I+d*g*M-r*b*M)+e[15]*(-l*g*M-t*y*T+t*g*E+l*p*T-r*p*E+r*y*M)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const l=this.elements;return e.isVector3?(l[12]=e.x,l[13]=e.y,l[14]=e.z):(l[12]=e,l[13]=t,l[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],l=e[2],d=e[3],p=e[4],g=e[5],y=e[6],b=e[7],M=e[8],T=e[9],E=e[10],I=e[11],F=e[12],N=e[13],L=e[14],W=e[15],z=T*L*b-N*E*b+N*y*I-g*L*I-T*y*W+g*E*W,G=F*E*b-M*L*b-F*y*I+p*L*I+M*y*W-p*E*W,j=M*N*b-F*T*b+F*g*I-p*N*I-M*g*W+p*T*W,ee=F*T*y-M*N*y-F*g*E+p*N*E+M*g*L-p*T*L,ie=t*z+r*G+l*j+d*ee;if(0===ie)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const fe=1/ie;return e[0]=z*fe,e[1]=(N*E*d-T*L*d-N*l*I+r*L*I+T*l*W-r*E*W)*fe,e[2]=(g*L*d-N*y*d+N*l*b-r*L*b-g*l*W+r*y*W)*fe,e[3]=(T*y*d-g*E*d-T*l*b+r*E*b+g*l*I-r*y*I)*fe,e[4]=G*fe,e[5]=(M*L*d-F*E*d+F*l*I-t*L*I-M*l*W+t*E*W)*fe,e[6]=(F*y*d-p*L*d-F*l*b+t*L*b+p*l*W-t*y*W)*fe,e[7]=(p*E*d-M*y*d+M*l*b-t*E*b-p*l*I+t*y*I)*fe,e[8]=j*fe,e[9]=(F*T*d-M*N*d-F*r*I+t*N*I+M*r*W-t*T*W)*fe,e[10]=(p*N*d-F*g*d+F*r*b-t*N*b-p*r*W+t*g*W)*fe,e[11]=(M*g*d-p*T*d-M*r*b+t*T*b+p*r*I-t*g*I)*fe,e[12]=ee*fe,e[13]=(M*N*l-F*T*l+F*r*E-t*N*E-M*r*L+t*T*L)*fe,e[14]=(F*g*l-p*N*l-F*r*y+t*N*y+p*r*L-t*g*L)*fe,e[15]=(p*T*l-M*g*l+M*r*y-t*T*y-p*r*E+t*g*E)*fe,this}scale(e){const t=this.elements,r=e.x,l=e.y,d=e.z;return t[0]*=r,t[4]*=l,t[8]*=d,t[1]*=r,t[5]*=l,t[9]*=d,t[2]*=r,t[6]*=l,t[10]*=d,t[3]*=r,t[7]*=l,t[11]*=d,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),l=Math.sin(t),d=1-r,p=e.x,g=e.y,y=e.z,b=d*p,M=d*g;return this.set(b*p+r,b*g-l*y,b*y+l*g,0,b*g+l*y,M*g+r,M*y-l*p,0,b*y-l*g,M*y+l*p,d*y*y+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,l,d,p){return this.set(1,r,d,0,e,1,p,0,t,l,1,0,0,0,0,1),this}compose(e,t,r){const l=this.elements,d=t._x,p=t._y,g=t._z,y=t._w,b=d+d,M=p+p,T=g+g,E=d*b,I=d*M,F=d*T,N=p*M,L=p*T,W=g*T,z=y*b,G=y*M,j=y*T,ee=r.x,ie=r.y,fe=r.z;return l[0]=(1-(N+W))*ee,l[1]=(I+j)*ee,l[2]=(F-G)*ee,l[3]=0,l[4]=(I-j)*ie,l[5]=(1-(E+W))*ie,l[6]=(L+z)*ie,l[7]=0,l[8]=(F+G)*fe,l[9]=(L-z)*fe,l[10]=(1-(E+N))*fe,l[11]=0,l[12]=e.x,l[13]=e.y,l[14]=e.z,l[15]=1,this}decompose(e,t,r){const l=this.elements;let d=so.set(l[0],l[1],l[2]).length();const p=so.set(l[4],l[5],l[6]).length(),g=so.set(l[8],l[9],l[10]).length();this.determinant()<0&&(d=-d),e.x=l[12],e.y=l[13],e.z=l[14],Rs.copy(this);const b=1/d,M=1/p,T=1/g;return Rs.elements[0]*=b,Rs.elements[1]*=b,Rs.elements[2]*=b,Rs.elements[4]*=M,Rs.elements[5]*=M,Rs.elements[6]*=M,Rs.elements[8]*=T,Rs.elements[9]*=T,Rs.elements[10]*=T,t.setFromRotationMatrix(Rs),r.x=d,r.y=p,r.z=g,this}makePerspective(e,t,r,l,d,p){const g=this.elements,b=2*d/(r-l),M=(t+e)/(t-e),T=(r+l)/(r-l),E=-(p+d)/(p-d),I=-2*p*d/(p-d);return g[0]=2*d/(t-e),g[4]=0,g[8]=M,g[12]=0,g[1]=0,g[5]=b,g[9]=T,g[13]=0,g[2]=0,g[6]=0,g[10]=E,g[14]=I,g[3]=0,g[7]=0,g[11]=-1,g[15]=0,this}makeOrthographic(e,t,r,l,d,p){const g=this.elements,y=1/(t-e),b=1/(r-l),M=1/(p-d),T=(t+e)*y,E=(r+l)*b,I=(p+d)*M;return g[0]=2*y,g[4]=0,g[8]=0,g[12]=-T,g[1]=0,g[5]=2*b,g[9]=0,g[13]=-E,g[2]=0,g[6]=0,g[10]=-2*M,g[14]=-I,g[3]=0,g[7]=0,g[11]=0,g[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let l=0;l<16;l++)if(t[l]!==r[l])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const so=new ae,Rs=new ni,Ja=new ae(0,0,0),ir=new ae(1,1,1),Os=new ae,oo=new ae,is=new ae,Dc=new ni,Qo=new Ns;let Zd=(()=>{class m{constructor(t=0,r=0,l=0,d=m.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=r,this._z=l,this._order=d}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,r,l,d=this._order){return this._x=t,this._y=r,this._z=l,this._order=d,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,r=this._order,l=!0){const d=t.elements,p=d[0],g=d[4],y=d[8],b=d[1],M=d[5],T=d[9],E=d[2],I=d[6],F=d[10];switch(r){case"XYZ":this._y=Math.asin(Un(y,-1,1)),Math.abs(y)<.9999999?(this._x=Math.atan2(-T,F),this._z=Math.atan2(-g,p)):(this._x=Math.atan2(I,M),this._z=0);break;case"YXZ":this._x=Math.asin(-Un(T,-1,1)),Math.abs(T)<.9999999?(this._y=Math.atan2(y,F),this._z=Math.atan2(b,M)):(this._y=Math.atan2(-E,p),this._z=0);break;case"ZXY":this._x=Math.asin(Un(I,-1,1)),Math.abs(I)<.9999999?(this._y=Math.atan2(-E,F),this._z=Math.atan2(-g,M)):(this._y=0,this._z=Math.atan2(b,p));break;case"ZYX":this._y=Math.asin(-Un(E,-1,1)),Math.abs(E)<.9999999?(this._x=Math.atan2(I,F),this._z=Math.atan2(b,p)):(this._x=0,this._z=Math.atan2(-g,M));break;case"YZX":this._z=Math.asin(Un(b,-1,1)),Math.abs(b)<.9999999?(this._x=Math.atan2(-T,M),this._y=Math.atan2(-E,p)):(this._x=0,this._y=Math.atan2(y,F));break;case"XZY":this._z=Math.asin(-Un(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(I,M),this._y=Math.atan2(y,p)):(this._x=Math.atan2(-T,F),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+r)}return this._order=r,!0===l&&this._onChangeCallback(),this}setFromQuaternion(t,r,l){return Dc.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Dc,r,l)}setFromVector3(t,r=this._order){return this.set(t.x,t.y,t.z,r)}reorder(t){return Qo.setFromEuler(this),this.setFromQuaternion(Qo,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],r=0){return t[r]=this._x,t[r+1]=this._y,t[r+2]=this._z,t[r+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return m.DEFAULT_ORDER="XYZ",m})();class Ka{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let Yc=0;const Qa=new ae,lr=new Ns,Io=new ni,Pl=new ae,Ci=new ae,Mc=new ae,id=new Ns,qc=new ae(1,0,0),Ll=new ae(0,1,0),rd=new ae(0,0,1),Jd={type:"added"},Ea={type:"removed"};let cr=(()=>{class m extends ge{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Yc++}),this.uuid=ai(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=m.DEFAULT_UP.clone();const t=new ae,r=new Zd,l=new Ns,d=new ae(1,1,1);r._onChange(function p(){l.setFromEuler(r,!1)}),l._onChange(function g(){r.setFromQuaternion(l,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:r},quaternion:{configurable:!0,enumerable:!0,value:l},scale:{configurable:!0,enumerable:!0,value:d},modelViewMatrix:{value:new ni},normalMatrix:{value:new Ki}}),this.matrix=new ni,this.matrixWorld=new ni,this.matrixAutoUpdate=m.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=m.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Ka,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,r){this.quaternion.setFromAxisAngle(t,r)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,r){return lr.setFromAxisAngle(t,r),this.quaternion.multiply(lr),this}rotateOnWorldAxis(t,r){return lr.setFromAxisAngle(t,r),this.quaternion.premultiply(lr),this}rotateX(t){return this.rotateOnAxis(qc,t)}rotateY(t){return this.rotateOnAxis(Ll,t)}rotateZ(t){return this.rotateOnAxis(rd,t)}translateOnAxis(t,r){return Qa.copy(t).applyQuaternion(this.quaternion),this.position.add(Qa.multiplyScalar(r)),this}translateX(t){return this.translateOnAxis(qc,t)}translateY(t){return this.translateOnAxis(Ll,t)}translateZ(t){return this.translateOnAxis(rd,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Io.copy(this.matrixWorld).invert())}lookAt(t,r,l){t.isVector3?Pl.copy(t):Pl.set(t,r,l);const d=this.parent;this.updateWorldMatrix(!0,!1),Ci.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Io.lookAt(Ci,Pl,this.up):Io.lookAt(Pl,Ci,this.up),this.quaternion.setFromRotationMatrix(Io),d&&(Io.extractRotation(d.matrixWorld),lr.setFromRotationMatrix(Io),this.quaternion.premultiply(lr.invert()))}add(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.add(arguments[r]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Jd)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let l=0;l<arguments.length;l++)this.remove(arguments[l]);return this}const r=this.children.indexOf(t);return-1!==r&&(t.parent=null,this.children.splice(r,1),t.dispatchEvent(Ea)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const r=this.children[t];r.parent=null,r.dispatchEvent(Ea)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Io.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Io.multiply(t.parent.matrixWorld)),t.applyMatrix4(Io),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,r){if(this[t]===r)return this;for(let l=0,d=this.children.length;l<d;l++){const g=this.children[l].getObjectByProperty(t,r);if(void 0!==g)return g}}getObjectsByProperty(t,r){let l=[];this[t]===r&&l.push(this);for(let d=0,p=this.children.length;d<p;d++){const g=this.children[d].getObjectsByProperty(t,r);g.length>0&&(l=l.concat(g))}return l}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ci,t,Mc),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ci,id,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const r=this.matrixWorld.elements;return t.set(r[8],r[9],r[10]).normalize()}raycast(){}traverse(t){t(this);const r=this.children;for(let l=0,d=r.length;l<d;l++)r[l].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const r=this.children;for(let l=0,d=r.length;l<d;l++)r[l].traverseVisible(t)}traverseAncestors(t){const r=this.parent;null!==r&&(t(r),r.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const r=this.children;for(let l=0,d=r.length;l<d;l++){const p=r[l];(!0===p.matrixWorldAutoUpdate||!0===t)&&p.updateMatrixWorld(t)}}updateWorldMatrix(t,r){const l=this.parent;if(!0===t&&null!==l&&!0===l.matrixWorldAutoUpdate&&l.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===r){const d=this.children;for(let p=0,g=d.length;p<g;p++){const y=d[p];!0===y.matrixWorldAutoUpdate&&y.updateWorldMatrix(!1,!0)}}}toJSON(t){const r=void 0===t||"string"==typeof t,l={};r&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},l.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const d={};function p(y,b){return void 0===y[b.uuid]&&(y[b.uuid]=b.toJSON(t)),b.uuid}if(d.uuid=this.uuid,d.type=this.type,""!==this.name&&(d.name=this.name),!0===this.castShadow&&(d.castShadow=!0),!0===this.receiveShadow&&(d.receiveShadow=!0),!1===this.visible&&(d.visible=!1),!1===this.frustumCulled&&(d.frustumCulled=!1),0!==this.renderOrder&&(d.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(d.userData=this.userData),d.layers=this.layers.mask,d.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(d.matrixAutoUpdate=!1),this.isInstancedMesh&&(d.type="InstancedMesh",d.count=this.count,d.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(d.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?d.background=this.background.toJSON():this.background.isTexture&&(d.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(d.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){d.geometry=p(t.geometries,this.geometry);const y=this.geometry.parameters;if(void 0!==y&&void 0!==y.shapes){const b=y.shapes;if(Array.isArray(b))for(let M=0,T=b.length;M<T;M++)p(t.shapes,b[M]);else p(t.shapes,b)}}if(this.isSkinnedMesh&&(d.bindMode=this.bindMode,d.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(p(t.skeletons,this.skeleton),d.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const y=[];for(let b=0,M=this.material.length;b<M;b++)y.push(p(t.materials,this.material[b]));d.material=y}else d.material=p(t.materials,this.material);if(this.children.length>0){d.children=[];for(let y=0;y<this.children.length;y++)d.children.push(this.children[y].toJSON(t).object)}if(this.animations.length>0){d.animations=[];for(let y=0;y<this.animations.length;y++)d.animations.push(p(t.animations,this.animations[y]))}if(r){const y=g(t.geometries),b=g(t.materials),M=g(t.textures),T=g(t.images),E=g(t.shapes),I=g(t.skeletons),F=g(t.animations),N=g(t.nodes);y.length>0&&(l.geometries=y),b.length>0&&(l.materials=b),M.length>0&&(l.textures=M),T.length>0&&(l.images=T),E.length>0&&(l.shapes=E),I.length>0&&(l.skeletons=I),F.length>0&&(l.animations=F),N.length>0&&(l.nodes=N)}return l.object=d,l;function g(y){const b=[];for(const M in y){const T=y[M];delete T.metadata,b.push(T)}return b}}clone(t){return(new this.constructor).copy(this,t)}copy(t,r=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===r)for(let l=0;l<t.children.length;l++)this.add(t.children[l].clone());return this}}return m.DEFAULT_UP=new ae(0,1,0),m.DEFAULT_MATRIX_AUTO_UPDATE=!0,m.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,m})();const rs=new ae,Or=new ae,Xc=new ae,_r=new ae,Fl=new ae,kl=new ae,Ei=new ae,Kd=new ae,Qd=new ae,Zc=new ae;class bo{constructor(e=new ae,t=new ae,r=new ae){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,l){l.subVectors(r,t),rs.subVectors(e,t),l.cross(rs);const d=l.lengthSq();return d>0?l.multiplyScalar(1/Math.sqrt(d)):l.set(0,0,0)}static getBarycoord(e,t,r,l,d){rs.subVectors(l,t),Or.subVectors(r,t),Xc.subVectors(e,t);const p=rs.dot(rs),g=rs.dot(Or),y=rs.dot(Xc),b=Or.dot(Or),M=Or.dot(Xc),T=p*b-g*g;if(0===T)return d.set(-2,-1,-1);const E=1/T,I=(b*y-g*M)*E,F=(p*M-g*y)*E;return d.set(1-I-F,F,I)}static containsPoint(e,t,r,l){return this.getBarycoord(e,t,r,l,_r),_r.x>=0&&_r.y>=0&&_r.x+_r.y<=1}static getUV(e,t,r,l,d,p,g,y){return this.getBarycoord(e,t,r,l,_r),y.set(0,0),y.addScaledVector(d,_r.x),y.addScaledVector(p,_r.y),y.addScaledVector(g,_r.z),y}static isFrontFacing(e,t,r,l){return rs.subVectors(r,t),Or.subVectors(e,t),rs.cross(Or).dot(l)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,l){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[l]),this}setFromAttributeAndIndices(e,t,r,l){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,l),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return rs.subVectors(this.c,this.b),Or.subVectors(this.a,this.b),.5*rs.cross(Or).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return bo.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return bo.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,l,d){return bo.getUV(e,this.a,this.b,this.c,t,r,l,d)}containsPoint(e){return bo.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return bo.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,l=this.b,d=this.c;let p,g;Fl.subVectors(l,r),kl.subVectors(d,r),Kd.subVectors(e,r);const y=Fl.dot(Kd),b=kl.dot(Kd);if(y<=0&&b<=0)return t.copy(r);Qd.subVectors(e,l);const M=Fl.dot(Qd),T=kl.dot(Qd);if(M>=0&&T<=M)return t.copy(l);const E=y*T-M*b;if(E<=0&&y>=0&&M<=0)return p=y/(y-M),t.copy(r).addScaledVector(Fl,p);Zc.subVectors(e,d);const I=Fl.dot(Zc),F=kl.dot(Zc);if(F>=0&&I<=F)return t.copy(d);const N=I*b-y*F;if(N<=0&&b>=0&&F<=0)return g=b/(b-F),t.copy(r).addScaledVector(kl,g);const L=M*F-I*T;if(L<=0&&T-M>=0&&I-F>=0)return Ei.subVectors(d,l),g=(T-M)/(T-M+(I-F)),t.copy(l).addScaledVector(Ei,g);const W=1/(L+N+E);return p=N*W,g=E*W,t.copy(r).addScaledVector(Fl,p).addScaledVector(kl,g)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let Jc=0;class Kc extends ge{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Jc++}),this.uuid=ai(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const r=e[t];if(void 0===r){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const l=this[t];void 0!==l?l&&l.isColor?l.set(r):l&&l.isVector3&&r&&r.isVector3?l.copy(r):this[t]=r:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function l(d){const p=[];for(const g in d){const y=d[g];delete y.metadata,p.push(y)}return p}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),void 0!==this.sheen&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearcoat&&(r.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(r.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(r.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(r.combine=this.combine)),void 0!==this.envMapIntensity&&(r.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(r.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(r.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(r.size=this.size),null!==this.shadowSide&&(r.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(r.blending=this.blending),0!==this.side&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),!0===this.transparent&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(r.rotation=this.rotation),!0===this.polygonOffset&&(r.polygonOffset=!0),0!==this.polygonOffsetFactor&&(r.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(r.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(r.linewidth=this.linewidth),void 0!==this.dashSize&&(r.dashSize=this.dashSize),void 0!==this.gapSize&&(r.gapSize=this.gapSize),void 0!==this.scale&&(r.scale=this.scale),!0===this.dithering&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(r.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(r.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(r.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(r.flatShading=this.flatShading),!1===this.visible&&(r.visible=!1),!1===this.toneMapped&&(r.toneMapped=!1),!1===this.fog&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData),t){const d=l(e.textures),p=l(e.images);d.length>0&&(r.textures=d),p.length>0&&(r.images=p)}return r}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(null!==t){const l=t.length;r=new Array(l);for(let d=0;d!==l;++d)r[d]=t[d].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}const Cc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},bs={h:0,s:0,l:0},Qc={h:0,s:0,l:0};function eu(m,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?m+6*(e-m)*t:t<.5?e:t<2/3?m+6*(e-m)*(2/3-t):m}class St{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===t&&void 0===r?this.set(e):this.setRGB(e,t,r)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Kr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,vi.toWorkingColorSpace(this,t),this}setRGB(e,t,r,l=vi.workingColorSpace){return this.r=e,this.g=t,this.b=r,vi.toWorkingColorSpace(this,l),this}setHSL(e,t,r,l=vi.workingColorSpace){if(e=function si(m,e){return(m%e+e)%e}(e,1),t=Un(t,0,1),r=Un(r,0,1),0===t)this.r=this.g=this.b=r;else{const d=r<=.5?r*(1+t):r+t-r*t,p=2*r-d;this.r=eu(p,d,e+1/3),this.g=eu(p,d,e),this.b=eu(p,d,e-1/3)}return vi.toWorkingColorSpace(this,l),this}setStyle(e,t=Kr){function r(d){void 0!==d&&parseFloat(d)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let l;if(l=/^(\w+)\(([^\)]*)\)/.exec(e)){let d;const g=l[2];switch(l[1]){case"rgb":case"rgba":if(d=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(g))return this.r=Math.min(255,parseInt(d[1],10))/255,this.g=Math.min(255,parseInt(d[2],10))/255,this.b=Math.min(255,parseInt(d[3],10))/255,vi.toWorkingColorSpace(this,t),r(d[4]),this;if(d=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(g))return this.r=Math.min(100,parseInt(d[1],10))/100,this.g=Math.min(100,parseInt(d[2],10))/100,this.b=Math.min(100,parseInt(d[3],10))/100,vi.toWorkingColorSpace(this,t),r(d[4]),this;break;case"hsl":case"hsla":if(d=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(g)){const y=parseFloat(d[1])/360,b=parseFloat(d[2])/100,M=parseFloat(d[3])/100;return r(d[4]),this.setHSL(y,b,M,t)}break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(l=/^\#([A-Fa-f\d]+)$/.exec(e)){const d=l[1],p=d.length;if(3===p)return this.r=parseInt(d.charAt(0)+d.charAt(0),16)/255,this.g=parseInt(d.charAt(1)+d.charAt(1),16)/255,this.b=parseInt(d.charAt(2)+d.charAt(2),16)/255,vi.toWorkingColorSpace(this,t),this;if(6===p)return this.r=parseInt(d.charAt(0)+d.charAt(1),16)/255,this.g=parseInt(d.charAt(2)+d.charAt(3),16)/255,this.b=parseInt(d.charAt(4)+d.charAt(5),16)/255,vi.toWorkingColorSpace(this,t),this;console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Kr){const r=Cc[e.toLowerCase()];return void 0!==r?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Xo(e.r),this.g=Xo(e.g),this.b=Xo(e.b),this}copyLinearToSRGB(e){return this.r=ba(e.r),this.g=ba(e.g),this.b=ba(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Kr){return vi.fromWorkingColorSpace(Er.copy(this),e),Un(255*Er.r,0,255)<<16^Un(255*Er.g,0,255)<<8^Un(255*Er.b,0,255)<<0}getHexString(e=Kr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=vi.workingColorSpace){vi.fromWorkingColorSpace(Er.copy(this),t);const r=Er.r,l=Er.g,d=Er.b,p=Math.max(r,l,d),g=Math.min(r,l,d);let y,b;const M=(g+p)/2;if(g===p)y=0,b=0;else{const T=p-g;switch(b=M<=.5?T/(p+g):T/(2-p-g),p){case r:y=(l-d)/T+(l<d?6:0);break;case l:y=(d-r)/T+2;break;case d:y=(r-l)/T+4}y/=6}return e.h=y,e.s=b,e.l=M,e}getRGB(e,t=vi.workingColorSpace){return vi.fromWorkingColorSpace(Er.copy(this),t),e.r=Er.r,e.g=Er.g,e.b=Er.b,e}getStyle(e=Kr){vi.fromWorkingColorSpace(Er.copy(this),e);const t=Er.r,r=Er.g,l=Er.b;return e!==Kr?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${l.toFixed(3)})`:`rgb(${255*t|0},${255*r|0},${255*l|0})`}offsetHSL(e,t,r){return this.getHSL(bs),bs.h+=e,bs.s+=t,bs.l+=r,this.setHSL(bs.h,bs.s,bs.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(bs),e.getHSL(Qc);const r=nr(bs.h,Qc.h,t),l=nr(bs.s,Qc.s,t),d=nr(bs.l,Qc.l,t);return this.setHSL(r,l,d),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Er=new St;St.NAMES=Cc;class ao extends Kc{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new St(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ur=new ae,tu=new gt;class pi{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=r,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let l=0,d=this.itemSize;l<d;l++)this.array[e+l]=t.array[r+l];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,r=this.count;t<r;t++)tu.fromBufferAttribute(this,t),tu.applyMatrix3(e),this.setXY(t,tu.x,tu.y);else if(3===this.itemSize)for(let t=0,r=this.count;t<r;t++)ur.fromBufferAttribute(this,t),ur.applyMatrix3(e),this.setXYZ(t,ur.x,ur.y,ur.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)ur.fromBufferAttribute(this,t),ur.applyMatrix4(e),this.setXYZ(t,ur.x,ur.y,ur.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)ur.fromBufferAttribute(this,t),ur.applyNormalMatrix(e),this.setXYZ(t,ur.x,ur.y,ur.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)ur.fromBufferAttribute(this,t),ur.transformDirection(e),this.setXYZ(t,ur.x,ur.y,ur.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Pi(t,this.array)),t}setX(e,t){return this.normalized&&(t=On(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Pi(t,this.array)),t}setY(e,t){return this.normalized&&(t=On(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Pi(t,this.array)),t}setZ(e,t){return this.normalized&&(t=On(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Pi(t,this.array)),t}setW(e,t){return this.normalized&&(t=On(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=On(t,this.array),r=On(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,l){return e*=this.itemSize,this.normalized&&(t=On(t,this.array),r=On(r,this.array),l=On(l,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=l,this}setXYZW(e,t,r,l,d){return e*=this.itemSize,this.normalized&&(t=On(t,this.array),r=On(r,this.array),l=On(l,this.array),d=On(d,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=l,this.array[e+3]=d,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class D extends pi{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class k extends pi{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class Q extends pi{constructor(e,t,r){super(new Float32Array(e),t,r)}}let Pe=0;const ht=new ni,Pn=new cr,Zt=new ae,Xn=new Nl,Pr=new Nl,Ii=new ae;class Zn extends ge{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Pe++}),this.uuid=ai(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(Qu(e)?k:D)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(void 0!==r){const d=(new Ki).getNormalMatrix(e);r.applyNormalMatrix(d),r.needsUpdate=!0}const l=this.attributes.tangent;return void 0!==l&&(l.transformDirection(e),l.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return ht.makeRotationFromQuaternion(e),this.applyMatrix4(ht),this}rotateX(e){return ht.makeRotationX(e),this.applyMatrix4(ht),this}rotateY(e){return ht.makeRotationY(e),this.applyMatrix4(ht),this}rotateZ(e){return ht.makeRotationZ(e),this.applyMatrix4(ht),this}translate(e,t,r){return ht.makeTranslation(e,t,r),this.applyMatrix4(ht),this}scale(e,t,r){return ht.makeScale(e,t,r),this.applyMatrix4(ht),this}lookAt(e){return Pn.lookAt(e),Pn.updateMatrix(),this.applyMatrix4(Pn.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Zt).negate(),this.translate(Zt.x,Zt.y,Zt.z),this}setFromPoints(e){const t=[];for(let r=0,l=e.length;r<l;r++){const d=e[r];t.push(d.x,d.y,d.z||0)}return this.setAttribute("position",new Q(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Nl);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new ae(-1/0,-1/0,-1/0),new ae(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,l=t.length;r<l;r++)Xn.setFromBufferAttribute(t[r]),this.morphTargetsRelative?(Ii.addVectors(this.boundingBox.min,Xn.min),this.boundingBox.expandByPoint(Ii),Ii.addVectors(this.boundingBox.max,Xn.max),this.boundingBox.expandByPoint(Ii)):(this.boundingBox.expandByPoint(Xn.min),this.boundingBox.expandByPoint(Xn.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Ko);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new ae,1/0);if(e){const r=this.boundingSphere.center;if(Xn.setFromBufferAttribute(e),t)for(let d=0,p=t.length;d<p;d++)Pr.setFromBufferAttribute(t[d]),this.morphTargetsRelative?(Ii.addVectors(Xn.min,Pr.min),Xn.expandByPoint(Ii),Ii.addVectors(Xn.max,Pr.max),Xn.expandByPoint(Ii)):(Xn.expandByPoint(Pr.min),Xn.expandByPoint(Pr.max));Xn.getCenter(r);let l=0;for(let d=0,p=e.count;d<p;d++)Ii.fromBufferAttribute(e,d),l=Math.max(l,r.distanceToSquared(Ii));if(t)for(let d=0,p=t.length;d<p;d++){const g=t[d],y=this.morphTargetsRelative;for(let b=0,M=g.count;b<M;b++)Ii.fromBufferAttribute(g,b),y&&(Zt.fromBufferAttribute(e,b),Ii.add(Zt)),l=Math.max(l,r.distanceToSquared(Ii))}this.boundingSphere.radius=Math.sqrt(l),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const r=e.array,l=t.position.array,d=t.normal.array,p=t.uv.array,g=l.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new pi(new Float32Array(4*g),4));const y=this.getAttribute("tangent").array,b=[],M=[];for(let ve=0;ve<g;ve++)b[ve]=new ae,M[ve]=new ae;const T=new ae,E=new ae,I=new ae,F=new gt,N=new gt,L=new gt,W=new ae,z=new ae;function G(ve,We,pt){T.fromArray(l,3*ve),E.fromArray(l,3*We),I.fromArray(l,3*pt),F.fromArray(p,2*ve),N.fromArray(p,2*We),L.fromArray(p,2*pt),E.sub(T),I.sub(T),N.sub(F),L.sub(F);const Fe=1/(N.x*L.y-L.x*N.y);!isFinite(Fe)||(W.copy(E).multiplyScalar(L.y).addScaledVector(I,-N.y).multiplyScalar(Fe),z.copy(I).multiplyScalar(N.x).addScaledVector(E,-L.x).multiplyScalar(Fe),b[ve].add(W),b[We].add(W),b[pt].add(W),M[ve].add(z),M[We].add(z),M[pt].add(z))}let j=this.groups;0===j.length&&(j=[{start:0,count:r.length}]);for(let ve=0,We=j.length;ve<We;++ve){const pt=j[ve],Fe=pt.start;for(let Ze=Fe,_t=Fe+pt.count;Ze<_t;Ze+=3)G(r[Ze+0],r[Ze+1],r[Ze+2])}const ee=new ae,ie=new ae,fe=new ae,X=new ae;function re(ve){fe.fromArray(d,3*ve),X.copy(fe);const We=b[ve];ee.copy(We),ee.sub(fe.multiplyScalar(fe.dot(We))).normalize(),ie.crossVectors(X,We);const Fe=ie.dot(M[ve])<0?-1:1;y[4*ve]=ee.x,y[4*ve+1]=ee.y,y[4*ve+2]=ee.z,y[4*ve+3]=Fe}for(let ve=0,We=j.length;ve<We;++ve){const pt=j[ve],Fe=pt.start;for(let Ze=Fe,_t=Fe+pt.count;Ze<_t;Ze+=3)re(r[Ze+0]),re(r[Ze+1]),re(r[Ze+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let r=this.getAttribute("normal");if(void 0===r)r=new pi(new Float32Array(3*t.count),3),this.setAttribute("normal",r);else for(let E=0,I=r.count;E<I;E++)r.setXYZ(E,0,0,0);const l=new ae,d=new ae,p=new ae,g=new ae,y=new ae,b=new ae,M=new ae,T=new ae;if(e)for(let E=0,I=e.count;E<I;E+=3){const F=e.getX(E+0),N=e.getX(E+1),L=e.getX(E+2);l.fromBufferAttribute(t,F),d.fromBufferAttribute(t,N),p.fromBufferAttribute(t,L),M.subVectors(p,d),T.subVectors(l,d),M.cross(T),g.fromBufferAttribute(r,F),y.fromBufferAttribute(r,N),b.fromBufferAttribute(r,L),g.add(M),y.add(M),b.add(M),r.setXYZ(F,g.x,g.y,g.z),r.setXYZ(N,y.x,y.y,y.z),r.setXYZ(L,b.x,b.y,b.z)}else for(let E=0,I=t.count;E<I;E+=3)l.fromBufferAttribute(t,E+0),d.fromBufferAttribute(t,E+1),p.fromBufferAttribute(t,E+2),M.subVectors(p,d),T.subVectors(l,d),M.cross(T),r.setXYZ(E+0,M.x,M.y,M.z),r.setXYZ(E+1,M.x,M.y,M.z),r.setXYZ(E+2,M.x,M.y,M.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)Ii.fromBufferAttribute(e,t),Ii.normalize(),e.setXYZ(t,Ii.x,Ii.y,Ii.z)}toNonIndexed(){function e(g,y){const b=g.array,M=g.itemSize,T=g.normalized,E=new b.constructor(y.length*M);let I=0,F=0;for(let N=0,L=y.length;N<L;N++){I=g.isInterleavedBufferAttribute?y[N]*g.data.stride+g.offset:y[N]*M;for(let W=0;W<M;W++)E[F++]=b[I++]}return new pi(E,M,T)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Zn,r=this.index.array,l=this.attributes;for(const g in l){const b=e(l[g],r);t.setAttribute(g,b)}const d=this.morphAttributes;for(const g in d){const y=[],b=d[g];for(let M=0,T=b.length;M<T;M++){const I=e(b[M],r);y.push(I)}t.morphAttributes[g]=y}t.morphTargetsRelative=this.morphTargetsRelative;const p=this.groups;for(let g=0,y=p.length;g<y;g++){const b=p[g];t.addGroup(b.start,b.count,b.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const y=this.parameters;for(const b in y)void 0!==y[b]&&(e[b]=y[b]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const y in r)e.data.attributes[y]=r[y].toJSON(e.data);const l={};let d=!1;for(const y in this.morphAttributes){const b=this.morphAttributes[y],M=[];for(let T=0,E=b.length;T<E;T++)M.push(b[T].toJSON(e.data));M.length>0&&(l[y]=M,d=!0)}d&&(e.data.morphAttributes=l,e.data.morphTargetsRelative=this.morphTargetsRelative);const p=this.groups;p.length>0&&(e.data.groups=JSON.parse(JSON.stringify(p)));const g=this.boundingSphere;return null!==g&&(e.data.boundingSphere={center:g.center.toArray(),radius:g.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;null!==r&&this.setIndex(r.clone(t));const l=e.attributes;for(const b in l)this.setAttribute(b,l[b].clone(t));const d=e.morphAttributes;for(const b in d){const M=[],T=d[b];for(let E=0,I=T.length;E<I;E++)M.push(T[E].clone(t));this.morphAttributes[b]=M}this.morphTargetsRelative=e.morphTargetsRelative;const p=e.groups;for(let b=0,M=p.length;b<M;b++){const T=p[b];this.addGroup(T.start,T.count,T.materialIndex)}const g=e.boundingBox;null!==g&&(this.boundingBox=g.clone());const y=e.boundingSphere;return null!==y&&(this.boundingSphere=y.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const lo=new ni,Ls=new Is,Wr=new Ko,nu=new ae,el=new ae,Fs=new ae,jr=new ae,Xs=new ae,$r=new ae,iu=new gt,Bl=new gt,tl=new gt,Vl=new ae,Ul=new ae;class Tr extends cr{constructor(e=new Zn,t=new ao){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const l=t[r[0]];if(void 0!==l){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let d=0,p=l.length;d<p;d++){const g=l[d].name||String(d);this.morphTargetInfluences.push(0),this.morphTargetDictionary[g]=d}}}}getVertexPosition(e,t){const r=this.geometry,d=r.morphAttributes.position,p=r.morphTargetsRelative;t.fromBufferAttribute(r.attributes.position,e);const g=this.morphTargetInfluences;if(d&&g){$r.set(0,0,0);for(let y=0,b=d.length;y<b;y++){const M=g[y],T=d[y];0!==M&&(Xs.fromBufferAttribute(T,e),$r.addScaledVector(p?Xs:Xs.sub(t),M))}t.add($r)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){const r=this.geometry,l=this.material,d=this.matrixWorld;if(void 0===l||(null===r.boundingSphere&&r.computeBoundingSphere(),Wr.copy(r.boundingSphere),Wr.applyMatrix4(d),Ls.copy(e.ray).recast(e.near),!1===Wr.containsPoint(Ls.origin)&&(null===Ls.intersectSphere(Wr,nu)||Ls.origin.distanceToSquared(nu)>(e.far-e.near)**2))||(lo.copy(d).invert(),Ls.copy(e.ray).applyMatrix4(lo),null!==r.boundingBox&&!1===Ls.intersectsBox(r.boundingBox)))return;let p;const g=r.index,y=r.attributes.position,b=r.attributes.uv,M=r.attributes.uv2,T=r.groups,E=r.drawRange;if(null!==g)if(Array.isArray(l))for(let I=0,F=T.length;I<F;I++){const N=T[I],L=l[N.materialIndex];for(let G=Math.max(N.start,E.start),j=Math.min(g.count,Math.min(N.start+N.count,E.start+E.count));G<j;G+=3){const ee=g.getX(G),ie=g.getX(G+1),fe=g.getX(G+2);p=vr(this,L,e,Ls,b,M,ee,ie,fe),p&&(p.faceIndex=Math.floor(G/3),p.face.materialIndex=N.materialIndex,t.push(p))}}else for(let N=Math.max(0,E.start),L=Math.min(g.count,E.start+E.count);N<L;N+=3){const W=g.getX(N),z=g.getX(N+1),G=g.getX(N+2);p=vr(this,l,e,Ls,b,M,W,z,G),p&&(p.faceIndex=Math.floor(N/3),t.push(p))}else if(void 0!==y)if(Array.isArray(l))for(let I=0,F=T.length;I<F;I++){const N=T[I],L=l[N.materialIndex];for(let G=Math.max(N.start,E.start),j=Math.min(y.count,Math.min(N.start+N.count,E.start+E.count));G<j;G+=3)p=vr(this,L,e,Ls,b,M,G,G+1,G+2),p&&(p.faceIndex=Math.floor(G/3),p.face.materialIndex=N.materialIndex,t.push(p))}else for(let N=Math.max(0,E.start),L=Math.min(y.count,E.start+E.count);N<L;N+=3)p=vr(this,l,e,Ls,b,M,N,N+1,N+2),p&&(p.faceIndex=Math.floor(N/3),t.push(p))}}function vr(m,e,t,r,l,d,p,g,y){m.getVertexPosition(p,el),m.getVertexPosition(g,Fs),m.getVertexPosition(y,jr);const b=function sd(m,e,t,r,l,d,p,g){let y;if(y=1===e.side?r.intersectTriangle(p,d,l,!0,g):r.intersectTriangle(l,d,p,0===e.side,g),null===y)return null;Ul.copy(g),Ul.applyMatrix4(m.matrixWorld);const b=t.ray.origin.distanceTo(Ul);return b<t.near||b>t.far?null:{distance:b,point:Ul.clone(),object:m}}(m,e,t,r,el,Fs,jr,Vl);if(b){l&&(iu.fromBufferAttribute(l,p),Bl.fromBufferAttribute(l,g),tl.fromBufferAttribute(l,y),b.uv=bo.getUV(Vl,el,Fs,jr,iu,Bl,tl,new gt)),d&&(iu.fromBufferAttribute(d,p),Bl.fromBufferAttribute(d,g),tl.fromBufferAttribute(d,y),b.uv2=bo.getUV(Vl,el,Fs,jr,iu,Bl,tl,new gt));const M={a:p,b:g,c:y,normal:new ae,materialIndex:0};bo.getNormal(el,Fs,jr,M.normal),b.face=M}return b}class Hl extends Zn{constructor(e=1,t=1,r=1,l=1,d=1,p=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:l,heightSegments:d,depthSegments:p};const g=this;l=Math.floor(l),d=Math.floor(d),p=Math.floor(p);const y=[],b=[],M=[],T=[];let E=0,I=0;function F(N,L,W,z,G,j,ee,ie,fe,X,re){const ve=j/fe,We=ee/X,pt=j/2,Fe=ee/2,De=ie/2,Ze=fe+1,_t=X+1;let Nt=0,ft=0;const wt=new ae;for(let At=0;At<_t;At++){const It=At*We-Fe;for(let Re=0;Re<Ze;Re++)wt[N]=(Re*ve-pt)*z,wt[L]=It*G,wt[W]=De,b.push(wt.x,wt.y,wt.z),wt[N]=0,wt[L]=0,wt[W]=ie>0?1:-1,M.push(wt.x,wt.y,wt.z),T.push(Re/fe),T.push(1-At/X),Nt+=1}for(let At=0;At<X;At++)for(let It=0;It<fe;It++){const ct=E+It+Ze*(At+1),Rt=E+(It+1)+Ze*(At+1),Oe=E+(It+1)+Ze*At;y.push(E+It+Ze*At,ct,Oe),y.push(ct,Rt,Oe),ft+=6}g.addGroup(I,ft,re),I+=ft,E+=Nt}F("z","y","x",-1,-1,r,t,e,p,d,0),F("z","y","x",1,-1,r,t,-e,p,d,1),F("x","z","y",1,1,e,r,t,l,p,2),F("x","z","y",1,-1,e,r,-t,l,p,3),F("x","y","z",1,-1,e,t,r,l,d,4),F("x","y","z",-1,-1,e,t,-r,l,d,5),this.setIndex(y),this.setAttribute("position",new Q(b,3)),this.setAttribute("normal",new Q(M,3)),this.setAttribute("uv",new Q(T,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Hl(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Gl(m){const e={};for(const t in m){e[t]={};for(const r in m[t]){const l=m[t][r];e[t][r]=l&&(l.isColor||l.isMatrix3||l.isMatrix4||l.isVector2||l.isVector3||l.isVector4||l.isTexture||l.isQuaternion)?l.clone():Array.isArray(l)?l.slice():l}}return e}function xs(m){const e={};for(let t=0;t<m.length;t++){const r=Gl(m[t]);for(const l in r)e[l]=r[l]}return e}function Lp(m){return null===m.getRenderTarget()&&m.outputEncoding===Ai?Kr:Es}const Nm={clone:Gl,merge:xs};class co extends Kc{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Gl(e.uniforms),this.uniformsGroups=function od(m){const e=[];for(let t=0;t<m.length;t++)e.push(m[t].clone());return e}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const l in this.uniforms){const p=this.uniforms[l].value;t.uniforms[l]=p&&p.isTexture?{type:"t",value:p.toJSON(e).uuid}:p&&p.isColor?{type:"c",value:p.getHex()}:p&&p.isVector2?{type:"v2",value:p.toArray()}:p&&p.isVector3?{type:"v3",value:p.toArray()}:p&&p.isVector4?{type:"v4",value:p.toArray()}:p&&p.isMatrix3?{type:"m3",value:p.toArray()}:p&&p.isMatrix4?{type:"m4",value:p.toArray()}:{value:p}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const r={};for(const l in this.extensions)!0===this.extensions[l]&&(r[l]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class ad extends cr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ni,this.projectionMatrix=new ni,this.projectionMatrixInverse=new ni}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class Ar extends ad{constructor(e=50,t=1,r=.1,l=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=l,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Mi*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*nn*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Mi*Math.atan(Math.tan(.5*nn*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,l,d,p){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=l,this.view.width=d,this.view.height=p,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*nn*this.fov)/this.zoom,r=2*t,l=this.aspect*r,d=-.5*l;const p=this.view;if(null!==this.view&&this.view.enabled){const y=p.fullWidth,b=p.fullHeight;d+=p.offsetX*l/y,t-=p.offsetY*r/b,l*=p.width/y,r*=p.height/b}const g=this.filmOffset;0!==g&&(d+=e*g/this.getFilmWidth()),this.projectionMatrix.makePerspective(d,d+l,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class ea extends cr{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r;const l=new Ar(-90,1,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(1,0,0),this.add(l);const d=new Ar(-90,1,e,t);d.layers=this.layers,d.up.set(0,1,0),d.lookAt(-1,0,0),this.add(d);const p=new Ar(-90,1,e,t);p.layers=this.layers,p.up.set(0,0,-1),p.lookAt(0,1,0),this.add(p);const g=new Ar(-90,1,e,t);g.layers=this.layers,g.up.set(0,0,1),g.lookAt(0,-1,0),this.add(g);const y=new Ar(-90,1,e,t);y.layers=this.layers,y.up.set(0,1,0),y.lookAt(0,0,1),this.add(y);const b=new Ar(-90,1,e,t);b.layers=this.layers,b.up.set(0,1,0),b.lookAt(0,0,-1),this.add(b)}update(e,t){null===this.parent&&this.updateMatrixWorld();const r=this.renderTarget,[l,d,p,g,y,b]=this.children,M=e.getRenderTarget(),T=e.toneMapping,E=e.xr.enabled;e.toneMapping=0,e.xr.enabled=!1;const I=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,l),e.setRenderTarget(r,1),e.render(t,d),e.setRenderTarget(r,2),e.render(t,p),e.setRenderTarget(r,3),e.render(t,g),e.setRenderTarget(r,4),e.render(t,y),r.texture.generateMipmaps=I,e.setRenderTarget(r,5),e.render(t,b),e.setRenderTarget(M),e.toneMapping=T,e.xr.enabled=E,r.texture.needsPMREMUpdate=!0}}class os extends xa{constructor(e,t,r,l,d,p,g,y,b,M){super(e=void 0!==e?e:[],t=void 0!==t?t:301,r,l,d,p,g,y,b,M),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class th extends Xa{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1};this.texture=new os([r,r,r,r,r,r],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:Rn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r_uniforms={tEquirect:{value:null}},r_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",r_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",l=new Hl(5,5,5),d=new co({name:"CubemapFromEquirect",uniforms:Gl(r_uniforms),vertexShader:r_vertexShader,fragmentShader:r_fragmentShader,side:1,blending:0});d.uniforms.tEquirect.value=t;const p=new Tr(l,d),g=t.minFilter;return t.minFilter===Zr&&(t.minFilter=Rn),new ea(1,10,this).update(e,p),t.minFilter=g,p.geometry.dispose(),p.material.dispose(),this}clear(e,t,r,l){const d=e.getRenderTarget();for(let p=0;p<6;p++)e.setRenderTarget(this,p),e.clear(t,r,l);e.setRenderTarget(d)}}const Ta=new ae,Sc=new ae,nl=new Ki;class ks{constructor(e=new ae(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,l){return this.normal.set(e,t,r),this.constant=l,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const l=Ta.subVectors(r,t).cross(Sc.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(l,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(Ta),l=this.normal.dot(r);if(0===l)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const d=-(e.start.dot(this.normal)+this.constant)/l;return d<0||d>1?null:t.copy(e.start).addScaledVector(r,d)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||nl.getNormalMatrix(e),l=this.coplanarPoint(Ta).applyMatrix4(e),d=this.normal.applyMatrix3(r).normalize();return this.constant=-l.dot(d),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const zl=new Ko,nh=new ae;class il{constructor(e=new ks,t=new ks,r=new ks,l=new ks,d=new ks,p=new ks){this.planes=[e,t,r,l,d,p]}set(e,t,r,l,d,p){const g=this.planes;return g[0].copy(e),g[1].copy(t),g[2].copy(r),g[3].copy(l),g[4].copy(d),g[5].copy(p),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const t=this.planes,r=e.elements,l=r[0],d=r[1],p=r[2],g=r[3],y=r[4],b=r[5],M=r[6],T=r[7],E=r[8],I=r[9],F=r[10],N=r[11],L=r[12],W=r[13],z=r[14],G=r[15];return t[0].setComponents(g-l,T-y,N-E,G-L).normalize(),t[1].setComponents(g+l,T+y,N+E,G+L).normalize(),t[2].setComponents(g+d,T+b,N+I,G+W).normalize(),t[3].setComponents(g-d,T-b,N-I,G-W).normalize(),t[4].setComponents(g-p,T-M,N-F,G-z).normalize(),t[5].setComponents(g+p,T+M,N+F,G+z).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),zl.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(zl)}intersectsSprite(e){return zl.center.set(0,0,0),zl.radius=.7071067811865476,zl.applyMatrix4(e.matrixWorld),this.intersectsSphere(zl)}intersectsSphere(e){const t=this.planes,r=e.center,l=-e.radius;for(let d=0;d<6;d++)if(t[d].distanceToPoint(r)<l)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const l=t[r];if(nh.x=l.normal.x>0?e.max.x:e.min.x,nh.y=l.normal.y>0?e.max.y:e.min.y,nh.z=l.normal.z>0?e.max.z:e.min.z,l.distanceToPoint(nh)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function ih(){let m=null,e=!1,t=null,r=null;function l(d,p){t(d,p),r=m.requestAnimationFrame(l)}return{start:function(){!0!==e&&null!==t&&(r=m.requestAnimationFrame(l),e=!0)},stop:function(){m.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(d){t=d},setContext:function(d){m=d}}}function Fp(m,e){const t=e.isWebGL2,r=new WeakMap;return{get:function p(b){return b.isInterleavedBufferAttribute&&(b=b.data),r.get(b)},remove:function g(b){b.isInterleavedBufferAttribute&&(b=b.data);const M=r.get(b);M&&(m.deleteBuffer(M.buffer),r.delete(b))},update:function y(b,M){if(b.isGLBufferAttribute){const E=r.get(b);return void((!E||E.version<b.version)&&r.set(b,{buffer:b.buffer,type:b.type,bytesPerElement:b.elementSize,version:b.version}))}b.isInterleavedBufferAttribute&&(b=b.data);const T=r.get(b);void 0===T?r.set(b,function l(b,M){const T=b.array,E=b.usage,I=m.createBuffer();let F;if(m.bindBuffer(M,I),m.bufferData(M,T,E),b.onUploadCallback(),T instanceof Float32Array)F=5126;else if(T instanceof Uint16Array)if(b.isFloat16BufferAttribute){if(!t)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");F=5131}else F=5123;else if(T instanceof Int16Array)F=5122;else if(T instanceof Uint32Array)F=5125;else if(T instanceof Int32Array)F=5124;else if(T instanceof Int8Array)F=5120;else if(T instanceof Uint8Array)F=5121;else{if(!(T instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+T);F=5121}return{buffer:I,type:F,bytesPerElement:T.BYTES_PER_ELEMENT,version:b.version}}(b,M)):T.version<b.version&&(function d(b,M,T){const E=M.array,I=M.updateRange;m.bindBuffer(T,b),-1===I.count?m.bufferSubData(T,0,E):(t?m.bufferSubData(T,I.offset*E.BYTES_PER_ELEMENT,E,I.offset,I.count):m.bufferSubData(T,I.offset*E.BYTES_PER_ELEMENT,E.subarray(I.offset,I.offset+I.count)),I.count=-1),M.onUploadCallback()}(T.buffer,b,M),T.version=b.version)}}}class ld extends Zn{constructor(e=1,t=1,r=1,l=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:l};const d=e/2,p=t/2,g=Math.floor(r),y=Math.floor(l),b=g+1,M=y+1,T=e/g,E=t/y,I=[],F=[],N=[],L=[];for(let W=0;W<M;W++){const z=W*E-p;for(let G=0;G<b;G++)F.push(G*T-d,-z,0),N.push(0,0,1),L.push(G/g),L.push(1-W/y)}for(let W=0;W<y;W++)for(let z=0;z<g;z++){const j=z+b*(W+1),ee=z+1+b*(W+1),ie=z+1+b*W;I.push(z+b*W,j,ie),I.push(j,ee,ie)}this.setIndex(I),this.setAttribute("position",new Q(F,3)),this.setAttribute("normal",new Q(N,3)),this.setAttribute("uv",new Q(L,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ld(e.width,e.height,e.widthSegments,e.heightSegments)}}const li={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, vec2 fullSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\t\n\t\tvec2 lodFudge = pow( 1.95, lod ) / fullSize;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec2 fullSize = vec2( textureSize( sampler, 0 ) );\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), fullSize, floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), fullSize, ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Yt={common:{diffuse:{value:new St(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Ki},uv2Transform:{value:new Ki},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new gt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new St(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new St(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ki}},sprite:{diffuse:{value:new St(16777215)},opacity:{value:1},center:{value:new gt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ki}}},ol={basic:{uniforms:xs([Yt.common,Yt.specularmap,Yt.envmap,Yt.aomap,Yt.lightmap,Yt.fog]),vertexShader:li.meshbasic_vert,fragmentShader:li.meshbasic_frag},lambert:{uniforms:xs([Yt.common,Yt.specularmap,Yt.envmap,Yt.aomap,Yt.lightmap,Yt.emissivemap,Yt.bumpmap,Yt.normalmap,Yt.displacementmap,Yt.fog,Yt.lights,{emissive:{value:new St(0)}}]),vertexShader:li.meshlambert_vert,fragmentShader:li.meshlambert_frag},phong:{uniforms:xs([Yt.common,Yt.specularmap,Yt.envmap,Yt.aomap,Yt.lightmap,Yt.emissivemap,Yt.bumpmap,Yt.normalmap,Yt.displacementmap,Yt.fog,Yt.lights,{emissive:{value:new St(0)},specular:{value:new St(1118481)},shininess:{value:30}}]),vertexShader:li.meshphong_vert,fragmentShader:li.meshphong_frag},standard:{uniforms:xs([Yt.common,Yt.envmap,Yt.aomap,Yt.lightmap,Yt.emissivemap,Yt.bumpmap,Yt.normalmap,Yt.displacementmap,Yt.roughnessmap,Yt.metalnessmap,Yt.fog,Yt.lights,{emissive:{value:new St(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:li.meshphysical_vert,fragmentShader:li.meshphysical_frag},toon:{uniforms:xs([Yt.common,Yt.aomap,Yt.lightmap,Yt.emissivemap,Yt.bumpmap,Yt.normalmap,Yt.displacementmap,Yt.gradientmap,Yt.fog,Yt.lights,{emissive:{value:new St(0)}}]),vertexShader:li.meshtoon_vert,fragmentShader:li.meshtoon_frag},matcap:{uniforms:xs([Yt.common,Yt.bumpmap,Yt.normalmap,Yt.displacementmap,Yt.fog,{matcap:{value:null}}]),vertexShader:li.meshmatcap_vert,fragmentShader:li.meshmatcap_frag},points:{uniforms:xs([Yt.points,Yt.fog]),vertexShader:li.points_vert,fragmentShader:li.points_frag},dashed:{uniforms:xs([Yt.common,Yt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:li.linedashed_vert,fragmentShader:li.linedashed_frag},depth:{uniforms:xs([Yt.common,Yt.displacementmap]),vertexShader:li.depth_vert,fragmentShader:li.depth_frag},normal:{uniforms:xs([Yt.common,Yt.bumpmap,Yt.normalmap,Yt.displacementmap,{opacity:{value:1}}]),vertexShader:li.meshnormal_vert,fragmentShader:li.meshnormal_frag},sprite:{uniforms:xs([Yt.sprite,Yt.fog]),vertexShader:li.sprite_vert,fragmentShader:li.sprite_frag},background:{uniforms:{uvTransform:{value:new Ki},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:li.background_vert,fragmentShader:li.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:li.backgroundCube_vert,fragmentShader:li.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:li.cube_vert,fragmentShader:li.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:li.equirect_vert,fragmentShader:li.equirect_frag},distanceRGBA:{uniforms:xs([Yt.common,Yt.displacementmap,{referencePosition:{value:new ae},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:li.distanceRGBA_vert,fragmentShader:li.distanceRGBA_frag},shadow:{uniforms:xs([Yt.lights,Yt.fog,{color:{value:new St(0)},opacity:{value:1}}]),vertexShader:li.shadow_vert,fragmentShader:li.shadow_frag}};ol.physical={uniforms:xs([ol.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new gt(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new St(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new gt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new St(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new St(1,1,1)},specularColorMap:{value:null}}]),vertexShader:li.meshphysical_vert,fragmentShader:li.meshphysical_frag};const Rf={r:0,b:0,g:0};function __(m,e,t,r,l,d,p){const g=new St(0);let b,M,y=!0===d?0:1,T=null,E=0,I=null;function N(L,W){L.getRGB(Rf,Lp(m)),r.buffers.color.setClear(Rf.r,Rf.g,Rf.b,W,p)}return{getClearColor:function(){return g},setClearColor:function(L,W=1){g.set(L),y=W,N(g,y)},getClearAlpha:function(){return y},setClearAlpha:function(L){y=L,N(g,y)},render:function F(L,W){let z=!1,G=!0===W.isScene?W.background:null;G&&G.isTexture&&(G=(W.backgroundBlurriness>0?t:e).get(G));const j=m.xr,ee=j.getSession&&j.getSession();ee&&"additive"===ee.environmentBlendMode&&(G=null),null===G?N(g,y):G&&G.isColor&&(N(G,1),z=!0),(m.autoClear||z)&&m.clear(m.autoClearColor,m.autoClearDepth,m.autoClearStencil),G&&(G.isCubeTexture||306===G.mapping)?(void 0===M&&(M=new Tr(new Hl(1,1,1),new co({name:"BackgroundCubeMaterial",uniforms:Gl(ol.backgroundCube.uniforms),vertexShader:ol.backgroundCube.vertexShader,fragmentShader:ol.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),M.geometry.deleteAttribute("normal"),M.geometry.deleteAttribute("uv"),M.onBeforeRender=function(ie,fe,X){this.matrixWorld.copyPosition(X.matrixWorld)},Object.defineProperty(M.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),l.update(M)),M.material.uniforms.envMap.value=G,M.material.uniforms.flipEnvMap.value=G.isCubeTexture&&!1===G.isRenderTargetTexture?-1:1,M.material.uniforms.backgroundBlurriness.value=W.backgroundBlurriness,M.material.uniforms.backgroundIntensity.value=W.backgroundIntensity,M.material.toneMapped=G.encoding!==Ai,(T!==G||E!==G.version||I!==m.toneMapping)&&(M.material.needsUpdate=!0,T=G,E=G.version,I=m.toneMapping),M.layers.enableAll(),L.unshift(M,M.geometry,M.material,0,0,null)):G&&G.isTexture&&(void 0===b&&(b=new Tr(new ld(2,2),new co({name:"BackgroundMaterial",uniforms:Gl(ol.background.uniforms),vertexShader:ol.background.vertexShader,fragmentShader:ol.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),b.geometry.deleteAttribute("normal"),Object.defineProperty(b.material,"map",{get:function(){return this.uniforms.t2D.value}}),l.update(b)),b.material.uniforms.t2D.value=G,b.material.uniforms.backgroundIntensity.value=W.backgroundIntensity,b.material.toneMapped=G.encoding!==Ai,!0===G.matrixAutoUpdate&&G.updateMatrix(),b.material.uniforms.uvTransform.value.copy(G.matrix),(T!==G||E!==G.version||I!==m.toneMapping)&&(b.material.needsUpdate=!0,T=G,E=G.version,I=m.toneMapping),b.layers.enableAll(),L.unshift(b,b.geometry,b.material,0,0,null))}}}function Jp(m,e,t,r){const l=m.getParameter(34921),d=r.isWebGL2?null:e.get("OES_vertex_array_object"),p=r.isWebGL2||null!==d,g={},y=L(null);let b=y,M=!1;function I(De){return r.isWebGL2?m.bindVertexArray(De):d.bindVertexArrayOES(De)}function F(De){return r.isWebGL2?m.deleteVertexArray(De):d.deleteVertexArrayOES(De)}function L(De){const Ze=[],_t=[],Nt=[];for(let ft=0;ft<l;ft++)Ze[ft]=0,_t[ft]=0,Nt[ft]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Ze,enabledAttributes:_t,attributeDivisors:Nt,object:De,attributes:{},index:null}}function G(){const De=b.newAttributes;for(let Ze=0,_t=De.length;Ze<_t;Ze++)De[Ze]=0}function j(De){ee(De,0)}function ee(De,Ze){const Nt=b.enabledAttributes,ft=b.attributeDivisors;b.newAttributes[De]=1,0===Nt[De]&&(m.enableVertexAttribArray(De),Nt[De]=1),ft[De]!==Ze&&((r.isWebGL2?m:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](De,Ze),ft[De]=Ze)}function ie(){const De=b.newAttributes,Ze=b.enabledAttributes;for(let _t=0,Nt=Ze.length;_t<Nt;_t++)Ze[_t]!==De[_t]&&(m.disableVertexAttribArray(_t),Ze[_t]=0)}function fe(De,Ze,_t,Nt,ft,wt){!0!==r.isWebGL2||5124!==_t&&5125!==_t?m.vertexAttribPointer(De,Ze,_t,Nt,ft,wt):m.vertexAttribIPointer(De,Ze,_t,ft,wt)}function pt(){Fe(),M=!0,b!==y&&(b=y,I(b.object))}function Fe(){y.geometry=null,y.program=null,y.wireframe=!1}return{setup:function T(De,Ze,_t,Nt,ft){let wt=!1;if(p){const At=function N(De,Ze,_t){const Nt=!0===_t.wireframe;let ft=g[De.id];void 0===ft&&(ft={},g[De.id]=ft);let wt=ft[Ze.id];void 0===wt&&(wt={},ft[Ze.id]=wt);let At=wt[Nt];return void 0===At&&(At=L(function E(){return r.isWebGL2?m.createVertexArray():d.createVertexArrayOES()}()),wt[Nt]=At),At}(Nt,_t,Ze);b!==At&&(b=At,I(b.object)),wt=function W(De,Ze,_t,Nt){const ft=b.attributes,wt=Ze.attributes;let At=0;const It=_t.getAttributes();for(const Re in It)if(It[Re].location>=0){const Rt=ft[Re];let Oe=wt[Re];if(void 0===Oe&&("instanceMatrix"===Re&&De.instanceMatrix&&(Oe=De.instanceMatrix),"instanceColor"===Re&&De.instanceColor&&(Oe=De.instanceColor)),void 0===Rt||Rt.attribute!==Oe||Oe&&Rt.data!==Oe.data)return!0;At++}return b.attributesNum!==At||b.index!==Nt}(De,Nt,_t,ft),wt&&function z(De,Ze,_t,Nt){const ft={},wt=Ze.attributes;let At=0;const It=_t.getAttributes();for(const Re in It)if(It[Re].location>=0){let Rt=wt[Re];void 0===Rt&&("instanceMatrix"===Re&&De.instanceMatrix&&(Rt=De.instanceMatrix),"instanceColor"===Re&&De.instanceColor&&(Rt=De.instanceColor));const Oe={};Oe.attribute=Rt,Rt&&Rt.data&&(Oe.data=Rt.data),ft[Re]=Oe,At++}b.attributes=ft,b.attributesNum=At,b.index=Nt}(De,Nt,_t,ft)}else{const At=!0===Ze.wireframe;(b.geometry!==Nt.id||b.program!==_t.id||b.wireframe!==At)&&(b.geometry=Nt.id,b.program=_t.id,b.wireframe=At,wt=!0)}null!==ft&&t.update(ft,34963),(wt||M)&&(M=!1,function X(De,Ze,_t,Nt){if(!1===r.isWebGL2&&(De.isInstancedMesh||Nt.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;G();const ft=Nt.attributes,wt=_t.getAttributes(),At=Ze.defaultAttributeValues;for(const It in wt){const Re=wt[It];if(Re.location>=0){let ct=ft[It];if(void 0===ct&&("instanceMatrix"===It&&De.instanceMatrix&&(ct=De.instanceMatrix),"instanceColor"===It&&De.instanceColor&&(ct=De.instanceColor)),void 0!==ct){const Rt=ct.normalized,Oe=ct.itemSize,en=t.get(ct);if(void 0===en)continue;const $t=en.buffer,tn=en.type,mn=en.bytesPerElement;if(ct.isInterleavedBufferAttribute){const xn=ct.data,zn=xn.stride,Ke=ct.offset;if(xn.isInstancedInterleavedBuffer){for(let xt=0;xt<Re.locationSize;xt++)ee(Re.location+xt,xn.meshPerAttribute);!0!==De.isInstancedMesh&&void 0===Nt._maxInstanceCount&&(Nt._maxInstanceCount=xn.meshPerAttribute*xn.count)}else for(let xt=0;xt<Re.locationSize;xt++)j(Re.location+xt);m.bindBuffer(34962,$t);for(let xt=0;xt<Re.locationSize;xt++)fe(Re.location+xt,Oe/Re.locationSize,tn,Rt,zn*mn,(Ke+Oe/Re.locationSize*xt)*mn)}else{if(ct.isInstancedBufferAttribute){for(let xn=0;xn<Re.locationSize;xn++)ee(Re.location+xn,ct.meshPerAttribute);!0!==De.isInstancedMesh&&void 0===Nt._maxInstanceCount&&(Nt._maxInstanceCount=ct.meshPerAttribute*ct.count)}else for(let xn=0;xn<Re.locationSize;xn++)j(Re.location+xn);m.bindBuffer(34962,$t);for(let xn=0;xn<Re.locationSize;xn++)fe(Re.location+xn,Oe/Re.locationSize,tn,Rt,Oe*mn,Oe/Re.locationSize*xn*mn)}}else if(void 0!==At){const Rt=At[It];if(void 0!==Rt)switch(Rt.length){case 2:m.vertexAttrib2fv(Re.location,Rt);break;case 3:m.vertexAttrib3fv(Re.location,Rt);break;case 4:m.vertexAttrib4fv(Re.location,Rt);break;default:m.vertexAttrib1fv(Re.location,Rt)}}}}ie()}(De,Ze,_t,Nt),null!==ft&&m.bindBuffer(34963,t.get(ft).buffer))},reset:pt,resetDefaultState:Fe,dispose:function re(){pt();for(const De in g){const Ze=g[De];for(const _t in Ze){const Nt=Ze[_t];for(const ft in Nt)F(Nt[ft].object),delete Nt[ft];delete Ze[_t]}delete g[De]}},releaseStatesOfGeometry:function ve(De){if(void 0===g[De.id])return;const Ze=g[De.id];for(const _t in Ze){const Nt=Ze[_t];for(const ft in Nt)F(Nt[ft].object),delete Nt[ft];delete Ze[_t]}delete g[De.id]},releaseStatesOfProgram:function We(De){for(const Ze in g){const _t=g[Ze];if(void 0===_t[De.id])continue;const Nt=_t[De.id];for(const ft in Nt)F(Nt[ft].object),delete Nt[ft];delete _t[De.id]}},initAttributes:G,enableAttribute:j,disableUnusedAttributes:ie}}function Of(m,e,t,r){const l=r.isWebGL2;let d;this.setMode=function p(b){d=b},this.render=function g(b,M){m.drawArrays(d,b,M),t.update(M,d,1)},this.renderInstances=function y(b,M,T){if(0===T)return;let E,I;if(l)E=m,I="drawArraysInstanced";else if(E=e.get("ANGLE_instanced_arrays"),I="drawArraysInstancedANGLE",null===E)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");E[I](d,b,M,T),t.update(M,d,T)}}function v_(m,e,t){let r;function d(fe){if("highp"===fe){if(m.getShaderPrecisionFormat(35633,36338).precision>0&&m.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";fe="mediump"}return"mediump"===fe&&m.getShaderPrecisionFormat(35633,36337).precision>0&&m.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const p=typeof WebGL2RenderingContext<"u"&&m instanceof WebGL2RenderingContext;let g=void 0!==t.precision?t.precision:"highp";const y=d(g);y!==g&&(console.warn("THREE.WebGLRenderer:",g,"not supported, using",y,"instead."),g=y);const b=p||e.has("WEBGL_draw_buffers"),M=!0===t.logarithmicDepthBuffer,T=m.getParameter(34930),E=m.getParameter(35660),I=m.getParameter(3379),F=m.getParameter(34076),N=m.getParameter(34921),L=m.getParameter(36347),W=m.getParameter(36348),z=m.getParameter(36349),G=E>0,j=p||e.has("OES_texture_float");return{isWebGL2:p,drawBuffers:b,getMaxAnisotropy:function l(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){const fe=e.get("EXT_texture_filter_anisotropic");r=m.getParameter(fe.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:d,precision:g,logarithmicDepthBuffer:M,maxTextures:T,maxVertexTextures:E,maxTextureSize:I,maxCubemapSize:F,maxAttributes:N,maxVertexUniforms:L,maxVaryings:W,maxFragmentUniforms:z,vertexTextures:G,floatFragmentTextures:j,floatVertexTextures:G&&j,maxSamples:p?m.getParameter(36183):0}}function y_(m){const e=this;let t=null,r=0,l=!1,d=!1;const p=new ks,g=new Ki,y={value:null,needsUpdate:!1};function M(T,E,I,F){const N=null!==T?T.length:0;let L=null;if(0!==N){if(L=y.value,!0!==F||null===L){const W=I+4*N,z=E.matrixWorldInverse;g.getNormalMatrix(z),(null===L||L.length<W)&&(L=new Float32Array(W));for(let G=0,j=I;G!==N;++G,j+=4)p.copy(T[G]).applyMatrix4(z,g),p.normal.toArray(L,j),L[j+3]=p.constant}y.value=L,y.needsUpdate=!0}return e.numPlanes=N,e.numIntersection=0,L}this.uniform=y,this.numPlanes=0,this.numIntersection=0,this.init=function(T,E){const I=0!==T.length||E||0!==r||l;return l=E,r=T.length,I},this.beginShadows=function(){d=!0,M(null)},this.endShadows=function(){d=!1},this.setGlobalState=function(T,E){t=M(T,E,0)},this.setState=function(T,E,I){const F=T.clippingPlanes,N=T.clipIntersection,L=T.clipShadows,W=m.get(T);if(!l||null===F||0===F.length||d&&!L)d?M(null):function b(){y.value!==t&&(y.value=t,y.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}();else{const z=d?0:r,G=4*z;let j=W.clippingState||null;y.value=j,j=M(F,E,G,I);for(let ee=0;ee!==G;++ee)j[ee]=t[ee];W.clippingState=j,this.numIntersection=N?this.numPlanes:0,this.numPlanes+=z}}}function b_(m){let e=new WeakMap;function t(p,g){return 303===g?p.mapping=301:304===g&&(p.mapping=302),p}function l(p){const g=p.target;g.removeEventListener("dispose",l);const y=e.get(g);void 0!==y&&(e.delete(g),y.dispose())}return{get:function r(p){if(p&&p.isTexture&&!1===p.isRenderTargetTexture){const g=p.mapping;if(303===g||304===g){if(e.has(p))return t(e.get(p).texture,p.mapping);{const y=p.image;if(y&&y.height>0){const b=new th(y.height/2);return b.fromEquirectangularTexture(m,p),e.set(p,b),p.addEventListener("dispose",l),t(b.texture,p.mapping)}return null}}}return p},dispose:function d(){e=new WeakMap}}}class md extends ad{constructor(e=-1,t=1,r=1,l=-1,d=.1,p=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=l,this.near=d,this.far=p,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,r,l,d,p){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=l,this.view.width=d,this.view.height=p,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,l=(this.top+this.bottom)/2;let d=r-e,p=r+e,g=l+t,y=l-t;if(null!==this.view&&this.view.enabled){const b=(this.right-this.left)/this.view.fullWidth/this.zoom,M=(this.top-this.bottom)/this.view.fullHeight/this.zoom;d+=b*this.view.offsetX,p=d+b*this.view.width,g-=M*this.view.offsetY,y=g-M*this.view.height}this.projectionMatrix.makeOrthographic(d,p,g,y,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const Pf=[.125,.215,.35,.446,.526,.582],Kp=new md,x_=new St;let Qp=null;const Wl=(1+Math.sqrt(5))/2,cu=1/Wl,w_=[new ae(1,1,1),new ae(-1,1,1),new ae(1,1,-1),new ae(-1,1,-1),new ae(0,Wl,cu),new ae(0,Wl,-cu),new ae(cu,0,Wl),new ae(-cu,0,Wl),new ae(Wl,cu,0),new ae(-Wl,cu,0)];class D_{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,l=100){Qp=this._renderer.getRenderTarget(),this._setSize(256);const d=this._allocateTargets();return d.depthBuffer=!0,this._sceneToCubeUV(e,r,l,d),t>0&&this._blur(d,0,0,t),this._applyPMREM(d),this._cleanup(d),d}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=tg(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=eg(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Qp),e.scissorTest=!1,Lf(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(301===e.mapping||302===e.mapping?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),Qp=this._renderer.getRenderTarget();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:Rn,minFilter:Rn,generateMipmaps:!1,type:Ss,format:Ti,encoding:gs,depthBuffer:!1},l=fh(e,t,r);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=fh(e,t,r);const{_lodMax:d}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function M_(m){const e=[],t=[],r=[];let l=m;const d=m-4+1+Pf.length;for(let p=0;p<d;p++){const g=Math.pow(2,l);t.push(g);let y=1/g;p>m-4?y=Pf[p-m+4-1]:0===p&&(y=0),r.push(y);const b=1/(g-2),M=-b,T=1+b,E=[M,M,T,M,T,T,M,M,T,T,M,T],I=6,F=6,N=3,L=2,W=1,z=new Float32Array(N*F*I),G=new Float32Array(L*F*I),j=new Float32Array(W*F*I);for(let ie=0;ie<I;ie++){const fe=ie%3*2/3-1,X=ie>2?0:-1;z.set([fe,X,0,fe+2/3,X,0,fe+2/3,X+1,0,fe,X,0,fe+2/3,X+1,0,fe,X+1,0],N*F*ie),G.set(E,L*F*ie),j.set([ie,ie,ie,ie,ie,ie],W*F*ie)}const ee=new Zn;ee.setAttribute("position",new pi(z,N)),ee.setAttribute("uv",new pi(G,L)),ee.setAttribute("faceIndex",new pi(j,W)),e.push(ee),l>4&&l--}return{lodPlanes:e,sizeLods:t,sigmas:r}}(d)),this._blurMaterial=function yv(m,e,t){const r=new Float32Array(20),l=new ae(0,1,0);return new co({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${m}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:l}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(d,e,t)}return l}_compileMaterial(e){const t=new Tr(this._lodPlanes[0],e);this._renderer.compile(t,Kp)}_sceneToCubeUV(e,t,r,l){const g=new Ar(90,1,t,r),y=[1,-1,1,1,1,1],b=[1,1,1,-1,-1,-1],M=this._renderer,T=M.autoClear,E=M.toneMapping;M.getClearColor(x_),M.toneMapping=0,M.autoClear=!1;const I=new ao({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),F=new Tr(new Hl,I);let N=!1;const L=e.background;L?L.isColor&&(I.color.copy(L),e.background=null,N=!0):(I.color.copy(x_),N=!0);for(let W=0;W<6;W++){const z=W%3;0===z?(g.up.set(0,y[W],0),g.lookAt(b[W],0,0)):1===z?(g.up.set(0,0,y[W]),g.lookAt(0,b[W],0)):(g.up.set(0,y[W],0),g.lookAt(0,0,b[W]));const G=this._cubeSize;Lf(l,z*G,W>2?G:0,G,G),M.setRenderTarget(l),N&&M.render(F,g),M.render(e,g)}F.geometry.dispose(),F.material.dispose(),M.toneMapping=E,M.autoClear=T,e.background=L}_textureToCubeUV(e,t){const r=this._renderer,l=301===e.mapping||302===e.mapping;l?(null===this._cubemapMaterial&&(this._cubemapMaterial=tg()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=eg());const d=l?this._cubemapMaterial:this._equirectMaterial,p=new Tr(this._lodPlanes[0],d);d.uniforms.envMap.value=e;const y=this._cubeSize;Lf(t,0,0,3*y,2*y),r.setRenderTarget(t),r.render(p,Kp)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let l=1;l<this._lodPlanes.length;l++){const d=Math.sqrt(this._sigmas[l]*this._sigmas[l]-this._sigmas[l-1]*this._sigmas[l-1]);this._blur(e,l-1,l,d,w_[(l-1)%w_.length])}t.autoClear=r}_blur(e,t,r,l,d){const p=this._pingPongRenderTarget;this._halfBlur(e,p,t,r,l,"latitudinal",d),this._halfBlur(p,e,r,r,l,"longitudinal",d)}_halfBlur(e,t,r,l,d,p,g){const y=this._renderer,b=this._blurMaterial;"latitudinal"!==p&&"longitudinal"!==p&&console.error("blur direction must be either latitudinal or longitudinal!");const T=new Tr(this._lodPlanes[l],b),E=b.uniforms,I=this._sizeLods[r]-1,F=isFinite(d)?Math.PI/(2*I):2*Math.PI/39,N=d/F,L=isFinite(d)?1+Math.floor(3*N):20;L>20&&console.warn(`sigmaRadians, ${d}, is too large and will clip, as it requested ${L} samples when the maximum is set to 20`);const W=[];let z=0;for(let fe=0;fe<20;++fe){const X=fe/N,re=Math.exp(-X*X/2);W.push(re),0===fe?z+=re:fe<L&&(z+=2*re)}for(let fe=0;fe<W.length;fe++)W[fe]=W[fe]/z;E.envMap.value=e.texture,E.samples.value=L,E.weights.value=W,E.latitudinal.value="latitudinal"===p,g&&(E.poleAxis.value=g);const{_lodMax:G}=this;E.dTheta.value=F,E.mipInt.value=G-r;const j=this._sizeLods[l];Lf(t,3*j*(l>G-4?l-G+4:0),4*(this._cubeSize-j),3*j,2*j),y.setRenderTarget(t),y.render(T,Kp)}}function fh(m,e,t){const r=new Xa(m,e,t);return r.texture.mapping=306,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Lf(m,e,t,r,l){m.viewport.set(e,t,r,l),m.scissor.set(e,t,r,l)}function eg(){return new co({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function tg(){return new co({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function C_(m){let e=new WeakMap,t=null;function d(g){const y=g.target;y.removeEventListener("dispose",d);const b=e.get(y);void 0!==b&&(e.delete(y),b.dispose())}return{get:function r(g){if(g&&g.isTexture){const y=g.mapping,b=303===y||304===y,M=301===y||302===y;if(b||M){if(g.isRenderTargetTexture&&!0===g.needsPMREMUpdate){g.needsPMREMUpdate=!1;let T=e.get(g);return null===t&&(t=new D_(m)),T=b?t.fromEquirectangular(g,T):t.fromCubemap(g,T),e.set(g,T),T.texture}if(e.has(g))return e.get(g).texture;{const T=g.image;if(b&&T&&T.height>0||M&&T&&function l(g){let y=0;for(let M=0;M<6;M++)void 0!==g[M]&&y++;return 6===y}(T)){null===t&&(t=new D_(m));const E=b?t.fromEquirectangular(g):t.fromCubemap(g);return e.set(g,E),g.addEventListener("dispose",d),E.texture}return null}}}return g},dispose:function p(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function Zs(m){const e={};function t(r){if(void 0!==e[r])return e[r];let l;switch(r){case"WEBGL_depth_texture":l=m.getExtension("WEBGL_depth_texture")||m.getExtension("MOZ_WEBGL_depth_texture")||m.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":l=m.getExtension("EXT_texture_filter_anisotropic")||m.getExtension("MOZ_EXT_texture_filter_anisotropic")||m.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":l=m.getExtension("WEBGL_compressed_texture_s3tc")||m.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||m.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":l=m.getExtension("WEBGL_compressed_texture_pvrtc")||m.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:l=m.getExtension(r)}return e[r]=l,l}return{has:function(r){return null!==t(r)},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const l=t(r);return null===l&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),l}}}function ng(m,e,t,r){const l={},d=new WeakMap;function p(T){const E=T.target;null!==E.index&&e.remove(E.index);for(const F in E.attributes)e.remove(E.attributes[F]);E.removeEventListener("dispose",p),delete l[E.id];const I=d.get(E);I&&(e.remove(I),d.delete(E)),r.releaseStatesOfGeometry(E),!0===E.isInstancedBufferGeometry&&delete E._maxInstanceCount,t.memory.geometries--}function b(T){const E=[],I=T.index,F=T.attributes.position;let N=0;if(null!==I){const z=I.array;N=I.version;for(let G=0,j=z.length;G<j;G+=3){const ee=z[G+0],ie=z[G+1],fe=z[G+2];E.push(ee,ie,ie,fe,fe,ee)}}else{N=F.version;for(let G=0,j=F.array.length/3-1;G<j;G+=3){const ee=G+0,ie=G+1,fe=G+2;E.push(ee,ie,ie,fe,fe,ee)}}const L=new(Qu(E)?k:D)(E,1);L.version=N;const W=d.get(T);W&&e.remove(W),d.set(T,L)}return{get:function g(T,E){return!0===l[E.id]||(E.addEventListener("dispose",p),l[E.id]=!0,t.memory.geometries++),E},update:function y(T){const E=T.attributes;for(const F in E)e.update(E[F],34962);const I=T.morphAttributes;for(const F in I){const N=I[F];for(let L=0,W=N.length;L<W;L++)e.update(N[L],34962)}},getWireframeAttribute:function M(T){const E=d.get(T);if(E){const I=T.index;null!==I&&E.version<I.version&&b(T)}else b(T);return d.get(T)}}}function ig(m,e,t,r){const l=r.isWebGL2;let d,g,y;this.setMode=function p(E){d=E},this.setIndex=function b(E){g=E.type,y=E.bytesPerElement},this.render=function M(E,I){m.drawElements(d,I,g,E*y),t.update(I,d,1)},this.renderInstances=function T(E,I,F){if(0===F)return;let N,L;if(l)N=m,L="drawElementsInstanced";else if(N=e.get("ANGLE_instanced_arrays"),L="drawElementsInstancedANGLE",null===N)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");N[L](d,I,g,E*y,F),t.update(I,d,F)}}function kf(m){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function l(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function r(d,p,g){switch(t.calls++,p){case 4:t.triangles+=g*(d/3);break;case 1:t.lines+=g*(d/2);break;case 3:t.lines+=g*(d-1);break;case 2:t.lines+=g*d;break;case 0:t.points+=g*d;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",p)}}}}function Js(m,e){return m[0]-e[0]}function jl(m,e){return Math.abs(e[1])-Math.abs(m[1])}function rg(m,e,t){const r={},l=new Float32Array(8),d=new WeakMap,p=new Fi,g=[];for(let b=0;b<8;b++)g[b]=[b,0];return{update:function y(b,M,T){const E=b.morphTargetInfluences;if(!0===e.isWebGL2){const I=M.morphAttributes.position||M.morphAttributes.normal||M.morphAttributes.color,F=void 0!==I?I.length:0;let N=d.get(M);if(void 0===N||N.count!==F){let De=function(){pt.dispose(),d.delete(M),M.removeEventListener("dispose",De)};void 0!==N&&N.texture.dispose();const z=void 0!==M.morphAttributes.position,G=void 0!==M.morphAttributes.normal,j=void 0!==M.morphAttributes.color,ee=M.morphAttributes.position||[],ie=M.morphAttributes.normal||[],fe=M.morphAttributes.color||[];let X=0;!0===z&&(X=1),!0===G&&(X=2),!0===j&&(X=3);let re=M.attributes.position.count*X,ve=1;re>e.maxTextureSize&&(ve=Math.ceil(re/e.maxTextureSize),re=e.maxTextureSize);const We=new Float32Array(re*ve*4*F),pt=new yc(We,re,ve,F);pt.type=wr,pt.needsUpdate=!0;const Fe=4*X;for(let Ze=0;Ze<F;Ze++){const _t=ee[Ze],Nt=ie[Ze],ft=fe[Ze],wt=re*ve*4*Ze;for(let At=0;At<_t.count;At++){const It=At*Fe;!0===z&&(p.fromBufferAttribute(_t,At),We[wt+It+0]=p.x,We[wt+It+1]=p.y,We[wt+It+2]=p.z,We[wt+It+3]=0),!0===G&&(p.fromBufferAttribute(Nt,At),We[wt+It+4]=p.x,We[wt+It+5]=p.y,We[wt+It+6]=p.z,We[wt+It+7]=0),!0===j&&(p.fromBufferAttribute(ft,At),We[wt+It+8]=p.x,We[wt+It+9]=p.y,We[wt+It+10]=p.z,We[wt+It+11]=4===ft.itemSize?p.w:1)}}N={count:F,texture:pt,size:new gt(re,ve)},d.set(M,N),M.addEventListener("dispose",De)}let L=0;for(let z=0;z<E.length;z++)L+=E[z];const W=M.morphTargetsRelative?1:1-L;T.getUniforms().setValue(m,"morphTargetBaseInfluence",W),T.getUniforms().setValue(m,"morphTargetInfluences",E),T.getUniforms().setValue(m,"morphTargetsTexture",N.texture,t),T.getUniforms().setValue(m,"morphTargetsTextureSize",N.size)}else{const I=void 0===E?0:E.length;let F=r[M.id];if(void 0===F||F.length!==I){F=[];for(let G=0;G<I;G++)F[G]=[G,0];r[M.id]=F}for(let G=0;G<I;G++){const j=F[G];j[0]=G,j[1]=E[G]}F.sort(jl);for(let G=0;G<8;G++)G<I&&F[G][1]?(g[G][0]=F[G][0],g[G][1]=F[G][1]):(g[G][0]=Number.MAX_SAFE_INTEGER,g[G][1]=0);g.sort(Js);const N=M.morphAttributes.position,L=M.morphAttributes.normal;let W=0;for(let G=0;G<8;G++){const j=g[G],ee=j[0],ie=j[1];ee!==Number.MAX_SAFE_INTEGER&&ie?(N&&M.getAttribute("morphTarget"+G)!==N[ee]&&M.setAttribute("morphTarget"+G,N[ee]),L&&M.getAttribute("morphNormal"+G)!==L[ee]&&M.setAttribute("morphNormal"+G,L[ee]),l[G]=ie,W+=ie):(N&&!0===M.hasAttribute("morphTarget"+G)&&M.deleteAttribute("morphTarget"+G),L&&!0===M.hasAttribute("morphNormal"+G)&&M.deleteAttribute("morphNormal"+G),l[G]=0)}const z=M.morphTargetsRelative?1:1-W;T.getUniforms().setValue(m,"morphTargetBaseInfluence",z),T.getUniforms().setValue(m,"morphTargetInfluences",l)}}}}function S_(m,e,t,r){let l=new WeakMap;function g(y){const b=y.target;b.removeEventListener("dispose",g),t.remove(b.instanceMatrix),null!==b.instanceColor&&t.remove(b.instanceColor)}return{update:function d(y){const b=r.render.frame,T=e.get(y,y.geometry);return l.get(T)!==b&&(e.update(T),l.set(T,b)),y.isInstancedMesh&&(!1===y.hasEventListener("dispose",g)&&y.addEventListener("dispose",g),t.update(y.instanceMatrix,34962),null!==y.instanceColor&&t.update(y.instanceColor,34962)),T},dispose:function p(){l=new WeakMap}}}const ph=new xa,ta=new yc,gh=new Za,al=new os,Bf=[],sg=[],E_=new Float32Array(16),T_=new Float32Array(9),og=new Float32Array(4);function na(m,e,t){const r=m[0];if(r<=0||r>0)return m;const l=e*t;let d=Bf[l];if(void 0===d&&(d=new Float32Array(l),Bf[l]=d),0!==e){r.toArray(d,0);for(let p=1,g=0;p!==e;++p)g+=t,m[p].toArray(d,g)}return d}function Yr(m,e){if(m.length!==e.length)return!1;for(let t=0,r=m.length;t<r;t++)if(m[t]!==e[t])return!1;return!0}function as(m,e){for(let t=0,r=e.length;t<r;t++)m[t]=e[t]}function ll(m,e){let t=sg[e];void 0===t&&(t=new Int32Array(e),sg[e]=t);for(let r=0;r!==e;++r)t[r]=m.allocateTextureUnit();return t}function Na(m,e){const t=this.cache;t[0]!==e&&(m.uniform1f(this.addr,e),t[0]=e)}function A_(m,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(m.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Yr(t,e))return;m.uniform2fv(this.addr,e),as(t,e)}}function N_(m,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(m.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(m.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Yr(t,e))return;m.uniform3fv(this.addr,e),as(t,e)}}function mh(m,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(m.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Yr(t,e))return;m.uniform4fv(this.addr,e),as(t,e)}}function uo(m,e){const t=this.cache,r=e.elements;if(void 0===r){if(Yr(t,e))return;m.uniformMatrix2fv(this.addr,!1,e),as(t,e)}else{if(Yr(t,r))return;og.set(r),m.uniformMatrix2fv(this.addr,!1,og),as(t,r)}}function ag(m,e){const t=this.cache,r=e.elements;if(void 0===r){if(Yr(t,e))return;m.uniformMatrix3fv(this.addr,!1,e),as(t,e)}else{if(Yr(t,r))return;T_.set(r),m.uniformMatrix3fv(this.addr,!1,T_),as(t,r)}}function bv(m,e){const t=this.cache,r=e.elements;if(void 0===r){if(Yr(t,e))return;m.uniformMatrix4fv(this.addr,!1,e),as(t,e)}else{if(Yr(t,r))return;E_.set(r),m.uniformMatrix4fv(this.addr,!1,E_),as(t,r)}}function ia(m,e){const t=this.cache;t[0]!==e&&(m.uniform1i(this.addr,e),t[0]=e)}function uu(m,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(m.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Yr(t,e))return;m.uniform2iv(this.addr,e),as(t,e)}}function Vf(m,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(m.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Yr(t,e))return;m.uniform3iv(this.addr,e),as(t,e)}}function I_(m,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(m.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Yr(t,e))return;m.uniform4iv(this.addr,e),as(t,e)}}function _h(m,e){const t=this.cache;t[0]!==e&&(m.uniform1ui(this.addr,e),t[0]=e)}function lg(m,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(m.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Yr(t,e))return;m.uniform2uiv(this.addr,e),as(t,e)}}function du(m,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(m.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Yr(t,e))return;m.uniform3uiv(this.addr,e),as(t,e)}}function Uf(m,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(m.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Yr(t,e))return;m.uniform4uiv(this.addr,e),as(t,e)}}function cg(m,e,t){const r=this.cache,l=t.allocateTextureUnit();r[0]!==l&&(m.uniform1i(this.addr,l),r[0]=l),t.setTexture2D(e||ph,l)}function vh(m,e,t){const r=this.cache,l=t.allocateTextureUnit();r[0]!==l&&(m.uniform1i(this.addr,l),r[0]=l),t.setTexture3D(e||gh,l)}function yh(m,e,t){const r=this.cache,l=t.allocateTextureUnit();r[0]!==l&&(m.uniform1i(this.addr,l),r[0]=l),t.setTextureCube(e||al,l)}function R_(m,e,t){const r=this.cache,l=t.allocateTextureUnit();r[0]!==l&&(m.uniform1i(this.addr,l),r[0]=l),t.setTexture2DArray(e||ta,l)}function vd(m,e){m.uniform1fv(this.addr,e)}function ug(m,e){const t=na(e,this.size,2);m.uniform2fv(this.addr,t)}function P_(m,e){const t=na(e,this.size,3);m.uniform3fv(this.addr,t)}function dg(m,e){const t=na(e,this.size,4);m.uniform4fv(this.addr,t)}function Ia(m,e){const t=na(e,this.size,4);m.uniformMatrix2fv(this.addr,!1,t)}function hg(m,e){const t=na(e,this.size,9);m.uniformMatrix3fv(this.addr,!1,t)}function yd(m,e){const t=na(e,this.size,16);m.uniformMatrix4fv(this.addr,!1,t)}function bh(m,e){m.uniform1iv(this.addr,e)}function L_(m,e){m.uniform2iv(this.addr,e)}function F_(m,e){m.uniform3iv(this.addr,e)}function k_(m,e){m.uniform4iv(this.addr,e)}function fg(m,e){m.uniform1uiv(this.addr,e)}function xh(m,e){m.uniform2uiv(this.addr,e)}function pg(m,e){m.uniform3uiv(this.addr,e)}function cl(m,e){m.uniform4uiv(this.addr,e)}function xv(m,e,t){const r=this.cache,l=e.length,d=ll(t,l);Yr(r,d)||(m.uniform1iv(this.addr,d),as(r,d));for(let p=0;p!==l;++p)t.setTexture2D(e[p]||ph,d[p])}function gg(m,e,t){const r=this.cache,l=e.length,d=ll(t,l);Yr(r,d)||(m.uniform1iv(this.addr,d),as(r,d));for(let p=0;p!==l;++p)t.setTexture3D(e[p]||gh,d[p])}function B_(m,e,t){const r=this.cache,l=e.length,d=ll(t,l);Yr(r,d)||(m.uniform1iv(this.addr,d),as(r,d));for(let p=0;p!==l;++p)t.setTextureCube(e[p]||al,d[p])}function V_(m,e,t){const r=this.cache,l=e.length,d=ll(t,l);Yr(r,d)||(m.uniform1iv(this.addr,d),as(r,d));for(let p=0;p!==l;++p)t.setTexture2DArray(e[p]||ta,d[p])}class ra{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=function O_(m){switch(m){case 5126:return Na;case 35664:return A_;case 35665:return N_;case 35666:return mh;case 35674:return uo;case 35675:return ag;case 35676:return bv;case 5124:case 35670:return ia;case 35667:case 35671:return uu;case 35668:case 35672:return Vf;case 35669:case 35673:return I_;case 5125:return _h;case 36294:return lg;case 36295:return du;case 36296:return Uf;case 35678:case 36198:case 36298:case 36306:case 35682:return cg;case 35679:case 36299:case 36307:return vh;case 35680:case 36300:case 36308:case 36293:return yh;case 36289:case 36303:case 36311:case 36292:return R_}}(t.type)}}class U_{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=function $l(m){switch(m){case 5126:return vd;case 35664:return ug;case 35665:return P_;case 35666:return dg;case 35674:return Ia;case 35675:return hg;case 35676:return yd;case 5124:case 35670:return bh;case 35667:case 35671:return L_;case 35668:case 35672:return F_;case 35669:case 35673:return k_;case 5125:return fg;case 36294:return xh;case 36295:return pg;case 36296:return cl;case 35678:case 36198:case 36298:case 36306:case 35682:return xv;case 35679:case 36299:case 36307:return gg;case 35680:case 36300:case 36308:case 36293:return B_;case 36289:case 36303:case 36311:case 36292:return V_}}(t.type)}}class wv{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const l=this.seq;for(let d=0,p=l.length;d!==p;++d){const g=l[d];g.setValue(e,t[g.id],r)}}}const mg=/(\w+)(\])?(\[|\.)?/g;function wh(m,e){m.seq.push(e),m.map[e.id]=e}function Dv(m,e,t){const r=m.name,l=r.length;for(mg.lastIndex=0;;){const d=mg.exec(r),p=mg.lastIndex;let g=d[1];const b=d[3];if("]"===d[2]&&(g|=0),void 0===b||"["===b&&p+2===l){wh(t,void 0===b?new ra(g,m,e):new U_(g,m,e));break}{let T=t.map[g];void 0===T&&(T=new wv(g),wh(t,T)),t=T}}}class Dh{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,35718);for(let l=0;l<r;++l){const d=e.getActiveUniform(t,l);Dv(d,e.getUniformLocation(t,d.name),this)}}setValue(e,t,r,l){const d=this.map[t];void 0!==d&&d.setValue(e,r,l)}setOptional(e,t,r){const l=t[r];void 0!==l&&this.setValue(e,r,l)}static upload(e,t,r,l){for(let d=0,p=t.length;d!==p;++d){const g=t[d],y=r[g.id];!1!==y.needsUpdate&&g.setValue(e,y.value,l)}}static seqWithValue(e,t){const r=[];for(let l=0,d=e.length;l!==d;++l){const p=e[l];p.id in t&&r.push(p)}return r}}function _g(m,e,t){const r=m.createShader(e);return m.shaderSource(r,t),m.compileShader(r),r}let H_=0;function Mh(m,e,t){const r=m.getShaderParameter(e,35713),l=m.getShaderInfoLog(e).trim();if(r&&""===l)return"";const d=/ERROR: 0:(\d+)/.exec(l);if(d){const p=parseInt(d[1]);return t.toUpperCase()+"\n\n"+l+"\n\n"+function vg(m,e){const t=m.split("\n"),r=[],l=Math.max(e-6,0),d=Math.min(e+6,t.length);for(let p=l;p<d;p++){const g=p+1;r.push(`${g===e?">":" "} ${g}: ${t[p]}`)}return r.join("\n")}(m.getShaderSource(e),p)}return l}function Ch(m,e){const t=function G_(m){switch(m){case gs:return["Linear","( value )"];case Ai:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",m),["Linear","( value )"]}}(e);return"vec4 "+m+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function yg(m,e){let t;switch(e){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="OptimizedCineon";break;case 4:t="ACESFilmic";break;case 5:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+m+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function Yl(m){return""!==m}function wg(m,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return m.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Dg(m,e){return m.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Mv=/^[ \t]*#include +<([\w\d./]+)>/gm;function Hf(m){return m.replace(Mv,W_)}function W_(m,e){const t=li[e];if(void 0===t)throw new Error("Can not resolve #include <"+e+">");return Hf(t)}const Mg=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Cg(m){return m.replace(Mg,Cy)}function Cy(m,e,t,r){let l="";for(let d=parseInt(e);d<parseInt(t);d++)l+=r.replace(/\[\s*i\s*\]/g,"[ "+d+" ]").replace(/UNROLLED_LOOP_INDEX/g,d);return l}function Sg(m){let e="precision "+m.precision+" float;\nprecision "+m.precision+" int;";return"highp"===m.precision?e+="\n#define HIGH_PRECISION":"mediump"===m.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===m.precision&&(e+="\n#define LOW_PRECISION"),e}function Ev(m,e,t,r){const l=m.getContext(),d=t.defines;let p=t.vertexShader,g=t.fragmentShader;const y=function j_(m){let e="SHADOWMAP_TYPE_BASIC";return 1===m.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===m.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===m.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(t),b=function $_(m){let e="ENVMAP_TYPE_CUBE";if(m.envMap)switch(m.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),M=function Cv(m){let e="ENVMAP_MODE_REFLECTION";return m.envMap&&302===m.envMapMode&&(e="ENVMAP_MODE_REFRACTION"),e}(t),T=function Sv(m){let e="ENVMAP_BLENDING_NONE";if(m.envMap)switch(m.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(t),E=function ki(m){const e=m.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:r,maxMip:t}}(t),I=t.isWebGL2?"":function bg(m){return[m.extensionDerivatives||m.envMapCubeUVHeight||m.bumpMap||m.tangentSpaceNormalMap||m.clearcoatNormalMap||m.flatShading||"physical"===m.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(m.extensionFragDepth||m.logarithmicDepthBuffer)&&m.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",m.extensionDrawBuffers&&m.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(m.extensionShaderTextureLOD||m.envMap||m.transmission)&&m.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Yl).join("\n")}(t),F=function z_(m){const e=[];for(const t in m){const r=m[t];!1!==r&&e.push("#define "+t+" "+r)}return e.join("\n")}(d),N=l.createProgram();let L,W,z=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(L=[F].filter(Yl).join("\n"),L.length>0&&(L+="\n"),W=[I,F].filter(Yl).join("\n"),W.length>0&&(W+="\n")):(L=[Sg(t),"#define SHADER_NAME "+t.shaderName,F,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+M:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+y:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Yl).join("\n"),W=[I,Sg(t),"#define SHADER_NAME "+t.shaderName,F,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+b:"",t.envMap?"#define "+M:"",t.envMap?"#define "+T:"",E?"#define CUBEUV_TEXEL_WIDTH "+E.texelWidth:"",E?"#define CUBEUV_TEXEL_HEIGHT "+E.texelHeight:"",E?"#define CUBEUV_MAX_MIP "+E.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+y:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?li.tonemapping_pars_fragment:"",0!==t.toneMapping?yg("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",li.encodings_pars_fragment,Ch("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(Yl).join("\n")),p=Hf(p),p=wg(p,t),p=Dg(p,t),g=Hf(g),g=wg(g,t),g=Dg(g,t),p=Cg(p),g=Cg(g),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(z="#version 300 es\n",L=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+L,W=["#define varying in",t.glslVersion===V?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===V?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+W);const j=z+W+g,ee=_g(l,35633,z+L+p),ie=_g(l,35632,j);if(l.attachShader(N,ee),l.attachShader(N,ie),void 0!==t.index0AttributeName?l.bindAttribLocation(N,0,t.index0AttributeName):!0===t.morphTargets&&l.bindAttribLocation(N,0,"position"),l.linkProgram(N),m.debug.checkShaderErrors){const re=l.getProgramInfoLog(N).trim(),ve=l.getShaderInfoLog(ee).trim(),We=l.getShaderInfoLog(ie).trim();let pt=!0,Fe=!0;if(!1===l.getProgramParameter(N,35714)){pt=!1;const De=Mh(l,ee,"vertex"),Ze=Mh(l,ie,"fragment");console.error("THREE.WebGLProgram: Shader Error "+l.getError()+" - VALIDATE_STATUS "+l.getProgramParameter(N,35715)+"\n\nProgram Info Log: "+re+"\n"+De+"\n"+Ze)}else""!==re?console.warn("THREE.WebGLProgram: Program Info Log:",re):(""===ve||""===We)&&(Fe=!1);Fe&&(this.diagnostics={runnable:pt,programLog:re,vertexShader:{log:ve,prefix:L},fragmentShader:{log:We,prefix:W}})}let fe,X;return l.deleteShader(ee),l.deleteShader(ie),this.getUniforms=function(){return void 0===fe&&(fe=new Dh(l,N)),fe},this.getAttributes=function(){return void 0===X&&(X=function xg(m,e){const t={},r=m.getProgramParameter(e,35721);for(let l=0;l<r;l++){const d=m.getActiveAttrib(e,l),p=d.name;let g=1;35674===d.type&&(g=2),35675===d.type&&(g=3),35676===d.type&&(g=4),t[p]={type:d.type,location:m.getAttribLocation(e,p),locationSize:g}}return t}(l,N)),X},this.destroy=function(){r.releaseStatesOfProgram(this),l.deleteProgram(N),this.program=void 0},this.name=t.shaderName,this.id=H_++,this.cacheKey=e,this.usedTimes=1,this.program=N,this.vertexShader=ee,this.fragmentShader=ie,this}let Y_=0;class Tv{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const r=e.fragmentShader,l=this._getShaderStage(e.vertexShader),d=this._getShaderStage(r),p=this._getShaderCacheForMaterial(e);return!1===p.has(l)&&(p.add(l),l.usedTimes++),!1===p.has(d)&&(p.add(d),d.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,0===r.usedTimes&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return void 0===r&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return void 0===r&&(r=new Av(e),t.set(e,r)),r}}class Av{constructor(e){this.id=Y_++,this.code=e,this.usedTimes=0}}function Sh(m,e,t,r,l,d,p){const g=new Ka,y=new Tv,b=[],M=l.isWebGL2,T=l.logarithmicDepthBuffer,E=l.vertexTextures;let I=l.precision;const F={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function N(X,re,ve,We,pt){const Fe=We.fog,De=pt.geometry,_t=(X.isMeshStandardMaterial?t:e).get(X.envMap||(X.isMeshStandardMaterial?We.environment:null)),Nt=_t&&306===_t.mapping?_t.image.height:null,ft=F[X.type];null!==X.precision&&(I=l.getMaxPrecision(X.precision),I!==X.precision&&console.warn("THREE.WebGLProgram.getParameters:",X.precision,"not supported, using",I,"instead."));const wt=De.morphAttributes.position||De.morphAttributes.normal||De.morphAttributes.color,At=void 0!==wt?wt.length:0;let Re,ct,Rt,Oe,It=0;if(void 0!==De.morphAttributes.position&&(It=1),void 0!==De.morphAttributes.normal&&(It=2),void 0!==De.morphAttributes.color&&(It=3),ft){const zn=ol[ft];Re=zn.vertexShader,ct=zn.fragmentShader}else Re=X.vertexShader,ct=X.fragmentShader,y.update(X),Rt=y.getVertexShaderID(X),Oe=y.getFragmentShaderID(X);const en=m.getRenderTarget(),tn=X.clearcoat>0,mn=X.iridescence>0;return{isWebGL2:M,shaderID:ft,shaderName:X.type,vertexShader:Re,fragmentShader:ct,defines:X.defines,customVertexShaderID:Rt,customFragmentShaderID:Oe,isRawShaderMaterial:!0===X.isRawShaderMaterial,glslVersion:X.glslVersion,precision:I,instancing:!0===pt.isInstancedMesh,instancingColor:!0===pt.isInstancedMesh&&null!==pt.instanceColor,supportsVertexTextures:E,outputEncoding:null===en?m.outputEncoding:!0===en.isXRRenderTarget?en.texture.encoding:gs,map:!!X.map,matcap:!!X.matcap,envMap:!!_t,envMapMode:_t&&_t.mapping,envMapCubeUVHeight:Nt,lightMap:!!X.lightMap,aoMap:!!X.aoMap,emissiveMap:!!X.emissiveMap,bumpMap:!!X.bumpMap,normalMap:!!X.normalMap,objectSpaceNormalMap:1===X.normalMapType,tangentSpaceNormalMap:0===X.normalMapType,decodeVideoTexture:!!X.map&&!0===X.map.isVideoTexture&&X.map.encoding===Ai,clearcoat:tn,clearcoatMap:tn&&!!X.clearcoatMap,clearcoatRoughnessMap:tn&&!!X.clearcoatRoughnessMap,clearcoatNormalMap:tn&&!!X.clearcoatNormalMap,iridescence:mn,iridescenceMap:mn&&!!X.iridescenceMap,iridescenceThicknessMap:mn&&!!X.iridescenceThicknessMap,displacementMap:!!X.displacementMap,roughnessMap:!!X.roughnessMap,metalnessMap:!!X.metalnessMap,specularMap:!!X.specularMap,specularIntensityMap:!!X.specularIntensityMap,specularColorMap:!!X.specularColorMap,opaque:!1===X.transparent&&1===X.blending,alphaMap:!!X.alphaMap,alphaTest:X.alphaTest>0,gradientMap:!!X.gradientMap,sheen:X.sheen>0,sheenColorMap:!!X.sheenColorMap,sheenRoughnessMap:!!X.sheenRoughnessMap,transmission:X.transmission>0,transmissionMap:!!X.transmissionMap,thicknessMap:!!X.thicknessMap,combine:X.combine,vertexTangents:!!X.normalMap&&!!De.attributes.tangent,vertexColors:X.vertexColors,vertexAlphas:!0===X.vertexColors&&!!De.attributes.color&&4===De.attributes.color.itemSize,vertexUvs:!!(X.map||X.bumpMap||X.normalMap||X.specularMap||X.alphaMap||X.emissiveMap||X.roughnessMap||X.metalnessMap||X.clearcoatMap||X.clearcoatRoughnessMap||X.clearcoatNormalMap||X.iridescenceMap||X.iridescenceThicknessMap||X.displacementMap||X.transmissionMap||X.thicknessMap||X.specularIntensityMap||X.specularColorMap||X.sheenColorMap||X.sheenRoughnessMap),uvsVertexOnly:!(X.map||X.bumpMap||X.normalMap||X.specularMap||X.alphaMap||X.emissiveMap||X.roughnessMap||X.metalnessMap||X.clearcoatNormalMap||X.iridescenceMap||X.iridescenceThicknessMap||X.transmission>0||X.transmissionMap||X.thicknessMap||X.specularIntensityMap||X.specularColorMap||X.sheen>0||X.sheenColorMap||X.sheenRoughnessMap||!X.displacementMap),fog:!!Fe,useFog:!0===X.fog,fogExp2:Fe&&Fe.isFogExp2,flatShading:!!X.flatShading,sizeAttenuation:X.sizeAttenuation,logarithmicDepthBuffer:T,skinning:!0===pt.isSkinnedMesh,morphTargets:void 0!==De.morphAttributes.position,morphNormals:void 0!==De.morphAttributes.normal,morphColors:void 0!==De.morphAttributes.color,morphTargetsCount:At,morphTextureStride:It,numDirLights:re.directional.length,numPointLights:re.point.length,numSpotLights:re.spot.length,numSpotLightMaps:re.spotLightMap.length,numRectAreaLights:re.rectArea.length,numHemiLights:re.hemi.length,numDirLightShadows:re.directionalShadowMap.length,numPointLightShadows:re.pointShadowMap.length,numSpotLightShadows:re.spotShadowMap.length,numSpotLightShadowsWithMaps:re.numSpotLightShadowsWithMaps,numClippingPlanes:p.numPlanes,numClipIntersection:p.numIntersection,dithering:X.dithering,shadowMapEnabled:m.shadowMap.enabled&&ve.length>0,shadowMapType:m.shadowMap.type,toneMapping:X.toneMapped?m.toneMapping:0,useLegacyLights:m.useLegacyLights,premultipliedAlpha:X.premultipliedAlpha,doubleSided:2===X.side,flipSided:1===X.side,useDepthPacking:!!X.depthPacking,depthPacking:X.depthPacking||0,index0AttributeName:X.index0AttributeName,extensionDerivatives:X.extensions&&X.extensions.derivatives,extensionFragDepth:X.extensions&&X.extensions.fragDepth,extensionDrawBuffers:X.extensions&&X.extensions.drawBuffers,extensionShaderTextureLOD:X.extensions&&X.extensions.shaderTextureLOD,rendererExtensionFragDepth:M||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:M||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:M||r.has("EXT_shader_texture_lod"),customProgramCacheKey:X.customProgramCacheKey()}},getProgramCacheKey:function L(X){const re=[];if(X.shaderID?re.push(X.shaderID):(re.push(X.customVertexShaderID),re.push(X.customFragmentShaderID)),void 0!==X.defines)for(const ve in X.defines)re.push(ve),re.push(X.defines[ve]);return!1===X.isRawShaderMaterial&&(function W(X,re){X.push(re.precision),X.push(re.outputEncoding),X.push(re.envMapMode),X.push(re.envMapCubeUVHeight),X.push(re.combine),X.push(re.vertexUvs),X.push(re.fogExp2),X.push(re.sizeAttenuation),X.push(re.morphTargetsCount),X.push(re.morphAttributeCount),X.push(re.numDirLights),X.push(re.numPointLights),X.push(re.numSpotLights),X.push(re.numSpotLightMaps),X.push(re.numHemiLights),X.push(re.numRectAreaLights),X.push(re.numDirLightShadows),X.push(re.numPointLightShadows),X.push(re.numSpotLightShadows),X.push(re.numSpotLightShadowsWithMaps),X.push(re.shadowMapType),X.push(re.toneMapping),X.push(re.numClippingPlanes),X.push(re.numClipIntersection),X.push(re.depthPacking)}(re,X),function z(X,re){g.disableAll(),re.isWebGL2&&g.enable(0),re.supportsVertexTextures&&g.enable(1),re.instancing&&g.enable(2),re.instancingColor&&g.enable(3),re.map&&g.enable(4),re.matcap&&g.enable(5),re.envMap&&g.enable(6),re.lightMap&&g.enable(7),re.aoMap&&g.enable(8),re.emissiveMap&&g.enable(9),re.bumpMap&&g.enable(10),re.normalMap&&g.enable(11),re.objectSpaceNormalMap&&g.enable(12),re.tangentSpaceNormalMap&&g.enable(13),re.clearcoat&&g.enable(14),re.clearcoatMap&&g.enable(15),re.clearcoatRoughnessMap&&g.enable(16),re.clearcoatNormalMap&&g.enable(17),re.iridescence&&g.enable(18),re.iridescenceMap&&g.enable(19),re.iridescenceThicknessMap&&g.enable(20),re.displacementMap&&g.enable(21),re.specularMap&&g.enable(22),re.roughnessMap&&g.enable(23),re.metalnessMap&&g.enable(24),re.gradientMap&&g.enable(25),re.alphaMap&&g.enable(26),re.alphaTest&&g.enable(27),re.vertexColors&&g.enable(28),re.vertexAlphas&&g.enable(29),re.vertexUvs&&g.enable(30),re.vertexTangents&&g.enable(31),re.uvsVertexOnly&&g.enable(32),X.push(g.mask),g.disableAll(),re.fog&&g.enable(0),re.useFog&&g.enable(1),re.flatShading&&g.enable(2),re.logarithmicDepthBuffer&&g.enable(3),re.skinning&&g.enable(4),re.morphTargets&&g.enable(5),re.morphNormals&&g.enable(6),re.morphColors&&g.enable(7),re.premultipliedAlpha&&g.enable(8),re.shadowMapEnabled&&g.enable(9),re.useLegacyLights&&g.enable(10),re.doubleSided&&g.enable(11),re.flipSided&&g.enable(12),re.useDepthPacking&&g.enable(13),re.dithering&&g.enable(14),re.specularIntensityMap&&g.enable(15),re.specularColorMap&&g.enable(16),re.transmission&&g.enable(17),re.transmissionMap&&g.enable(18),re.thicknessMap&&g.enable(19),re.sheen&&g.enable(20),re.sheenColorMap&&g.enable(21),re.sheenRoughnessMap&&g.enable(22),re.decodeVideoTexture&&g.enable(23),re.opaque&&g.enable(24),X.push(g.mask)}(re,X),re.push(m.outputEncoding)),re.push(X.customProgramCacheKey),re.join()},getUniforms:function G(X){const re=F[X.type];let ve;return ve=re?Nm.clone(ol[re].uniforms):X.uniforms,ve},acquireProgram:function j(X,re){let ve;for(let We=0,pt=b.length;We<pt;We++){const Fe=b[We];if(Fe.cacheKey===re){ve=Fe,++ve.usedTimes;break}}return void 0===ve&&(ve=new Ev(m,re,X,d),b.push(ve)),ve},releaseProgram:function ee(X){if(0==--X.usedTimes){const re=b.indexOf(X);b[re]=b[b.length-1],b.pop(),X.destroy()}},releaseShaderCache:function ie(X){y.remove(X)},programs:b,dispose:function fe(){y.dispose()}}}function Eg(){let m=new WeakMap;return{get:function e(d){let p=m.get(d);return void 0===p&&(p={},m.set(d,p)),p},remove:function t(d){m.delete(d)},update:function r(d,p,g){m.get(d)[p]=g},dispose:function l(){m=new WeakMap}}}function Tg(m,e){return m.groupOrder!==e.groupOrder?m.groupOrder-e.groupOrder:m.renderOrder!==e.renderOrder?m.renderOrder-e.renderOrder:m.material.id!==e.material.id?m.material.id-e.material.id:m.z!==e.z?m.z-e.z:m.id-e.id}function Ag(m,e){return m.groupOrder!==e.groupOrder?m.groupOrder-e.groupOrder:m.renderOrder!==e.renderOrder?m.renderOrder-e.renderOrder:m.z!==e.z?e.z-m.z:m.id-e.id}function Ng(){const m=[];let e=0;const t=[],r=[],l=[];function p(T,E,I,F,N,L){let W=m[e];return void 0===W?(W={id:T.id,object:T,geometry:E,material:I,groupOrder:F,renderOrder:T.renderOrder,z:N,group:L},m[e]=W):(W.id=T.id,W.object=T,W.geometry=E,W.material=I,W.groupOrder=F,W.renderOrder=T.renderOrder,W.z=N,W.group=L),e++,W}return{opaque:t,transmissive:r,transparent:l,init:function d(){e=0,t.length=0,r.length=0,l.length=0},push:function g(T,E,I,F,N,L){const W=p(T,E,I,F,N,L);I.transmission>0?r.push(W):!0===I.transparent?l.push(W):t.push(W)},unshift:function y(T,E,I,F,N,L){const W=p(T,E,I,F,N,L);I.transmission>0?r.unshift(W):!0===I.transparent?l.unshift(W):t.unshift(W)},finish:function M(){for(let T=e,E=m.length;T<E;T++){const I=m[T];if(null===I.id)break;I.id=null,I.object=null,I.geometry=null,I.material=null,I.group=null}},sort:function b(T,E){t.length>1&&t.sort(T||Tg),r.length>1&&r.sort(E||Ag),l.length>1&&l.sort(E||Ag)}}}function Ig(){let m=new WeakMap;return{get:function e(r,l){const d=m.get(r);let p;return void 0===d?(p=new Ng,m.set(r,[p])):l>=d.length?(p=new Ng,d.push(p)):p=d[l],p},dispose:function t(){m=new WeakMap}}}function Kn(){const m={};return{get:function(e){if(void 0!==m[e.id])return m[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ae,color:new St};break;case"SpotLight":t={position:new ae,direction:new ae,color:new St,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ae,color:new St,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ae,skyColor:new St,groundColor:new St};break;case"RectAreaLight":t={color:new St,position:new ae,halfWidth:new ae,halfHeight:new ae}}return m[e.id]=t,t}}}let Og=0;function Pg(m,e){return(e.castShadow?2:0)-(m.castShadow?2:0)+(e.map?1:0)-(m.map?1:0)}function q_(m,e){const t=new Kn,r=function Rg(){const m={};return{get:function(e){if(void 0!==m[e.id])return m[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gt};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gt,shadowCameraNear:1,shadowCameraFar:1e3}}return m[e.id]=t,t}}}(),l={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let M=0;M<9;M++)l.probe.push(new ae);const d=new ae,p=new ni,g=new ni;return{setup:function y(M,T){let E=0,I=0,F=0;for(let We=0;We<9;We++)l.probe[We].set(0,0,0);let N=0,L=0,W=0,z=0,G=0,j=0,ee=0,ie=0,fe=0,X=0;M.sort(Pg);const re=!0===T?Math.PI:1;for(let We=0,pt=M.length;We<pt;We++){const Fe=M[We],De=Fe.color,Ze=Fe.intensity,_t=Fe.distance,Nt=Fe.shadow&&Fe.shadow.map?Fe.shadow.map.texture:null;if(Fe.isAmbientLight)E+=De.r*Ze*re,I+=De.g*Ze*re,F+=De.b*Ze*re;else if(Fe.isLightProbe)for(let ft=0;ft<9;ft++)l.probe[ft].addScaledVector(Fe.sh.coefficients[ft],Ze);else if(Fe.isDirectionalLight){const ft=t.get(Fe);if(ft.color.copy(Fe.color).multiplyScalar(Fe.intensity*re),Fe.castShadow){const wt=Fe.shadow,At=r.get(Fe);At.shadowBias=wt.bias,At.shadowNormalBias=wt.normalBias,At.shadowRadius=wt.radius,At.shadowMapSize=wt.mapSize,l.directionalShadow[N]=At,l.directionalShadowMap[N]=Nt,l.directionalShadowMatrix[N]=Fe.shadow.matrix,j++}l.directional[N]=ft,N++}else if(Fe.isSpotLight){const ft=t.get(Fe);ft.position.setFromMatrixPosition(Fe.matrixWorld),ft.color.copy(De).multiplyScalar(Ze*re),ft.distance=_t,ft.coneCos=Math.cos(Fe.angle),ft.penumbraCos=Math.cos(Fe.angle*(1-Fe.penumbra)),ft.decay=Fe.decay,l.spot[W]=ft;const wt=Fe.shadow;if(Fe.map&&(l.spotLightMap[fe]=Fe.map,fe++,wt.updateMatrices(Fe),Fe.castShadow&&X++),l.spotLightMatrix[W]=wt.matrix,Fe.castShadow){const At=r.get(Fe);At.shadowBias=wt.bias,At.shadowNormalBias=wt.normalBias,At.shadowRadius=wt.radius,At.shadowMapSize=wt.mapSize,l.spotShadow[W]=At,l.spotShadowMap[W]=Nt,ie++}W++}else if(Fe.isRectAreaLight){const ft=t.get(Fe);ft.color.copy(De).multiplyScalar(Ze),ft.halfWidth.set(.5*Fe.width,0,0),ft.halfHeight.set(0,.5*Fe.height,0),l.rectArea[z]=ft,z++}else if(Fe.isPointLight){const ft=t.get(Fe);if(ft.color.copy(Fe.color).multiplyScalar(Fe.intensity*re),ft.distance=Fe.distance,ft.decay=Fe.decay,Fe.castShadow){const wt=Fe.shadow,At=r.get(Fe);At.shadowBias=wt.bias,At.shadowNormalBias=wt.normalBias,At.shadowRadius=wt.radius,At.shadowMapSize=wt.mapSize,At.shadowCameraNear=wt.camera.near,At.shadowCameraFar=wt.camera.far,l.pointShadow[L]=At,l.pointShadowMap[L]=Nt,l.pointShadowMatrix[L]=Fe.shadow.matrix,ee++}l.point[L]=ft,L++}else if(Fe.isHemisphereLight){const ft=t.get(Fe);ft.skyColor.copy(Fe.color).multiplyScalar(Ze*re),ft.groundColor.copy(Fe.groundColor).multiplyScalar(Ze*re),l.hemi[G]=ft,G++}}z>0&&(e.isWebGL2||!0===m.has("OES_texture_float_linear")?(l.rectAreaLTC1=Yt.LTC_FLOAT_1,l.rectAreaLTC2=Yt.LTC_FLOAT_2):!0===m.has("OES_texture_half_float_linear")?(l.rectAreaLTC1=Yt.LTC_HALF_1,l.rectAreaLTC2=Yt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),l.ambient[0]=E,l.ambient[1]=I,l.ambient[2]=F;const ve=l.hash;(ve.directionalLength!==N||ve.pointLength!==L||ve.spotLength!==W||ve.rectAreaLength!==z||ve.hemiLength!==G||ve.numDirectionalShadows!==j||ve.numPointShadows!==ee||ve.numSpotShadows!==ie||ve.numSpotMaps!==fe)&&(l.directional.length=N,l.spot.length=W,l.rectArea.length=z,l.point.length=L,l.hemi.length=G,l.directionalShadow.length=j,l.directionalShadowMap.length=j,l.pointShadow.length=ee,l.pointShadowMap.length=ee,l.spotShadow.length=ie,l.spotShadowMap.length=ie,l.directionalShadowMatrix.length=j,l.pointShadowMatrix.length=ee,l.spotLightMatrix.length=ie+fe-X,l.spotLightMap.length=fe,l.numSpotLightShadowsWithMaps=X,ve.directionalLength=N,ve.pointLength=L,ve.spotLength=W,ve.rectAreaLength=z,ve.hemiLength=G,ve.numDirectionalShadows=j,ve.numPointShadows=ee,ve.numSpotShadows=ie,ve.numSpotMaps=fe,l.version=Og++)},setupView:function b(M,T){let E=0,I=0,F=0,N=0,L=0;const W=T.matrixWorldInverse;for(let z=0,G=M.length;z<G;z++){const j=M[z];if(j.isDirectionalLight){const ee=l.directional[E];ee.direction.setFromMatrixPosition(j.matrixWorld),d.setFromMatrixPosition(j.target.matrixWorld),ee.direction.sub(d),ee.direction.transformDirection(W),E++}else if(j.isSpotLight){const ee=l.spot[F];ee.position.setFromMatrixPosition(j.matrixWorld),ee.position.applyMatrix4(W),ee.direction.setFromMatrixPosition(j.matrixWorld),d.setFromMatrixPosition(j.target.matrixWorld),ee.direction.sub(d),ee.direction.transformDirection(W),F++}else if(j.isRectAreaLight){const ee=l.rectArea[N];ee.position.setFromMatrixPosition(j.matrixWorld),ee.position.applyMatrix4(W),g.identity(),p.copy(j.matrixWorld),p.premultiply(W),g.extractRotation(p),ee.halfWidth.set(.5*j.width,0,0),ee.halfHeight.set(0,.5*j.height,0),ee.halfWidth.applyMatrix4(g),ee.halfHeight.applyMatrix4(g),N++}else if(j.isPointLight){const ee=l.point[I];ee.position.setFromMatrixPosition(j.matrixWorld),ee.position.applyMatrix4(W),I++}else if(j.isHemisphereLight){const ee=l.hemi[L];ee.direction.setFromMatrixPosition(j.matrixWorld),ee.direction.transformDirection(W),L++}}},state:l}}function Lg(m,e){const t=new q_(m,e),r=[],l=[];return{init:function d(){r.length=0,l.length=0},state:{lightsArray:r,shadowsArray:l,lights:t},setupLights:function y(T){t.setup(r,T)},setupLightsView:function b(T){t.setupView(r,T)},pushLight:function p(T){r.push(T)},pushShadow:function g(T){l.push(T)}}}function Fg(m,e){let t=new WeakMap;return{get:function r(d,p=0){const g=t.get(d);let y;return void 0===g?(y=new Lg(m,e),t.set(d,[y])):p>=g.length?(y=new Lg(m,e),g.push(y)):y=g[p],y},dispose:function l(){t=new WeakMap}}}class kg extends Kc{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Gf extends Kc{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new ae,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function J_(m,e,t){let r=new il;const l=new gt,d=new gt,p=new Fi,g=new kg({depthPacking:3201}),y=new Gf,b={},M=t.maxTextureSize,T={0:1,1:0,2:2},E=new co({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new gt},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),I=E.clone();I.defines.HORIZONTAL_PASS=1;const F=new Zn;F.setAttribute("position",new pi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const N=new Tr(F,E),L=this;function W(j,ee){const ie=e.update(N);E.defines.VSM_SAMPLES!==j.blurSamples&&(E.defines.VSM_SAMPLES=j.blurSamples,I.defines.VSM_SAMPLES=j.blurSamples,E.needsUpdate=!0,I.needsUpdate=!0),null===j.mapPass&&(j.mapPass=new Xa(l.x,l.y)),E.uniforms.shadow_pass.value=j.map.texture,E.uniforms.resolution.value=j.mapSize,E.uniforms.radius.value=j.radius,m.setRenderTarget(j.mapPass),m.clear(),m.renderBufferDirect(ee,null,ie,E,N,null),I.uniforms.shadow_pass.value=j.mapPass.texture,I.uniforms.resolution.value=j.mapSize,I.uniforms.radius.value=j.radius,m.setRenderTarget(j.map),m.clear(),m.renderBufferDirect(ee,null,ie,I,N,null)}function z(j,ee,ie,fe,X,re){let ve=null;const We=!0===ie.isPointLight?j.customDistanceMaterial:j.customDepthMaterial;if(void 0!==We)ve=We;else if(ve=!0===ie.isPointLight?y:g,m.localClippingEnabled&&!0===ee.clipShadows&&Array.isArray(ee.clippingPlanes)&&0!==ee.clippingPlanes.length||ee.displacementMap&&0!==ee.displacementScale||ee.alphaMap&&ee.alphaTest>0||ee.map&&ee.alphaTest>0){const pt=ve.uuid,Fe=ee.uuid;let De=b[pt];void 0===De&&(De={},b[pt]=De);let Ze=De[Fe];void 0===Ze&&(Ze=ve.clone(),De[Fe]=Ze),ve=Ze}return ve.visible=ee.visible,ve.wireframe=ee.wireframe,ve.side=3===re?null!==ee.shadowSide?ee.shadowSide:ee.side:null!==ee.shadowSide?ee.shadowSide:T[ee.side],ve.alphaMap=ee.alphaMap,ve.alphaTest=ee.alphaTest,ve.map=ee.map,ve.clipShadows=ee.clipShadows,ve.clippingPlanes=ee.clippingPlanes,ve.clipIntersection=ee.clipIntersection,ve.displacementMap=ee.displacementMap,ve.displacementScale=ee.displacementScale,ve.displacementBias=ee.displacementBias,ve.wireframeLinewidth=ee.wireframeLinewidth,ve.linewidth=ee.linewidth,!0===ie.isPointLight&&!0===ve.isMeshDistanceMaterial&&(ve.referencePosition.setFromMatrixPosition(ie.matrixWorld),ve.nearDistance=fe,ve.farDistance=X),ve}function G(j,ee,ie,fe,X){if(!1===j.visible)return;if(j.layers.test(ee.layers)&&(j.isMesh||j.isLine||j.isPoints)&&(j.castShadow||j.receiveShadow&&3===X)&&(!j.frustumCulled||r.intersectsObject(j))){j.modelViewMatrix.multiplyMatrices(ie.matrixWorldInverse,j.matrixWorld);const We=e.update(j),pt=j.material;if(Array.isArray(pt)){const Fe=We.groups;for(let De=0,Ze=Fe.length;De<Ze;De++){const _t=Fe[De],Nt=pt[_t.materialIndex];if(Nt&&Nt.visible){const ft=z(j,Nt,fe,ie.near,ie.far,X);m.renderBufferDirect(ie,null,We,ft,j,_t)}}}else if(pt.visible){const Fe=z(j,pt,fe,ie.near,ie.far,X);m.renderBufferDirect(ie,null,We,Fe,j,null)}}const ve=j.children;for(let We=0,pt=ve.length;We<pt;We++)G(ve[We],ee,ie,fe,X)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(j,ee,ie){if(!1===L.enabled||!1===L.autoUpdate&&!1===L.needsUpdate||0===j.length)return;const fe=m.getRenderTarget(),X=m.getActiveCubeFace(),re=m.getActiveMipmapLevel(),ve=m.state;ve.setBlending(0),ve.buffers.color.setClear(1,1,1,1),ve.buffers.depth.setTest(!0),ve.setScissorTest(!1);for(let We=0,pt=j.length;We<pt;We++){const Fe=j[We],De=Fe.shadow;if(void 0===De){console.warn("THREE.WebGLShadowMap:",Fe,"has no shadow.");continue}if(!1===De.autoUpdate&&!1===De.needsUpdate)continue;l.copy(De.mapSize);const Ze=De.getFrameExtents();l.multiply(Ze),d.copy(De.mapSize),(l.x>M||l.y>M)&&(l.x>M&&(d.x=Math.floor(M/Ze.x),l.x=d.x*Ze.x,De.mapSize.x=d.x),l.y>M&&(d.y=Math.floor(M/Ze.y),l.y=d.y*Ze.y,De.mapSize.y=d.y)),null===De.map&&(De.map=new Xa(l.x,l.y,3!==this.type?{minFilter:fi,magFilter:fi}:{}),De.map.texture.name=Fe.name+".shadowMap",De.camera.updateProjectionMatrix()),m.setRenderTarget(De.map),m.clear();const _t=De.getViewportCount();for(let Nt=0;Nt<_t;Nt++){const ft=De.getViewport(Nt);p.set(d.x*ft.x,d.y*ft.y,d.x*ft.z,d.y*ft.w),ve.viewport(p),De.updateMatrices(Fe,Nt),r=De.getFrustum(),G(ee,ie,De.camera,Fe,this.type)}!0!==De.isPointLightShadow&&3===this.type&&W(De,ie),De.needsUpdate=!1}L.needsUpdate=!1,m.setRenderTarget(fe,X,re)}}function zf(m,e,t){const r=t.isWebGL2,g=new function l(){let ye=!1;const st=new Fi;let Et=null;const un=new Fi(0,0,0,0);return{setMask:function(wn){Et!==wn&&!ye&&(m.colorMask(wn,wn,wn,wn),Et=wn)},setLocked:function(wn){ye=wn},setClear:function(wn,fr,Ms,Do,Ba){!0===Ba&&(wn*=Do,fr*=Do,Ms*=Do),st.set(wn,fr,Ms,Do),!1===un.equals(st)&&(m.clearColor(wn,fr,Ms,Do),un.copy(st))},reset:function(){ye=!1,Et=null,un.set(-1,0,0,0)}}},y=new function d(){let ye=!1,st=null,Et=null,un=null;return{setTest:function(wn){wn?$t(2929):tn(2929)},setMask:function(wn){st!==wn&&!ye&&(m.depthMask(wn),st=wn)},setFunc:function(wn){if(Et!==wn){switch(wn){case 0:m.depthFunc(512);break;case 1:m.depthFunc(519);break;case 2:m.depthFunc(513);break;case 3:default:m.depthFunc(515);break;case 4:m.depthFunc(514);break;case 5:m.depthFunc(518);break;case 6:m.depthFunc(516);break;case 7:m.depthFunc(517)}Et=wn}},setLocked:function(wn){ye=wn},setClear:function(wn){un!==wn&&(m.clearDepth(wn),un=wn)},reset:function(){ye=!1,st=null,Et=null,un=null}}},b=new function p(){let ye=!1,st=null,Et=null,un=null,wn=null,fr=null,Ms=null,Do=null,Ba=null;return{setTest:function(Br){ye||(Br?$t(2960):tn(2960))},setMask:function(Br){st!==Br&&!ye&&(m.stencilMask(Br),st=Br)},setFunc:function(Br,Va,ic){(Et!==Br||un!==Va||wn!==ic)&&(m.stencilFunc(Br,Va,ic),Et=Br,un=Va,wn=ic)},setOp:function(Br,Va,ic){(fr!==Br||Ms!==Va||Do!==ic)&&(m.stencilOp(Br,Va,ic),fr=Br,Ms=Va,Do=ic)},setLocked:function(Br){ye=Br},setClear:function(Br){Ba!==Br&&(m.clearStencil(Br),Ba=Br)},reset:function(){ye=!1,st=null,Et=null,un=null,wn=null,fr=null,Ms=null,Do=null,Ba=null}}},M=new WeakMap,T=new WeakMap;let E={},I={},F=new WeakMap,N=[],L=null,W=!1,z=null,G=null,j=null,ee=null,ie=null,fe=null,X=null,re=!1,ve=null,We=null,pt=null,Fe=null,De=null;const Ze=m.getParameter(35661);let _t=!1,Nt=0;const ft=m.getParameter(7938);-1!==ft.indexOf("WebGL")?(Nt=parseFloat(/^WebGL (\d)/.exec(ft)[1]),_t=Nt>=1):-1!==ft.indexOf("OpenGL ES")&&(Nt=parseFloat(/^OpenGL ES (\d)/.exec(ft)[1]),_t=Nt>=2);let wt=null,At={};const It=m.getParameter(3088),Re=m.getParameter(2978),ct=(new Fi).fromArray(It),Rt=(new Fi).fromArray(Re);function Oe(ye,st,Et){const un=new Uint8Array(4),wn=m.createTexture();m.bindTexture(ye,wn),m.texParameteri(ye,10241,9728),m.texParameteri(ye,10240,9728);for(let fr=0;fr<Et;fr++)m.texImage2D(st+fr,0,6408,1,1,0,6408,5121,un);return wn}const en={};function $t(ye){!0!==E[ye]&&(m.enable(ye),E[ye]=!0)}function tn(ye){!1!==E[ye]&&(m.disable(ye),E[ye]=!1)}en[3553]=Oe(3553,3553,1),en[34067]=Oe(34067,34069,6),g.setClear(0,0,0,1),y.setClear(1),b.setClear(0),$t(2929),y.setFunc(3),Jt(!1),En(1),$t(2884),Ut(0);const Ke={100:32774,101:32778,102:32779};if(r)Ke[103]=32775,Ke[104]=32776;else{const ye=e.get("EXT_blend_minmax");null!==ye&&(Ke[103]=ye.MIN_EXT,Ke[104]=ye.MAX_EXT)}const xt={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function Ut(ye,st,Et,un,wn,fr,Ms,Do){if(0!==ye){if(!1===W&&($t(3042),W=!0),5===ye)wn=wn||st,fr=fr||Et,Ms=Ms||un,(st!==G||wn!==ie)&&(m.blendEquationSeparate(Ke[st],Ke[wn]),G=st,ie=wn),(Et!==j||un!==ee||fr!==fe||Ms!==X)&&(m.blendFuncSeparate(xt[Et],xt[un],xt[fr],xt[Ms]),j=Et,ee=un,fe=fr,X=Ms),z=ye,re=!1;else if(ye!==z||Do!==re){if((100!==G||100!==ie)&&(m.blendEquation(32774),G=100,ie=100),Do)switch(ye){case 1:m.blendFuncSeparate(1,771,1,771);break;case 2:m.blendFunc(1,1);break;case 3:m.blendFuncSeparate(0,769,0,1);break;case 4:m.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",ye)}else switch(ye){case 1:m.blendFuncSeparate(770,771,1,771);break;case 2:m.blendFunc(770,1);break;case 3:m.blendFuncSeparate(0,769,0,1);break;case 4:m.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",ye)}j=null,ee=null,fe=null,X=null,z=ye,re=Do}}else!0===W&&(tn(3042),W=!1)}function Jt(ye){ve!==ye&&(m.frontFace(ye?2304:2305),ve=ye)}function En(ye){0!==ye?($t(2884),ye!==We&&m.cullFace(1===ye?1029:2===ye?1028:1032)):tn(2884),We=ye}function Qn(ye,st,Et){ye?($t(32823),(Fe!==st||De!==Et)&&(m.polygonOffset(st,Et),Fe=st,De=Et)):tn(32823)}return{buffers:{color:g,depth:y,stencil:b},enable:$t,disable:tn,bindFramebuffer:function mn(ye,st){return I[ye]!==st&&(m.bindFramebuffer(ye,st),I[ye]=st,r&&(36009===ye&&(I[36160]=st),36160===ye&&(I[36009]=st)),!0)},drawBuffers:function xn(ye,st){let Et=N,un=!1;if(ye)if(Et=F.get(st),void 0===Et&&(Et=[],F.set(st,Et)),ye.isWebGLMultipleRenderTargets){const wn=ye.texture;if(Et.length!==wn.length||36064!==Et[0]){for(let fr=0,Ms=wn.length;fr<Ms;fr++)Et[fr]=36064+fr;Et.length=wn.length,un=!0}}else 36064!==Et[0]&&(Et[0]=36064,un=!0);else 1029!==Et[0]&&(Et[0]=1029,un=!0);un&&(t.isWebGL2?m.drawBuffers(Et):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Et))},useProgram:function zn(ye){return L!==ye&&(m.useProgram(ye),L=ye,!0)},setBlending:Ut,setMaterial:function Cn(ye,st){2===ye.side?tn(2884):$t(2884);let Et=1===ye.side;st&&(Et=!Et),Jt(Et),1===ye.blending&&!1===ye.transparent?Ut(0):Ut(ye.blending,ye.blendEquation,ye.blendSrc,ye.blendDst,ye.blendEquationAlpha,ye.blendSrcAlpha,ye.blendDstAlpha,ye.premultipliedAlpha),y.setFunc(ye.depthFunc),y.setTest(ye.depthTest),y.setMask(ye.depthWrite),g.setMask(ye.colorWrite);const un=ye.stencilWrite;b.setTest(un),un&&(b.setMask(ye.stencilWriteMask),b.setFunc(ye.stencilFunc,ye.stencilRef,ye.stencilFuncMask),b.setOp(ye.stencilFail,ye.stencilZFail,ye.stencilZPass)),Qn(ye.polygonOffset,ye.polygonOffsetFactor,ye.polygonOffsetUnits),!0===ye.alphaToCoverage?$t(32926):tn(32926)},setFlipSided:Jt,setCullFace:En,setLineWidth:function Ln(ye){ye!==pt&&(_t&&m.lineWidth(ye),pt=ye)},setPolygonOffset:Qn,setScissorTest:function hr(ye){ye?$t(3089):tn(3089)},activeTexture:function Wi(ye){void 0===ye&&(ye=33984+Ze-1),wt!==ye&&(m.activeTexture(ye),wt=ye)},bindTexture:function de(ye,st,Et){void 0===Et&&(Et=null===wt?33984+Ze-1:wt);let un=At[Et];void 0===un&&(un={type:void 0,texture:void 0},At[Et]=un),(un.type!==ye||un.texture!==st)&&(wt!==Et&&(m.activeTexture(Et),wt=Et),m.bindTexture(ye,st||en[ye]),un.type=ye,un.texture=st)},unbindTexture:function te(){const ye=At[wt];void 0!==ye&&void 0!==ye.type&&(m.bindTexture(ye.type,null),ye.type=void 0,ye.texture=void 0)},compressedTexImage2D:function Je(){try{m.compressedTexImage2D.apply(m,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}},compressedTexImage3D:function Ft(){try{m.compressedTexImage3D.apply(m,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}},texImage2D:function Dn(){try{m.texImage2D.apply(m,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}},texImage3D:function ei(){try{m.texImage3D.apply(m,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}},updateUBOMapping:function Ri(ye,st){let Et=T.get(st);void 0===Et&&(Et=new WeakMap,T.set(st,Et));let un=Et.get(ye);void 0===un&&(un=m.getUniformBlockIndex(st,ye.name),Et.set(ye,un))},uniformBlockBinding:function Nr(ye,st){const un=T.get(st).get(ye);M.get(st)!==un&&(m.uniformBlockBinding(st,un,ye.__bindingPointIndex),M.set(st,un))},texStorage2D:function mt(){try{m.texStorage2D.apply(m,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}},texStorage3D:function Wn(){try{m.texStorage3D.apply(m,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}},texSubImage2D:function Ht(){try{m.texSubImage2D.apply(m,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}},texSubImage3D:function rn(){try{m.texSubImage3D.apply(m,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}},compressedTexSubImage2D:function An(){try{m.compressedTexSubImage2D.apply(m,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}},compressedTexSubImage3D:function cn(){try{m.compressedTexSubImage3D.apply(m,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}},scissor:function jn(ye){!1===ct.equals(ye)&&(m.scissor(ye.x,ye.y,ye.z,ye.w),ct.copy(ye))},viewport:function Fn(ye){!1===Rt.equals(ye)&&(m.viewport(ye.x,ye.y,ye.z,ye.w),Rt.copy(ye))},reset:function Vs(){m.disable(3042),m.disable(2884),m.disable(2929),m.disable(32823),m.disable(3089),m.disable(2960),m.disable(32926),m.blendEquation(32774),m.blendFunc(1,0),m.blendFuncSeparate(1,0,1,0),m.colorMask(!0,!0,!0,!0),m.clearColor(0,0,0,0),m.depthMask(!0),m.depthFunc(513),m.clearDepth(1),m.stencilMask(4294967295),m.stencilFunc(519,0,4294967295),m.stencilOp(7680,7680,7680),m.clearStencil(0),m.cullFace(1029),m.frontFace(2305),m.polygonOffset(0,0),m.activeTexture(33984),m.bindFramebuffer(36160,null),!0===r&&(m.bindFramebuffer(36009,null),m.bindFramebuffer(36008,null)),m.useProgram(null),m.lineWidth(1),m.scissor(0,0,m.canvas.width,m.canvas.height),m.viewport(0,0,m.canvas.width,m.canvas.height),E={},wt=null,At={},I={},F=new WeakMap,N=[],L=null,W=!1,z=null,G=null,j=null,ee=null,ie=null,fe=null,X=null,re=!1,ve=null,We=null,pt=null,Fe=null,De=null,ct.set(0,0,m.canvas.width,m.canvas.height),Rt.set(0,0,m.canvas.width,m.canvas.height),g.reset(),y.reset(),b.reset()}}}function Bg(m,e,t,r,l,d,p){const g=l.isWebGL2,y=l.maxTextures,b=l.maxCubemapSize,M=l.maxTextureSize,T=l.maxSamples,E=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,I=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),F=new WeakMap;let N;const L=new WeakMap;let W=!1;try{W=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function z(de,te){return W?new OffscreenCanvas(de,te):As("canvas")}function G(de,te,Je,Ft){let Ht=1;if((de.width>Ft||de.height>Ft)&&(Ht=Ft/Math.max(de.width,de.height)),Ht<1||!0===te){if(typeof HTMLImageElement<"u"&&de instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&de instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&de instanceof ImageBitmap){const rn=te?es:Math.floor,An=rn(Ht*de.width),cn=rn(Ht*de.height);void 0===N&&(N=z(An,cn));const mt=Je?z(An,cn):N;return mt.width=An,mt.height=cn,mt.getContext("2d").drawImage(de,0,0,An,cn),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+de.width+"x"+de.height+") to ("+An+"x"+cn+")."),mt}return"data"in de&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+de.width+"x"+de.height+")."),de}return de}function j(de){return Yo(de.width)&&Yo(de.height)}function ie(de,te){return de.generateMipmaps&&te&&de.minFilter!==fi&&de.minFilter!==Rn}function fe(de){m.generateMipmap(de)}function X(de,te,Je,Ft,Ht=!1){if(!1===g)return te;if(null!==de){if(void 0!==m[de])return m[de];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+de+"'")}let rn=te;return 6403===te&&(5126===Je&&(rn=33326),5131===Je&&(rn=33325),5121===Je&&(rn=33321)),33319===te&&(5126===Je&&(rn=33328),5131===Je&&(rn=33327),5121===Je&&(rn=33323)),6408===te&&(5126===Je&&(rn=34836),5131===Je&&(rn=34842),5121===Je&&(rn=Ft===Ai&&!1===Ht?35907:32856),32819===Je&&(rn=32854),32820===Je&&(rn=32855)),(33325===rn||33326===rn||33327===rn||33328===rn||34842===rn||34836===rn)&&e.get("EXT_color_buffer_float"),rn}function re(de,te,Je){return!0===ie(de,Je)||de.isFramebufferTexture&&de.minFilter!==fi&&de.minFilter!==Rn?Math.log2(Math.max(te.width,te.height))+1:void 0!==de.mipmaps&&de.mipmaps.length>0?de.mipmaps.length:de.isCompressedTexture&&Array.isArray(de.image)?te.mipmaps.length:1}function ve(de){return de===fi||1004===de||1005===de?9728:9729}function We(de){const te=de.target;te.removeEventListener("dispose",We),function Fe(de){const te=r.get(de);if(void 0===te.__webglInit)return;const Je=de.source,Ft=L.get(Je);if(Ft){const Ht=Ft[te.__cacheKey];Ht.usedTimes--,0===Ht.usedTimes&&De(de),0===Object.keys(Ft).length&&L.delete(Je)}r.remove(de)}(te),te.isVideoTexture&&F.delete(te)}function pt(de){const te=de.target;te.removeEventListener("dispose",pt),function Ze(de){const te=de.texture,Je=r.get(de),Ft=r.get(te);if(void 0!==Ft.__webglTexture&&(m.deleteTexture(Ft.__webglTexture),p.memory.textures--),de.depthTexture&&de.depthTexture.dispose(),de.isWebGLCubeRenderTarget)for(let Ht=0;Ht<6;Ht++)m.deleteFramebuffer(Je.__webglFramebuffer[Ht]),Je.__webglDepthbuffer&&m.deleteRenderbuffer(Je.__webglDepthbuffer[Ht]);else{if(m.deleteFramebuffer(Je.__webglFramebuffer),Je.__webglDepthbuffer&&m.deleteRenderbuffer(Je.__webglDepthbuffer),Je.__webglMultisampledFramebuffer&&m.deleteFramebuffer(Je.__webglMultisampledFramebuffer),Je.__webglColorRenderbuffer)for(let Ht=0;Ht<Je.__webglColorRenderbuffer.length;Ht++)Je.__webglColorRenderbuffer[Ht]&&m.deleteRenderbuffer(Je.__webglColorRenderbuffer[Ht]);Je.__webglDepthRenderbuffer&&m.deleteRenderbuffer(Je.__webglDepthRenderbuffer)}if(de.isWebGLMultipleRenderTargets)for(let Ht=0,rn=te.length;Ht<rn;Ht++){const An=r.get(te[Ht]);An.__webglTexture&&(m.deleteTexture(An.__webglTexture),p.memory.textures--),r.remove(te[Ht])}r.remove(te),r.remove(de)}(te)}function De(de){const te=r.get(de);m.deleteTexture(te.__webglTexture),delete L.get(de.source)[te.__cacheKey],p.memory.textures--}let _t=0;function At(de,te){const Je=r.get(de);if(de.isVideoTexture&&function hr(de){const te=p.render.frame;F.get(de)!==te&&(F.set(de,te),de.update())}(de),!1===de.isRenderTargetTexture&&de.version>0&&Je.__version!==de.version){const Ft=de.image;if(null===Ft)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==Ft.complete)return void tn(Je,de,te);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.bindTexture(3553,Je.__webglTexture,33984+te)}const Rt={[Qt]:10497,[Lt]:33071,1002:33648},Oe={[fi]:9728,1004:9984,1005:9986,[Rn]:9729,1007:9985,[Zr]:9987};function en(de,te,Je){if(Je?(m.texParameteri(de,10242,Rt[te.wrapS]),m.texParameteri(de,10243,Rt[te.wrapT]),(32879===de||35866===de)&&m.texParameteri(de,32882,Rt[te.wrapR]),m.texParameteri(de,10240,Oe[te.magFilter]),m.texParameteri(de,10241,Oe[te.minFilter])):(m.texParameteri(de,10242,33071),m.texParameteri(de,10243,33071),(32879===de||35866===de)&&m.texParameteri(de,32882,33071),(te.wrapS!==Lt||te.wrapT!==Lt)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),m.texParameteri(de,10240,ve(te.magFilter)),m.texParameteri(de,10241,ve(te.minFilter)),te.minFilter!==fi&&te.minFilter!==Rn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const Ft=e.get("EXT_texture_filter_anisotropic");if(te.magFilter===fi||1005!==te.minFilter&&te.minFilter!==Zr||te.type===wr&&!1===e.has("OES_texture_float_linear")||!1===g&&te.type===Ss&&!1===e.has("OES_texture_half_float_linear"))return;(te.anisotropy>1||r.get(te).__currentAnisotropy)&&(m.texParameterf(de,Ft.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(te.anisotropy,l.getMaxAnisotropy())),r.get(te).__currentAnisotropy=te.anisotropy)}}function $t(de,te){let Je=!1;void 0===de.__webglInit&&(de.__webglInit=!0,te.addEventListener("dispose",We));const Ft=te.source;let Ht=L.get(Ft);void 0===Ht&&(Ht={},L.set(Ft,Ht));const rn=function wt(de){const te=[];return te.push(de.wrapS),te.push(de.wrapT),te.push(de.wrapR||0),te.push(de.magFilter),te.push(de.minFilter),te.push(de.anisotropy),te.push(de.internalFormat),te.push(de.format),te.push(de.type),te.push(de.generateMipmaps),te.push(de.premultiplyAlpha),te.push(de.flipY),te.push(de.unpackAlignment),te.push(de.encoding),te.join()}(te);if(rn!==de.__cacheKey){void 0===Ht[rn]&&(Ht[rn]={texture:m.createTexture(),usedTimes:0},p.memory.textures++,Je=!0),Ht[rn].usedTimes++;const An=Ht[de.__cacheKey];void 0!==An&&(Ht[de.__cacheKey].usedTimes--,0===An.usedTimes&&De(te)),de.__cacheKey=rn,de.__webglTexture=Ht[rn].texture}return Je}function tn(de,te,Je){let Ft=3553;(te.isDataArrayTexture||te.isCompressedArrayTexture)&&(Ft=35866),te.isData3DTexture&&(Ft=32879);const Ht=$t(de,te),rn=te.source;t.bindTexture(Ft,de.__webglTexture,33984+Je);const An=r.get(rn);if(rn.version!==An.__version||!0===Ht){t.activeTexture(33984+Je),m.pixelStorei(37440,te.flipY),m.pixelStorei(37441,te.premultiplyAlpha),m.pixelStorei(3317,te.unpackAlignment),m.pixelStorei(37443,0);const cn=function ee(de){return!g&&(de.wrapS!==Lt||de.wrapT!==Lt||de.minFilter!==fi&&de.minFilter!==Rn)}(te)&&!1===j(te.image);let mt=G(te.image,cn,!1,M);mt=Wi(te,mt);const Wn=j(mt)||g,Dn=d.convert(te.format,te.encoding);let Fn,ei=d.convert(te.type),jn=X(te.internalFormat,Dn,ei,te.encoding,te.isVideoTexture);en(Ft,te,Wn);const Ri=te.mipmaps,Nr=g&&!0!==te.isVideoTexture,Vs=void 0===An.__version||!0===Ht,ye=re(te,mt,Wn);if(te.isDepthTexture)jn=6402,g?jn=te.type===wr?36012:te.type===Rr?33190:te.type===Zi?35056:33189:te.type===wr&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),te.format===Sn&&6402===jn&&1012!==te.type&&te.type!==Rr&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),te.type=Rr,ei=d.convert(te.type)),te.format===ri&&6402===jn&&(jn=34041,te.type!==Zi&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),te.type=Zi,ei=d.convert(te.type))),Vs&&(Nr?t.texStorage2D(3553,1,jn,mt.width,mt.height):t.texImage2D(3553,0,jn,mt.width,mt.height,0,Dn,ei,null));else if(te.isDataTexture)if(Ri.length>0&&Wn){Nr&&Vs&&t.texStorage2D(3553,ye,jn,Ri[0].width,Ri[0].height);for(let st=0,Et=Ri.length;st<Et;st++)Fn=Ri[st],Nr?t.texSubImage2D(3553,st,0,0,Fn.width,Fn.height,Dn,ei,Fn.data):t.texImage2D(3553,st,jn,Fn.width,Fn.height,0,Dn,ei,Fn.data);te.generateMipmaps=!1}else Nr?(Vs&&t.texStorage2D(3553,ye,jn,mt.width,mt.height),t.texSubImage2D(3553,0,0,0,mt.width,mt.height,Dn,ei,mt.data)):t.texImage2D(3553,0,jn,mt.width,mt.height,0,Dn,ei,mt.data);else if(te.isCompressedTexture)if(te.isCompressedArrayTexture){Nr&&Vs&&t.texStorage3D(35866,ye,jn,Ri[0].width,Ri[0].height,mt.depth);for(let st=0,Et=Ri.length;st<Et;st++)Fn=Ri[st],te.format!==Ti?null!==Dn?Nr?t.compressedTexSubImage3D(35866,st,0,0,0,Fn.width,Fn.height,mt.depth,Dn,Fn.data,0,0):t.compressedTexImage3D(35866,st,jn,Fn.width,Fn.height,mt.depth,0,Fn.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Nr?t.texSubImage3D(35866,st,0,0,0,Fn.width,Fn.height,mt.depth,Dn,ei,Fn.data):t.texImage3D(35866,st,jn,Fn.width,Fn.height,mt.depth,0,Dn,ei,Fn.data)}else{Nr&&Vs&&t.texStorage2D(3553,ye,jn,Ri[0].width,Ri[0].height);for(let st=0,Et=Ri.length;st<Et;st++)Fn=Ri[st],te.format!==Ti?null!==Dn?Nr?t.compressedTexSubImage2D(3553,st,0,0,Fn.width,Fn.height,Dn,Fn.data):t.compressedTexImage2D(3553,st,jn,Fn.width,Fn.height,0,Fn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Nr?t.texSubImage2D(3553,st,0,0,Fn.width,Fn.height,Dn,ei,Fn.data):t.texImage2D(3553,st,jn,Fn.width,Fn.height,0,Dn,ei,Fn.data)}else if(te.isDataArrayTexture)Nr?(Vs&&t.texStorage3D(35866,ye,jn,mt.width,mt.height,mt.depth),t.texSubImage3D(35866,0,0,0,0,mt.width,mt.height,mt.depth,Dn,ei,mt.data)):t.texImage3D(35866,0,jn,mt.width,mt.height,mt.depth,0,Dn,ei,mt.data);else if(te.isData3DTexture)Nr?(Vs&&t.texStorage3D(32879,ye,jn,mt.width,mt.height,mt.depth),t.texSubImage3D(32879,0,0,0,0,mt.width,mt.height,mt.depth,Dn,ei,mt.data)):t.texImage3D(32879,0,jn,mt.width,mt.height,mt.depth,0,Dn,ei,mt.data);else if(te.isFramebufferTexture){if(Vs)if(Nr)t.texStorage2D(3553,ye,jn,mt.width,mt.height);else{let st=mt.width,Et=mt.height;for(let un=0;un<ye;un++)t.texImage2D(3553,un,jn,st,Et,0,Dn,ei,null),st>>=1,Et>>=1}}else if(Ri.length>0&&Wn){Nr&&Vs&&t.texStorage2D(3553,ye,jn,Ri[0].width,Ri[0].height);for(let st=0,Et=Ri.length;st<Et;st++)Fn=Ri[st],Nr?t.texSubImage2D(3553,st,0,0,Dn,ei,Fn):t.texImage2D(3553,st,jn,Dn,ei,Fn);te.generateMipmaps=!1}else Nr?(Vs&&t.texStorage2D(3553,ye,jn,mt.width,mt.height),t.texSubImage2D(3553,0,0,0,Dn,ei,mt)):t.texImage2D(3553,0,jn,Dn,ei,mt);ie(te,Wn)&&fe(Ft),An.__version=rn.version,te.onUpdate&&te.onUpdate(te)}de.__version=te.version}function xn(de,te,Je,Ft,Ht){const rn=d.convert(Je.format,Je.encoding),An=d.convert(Je.type),cn=X(Je.internalFormat,rn,An,Je.encoding);r.get(te).__hasExternalTextures||(32879===Ht||35866===Ht?t.texImage3D(Ht,0,cn,te.width,te.height,te.depth,0,rn,An,null):t.texImage2D(Ht,0,cn,te.width,te.height,0,rn,An,null)),t.bindFramebuffer(36160,de),Qn(te)?E.framebufferTexture2DMultisampleEXT(36160,Ft,Ht,r.get(Je).__webglTexture,0,Ln(te)):(3553===Ht||Ht>=34069&&Ht<=34074)&&m.framebufferTexture2D(36160,Ft,Ht,r.get(Je).__webglTexture,0),t.bindFramebuffer(36160,null)}function zn(de,te,Je){if(m.bindRenderbuffer(36161,de),te.depthBuffer&&!te.stencilBuffer){let Ft=33189;if(Je||Qn(te)){const Ht=te.depthTexture;Ht&&Ht.isDepthTexture&&(Ht.type===wr?Ft=36012:Ht.type===Rr&&(Ft=33190));const rn=Ln(te);Qn(te)?E.renderbufferStorageMultisampleEXT(36161,rn,Ft,te.width,te.height):m.renderbufferStorageMultisample(36161,rn,Ft,te.width,te.height)}else m.renderbufferStorage(36161,Ft,te.width,te.height);m.framebufferRenderbuffer(36160,36096,36161,de)}else if(te.depthBuffer&&te.stencilBuffer){const Ft=Ln(te);Je&&!1===Qn(te)?m.renderbufferStorageMultisample(36161,Ft,35056,te.width,te.height):Qn(te)?E.renderbufferStorageMultisampleEXT(36161,Ft,35056,te.width,te.height):m.renderbufferStorage(36161,34041,te.width,te.height),m.framebufferRenderbuffer(36160,33306,36161,de)}else{const Ft=!0===te.isWebGLMultipleRenderTargets?te.texture:[te.texture];for(let Ht=0;Ht<Ft.length;Ht++){const rn=Ft[Ht],An=d.convert(rn.format,rn.encoding),cn=d.convert(rn.type),mt=X(rn.internalFormat,An,cn,rn.encoding),Wn=Ln(te);Je&&!1===Qn(te)?m.renderbufferStorageMultisample(36161,Wn,mt,te.width,te.height):Qn(te)?E.renderbufferStorageMultisampleEXT(36161,Wn,mt,te.width,te.height):m.renderbufferStorage(36161,mt,te.width,te.height)}}m.bindRenderbuffer(36161,null)}function xt(de){const te=r.get(de),Je=!0===de.isWebGLCubeRenderTarget;if(de.depthTexture&&!te.__autoAllocateDepthBuffer){if(Je)throw new Error("target.depthTexture not supported in Cube render targets");!function Ke(de,te){if(te&&te.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,de),!te.depthTexture||!te.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(te.depthTexture).__webglTexture||te.depthTexture.image.width!==te.width||te.depthTexture.image.height!==te.height)&&(te.depthTexture.image.width=te.width,te.depthTexture.image.height=te.height,te.depthTexture.needsUpdate=!0),At(te.depthTexture,0);const Ft=r.get(te.depthTexture).__webglTexture,Ht=Ln(te);if(te.depthTexture.format===Sn)Qn(te)?E.framebufferTexture2DMultisampleEXT(36160,36096,3553,Ft,0,Ht):m.framebufferTexture2D(36160,36096,3553,Ft,0);else{if(te.depthTexture.format!==ri)throw new Error("Unknown depthTexture format");Qn(te)?E.framebufferTexture2DMultisampleEXT(36160,33306,3553,Ft,0,Ht):m.framebufferTexture2D(36160,33306,3553,Ft,0)}}(te.__webglFramebuffer,de)}else if(Je){te.__webglDepthbuffer=[];for(let Ft=0;Ft<6;Ft++)t.bindFramebuffer(36160,te.__webglFramebuffer[Ft]),te.__webglDepthbuffer[Ft]=m.createRenderbuffer(),zn(te.__webglDepthbuffer[Ft],de,!1)}else t.bindFramebuffer(36160,te.__webglFramebuffer),te.__webglDepthbuffer=m.createRenderbuffer(),zn(te.__webglDepthbuffer,de,!1);t.bindFramebuffer(36160,null)}function Ln(de){return Math.min(T,de.samples)}function Qn(de){const te=r.get(de);return g&&de.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==te.__useRenderToTexture}function Wi(de,te){const Je=de.encoding,Ft=de.format,Ht=de.type;return!0===de.isCompressedTexture||!0===de.isVideoTexture||de.format===K||Je!==gs&&(Je===Ai?!1===g?!0===e.has("EXT_sRGB")&&Ft===Ti?(de.format=K,de.minFilter=Rn,de.generateMipmaps=!1):te=Li.sRGBToLinear(te):(Ft!==Ti||Ht!==yr)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",Je)),te}this.allocateTextureUnit=function ft(){const de=_t;return de>=y&&console.warn("THREE.WebGLTextures: Trying to use "+de+" texture units while this GPU supports only "+y),_t+=1,de},this.resetTextureUnits=function Nt(){_t=0},this.setTexture2D=At,this.setTexture2DArray=function It(de,te){const Je=r.get(de);de.version>0&&Je.__version!==de.version?tn(Je,de,te):t.bindTexture(35866,Je.__webglTexture,33984+te)},this.setTexture3D=function Re(de,te){const Je=r.get(de);de.version>0&&Je.__version!==de.version?tn(Je,de,te):t.bindTexture(32879,Je.__webglTexture,33984+te)},this.setTextureCube=function ct(de,te){const Je=r.get(de);de.version>0&&Je.__version!==de.version?function mn(de,te,Je){if(6!==te.image.length)return;const Ft=$t(de,te),Ht=te.source;t.bindTexture(34067,de.__webglTexture,33984+Je);const rn=r.get(Ht);if(Ht.version!==rn.__version||!0===Ft){t.activeTexture(33984+Je),m.pixelStorei(37440,te.flipY),m.pixelStorei(37441,te.premultiplyAlpha),m.pixelStorei(3317,te.unpackAlignment),m.pixelStorei(37443,0);const An=te.isCompressedTexture||te.image[0].isCompressedTexture,cn=te.image[0]&&te.image[0].isDataTexture,mt=[];for(let st=0;st<6;st++)mt[st]=An||cn?cn?te.image[st].image:te.image[st]:G(te.image[st],!1,!0,b),mt[st]=Wi(te,mt[st]);const Wn=mt[0],Dn=j(Wn)||g,ei=d.convert(te.format,te.encoding),jn=d.convert(te.type),Fn=X(te.internalFormat,ei,jn,te.encoding),Ri=g&&!0!==te.isVideoTexture,Nr=void 0===rn.__version||!0===Ft;let ye,Vs=re(te,Wn,Dn);if(en(34067,te,Dn),An){Ri&&Nr&&t.texStorage2D(34067,Vs,Fn,Wn.width,Wn.height);for(let st=0;st<6;st++){ye=mt[st].mipmaps;for(let Et=0;Et<ye.length;Et++){const un=ye[Et];te.format!==Ti?null!==ei?Ri?t.compressedTexSubImage2D(34069+st,Et,0,0,un.width,un.height,ei,un.data):t.compressedTexImage2D(34069+st,Et,Fn,un.width,un.height,0,un.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ri?t.texSubImage2D(34069+st,Et,0,0,un.width,un.height,ei,jn,un.data):t.texImage2D(34069+st,Et,Fn,un.width,un.height,0,ei,jn,un.data)}}}else{ye=te.mipmaps,Ri&&Nr&&(ye.length>0&&Vs++,t.texStorage2D(34067,Vs,Fn,mt[0].width,mt[0].height));for(let st=0;st<6;st++)if(cn){Ri?t.texSubImage2D(34069+st,0,0,0,mt[st].width,mt[st].height,ei,jn,mt[st].data):t.texImage2D(34069+st,0,Fn,mt[st].width,mt[st].height,0,ei,jn,mt[st].data);for(let Et=0;Et<ye.length;Et++){const wn=ye[Et].image[st].image;Ri?t.texSubImage2D(34069+st,Et+1,0,0,wn.width,wn.height,ei,jn,wn.data):t.texImage2D(34069+st,Et+1,Fn,wn.width,wn.height,0,ei,jn,wn.data)}}else{Ri?t.texSubImage2D(34069+st,0,0,0,ei,jn,mt[st]):t.texImage2D(34069+st,0,Fn,ei,jn,mt[st]);for(let Et=0;Et<ye.length;Et++){const un=ye[Et];Ri?t.texSubImage2D(34069+st,Et+1,0,0,ei,jn,un.image[st]):t.texImage2D(34069+st,Et+1,Fn,ei,jn,un.image[st])}}}ie(te,Dn)&&fe(34067),rn.__version=Ht.version,te.onUpdate&&te.onUpdate(te)}de.__version=te.version}(Je,de,te):t.bindTexture(34067,Je.__webglTexture,33984+te)},this.rebindTextures=function Ut(de,te,Je){const Ft=r.get(de);void 0!==te&&xn(Ft.__webglFramebuffer,de,de.texture,36064,3553),void 0!==Je&&xt(de)},this.setupRenderTarget=function Cn(de){const te=de.texture,Je=r.get(de),Ft=r.get(te);de.addEventListener("dispose",pt),!0!==de.isWebGLMultipleRenderTargets&&(void 0===Ft.__webglTexture&&(Ft.__webglTexture=m.createTexture()),Ft.__version=te.version,p.memory.textures++);const Ht=!0===de.isWebGLCubeRenderTarget,rn=!0===de.isWebGLMultipleRenderTargets,An=j(de)||g;if(Ht){Je.__webglFramebuffer=[];for(let cn=0;cn<6;cn++)Je.__webglFramebuffer[cn]=m.createFramebuffer()}else{if(Je.__webglFramebuffer=m.createFramebuffer(),rn)if(l.drawBuffers){const cn=de.texture;for(let mt=0,Wn=cn.length;mt<Wn;mt++){const Dn=r.get(cn[mt]);void 0===Dn.__webglTexture&&(Dn.__webglTexture=m.createTexture(),p.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(g&&de.samples>0&&!1===Qn(de)){const cn=rn?te:[te];Je.__webglMultisampledFramebuffer=m.createFramebuffer(),Je.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,Je.__webglMultisampledFramebuffer);for(let mt=0;mt<cn.length;mt++){const Wn=cn[mt];Je.__webglColorRenderbuffer[mt]=m.createRenderbuffer(),m.bindRenderbuffer(36161,Je.__webglColorRenderbuffer[mt]);const Dn=d.convert(Wn.format,Wn.encoding),ei=d.convert(Wn.type),jn=X(Wn.internalFormat,Dn,ei,Wn.encoding,!0===de.isXRRenderTarget),Fn=Ln(de);m.renderbufferStorageMultisample(36161,Fn,jn,de.width,de.height),m.framebufferRenderbuffer(36160,36064+mt,36161,Je.__webglColorRenderbuffer[mt])}m.bindRenderbuffer(36161,null),de.depthBuffer&&(Je.__webglDepthRenderbuffer=m.createRenderbuffer(),zn(Je.__webglDepthRenderbuffer,de,!0)),t.bindFramebuffer(36160,null)}}if(Ht){t.bindTexture(34067,Ft.__webglTexture),en(34067,te,An);for(let cn=0;cn<6;cn++)xn(Je.__webglFramebuffer[cn],de,te,36064,34069+cn);ie(te,An)&&fe(34067),t.unbindTexture()}else if(rn){const cn=de.texture;for(let mt=0,Wn=cn.length;mt<Wn;mt++){const Dn=cn[mt],ei=r.get(Dn);t.bindTexture(3553,ei.__webglTexture),en(3553,Dn,An),xn(Je.__webglFramebuffer,de,Dn,36064+mt,3553),ie(Dn,An)&&fe(3553)}t.unbindTexture()}else{let cn=3553;(de.isWebGL3DRenderTarget||de.isWebGLArrayRenderTarget)&&(g?cn=de.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(cn,Ft.__webglTexture),en(cn,te,An),xn(Je.__webglFramebuffer,de,te,36064,cn),ie(te,An)&&fe(cn),t.unbindTexture()}de.depthBuffer&&xt(de)},this.updateRenderTargetMipmap=function Jt(de){const te=j(de)||g,Je=!0===de.isWebGLMultipleRenderTargets?de.texture:[de.texture];for(let Ft=0,Ht=Je.length;Ft<Ht;Ft++){const rn=Je[Ft];if(ie(rn,te)){const An=de.isWebGLCubeRenderTarget?34067:3553,cn=r.get(rn).__webglTexture;t.bindTexture(An,cn),fe(An),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function En(de){if(g&&de.samples>0&&!1===Qn(de)){const te=de.isWebGLMultipleRenderTargets?de.texture:[de.texture],Je=de.width,Ft=de.height;let Ht=16384;const rn=[],An=de.stencilBuffer?33306:36096,cn=r.get(de),mt=!0===de.isWebGLMultipleRenderTargets;if(mt)for(let Wn=0;Wn<te.length;Wn++)t.bindFramebuffer(36160,cn.__webglMultisampledFramebuffer),m.framebufferRenderbuffer(36160,36064+Wn,36161,null),t.bindFramebuffer(36160,cn.__webglFramebuffer),m.framebufferTexture2D(36009,36064+Wn,3553,null,0);t.bindFramebuffer(36008,cn.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,cn.__webglFramebuffer);for(let Wn=0;Wn<te.length;Wn++){rn.push(36064+Wn),de.depthBuffer&&rn.push(An);const Dn=void 0!==cn.__ignoreDepthValues&&cn.__ignoreDepthValues;if(!1===Dn&&(de.depthBuffer&&(Ht|=256),de.stencilBuffer&&(Ht|=1024)),mt&&m.framebufferRenderbuffer(36008,36064,36161,cn.__webglColorRenderbuffer[Wn]),!0===Dn&&(m.invalidateFramebuffer(36008,[An]),m.invalidateFramebuffer(36009,[An])),mt){const ei=r.get(te[Wn]).__webglTexture;m.framebufferTexture2D(36009,36064,3553,ei,0)}m.blitFramebuffer(0,0,Je,Ft,0,0,Je,Ft,Ht,9728),I&&m.invalidateFramebuffer(36008,rn)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),mt)for(let Wn=0;Wn<te.length;Wn++){t.bindFramebuffer(36160,cn.__webglMultisampledFramebuffer),m.framebufferRenderbuffer(36160,36064+Wn,36161,cn.__webglColorRenderbuffer[Wn]);const Dn=r.get(te[Wn]).__webglTexture;t.bindFramebuffer(36160,cn.__webglFramebuffer),m.framebufferTexture2D(36009,36064+Wn,3553,Dn,0)}t.bindFramebuffer(36009,cn.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=xt,this.setupFrameBufferTexture=xn,this.useMultisampledRTT=Qn}function hu(m,e,t){const r=t.isWebGL2;return{convert:function l(d,p=null){let g;if(d===yr)return 5121;if(1017===d)return 32819;if(1018===d)return 32820;if(1010===d)return 5120;if(1011===d)return 5122;if(1012===d)return 5123;if(1013===d)return 5124;if(d===Rr)return 5125;if(d===wr)return 5126;if(d===Ss)return r?5131:(g=e.get("OES_texture_half_float"),null!==g?g.HALF_FLOAT_OES:null);if(1021===d)return 6406;if(d===Ti)return 6408;if(1024===d)return 6409;if(1025===d)return 6410;if(d===Sn)return 6402;if(d===ri)return 34041;if(d===K)return g=e.get("EXT_sRGB"),null!==g?g.SRGB_ALPHA_EXT:null;if(1028===d)return 6403;if(1029===d)return 36244;if(1030===d)return 33319;if(1031===d)return 33320;if(1033===d)return 36249;if(33776===d||33777===d||33778===d||33779===d)if(p===Ai){if(g=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===g)return null;if(33776===d)return g.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===d)return g.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===d)return g.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===d)return g.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(g=e.get("WEBGL_compressed_texture_s3tc"),null===g)return null;if(33776===d)return g.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===d)return g.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===d)return g.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===d)return g.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===d||35841===d||35842===d||35843===d){if(g=e.get("WEBGL_compressed_texture_pvrtc"),null===g)return null;if(35840===d)return g.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===d)return g.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===d)return g.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===d)return g.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===d)return g=e.get("WEBGL_compressed_texture_etc1"),null!==g?g.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===d||37496===d){if(g=e.get("WEBGL_compressed_texture_etc"),null===g)return null;if(37492===d)return p===Ai?g.COMPRESSED_SRGB8_ETC2:g.COMPRESSED_RGB8_ETC2;if(37496===d)return p===Ai?g.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:g.COMPRESSED_RGBA8_ETC2_EAC}if(37808===d||37809===d||37810===d||37811===d||37812===d||37813===d||37814===d||37815===d||37816===d||37817===d||37818===d||37819===d||37820===d||37821===d){if(g=e.get("WEBGL_compressed_texture_astc"),null===g)return null;if(37808===d)return p===Ai?g.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:g.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===d)return p===Ai?g.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:g.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===d)return p===Ai?g.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:g.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===d)return p===Ai?g.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:g.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===d)return p===Ai?g.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:g.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===d)return p===Ai?g.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:g.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===d)return p===Ai?g.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:g.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===d)return p===Ai?g.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:g.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===d)return p===Ai?g.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:g.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===d)return p===Ai?g.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:g.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===d)return p===Ai?g.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:g.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===d)return p===Ai?g.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:g.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===d)return p===Ai?g.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:g.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===d)return p===Ai?g.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:g.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===d){if(g=e.get("EXT_texture_compression_bptc"),null===g)return null;if(36492===d)return p===Ai?g.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:g.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(36283===d||36284===d||36285===d||36286===d){if(g=e.get("EXT_texture_compression_rgtc"),null===g)return null;if(36492===d)return g.COMPRESSED_RED_RGTC1_EXT;if(36284===d)return g.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(36285===d)return g.COMPRESSED_RED_GREEN_RGTC2_EXT;if(36286===d)return g.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return d===Zi?r?34042:(g=e.get("WEBGL_depth_texture"),null!==g?g.UNSIGNED_INT_24_8_WEBGL:null):void 0!==m[d]?m[d]:null}}}class K_ extends Ar{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class fu extends cr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Vg={type:"move"};class Wf{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new fu,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new fu,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ae,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ae),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new fu,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ae,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ae),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,r){let l=null,d=null,p=null;const g=this._targetRay,y=this._grip,b=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(b&&e.hand){p=!0;for(const N of e.hand.values()){const L=t.getJointPose(N,r),W=this._getHandJoint(b,N);null!==L&&(W.matrix.fromArray(L.transform.matrix),W.matrix.decompose(W.position,W.rotation,W.scale),W.jointRadius=L.radius),W.visible=null!==L}const E=b.joints["index-finger-tip"].position.distanceTo(b.joints["thumb-tip"].position),I=.02,F=.005;b.inputState.pinching&&E>I+F?(b.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!b.inputState.pinching&&E<=I-F&&(b.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==y&&e.gripSpace&&(d=t.getPose(e.gripSpace,r),null!==d&&(y.matrix.fromArray(d.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale),d.linearVelocity?(y.hasLinearVelocity=!0,y.linearVelocity.copy(d.linearVelocity)):y.hasLinearVelocity=!1,d.angularVelocity?(y.hasAngularVelocity=!0,y.angularVelocity.copy(d.angularVelocity)):y.hasAngularVelocity=!1));null!==g&&(l=t.getPose(e.targetRaySpace,r),null===l&&null!==d&&(l=d),null!==l&&(g.matrix.fromArray(l.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),l.linearVelocity?(g.hasLinearVelocity=!0,g.linearVelocity.copy(l.linearVelocity)):g.hasLinearVelocity=!1,l.angularVelocity?(g.hasAngularVelocity=!0,g.angularVelocity.copy(l.angularVelocity)):g.hasAngularVelocity=!1,this.dispatchEvent(Vg)))}return null!==g&&(g.visible=null!==l),null!==y&&(y.visible=null!==d),null!==b&&(b.visible=null!==p),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const r=new fu;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}class Nv extends xa{constructor(e,t,r,l,d,p,g,y,b,M){if((M=void 0!==M?M:Sn)!==Sn&&M!==ri)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===r&&M===Sn&&(r=Rr),void 0===r&&M===ri&&(r=Zi),super(null,l,d,p,g,y,M,r,b),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==g?g:fi,this.minFilter=void 0!==y?y:fi,this.flipY=!1,this.generateMipmaps=!1}}class Sy extends ge{constructor(e,t){super();const r=this;let l=null,d=1,p=null,g="local-floor",y=1,b=null,M=null,T=null,E=null,I=null,F=null;const N=t.getContextAttributes();let L=null,W=null;const z=[],G=[],j=new Set,ee=new Map,ie=new Ar;ie.layers.enable(1),ie.viewport=new Fi;const fe=new Ar;fe.layers.enable(2),fe.viewport=new Fi;const X=[ie,fe],re=new K_;re.layers.enable(1),re.layers.enable(2);let ve=null,We=null;function pt(Re){const ct=G.indexOf(Re.inputSource);if(-1===ct)return;const Rt=z[ct];void 0!==Rt&&Rt.dispatchEvent({type:Re.type,data:Re.inputSource})}function Fe(){l.removeEventListener("select",pt),l.removeEventListener("selectstart",pt),l.removeEventListener("selectend",pt),l.removeEventListener("squeeze",pt),l.removeEventListener("squeezestart",pt),l.removeEventListener("squeezeend",pt),l.removeEventListener("end",Fe),l.removeEventListener("inputsourceschange",De);for(let Re=0;Re<z.length;Re++){const ct=G[Re];null!==ct&&(G[Re]=null,z[Re].disconnect(ct))}ve=null,We=null,e.setRenderTarget(L),I=null,E=null,T=null,l=null,W=null,It.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}function De(Re){for(let ct=0;ct<Re.removed.length;ct++){const Rt=Re.removed[ct],Oe=G.indexOf(Rt);Oe>=0&&(G[Oe]=null,z[Oe].disconnect(Rt))}for(let ct=0;ct<Re.added.length;ct++){const Rt=Re.added[ct];let Oe=G.indexOf(Rt);if(-1===Oe){for(let $t=0;$t<z.length;$t++){if($t>=G.length){G.push(Rt),Oe=$t;break}if(null===G[$t]){G[$t]=Rt,Oe=$t;break}}if(-1===Oe)break}const en=z[Oe];en&&en.connect(Rt)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Re){let ct=z[Re];return void 0===ct&&(ct=new Wf,z[Re]=ct),ct.getTargetRaySpace()},this.getControllerGrip=function(Re){let ct=z[Re];return void 0===ct&&(ct=new Wf,z[Re]=ct),ct.getGripSpace()},this.getHand=function(Re){let ct=z[Re];return void 0===ct&&(ct=new Wf,z[Re]=ct),ct.getHandSpace()},this.setFramebufferScaleFactor=function(Re){d=Re,!0===r.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Re){g=Re,!0===r.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return b||p},this.setReferenceSpace=function(Re){b=Re},this.getBaseLayer=function(){return null!==E?E:I},this.getBinding=function(){return T},this.getFrame=function(){return F},this.getSession=function(){return l},this.setSession=function(){var Re=function v(m){return function(){var e=this,t=arguments;return new Promise(function(r,l){var d=m.apply(e,t);function p(y){U(d,r,l,p,g,"next",y)}function g(y){U(d,r,l,p,g,"throw",y)}p(void 0)})}}(function*(ct){if(l=ct,null!==l){if(L=e.getRenderTarget(),l.addEventListener("select",pt),l.addEventListener("selectstart",pt),l.addEventListener("selectend",pt),l.addEventListener("squeeze",pt),l.addEventListener("squeezestart",pt),l.addEventListener("squeezeend",pt),l.addEventListener("end",Fe),l.addEventListener("inputsourceschange",De),!0!==N.xrCompatible&&(yield t.makeXRCompatible()),void 0===l.renderState.layers||!1===e.capabilities.isWebGL2)I=new XRWebGLLayer(l,t,{antialias:void 0!==l.renderState.layers||N.antialias,alpha:N.alpha,depth:N.depth,stencil:N.stencil,framebufferScaleFactor:d}),l.updateRenderState({baseLayer:I}),W=new Xa(I.framebufferWidth,I.framebufferHeight,{format:Ti,type:yr,encoding:e.outputEncoding,stencilBuffer:N.stencil});else{let Rt=null,Oe=null,en=null;N.depth&&(en=N.stencil?35056:33190,Rt=N.stencil?ri:Sn,Oe=N.stencil?Zi:Rr);const $t={colorFormat:32856,depthFormat:en,scaleFactor:d};T=new XRWebGLBinding(l,t),E=T.createProjectionLayer($t),l.updateRenderState({layers:[E]}),W=new Xa(E.textureWidth,E.textureHeight,{format:Ti,type:yr,depthTexture:new Nv(E.textureWidth,E.textureHeight,Oe,void 0,void 0,void 0,void 0,void 0,void 0,Rt),stencilBuffer:N.stencil,encoding:e.outputEncoding,samples:N.antialias?4:0}),e.properties.get(W).__ignoreDepthValues=E.ignoreDepthValues}W.isXRRenderTarget=!0,this.setFoveation(y),b=null,p=yield l.requestReferenceSpace(g),It.setContext(l),It.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}});return function(ct){return Re.apply(this,arguments)}}();const Ze=new ae,_t=new ae;function ft(Re,ct){null===ct?Re.matrixWorld.copy(Re.matrix):Re.matrixWorld.multiplyMatrices(ct.matrixWorld,Re.matrix),Re.matrixWorldInverse.copy(Re.matrixWorld).invert()}this.updateCamera=function(Re){if(null===l)return;re.near=fe.near=ie.near=Re.near,re.far=fe.far=ie.far=Re.far,(ve!==re.near||We!==re.far)&&(l.updateRenderState({depthNear:re.near,depthFar:re.far}),ve=re.near,We=re.far);const ct=Re.parent,Rt=re.cameras;ft(re,ct);for(let en=0;en<Rt.length;en++)ft(Rt[en],ct);re.matrixWorld.decompose(re.position,re.quaternion,re.scale),Re.matrix.copy(re.matrix),Re.matrix.decompose(Re.position,Re.quaternion,Re.scale);const Oe=Re.children;for(let en=0,$t=Oe.length;en<$t;en++)Oe[en].updateMatrixWorld(!0);2===Rt.length?function Nt(Re,ct,Rt){Ze.setFromMatrixPosition(ct.matrixWorld),_t.setFromMatrixPosition(Rt.matrixWorld);const Oe=Ze.distanceTo(_t),en=ct.projectionMatrix.elements,$t=Rt.projectionMatrix.elements,tn=en[14]/(en[10]-1),mn=en[14]/(en[10]+1),xn=(en[9]+1)/en[5],zn=(en[9]-1)/en[5],Ke=(en[8]-1)/en[0],xt=($t[8]+1)/$t[0],Ut=tn*Ke,Cn=tn*xt,Jt=Oe/(-Ke+xt),En=Jt*-Ke;ct.matrixWorld.decompose(Re.position,Re.quaternion,Re.scale),Re.translateX(En),Re.translateZ(Jt),Re.matrixWorld.compose(Re.position,Re.quaternion,Re.scale),Re.matrixWorldInverse.copy(Re.matrixWorld).invert();const Ln=tn+Jt,Qn=mn+Jt;Re.projectionMatrix.makePerspective(Ut-En,Cn+(Oe-En),xn*mn/Qn*Ln,zn*mn/Qn*Ln,Ln,Qn)}(re,ie,fe):re.projectionMatrix.copy(ie.projectionMatrix)},this.getCamera=function(){return re},this.getFoveation=function(){if(null!==E||null!==I)return y},this.setFoveation=function(Re){y=Re,null!==E&&(E.fixedFoveation=Re),null!==I&&void 0!==I.fixedFoveation&&(I.fixedFoveation=Re)},this.getPlanes=function(){return j};let wt=null;const It=new ih;It.setAnimationLoop(function At(Re,ct){if(M=ct.getViewerPose(b||p),F=ct,null!==M){const Rt=M.views;null!==I&&(e.setRenderTargetFramebuffer(W,I.framebuffer),e.setRenderTarget(W));let Oe=!1;Rt.length!==re.cameras.length&&(re.cameras.length=0,Oe=!0);for(let en=0;en<Rt.length;en++){const $t=Rt[en];let tn=null;if(null!==I)tn=I.getViewport($t);else{const xn=T.getViewSubImage(E,$t);tn=xn.viewport,0===en&&(e.setRenderTargetTextures(W,xn.colorTexture,E.ignoreDepthValues?void 0:xn.depthStencilTexture),e.setRenderTarget(W))}let mn=X[en];void 0===mn&&(mn=new Ar,mn.layers.enable(en),mn.viewport=new Fi,X[en]=mn),mn.matrix.fromArray($t.transform.matrix),mn.projectionMatrix.fromArray($t.projectionMatrix),mn.viewport.set(tn.x,tn.y,tn.width,tn.height),0===en&&re.matrix.copy(mn.matrix),!0===Oe&&re.cameras.push(mn)}}for(let Rt=0;Rt<z.length;Rt++){const Oe=G[Rt],en=z[Rt];null!==Oe&&void 0!==en&&en.update(Oe,ct,b||p)}if(wt&&wt(Re,ct),ct.detectedPlanes){r.dispatchEvent({type:"planesdetected",data:ct.detectedPlanes});let Rt=null;for(const Oe of j)ct.detectedPlanes.has(Oe)||(null===Rt&&(Rt=[]),Rt.push(Oe));if(null!==Rt)for(const Oe of Rt)j.delete(Oe),ee.delete(Oe),r.dispatchEvent({type:"planeremoved",data:Oe});for(const Oe of ct.detectedPlanes)if(j.has(Oe)){const en=ee.get(Oe);Oe.lastChangedTime>en&&(ee.set(Oe,Oe.lastChangedTime),r.dispatchEvent({type:"planechanged",data:Oe}))}else j.add(Oe),ee.set(Oe,ct.lastChangedTime),r.dispatchEvent({type:"planeadded",data:Oe})}F=null}),this.setAnimationLoop=function(Re){wt=Re},this.dispose=function(){}}}function Ey(m,e){function l(N,L){N.opacity.value=L.opacity,L.color&&N.diffuse.value.copy(L.color),L.emissive&&N.emissive.value.copy(L.emissive).multiplyScalar(L.emissiveIntensity),L.map&&(N.map.value=L.map),L.alphaMap&&(N.alphaMap.value=L.alphaMap),L.bumpMap&&(N.bumpMap.value=L.bumpMap,N.bumpScale.value=L.bumpScale,1===L.side&&(N.bumpScale.value*=-1)),L.displacementMap&&(N.displacementMap.value=L.displacementMap,N.displacementScale.value=L.displacementScale,N.displacementBias.value=L.displacementBias),L.emissiveMap&&(N.emissiveMap.value=L.emissiveMap),L.normalMap&&(N.normalMap.value=L.normalMap,N.normalScale.value.copy(L.normalScale),1===L.side&&N.normalScale.value.negate()),L.specularMap&&(N.specularMap.value=L.specularMap),L.alphaTest>0&&(N.alphaTest.value=L.alphaTest);const W=e.get(L).envMap;if(W&&(N.envMap.value=W,N.flipEnvMap.value=W.isCubeTexture&&!1===W.isRenderTargetTexture?-1:1,N.reflectivity.value=L.reflectivity,N.ior.value=L.ior,N.refractionRatio.value=L.refractionRatio),L.lightMap){N.lightMap.value=L.lightMap;const j=!0===m.useLegacyLights?Math.PI:1;N.lightMapIntensity.value=L.lightMapIntensity*j}let z,G;L.aoMap&&(N.aoMap.value=L.aoMap,N.aoMapIntensity.value=L.aoMapIntensity),L.map?z=L.map:L.specularMap?z=L.specularMap:L.displacementMap?z=L.displacementMap:L.normalMap?z=L.normalMap:L.bumpMap?z=L.bumpMap:L.roughnessMap?z=L.roughnessMap:L.metalnessMap?z=L.metalnessMap:L.alphaMap?z=L.alphaMap:L.emissiveMap?z=L.emissiveMap:L.clearcoatMap?z=L.clearcoatMap:L.clearcoatNormalMap?z=L.clearcoatNormalMap:L.clearcoatRoughnessMap?z=L.clearcoatRoughnessMap:L.iridescenceMap?z=L.iridescenceMap:L.iridescenceThicknessMap?z=L.iridescenceThicknessMap:L.specularIntensityMap?z=L.specularIntensityMap:L.specularColorMap?z=L.specularColorMap:L.transmissionMap?z=L.transmissionMap:L.thicknessMap?z=L.thicknessMap:L.sheenColorMap?z=L.sheenColorMap:L.sheenRoughnessMap&&(z=L.sheenRoughnessMap),void 0!==z&&(z.isWebGLRenderTarget&&(z=z.texture),!0===z.matrixAutoUpdate&&z.updateMatrix(),N.uvTransform.value.copy(z.matrix)),L.aoMap?G=L.aoMap:L.lightMap&&(G=L.lightMap),void 0!==G&&(G.isWebGLRenderTarget&&(G=G.texture),!0===G.matrixAutoUpdate&&G.updateMatrix(),N.uv2Transform.value.copy(G.matrix))}return{refreshFogUniforms:function t(N,L){L.color.getRGB(N.fogColor.value,Lp(m)),L.isFog?(N.fogNear.value=L.near,N.fogFar.value=L.far):L.isFogExp2&&(N.fogDensity.value=L.density)},refreshMaterialUniforms:function r(N,L,W,z,G){L.isMeshBasicMaterial||L.isMeshLambertMaterial?l(N,L):L.isMeshToonMaterial?(l(N,L),function M(N,L){L.gradientMap&&(N.gradientMap.value=L.gradientMap)}(N,L)):L.isMeshPhongMaterial?(l(N,L),function b(N,L){N.specular.value.copy(L.specular),N.shininess.value=Math.max(L.shininess,1e-4)}(N,L)):L.isMeshStandardMaterial?(l(N,L),function T(N,L){N.roughness.value=L.roughness,N.metalness.value=L.metalness,L.roughnessMap&&(N.roughnessMap.value=L.roughnessMap),L.metalnessMap&&(N.metalnessMap.value=L.metalnessMap),e.get(L).envMap&&(N.envMapIntensity.value=L.envMapIntensity)}(N,L),L.isMeshPhysicalMaterial&&function E(N,L,W){N.ior.value=L.ior,L.sheen>0&&(N.sheenColor.value.copy(L.sheenColor).multiplyScalar(L.sheen),N.sheenRoughness.value=L.sheenRoughness,L.sheenColorMap&&(N.sheenColorMap.value=L.sheenColorMap),L.sheenRoughnessMap&&(N.sheenRoughnessMap.value=L.sheenRoughnessMap)),L.clearcoat>0&&(N.clearcoat.value=L.clearcoat,N.clearcoatRoughness.value=L.clearcoatRoughness,L.clearcoatMap&&(N.clearcoatMap.value=L.clearcoatMap),L.clearcoatRoughnessMap&&(N.clearcoatRoughnessMap.value=L.clearcoatRoughnessMap),L.clearcoatNormalMap&&(N.clearcoatNormalScale.value.copy(L.clearcoatNormalScale),N.clearcoatNormalMap.value=L.clearcoatNormalMap,1===L.side&&N.clearcoatNormalScale.value.negate())),L.iridescence>0&&(N.iridescence.value=L.iridescence,N.iridescenceIOR.value=L.iridescenceIOR,N.iridescenceThicknessMinimum.value=L.iridescenceThicknessRange[0],N.iridescenceThicknessMaximum.value=L.iridescenceThicknessRange[1],L.iridescenceMap&&(N.iridescenceMap.value=L.iridescenceMap),L.iridescenceThicknessMap&&(N.iridescenceThicknessMap.value=L.iridescenceThicknessMap)),L.transmission>0&&(N.transmission.value=L.transmission,N.transmissionSamplerMap.value=W.texture,N.transmissionSamplerSize.value.set(W.width,W.height),L.transmissionMap&&(N.transmissionMap.value=L.transmissionMap),N.thickness.value=L.thickness,L.thicknessMap&&(N.thicknessMap.value=L.thicknessMap),N.attenuationDistance.value=L.attenuationDistance,N.attenuationColor.value.copy(L.attenuationColor)),N.specularIntensity.value=L.specularIntensity,N.specularColor.value.copy(L.specularColor),L.specularIntensityMap&&(N.specularIntensityMap.value=L.specularIntensityMap),L.specularColorMap&&(N.specularColorMap.value=L.specularColorMap)}(N,L,G)):L.isMeshMatcapMaterial?(l(N,L),function I(N,L){L.matcap&&(N.matcap.value=L.matcap)}(N,L)):L.isMeshDepthMaterial?l(N,L):L.isMeshDistanceMaterial?(l(N,L),function F(N,L){N.referencePosition.value.copy(L.referencePosition),N.nearDistance.value=L.nearDistance,N.farDistance.value=L.farDistance}(N,L)):L.isMeshNormalMaterial?l(N,L):L.isLineBasicMaterial?(function d(N,L){N.diffuse.value.copy(L.color),N.opacity.value=L.opacity}(N,L),L.isLineDashedMaterial&&function p(N,L){N.dashSize.value=L.dashSize,N.totalSize.value=L.dashSize+L.gapSize,N.scale.value=L.scale}(N,L)):L.isPointsMaterial?function g(N,L,W,z){let G;N.diffuse.value.copy(L.color),N.opacity.value=L.opacity,N.size.value=L.size*W,N.scale.value=.5*z,L.map&&(N.map.value=L.map),L.alphaMap&&(N.alphaMap.value=L.alphaMap),L.alphaTest>0&&(N.alphaTest.value=L.alphaTest),L.map?G=L.map:L.alphaMap&&(G=L.alphaMap),void 0!==G&&(!0===G.matrixAutoUpdate&&G.updateMatrix(),N.uvTransform.value.copy(G.matrix))}(N,L,W,z):L.isSpriteMaterial?function y(N,L){let W;N.diffuse.value.copy(L.color),N.opacity.value=L.opacity,N.rotation.value=L.rotation,L.map&&(N.map.value=L.map),L.alphaMap&&(N.alphaMap.value=L.alphaMap),L.alphaTest>0&&(N.alphaTest.value=L.alphaTest),L.map?W=L.map:L.alphaMap&&(W=L.alphaMap),void 0!==W&&(!0===W.matrixAutoUpdate&&W.updateMatrix(),N.uvTransform.value.copy(W.matrix))}(N,L):L.isShadowMaterial?(N.color.value.copy(L.color),N.opacity.value=L.opacity):L.isShaderMaterial&&(L.uniformsNeedUpdate=!1)}}}function Iv(m,e,t,r){let l={},d={},p=[];const g=t.isWebGL2?m.getParameter(35375):0;function I(z,G,j){const ee=z.value;if(void 0===j[G]){if("number"==typeof ee)j[G]=ee;else{const ie=Array.isArray(ee)?ee:[ee],fe=[];for(let X=0;X<ie.length;X++)fe.push(ie[X].clone());j[G]=fe}return!0}if("number"==typeof ee){if(j[G]!==ee)return j[G]=ee,!0}else{const ie=Array.isArray(j[G])?j[G]:[j[G]],fe=Array.isArray(ee)?ee:[ee];for(let X=0;X<ie.length;X++){const re=ie[X];if(!1===re.equals(fe[X]))return re.copy(fe[X]),!0}}return!1}function N(z){const G={boundary:0,storage:0};return"number"==typeof z?(G.boundary=4,G.storage=4):z.isVector2?(G.boundary=8,G.storage=8):z.isVector3||z.isColor?(G.boundary=16,G.storage=12):z.isVector4?(G.boundary=16,G.storage=16):z.isMatrix3?(G.boundary=48,G.storage=48):z.isMatrix4?(G.boundary=64,G.storage=64):z.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",z),G}function L(z){const G=z.target;G.removeEventListener("dispose",L);const j=p.indexOf(G.__bindingPointIndex);p.splice(j,1),m.deleteBuffer(l[G.id]),delete l[G.id],delete d[G.id]}return{bind:function y(z,G){r.uniformBlockBinding(z,G.program)},update:function b(z,G){let j=l[z.id];void 0===j&&(function F(z){const G=z.uniforms;let j=0;let ie=0;for(let fe=0,X=G.length;fe<X;fe++){const re=G[fe],ve={boundary:0,storage:0},We=Array.isArray(re.value)?re.value:[re.value];for(let pt=0,Fe=We.length;pt<Fe;pt++){const Ze=N(We[pt]);ve.boundary+=Ze.boundary,ve.storage+=Ze.storage}if(re.__data=new Float32Array(ve.storage/Float32Array.BYTES_PER_ELEMENT),re.__offset=j,fe>0){ie=j%16;const pt=16-ie;0!==ie&&pt-ve.boundary<0&&(j+=16-ie,re.__offset=j)}j+=ve.storage}ie=j%16,ie>0&&(j+=16-ie),z.__size=j,z.__cache={}}(z),j=function M(z){const G=function T(){for(let z=0;z<g;z++)if(-1===p.indexOf(z))return p.push(z),z;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();z.__bindingPointIndex=G;const j=m.createBuffer(),ee=z.__size,ie=z.usage;return m.bindBuffer(35345,j),m.bufferData(35345,ee,ie),m.bindBuffer(35345,null),m.bindBufferBase(35345,G,j),j}(z),l[z.id]=j,z.addEventListener("dispose",L)),r.updateUBOMapping(z,G.program);const ie=e.render.frame;d[z.id]!==ie&&(function E(z){const j=z.uniforms,ee=z.__cache;m.bindBuffer(35345,l[z.id]);for(let ie=0,fe=j.length;ie<fe;ie++){const X=j[ie];if(!0===I(X,ie,ee)){const re=X.__offset,ve=Array.isArray(X.value)?X.value:[X.value];let We=0;for(let pt=0;pt<ve.length;pt++){const Fe=ve[pt],De=N(Fe);"number"==typeof Fe?(X.__data[0]=Fe,m.bufferSubData(35345,re+We,X.__data)):Fe.isMatrix3?(X.__data[0]=Fe.elements[0],X.__data[1]=Fe.elements[1],X.__data[2]=Fe.elements[2],X.__data[3]=Fe.elements[0],X.__data[4]=Fe.elements[3],X.__data[5]=Fe.elements[4],X.__data[6]=Fe.elements[5],X.__data[7]=Fe.elements[0],X.__data[8]=Fe.elements[6],X.__data[9]=Fe.elements[7],X.__data[10]=Fe.elements[8],X.__data[11]=Fe.elements[0]):(Fe.toArray(X.__data,We),We+=De.storage/Float32Array.BYTES_PER_ELEMENT)}m.bufferSubData(35345,re,X.__data)}}m.bindBuffer(35345,null)}(z),d[z.id]=ie)},dispose:function W(){for(const z in l)m.deleteBuffer(l[z]);p=[],l={},d={}}}}function e0(m={}){this.isWebGLRenderer=!0;const e=void 0!==m.canvas?m.canvas:function Q_(){const m=As("canvas");return m.style.display="block",m}(),t=void 0!==m.context?m.context:null,r=void 0===m.depth||m.depth,l=void 0===m.stencil||m.stencil,d=void 0!==m.antialias&&m.antialias,p=void 0===m.premultipliedAlpha||m.premultipliedAlpha,g=void 0!==m.preserveDrawingBuffer&&m.preserveDrawingBuffer,y=void 0!==m.powerPreference?m.powerPreference:"default",b=void 0!==m.failIfMajorPerformanceCaveat&&m.failIfMajorPerformanceCaveat;let M;M=null!==t?t.getContextAttributes().alpha:void 0!==m.alpha&&m.alpha;let T=null,E=null;const I=[],F=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=gs,this.useLegacyLights=!0,this.toneMapping=0,this.toneMappingExposure=1;const N=this;let L=!1,W=0,z=0,G=null,j=-1,ee=null;const ie=new Fi,fe=new Fi;let X=null,re=e.width,ve=e.height,We=1,pt=null,Fe=null;const De=new Fi(0,0,re,ve),Ze=new Fi(0,0,re,ve);let _t=!1;const Nt=new il;let ft=!1,wt=!1,At=null;const It=new ni,Re=new ae,ct={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Rt(){return null===G?We:1}let $t,tn,mn,xn,zn,Ke,xt,Ut,Cn,Jt,En,Ln,Qn,hr,Wi,de,te,Je,Ft,Ht,rn,An,cn,mt,Oe=t;function en(se,Be){for(let tt=0;tt<se.length;tt++){const ut=e.getContext(se[tt],Be);if(null!==ut)return ut}return null}try{const se={alpha:!0,depth:r,stencil:l,antialias:d,premultipliedAlpha:p,preserveDrawingBuffer:g,powerPreference:y,failIfMajorPerformanceCaveat:b};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r150"),e.addEventListener("webglcontextlost",ei,!1),e.addEventListener("webglcontextrestored",jn,!1),e.addEventListener("webglcontextcreationerror",Fn,!1),null===Oe){const Be=["webgl2","webgl","experimental-webgl"];if(!0===N.isWebGL1Renderer&&Be.shift(),Oe=en(Be,se),null===Oe)throw en(Be)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===Oe.getShaderPrecisionFormat&&(Oe.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(se){throw console.error("THREE.WebGLRenderer: "+se.message),se}function Wn(){$t=new Zs(Oe),tn=new v_(Oe,$t,m),$t.init(tn),An=new hu(Oe,$t,tn),mn=new zf(Oe,$t,tn),xn=new kf,zn=new Eg,Ke=new Bg(Oe,$t,mn,zn,tn,An,xn),xt=new b_(N),Ut=new C_(N),Cn=new Fp(Oe,tn),cn=new Jp(Oe,$t,Cn,tn),Jt=new ng(Oe,Cn,xn,cn),En=new S_(Oe,Jt,Cn,xn),Ft=new rg(Oe,tn,Ke),de=new y_(zn),Ln=new Sh(N,xt,Ut,$t,tn,cn,de),Qn=new Ey(N,zn),hr=new Ig,Wi=new Fg($t,tn),Je=new __(N,xt,Ut,mn,En,M,p),te=new J_(N,En,tn),mt=new Iv(Oe,xn,tn,mn),Ht=new Of(Oe,$t,xn,tn),rn=new ig(Oe,$t,xn,tn),xn.programs=Ln.programs,N.capabilities=tn,N.extensions=$t,N.properties=zn,N.renderLists=hr,N.shadowMap=te,N.state=mn,N.info=xn}Wn();const Dn=new Sy(N,Oe);function ei(se){se.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),L=!0}function jn(){console.log("THREE.WebGLRenderer: Context Restored."),L=!1;const se=xn.autoReset,Be=te.enabled,tt=te.autoUpdate,Ne=te.needsUpdate,ut=te.type;Wn(),xn.autoReset=se,te.enabled=Be,te.autoUpdate=tt,te.needsUpdate=Ne,te.type=ut}function Fn(se){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",se.statusMessage)}function Ri(se){const Be=se.target;Be.removeEventListener("dispose",Ri),function Nr(se){(function Vs(se){const Be=zn.get(se).programs;void 0!==Be&&(Be.forEach(function(tt){Ln.releaseProgram(tt)}),se.isShaderMaterial&&Ln.releaseShaderCache(se))})(se),zn.remove(se)}(Be)}this.xr=Dn,this.getContext=function(){return Oe},this.getContextAttributes=function(){return Oe.getContextAttributes()},this.forceContextLoss=function(){const se=$t.get("WEBGL_lose_context");se&&se.loseContext()},this.forceContextRestore=function(){const se=$t.get("WEBGL_lose_context");se&&se.restoreContext()},this.getPixelRatio=function(){return We},this.setPixelRatio=function(se){void 0!==se&&(We=se,this.setSize(re,ve,!1))},this.getSize=function(se){return se.set(re,ve)},this.setSize=function(se,Be,tt=!0){Dn.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(re=se,ve=Be,e.width=Math.floor(se*We),e.height=Math.floor(Be*We),!0===tt&&(e.style.width=se+"px",e.style.height=Be+"px"),this.setViewport(0,0,se,Be))},this.getDrawingBufferSize=function(se){return se.set(re*We,ve*We).floor()},this.setDrawingBufferSize=function(se,Be,tt){re=se,ve=Be,We=tt,e.width=Math.floor(se*tt),e.height=Math.floor(Be*tt),this.setViewport(0,0,se,Be)},this.getCurrentViewport=function(se){return se.copy(ie)},this.getViewport=function(se){return se.copy(De)},this.setViewport=function(se,Be,tt,Ne){se.isVector4?De.set(se.x,se.y,se.z,se.w):De.set(se,Be,tt,Ne),mn.viewport(ie.copy(De).multiplyScalar(We).floor())},this.getScissor=function(se){return se.copy(Ze)},this.setScissor=function(se,Be,tt,Ne){se.isVector4?Ze.set(se.x,se.y,se.z,se.w):Ze.set(se,Be,tt,Ne),mn.scissor(fe.copy(Ze).multiplyScalar(We).floor())},this.getScissorTest=function(){return _t},this.setScissorTest=function(se){mn.setScissorTest(_t=se)},this.setOpaqueSort=function(se){pt=se},this.setTransparentSort=function(se){Fe=se},this.getClearColor=function(se){return se.copy(Je.getClearColor())},this.setClearColor=function(){Je.setClearColor.apply(Je,arguments)},this.getClearAlpha=function(){return Je.getClearAlpha()},this.setClearAlpha=function(){Je.setClearAlpha.apply(Je,arguments)},this.clear=function(se=!0,Be=!0,tt=!0){let Ne=0;se&&(Ne|=16384),Be&&(Ne|=256),tt&&(Ne|=1024),Oe.clear(Ne)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",ei,!1),e.removeEventListener("webglcontextrestored",jn,!1),e.removeEventListener("webglcontextcreationerror",Fn,!1),hr.dispose(),Wi.dispose(),zn.dispose(),xt.dispose(),Ut.dispose(),En.dispose(),cn.dispose(),mt.dispose(),Ln.dispose(),Dn.dispose(),Dn.removeEventListener("sessionstart",Et),Dn.removeEventListener("sessionend",un),At&&(At.dispose(),At=null),wn.stop()},this.renderBufferDirect=function(se,Be,tt,Ne,ut,kn){null===Be&&(Be=ct);const Jn=ut.isMesh&&ut.matrixWorld.determinant()<0,hi=function P0(se,Be,tt,Ne,ut){!0!==Be.isScene&&(Be=ct),Ke.resetTextureUnits();const kn=Be.fog,hi=null===G?N.outputEncoding:!0===G.isXRRenderTarget?G.texture.encoding:gs,_i=(Ne.isMeshStandardMaterial?Ut:xt).get(Ne.envMap||(Ne.isMeshStandardMaterial?Be.environment:null)),Vi=!0===Ne.vertexColors&&!!tt.attributes.color&&4===tt.attributes.color.itemSize,xi=!!Ne.normalMap&&!!tt.attributes.tangent,yi=!!tt.morphAttributes.position,ds=!!tt.morphAttributes.normal,Mo=!!tt.morphAttributes.color,Uc=Ne.toneMapped?N.toneMapping:0,Wd=tt.morphAttributes.position||tt.morphAttributes.normal||tt.morphAttributes.color,Vr=void 0!==Wd?Wd.length:0,wi=zn.get(Ne),Sm=E.state.lights;!0!==ft||!0!==wt&&se===ee||de.setState(Ne,se,se===ee&&Ne.id===j);let Cs=!1;Ne.version===wi.__version?(wi.needsLights&&wi.lightsStateVersion!==Sm.state.version||wi.outputEncoding!==hi||ut.isInstancedMesh&&!1===wi.instancing||!ut.isInstancedMesh&&!0===wi.instancing||ut.isSkinnedMesh&&!1===wi.skinning||!ut.isSkinnedMesh&&!0===wi.skinning||wi.envMap!==_i||!0===Ne.fog&&wi.fog!==kn||void 0!==wi.numClippingPlanes&&(wi.numClippingPlanes!==de.numPlanes||wi.numIntersection!==de.numIntersection)||wi.vertexAlphas!==Vi||wi.vertexTangents!==xi||wi.morphTargets!==yi||wi.morphNormals!==ds||wi.morphColors!==Mo||wi.toneMapping!==Uc||!0===tn.isWebGL2&&wi.morphTargetsCount!==Vr)&&(Cs=!0):(Cs=!0,wi.__version=Ne.version);let Uu=wi.currentProgram;!0===Cs&&(Uu=Va(Ne,Be,ut));let oy=!1,Ap=!1,F0=!1;const Co=Uu.getUniforms(),Hu=wi.uniforms;if(mn.useProgram(Uu.program)&&(oy=!0,Ap=!0,F0=!0),Ne.id!==j&&(j=Ne.id,Ap=!0),oy||ee!==se){if(Co.setValue(Oe,"projectionMatrix",se.projectionMatrix),tn.logarithmicDepthBuffer&&Co.setValue(Oe,"logDepthBufFC",2/(Math.log(se.far+1)/Math.LN2)),ee!==se&&(ee=se,Ap=!0,F0=!0),Ne.isShaderMaterial||Ne.isMeshPhongMaterial||Ne.isMeshToonMaterial||Ne.isMeshStandardMaterial||Ne.envMap){const Uo=Co.map.cameraPosition;void 0!==Uo&&Uo.setValue(Oe,Re.setFromMatrixPosition(se.matrixWorld))}(Ne.isMeshPhongMaterial||Ne.isMeshToonMaterial||Ne.isMeshLambertMaterial||Ne.isMeshBasicMaterial||Ne.isMeshStandardMaterial||Ne.isShaderMaterial)&&Co.setValue(Oe,"isOrthographic",!0===se.isOrthographicCamera),(Ne.isMeshPhongMaterial||Ne.isMeshToonMaterial||Ne.isMeshLambertMaterial||Ne.isMeshBasicMaterial||Ne.isMeshStandardMaterial||Ne.isShaderMaterial||Ne.isShadowMaterial||ut.isSkinnedMesh)&&Co.setValue(Oe,"viewMatrix",se.matrixWorldInverse)}if(ut.isSkinnedMesh){Co.setOptional(Oe,ut,"bindMatrix"),Co.setOptional(Oe,ut,"bindMatrixInverse");const Uo=ut.skeleton;Uo&&(tn.floatVertexTextures?(null===Uo.boneTexture&&Uo.computeBoneTexture(),Co.setValue(Oe,"boneTexture",Uo.boneTexture,Ke),Co.setValue(Oe,"boneTextureSize",Uo.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const ay=tt.morphAttributes;if((void 0!==ay.position||void 0!==ay.normal||void 0!==ay.color&&!0===tn.isWebGL2)&&Ft.update(ut,tt,Uu),(Ap||wi.receiveShadow!==ut.receiveShadow)&&(wi.receiveShadow=ut.receiveShadow,Co.setValue(Oe,"receiveShadow",ut.receiveShadow)),Ne.isMeshGouraudMaterial&&null!==Ne.envMap&&(Hu.envMap.value=_i,Hu.flipEnvMap.value=_i.isCubeTexture&&!1===_i.isRenderTargetTexture?-1:1),Ap&&(Co.setValue(Oe,"toneMappingExposure",N.toneMappingExposure),wi.needsLights&&function L0(se,Be){se.ambientLightColor.needsUpdate=Be,se.lightProbe.needsUpdate=Be,se.directionalLights.needsUpdate=Be,se.directionalLightShadows.needsUpdate=Be,se.pointLights.needsUpdate=Be,se.pointLightShadows.needsUpdate=Be,se.spotLights.needsUpdate=Be,se.spotLightShadows.needsUpdate=Be,se.rectAreaLights.needsUpdate=Be,se.hemisphereLights.needsUpdate=Be}(Hu,F0),kn&&!0===Ne.fog&&Qn.refreshFogUniforms(Hu,kn),Qn.refreshMaterialUniforms(Hu,Ne,We,ve,At),Dh.upload(Oe,wi.uniformsList,Hu,Ke)),Ne.isShaderMaterial&&!0===Ne.uniformsNeedUpdate&&(Dh.upload(Oe,wi.uniformsList,Hu,Ke),Ne.uniformsNeedUpdate=!1),Ne.isSpriteMaterial&&Co.setValue(Oe,"center",ut.center),Co.setValue(Oe,"modelViewMatrix",ut.modelViewMatrix),Co.setValue(Oe,"normalMatrix",ut.normalMatrix),Co.setValue(Oe,"modelMatrix",ut.matrixWorld),Ne.isShaderMaterial||Ne.isRawShaderMaterial){const Uo=Ne.uniformsGroups;for(let k0=0,Xy=Uo.length;k0<Xy;k0++)if(tn.isWebGL2){const Zy=Uo[k0];mt.update(Zy,Uu),mt.bind(Zy,Uu)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Uu}(se,Be,tt,Ne,ut);mn.setMaterial(Ne,Jn);let _i=tt.index,Vi=1;!0===Ne.wireframe&&(_i=Jt.getWireframeAttribute(tt),Vi=2);const xi=tt.drawRange,yi=tt.attributes.position;let ds=xi.start*Vi,Mo=(xi.start+xi.count)*Vi;null!==kn&&(ds=Math.max(ds,kn.start*Vi),Mo=Math.min(Mo,(kn.start+kn.count)*Vi)),null!==_i?(ds=Math.max(ds,0),Mo=Math.min(Mo,_i.count)):null!=yi&&(ds=Math.max(ds,0),Mo=Math.min(Mo,yi.count));const Uc=Mo-ds;if(Uc<0||Uc===1/0)return;cn.setup(ut,Ne,hi,tt,_i);let Wd,Vr=Ht;if(null!==_i&&(Wd=Cn.get(_i),Vr=rn,Vr.setIndex(Wd)),ut.isMesh)!0===Ne.wireframe?(mn.setLineWidth(Ne.wireframeLinewidth*Rt()),Vr.setMode(1)):Vr.setMode(4);else if(ut.isLine){let wi=Ne.linewidth;void 0===wi&&(wi=1),mn.setLineWidth(wi*Rt()),Vr.setMode(ut.isLineSegments?1:ut.isLineLoop?2:3)}else ut.isPoints?Vr.setMode(0):ut.isSprite&&Vr.setMode(4);if(ut.isInstancedMesh)Vr.renderInstances(ds,Uc,ut.count);else if(tt.isInstancedBufferGeometry){const Sm=Math.min(tt.instanceCount,void 0!==tt._maxInstanceCount?tt._maxInstanceCount:1/0);Vr.renderInstances(ds,Uc,Sm)}else Vr.render(ds,Uc)},this.compile=function(se,Be){function tt(Ne,ut,kn){!0===Ne.transparent&&2===Ne.side&&!1===Ne.forceSinglePass?(Ne.side=1,Ne.needsUpdate=!0,Va(Ne,ut,kn),Ne.side=0,Ne.needsUpdate=!0,Va(Ne,ut,kn),Ne.side=2):Va(Ne,ut,kn)}E=Wi.get(se),E.init(),F.push(E),se.traverseVisible(function(Ne){Ne.isLight&&Ne.layers.test(Be.layers)&&(E.pushLight(Ne),Ne.castShadow&&E.pushShadow(Ne))}),E.setupLights(N.useLegacyLights),se.traverse(function(Ne){const ut=Ne.material;if(ut)if(Array.isArray(ut))for(let kn=0;kn<ut.length;kn++)tt(ut[kn],se,Ne);else tt(ut,se,Ne)}),F.pop(),E=null};let ye=null;function Et(){wn.stop()}function un(){wn.start()}const wn=new ih;function fr(se,Be,tt,Ne){if(!1===se.visible)return;if(se.layers.test(Be.layers))if(se.isGroup)tt=se.renderOrder;else if(se.isLOD)!0===se.autoUpdate&&se.update(Be);else if(se.isLight)E.pushLight(se),se.castShadow&&E.pushShadow(se);else if(se.isSprite){if(!se.frustumCulled||Nt.intersectsSprite(se)){Ne&&Re.setFromMatrixPosition(se.matrixWorld).applyMatrix4(It);const Jn=En.update(se),hi=se.material;hi.visible&&T.push(se,Jn,hi,tt,Re.z,null)}}else if((se.isMesh||se.isLine||se.isPoints)&&(se.isSkinnedMesh&&se.skeleton.frame!==xn.render.frame&&(se.skeleton.update(),se.skeleton.frame=xn.render.frame),!se.frustumCulled||Nt.intersectsObject(se))){Ne&&Re.setFromMatrixPosition(se.matrixWorld).applyMatrix4(It);const Jn=En.update(se),hi=se.material;if(Array.isArray(hi)){const _i=Jn.groups;for(let Vi=0,xi=_i.length;Vi<xi;Vi++){const yi=_i[Vi],ds=hi[yi.materialIndex];ds&&ds.visible&&T.push(se,Jn,ds,tt,Re.z,yi)}}else hi.visible&&T.push(se,Jn,hi,tt,Re.z,null)}const kn=se.children;for(let Jn=0,hi=kn.length;Jn<hi;Jn++)fr(kn[Jn],Be,tt,Ne)}function Ms(se,Be,tt,Ne){const ut=se.opaque,kn=se.transmissive,Jn=se.transparent;E.setupLightsView(tt),!0===ft&&de.setGlobalState(N.clippingPlanes,tt),kn.length>0&&function Do(se,Be,tt){const Ne=tn.isWebGL2;null===At&&(At=new Xa(1024,1024,{generateMipmaps:!0,type:$t.has("EXT_color_buffer_half_float")?Ss:yr,minFilter:Zr,samples:Ne&&!0===d?4:0}));const ut=N.getRenderTarget();N.setRenderTarget(At),N.clear();const kn=N.toneMapping;N.toneMapping=0,Ba(se,Be,tt),N.toneMapping=kn,Ke.updateMultisampleRenderTarget(At),Ke.updateRenderTargetMipmap(At),N.setRenderTarget(ut)}(ut,Be,tt),Ne&&mn.viewport(ie.copy(Ne)),ut.length>0&&Ba(ut,Be,tt),kn.length>0&&Ba(kn,Be,tt),Jn.length>0&&Ba(Jn,Be,tt),mn.buffers.depth.setTest(!0),mn.buffers.depth.setMask(!0),mn.buffers.color.setMask(!0),mn.setPolygonOffset(!1)}function Ba(se,Be,tt){const Ne=!0===Be.isScene?Be.overrideMaterial:null;for(let ut=0,kn=se.length;ut<kn;ut++){const Jn=se[ut],hi=Jn.object,_i=Jn.geometry,Vi=null===Ne?Jn.material:Ne,xi=Jn.group;hi.layers.test(tt.layers)&&Br(hi,Be,tt,_i,Vi,xi)}}function Br(se,Be,tt,Ne,ut,kn){se.onBeforeRender(N,Be,tt,Ne,ut,kn),se.modelViewMatrix.multiplyMatrices(tt.matrixWorldInverse,se.matrixWorld),se.normalMatrix.getNormalMatrix(se.modelViewMatrix),ut.onBeforeRender(N,Be,tt,Ne,se,kn),!0===ut.transparent&&2===ut.side&&!1===ut.forceSinglePass?(ut.side=1,ut.needsUpdate=!0,N.renderBufferDirect(tt,Be,Ne,ut,se,kn),ut.side=0,ut.needsUpdate=!0,N.renderBufferDirect(tt,Be,Ne,ut,se,kn),ut.side=2):N.renderBufferDirect(tt,Be,Ne,ut,se,kn),se.onAfterRender(N,Be,tt,Ne,ut,kn)}function Va(se,Be,tt){!0!==Be.isScene&&(Be=ct);const Ne=zn.get(se),ut=E.state.lights,Jn=ut.state.version,hi=Ln.getParameters(se,ut.state,E.state.shadowsArray,Be,tt),_i=Ln.getProgramCacheKey(hi);let Vi=Ne.programs;Ne.environment=se.isMeshStandardMaterial?Be.environment:null,Ne.fog=Be.fog,Ne.envMap=(se.isMeshStandardMaterial?Ut:xt).get(se.envMap||Ne.environment),void 0===Vi&&(se.addEventListener("dispose",Ri),Vi=new Map,Ne.programs=Vi);let xi=Vi.get(_i);if(void 0!==xi){if(Ne.currentProgram===xi&&Ne.lightsStateVersion===Jn)return ic(se,hi),xi}else hi.uniforms=Ln.getUniforms(se),se.onBuild(tt,hi,N),se.onBeforeCompile(hi,N),xi=Ln.acquireProgram(hi,_i),Vi.set(_i,xi),Ne.uniforms=hi.uniforms;const yi=Ne.uniforms;(!se.isShaderMaterial&&!se.isRawShaderMaterial||!0===se.clipping)&&(yi.clippingPlanes=de.uniform),ic(se,hi),Ne.needsLights=function sy(se){return se.isMeshLambertMaterial||se.isMeshToonMaterial||se.isMeshPhongMaterial||se.isMeshStandardMaterial||se.isShadowMaterial||se.isShaderMaterial&&!0===se.lights}(se),Ne.lightsStateVersion=Jn,Ne.needsLights&&(yi.ambientLightColor.value=ut.state.ambient,yi.lightProbe.value=ut.state.probe,yi.directionalLights.value=ut.state.directional,yi.directionalLightShadows.value=ut.state.directionalShadow,yi.spotLights.value=ut.state.spot,yi.spotLightShadows.value=ut.state.spotShadow,yi.rectAreaLights.value=ut.state.rectArea,yi.ltc_1.value=ut.state.rectAreaLTC1,yi.ltc_2.value=ut.state.rectAreaLTC2,yi.pointLights.value=ut.state.point,yi.pointLightShadows.value=ut.state.pointShadow,yi.hemisphereLights.value=ut.state.hemi,yi.directionalShadowMap.value=ut.state.directionalShadowMap,yi.directionalShadowMatrix.value=ut.state.directionalShadowMatrix,yi.spotShadowMap.value=ut.state.spotShadowMap,yi.spotLightMatrix.value=ut.state.spotLightMatrix,yi.spotLightMap.value=ut.state.spotLightMap,yi.pointShadowMap.value=ut.state.pointShadowMap,yi.pointShadowMatrix.value=ut.state.pointShadowMatrix);const ds=xi.getUniforms(),Mo=Dh.seqWithValue(ds.seq,yi);return Ne.currentProgram=xi,Ne.uniformsList=Mo,xi}function ic(se,Be){const tt=zn.get(se);tt.outputEncoding=Be.outputEncoding,tt.instancing=Be.instancing,tt.skinning=Be.skinning,tt.morphTargets=Be.morphTargets,tt.morphNormals=Be.morphNormals,tt.morphColors=Be.morphColors,tt.morphTargetsCount=Be.morphTargetsCount,tt.numClippingPlanes=Be.numClippingPlanes,tt.numIntersection=Be.numClipIntersection,tt.vertexAlphas=Be.vertexAlphas,tt.vertexTangents=Be.vertexTangents,tt.toneMapping=Be.toneMapping}wn.setAnimationLoop(function st(se){ye&&ye(se)}),typeof self<"u"&&wn.setContext(self),this.setAnimationLoop=function(se){ye=se,Dn.setAnimationLoop(se),null===se?wn.stop():wn.start()},Dn.addEventListener("sessionstart",Et),Dn.addEventListener("sessionend",un),this.render=function(se,Be){if(void 0===Be||!0===Be.isCamera){if(!0!==L){if(!0===se.matrixWorldAutoUpdate&&se.updateMatrixWorld(),null===Be.parent&&!0===Be.matrixWorldAutoUpdate&&Be.updateMatrixWorld(),!0===Dn.enabled&&!0===Dn.isPresenting&&(!0===Dn.cameraAutoUpdate&&Dn.updateCamera(Be),Be=Dn.getCamera()),!0===se.isScene&&se.onBeforeRender(N,se,Be,G),E=Wi.get(se,F.length),E.init(),F.push(E),It.multiplyMatrices(Be.projectionMatrix,Be.matrixWorldInverse),Nt.setFromProjectionMatrix(It),wt=this.localClippingEnabled,ft=de.init(this.clippingPlanes,wt),T=hr.get(se,I.length),T.init(),I.push(T),fr(se,Be,0,N.sortObjects),T.finish(),!0===N.sortObjects&&T.sort(pt,Fe),!0===ft&&de.beginShadows(),te.render(E.state.shadowsArray,se,Be),!0===ft&&de.endShadows(),!0===this.info.autoReset&&this.info.reset(),Je.render(T,se),E.setupLights(N.useLegacyLights),Be.isArrayCamera){const Ne=Be.cameras;for(let ut=0,kn=Ne.length;ut<kn;ut++){const Jn=Ne[ut];Ms(T,se,Jn,Jn.viewport)}}else Ms(T,se,Be);null!==G&&(Ke.updateMultisampleRenderTarget(G),Ke.updateRenderTargetMipmap(G)),!0===se.isScene&&se.onAfterRender(N,se,Be),cn.resetDefaultState(),j=-1,ee=null,F.pop(),E=F.length>0?F[F.length-1]:null,I.pop(),T=I.length>0?I[I.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return W},this.getActiveMipmapLevel=function(){return z},this.getRenderTarget=function(){return G},this.setRenderTargetTextures=function(se,Be,tt){zn.get(se.texture).__webglTexture=Be,zn.get(se.depthTexture).__webglTexture=tt;const Ne=zn.get(se);Ne.__hasExternalTextures=!0,Ne.__hasExternalTextures&&(Ne.__autoAllocateDepthBuffer=void 0===tt,Ne.__autoAllocateDepthBuffer||!0===$t.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Ne.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(se,Be){const tt=zn.get(se);tt.__webglFramebuffer=Be,tt.__useDefaultFramebuffer=void 0===Be},this.setRenderTarget=function(se,Be=0,tt=0){G=se,W=Be,z=tt;let Ne=!0,ut=null,kn=!1,Jn=!1;if(se){const _i=zn.get(se);void 0!==_i.__useDefaultFramebuffer?(mn.bindFramebuffer(36160,null),Ne=!1):void 0===_i.__webglFramebuffer?Ke.setupRenderTarget(se):_i.__hasExternalTextures&&Ke.rebindTextures(se,zn.get(se.texture).__webglTexture,zn.get(se.depthTexture).__webglTexture);const Vi=se.texture;(Vi.isData3DTexture||Vi.isDataArrayTexture||Vi.isCompressedArrayTexture)&&(Jn=!0);const xi=zn.get(se).__webglFramebuffer;se.isWebGLCubeRenderTarget?(ut=xi[Be],kn=!0):ut=tn.isWebGL2&&se.samples>0&&!1===Ke.useMultisampledRTT(se)?zn.get(se).__webglMultisampledFramebuffer:xi,ie.copy(se.viewport),fe.copy(se.scissor),X=se.scissorTest}else ie.copy(De).multiplyScalar(We).floor(),fe.copy(Ze).multiplyScalar(We).floor(),X=_t;if(mn.bindFramebuffer(36160,ut)&&tn.drawBuffers&&Ne&&mn.drawBuffers(se,ut),mn.viewport(ie),mn.scissor(fe),mn.setScissorTest(X),kn){const _i=zn.get(se.texture);Oe.framebufferTexture2D(36160,36064,34069+Be,_i.__webglTexture,tt)}else if(Jn){const _i=zn.get(se.texture);Oe.framebufferTextureLayer(36160,36064,_i.__webglTexture,tt||0,Be||0)}j=-1},this.readRenderTargetPixels=function(se,Be,tt,Ne,ut,kn,Jn){if(!se||!se.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let hi=zn.get(se).__webglFramebuffer;if(se.isWebGLCubeRenderTarget&&void 0!==Jn&&(hi=hi[Jn]),hi){mn.bindFramebuffer(36160,hi);try{const _i=se.texture,Vi=_i.format,xi=_i.type;if(Vi!==Ti&&An.convert(Vi)!==Oe.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const yi=xi===Ss&&($t.has("EXT_color_buffer_half_float")||tn.isWebGL2&&$t.has("EXT_color_buffer_float"));if(!(xi===yr||An.convert(xi)===Oe.getParameter(35738)||xi===wr&&(tn.isWebGL2||$t.has("OES_texture_float")||$t.has("WEBGL_color_buffer_float"))||yi))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Be>=0&&Be<=se.width-Ne&&tt>=0&&tt<=se.height-ut&&Oe.readPixels(Be,tt,Ne,ut,An.convert(Vi),An.convert(xi),kn)}finally{const _i=null!==G?zn.get(G).__webglFramebuffer:null;mn.bindFramebuffer(36160,_i)}}},this.copyFramebufferToTexture=function(se,Be,tt=0){const Ne=Math.pow(2,-tt),ut=Math.floor(Be.image.width*Ne),kn=Math.floor(Be.image.height*Ne);Ke.setTexture2D(Be,0),Oe.copyTexSubImage2D(3553,tt,0,0,se.x,se.y,ut,kn),mn.unbindTexture()},this.copyTextureToTexture=function(se,Be,tt,Ne=0){const ut=Be.image.width,kn=Be.image.height,Jn=An.convert(tt.format),hi=An.convert(tt.type);Ke.setTexture2D(tt,0),Oe.pixelStorei(37440,tt.flipY),Oe.pixelStorei(37441,tt.premultiplyAlpha),Oe.pixelStorei(3317,tt.unpackAlignment),Be.isDataTexture?Oe.texSubImage2D(3553,Ne,se.x,se.y,ut,kn,Jn,hi,Be.image.data):Be.isCompressedTexture?Oe.compressedTexSubImage2D(3553,Ne,se.x,se.y,Be.mipmaps[0].width,Be.mipmaps[0].height,Jn,Be.mipmaps[0].data):Oe.texSubImage2D(3553,Ne,se.x,se.y,Jn,hi,Be.image),0===Ne&&tt.generateMipmaps&&Oe.generateMipmap(3553),mn.unbindTexture()},this.copyTextureToTexture3D=function(se,Be,tt,Ne,ut=0){if(N.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const kn=se.max.x-se.min.x+1,Jn=se.max.y-se.min.y+1,hi=se.max.z-se.min.z+1,_i=An.convert(Ne.format),Vi=An.convert(Ne.type);let xi;if(Ne.isData3DTexture)Ke.setTexture3D(Ne,0),xi=32879;else{if(!Ne.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Ke.setTexture2DArray(Ne,0),xi=35866}Oe.pixelStorei(37440,Ne.flipY),Oe.pixelStorei(37441,Ne.premultiplyAlpha),Oe.pixelStorei(3317,Ne.unpackAlignment);const yi=Oe.getParameter(3314),ds=Oe.getParameter(32878),Mo=Oe.getParameter(3316),Uc=Oe.getParameter(3315),Wd=Oe.getParameter(32877),Vr=tt.isCompressedTexture?tt.mipmaps[0]:tt.image;Oe.pixelStorei(3314,Vr.width),Oe.pixelStorei(32878,Vr.height),Oe.pixelStorei(3316,se.min.x),Oe.pixelStorei(3315,se.min.y),Oe.pixelStorei(32877,se.min.z),tt.isDataTexture||tt.isData3DTexture?Oe.texSubImage3D(xi,ut,Be.x,Be.y,Be.z,kn,Jn,hi,_i,Vi,Vr.data):tt.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Oe.compressedTexSubImage3D(xi,ut,Be.x,Be.y,Be.z,kn,Jn,hi,_i,Vr.data)):Oe.texSubImage3D(xi,ut,Be.x,Be.y,Be.z,kn,Jn,hi,_i,Vi,Vr),Oe.pixelStorei(3314,yi),Oe.pixelStorei(32878,ds),Oe.pixelStorei(3316,Mo),Oe.pixelStorei(3315,Uc),Oe.pixelStorei(32877,Wd),0===ut&&Ne.generateMipmaps&&Oe.generateMipmap(xi),mn.unbindTexture()},this.initTexture=function(se){se.isCubeTexture?Ke.setTextureCube(se,0):se.isData3DTexture?Ke.setTexture3D(se,0):se.isDataArrayTexture||se.isCompressedArrayTexture?Ke.setTexture2DArray(se,0):Ke.setTexture2D(se,0),mn.unbindTexture()},this.resetState=function(){W=0,z=0,G=null,mn.reset(),cn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Object.defineProperties(e0.prototype,{physicallyCorrectLights:{get:function(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights},set:function(m){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!m}}}),class Rv extends e0{}.prototype.isWebGL1Renderer=!0;class jf{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new St(e),this.near=t,this.far=r}clone(){return new jf(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class $f extends cr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class Sd extends xa{constructor(e=null,t=1,r=1,l,d,p,g,y,b=fi,M=fi,T,E){super(null,p,g,y,b,M,l,d,T,E),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}function Fo(m,e,t){return dp(m)?new m.constructor(m.subarray(e,void 0!==t?t:m.length)):m.slice(e,t)}function kc(m,e,t){return!m||!t&&m.constructor===e?m:"number"==typeof e.BYTES_PER_ELEMENT?new e(m):Array.prototype.slice.call(m)}function dp(m){return ArrayBuffer.isView(m)&&!(m instanceof DataView)}class fl{constructor(e,t,r,l){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==l?l:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,l=t[r],d=t[r-1];e:{t:{let p;n:{i:if(!(e<l)){for(let g=r+2;;){if(void 0===l){if(e<d)break i;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===g)break;if(d=l,l=t[++r],e<l)break t}p=t.length;break n}if(e>=d)break e;{const g=t[1];e<g&&(r=2,d=g);for(let y=r-2;;){if(void 0===d)return this._cachedIndex=0,this.copySampleValue_(0);if(r===y)break;if(l=d,d=t[--r-1],e>=d)break t}p=r,r=0}}for(;r<p;){const g=r+p>>>1;e<t[g]?p=g:r=g+1}if(l=t[r],d=t[r-1],void 0===d)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===l)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,d,l)}return this.interpolate_(r,d,e,l)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,l=this.valueSize,d=e*l;for(let p=0;p!==l;++p)t[p]=r[d+p];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class gm extends fl{constructor(e,t,r,l){super(e,t,r,l),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,r){const l=this.parameterPositions;let d=e-2,p=e+1,g=l[d],y=l[p];if(void 0===g)switch(this.getSettings_().endingStart){case 2401:d=e,g=2*t-r;break;case 2402:d=l.length-2,g=t+l[d]-l[d+1];break;default:d=e,g=r}if(void 0===y)switch(this.getSettings_().endingEnd){case 2401:p=e,y=2*r-t;break;case 2402:p=1,y=r+l[1]-l[0];break;default:p=e-1,y=t}const b=.5*(r-t),M=this.valueSize;this._weightPrev=b/(t-g),this._weightNext=b/(y-r),this._offsetPrev=d*M,this._offsetNext=p*M}interpolate_(e,t,r,l){const d=this.resultBuffer,p=this.sampleValues,g=this.valueSize,y=e*g,b=y-g,M=this._offsetPrev,T=this._offsetNext,E=this._weightPrev,I=this._weightNext,F=(r-t)/(l-t),N=F*F,L=N*F,W=-E*L+2*E*N-E*F,z=(1+E)*L+(-1.5-2*E)*N+(-.5+E)*F+1,G=(-1-I)*L+(1.5+I)*N+.5*F,j=I*L-I*N;for(let ee=0;ee!==g;++ee)d[ee]=W*p[M+ee]+z*p[b+ee]+G*p[y+ee]+j*p[T+ee];return d}}class pp extends fl{constructor(e,t,r,l){super(e,t,r,l)}interpolate_(e,t,r,l){const d=this.resultBuffer,p=this.sampleValues,g=this.valueSize,y=e*g,b=y-g,M=(r-t)/(l-t),T=1-M;for(let E=0;E!==g;++E)d[E]=p[b+E]*T+p[y+E]*M;return d}}class gp extends fl{constructor(e,t,r,l){super(e,t,r,l)}interpolate_(e){return this.copySampleValue_(e-1)}}class la{constructor(e,t,r,l){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=kc(t,this.TimeBufferType),this.values=kc(r,this.ValueBufferType),this.setInterpolation(l||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:kc(e.times,Array),values:kc(e.values,Array)};const l=e.getInterpolation();l!==e.DefaultInterpolation&&(r.interpolation=l)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new gp(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new pp(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new gm(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(r);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let r=0,l=t.length;r!==l;++r)t[r]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let r=0,l=t.length;r!==l;++r)t[r]*=e}return this}trim(e,t){const r=this.times,l=r.length;let d=0,p=l-1;for(;d!==l&&r[d]<e;)++d;for(;-1!==p&&r[p]>t;)--p;if(++p,0!==d||p!==l){d>=p&&(p=Math.max(p,1),d=p-1);const g=this.getValueSize();this.times=Fo(r,d,p),this.values=Fo(this.values,d*g,p*g)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,l=this.values,d=r.length;0===d&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let p=null;for(let g=0;g!==d;g++){const y=r[g];if("number"==typeof y&&isNaN(y)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,g,y),e=!1;break}if(null!==p&&p>y){console.error("THREE.KeyframeTrack: Out of order keys.",this,g,y,p),e=!1;break}p=y}if(void 0!==l&&dp(l))for(let g=0,y=l.length;g!==y;++g){const b=l[g];if(isNaN(b)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,g,b),e=!1;break}}return e}optimize(){const e=Fo(this.times),t=Fo(this.values),r=this.getValueSize(),l=2302===this.getInterpolation(),d=e.length-1;let p=1;for(let g=1;g<d;++g){let y=!1;const b=e[g];if(b!==e[g+1]&&(1!==g||b!==e[0]))if(l)y=!0;else{const T=g*r,E=T-r,I=T+r;for(let F=0;F!==r;++F){const N=t[T+F];if(N!==t[E+F]||N!==t[I+F]){y=!0;break}}}if(y){if(g!==p){e[p]=e[g];const T=g*r,E=p*r;for(let I=0;I!==r;++I)t[E+I]=t[T+I]}++p}}if(d>0){e[p]=e[d];for(let g=d*r,y=p*r,b=0;b!==r;++b)t[y+b]=t[g+b];++p}return p!==e.length?(this.times=Fo(e,0,p),this.values=Fo(t,0,p*r)):(this.times=e,this.values=t),this}clone(){const e=Fo(this.times,0),t=Fo(this.values,0),l=new(0,this.constructor)(this.name,e,t);return l.createInterpolant=this.createInterpolant,l}}la.prototype.TimeBufferType=Float32Array,la.prototype.ValueBufferType=Float32Array,la.prototype.DefaultInterpolation=2301;class Ks extends la{}Ks.prototype.ValueTypeName="bool",Ks.prototype.ValueBufferType=Array,Ks.prototype.DefaultInterpolation=2300,Ks.prototype.InterpolantFactoryMethodLinear=void 0,Ks.prototype.InterpolantFactoryMethodSmooth=void 0;(class Tu extends la{}).prototype.ValueTypeName="color";(class qr extends la{}).prototype.ValueTypeName="number";class ec extends fl{constructor(e,t,r,l){super(e,t,r,l)}interpolate_(e,t,r,l){const d=this.resultBuffer,p=this.sampleValues,g=this.valueSize,y=(r-t)/(l-t);let b=e*g;for(let M=b+g;b!==M;b+=4)Ns.slerpFlat(d,0,p,b-g,p,b,y);return d}}class pl extends la{InterpolantFactoryMethodLinear(e){return new ec(this.times,this.values,this.getValueSize(),e)}}pl.prototype.ValueTypeName="quaternion",pl.prototype.DefaultInterpolation=2301,pl.prototype.InterpolantFactoryMethodSmooth=void 0;class Ds extends la{}Ds.prototype.ValueTypeName="string",Ds.prototype.ValueBufferType=Array,Ds.prototype.DefaultInterpolation=2300,Ds.prototype.InterpolantFactoryMethodLinear=void 0,Ds.prototype.InterpolantFactoryMethodSmooth=void 0;(class Au extends la{}).prototype.ValueTypeName="vector",Error;const _l="\\[\\]\\.:\\/",Vd=new RegExp("["+_l+"]","g"),Pu="[^"+_l+"]",ka="[^"+_l.replace("\\.","")+"]",Hd=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Pu)+/(WCOD+)?/.source.replace("WCOD",ka)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Pu)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Pu)+"$"),Fu=["material","materials","bones","map"];class Gd{constructor(e,t,r){const l=r||Xi.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,l)}getValue(e,t){this.bind();const l=this._bindings[this._targetGroup.nCachedObjects_];void 0!==l&&l.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let l=this._targetGroup.nCachedObjects_,d=r.length;l!==d;++l)r[l].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}let Xi=(()=>{class m{constructor(t,r,l){this.path=r,this.parsedPath=l||m.parseTrackName(r),this.node=m.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,r,l){return t&&t.isAnimationObjectGroup?new m.Composite(t,r,l):new m(t,r,l)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Vd,"")}static parseTrackName(t){const r=Hd.exec(t);if(null===r)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const l={nodeName:r[2],objectName:r[3],objectIndex:r[4],propertyName:r[5],propertyIndex:r[6]},d=l.nodeName&&l.nodeName.lastIndexOf(".");if(void 0!==d&&-1!==d){const p=l.nodeName.substring(d+1);-1!==Fu.indexOf(p)&&(l.nodeName=l.nodeName.substring(0,d),l.objectName=p)}if(null===l.propertyName||0===l.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return l}static findNode(t,r){if(void 0===r||""===r||"."===r||-1===r||r===t.name||r===t.uuid)return t;if(t.skeleton){const l=t.skeleton.getBoneByName(r);if(void 0!==l)return l}if(t.children){const l=function(p){for(let g=0;g<p.length;g++){const y=p[g];if(y.name===r||y.uuid===r)return y;const b=l(y.children);if(b)return b}return null},d=l(t.children);if(d)return d}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,r){t[r]=this.targetObject[this.propertyName]}_getValue_array(t,r){const l=this.resolvedProperty;for(let d=0,p=l.length;d!==p;++d)t[r++]=l[d]}_getValue_arrayElement(t,r){t[r]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,r){this.resolvedProperty.toArray(t,r)}_setValue_direct(t,r){this.targetObject[this.propertyName]=t[r]}_setValue_direct_setNeedsUpdate(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,r){const l=this.resolvedProperty;for(let d=0,p=l.length;d!==p;++d)l[d]=t[r++]}_setValue_array_setNeedsUpdate(t,r){const l=this.resolvedProperty;for(let d=0,p=l.length;d!==p;++d)l[d]=t[r++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,r){const l=this.resolvedProperty;for(let d=0,p=l.length;d!==p;++d)l[d]=t[r++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,r){this.resolvedProperty[this.propertyIndex]=t[r]}_setValue_arrayElement_setNeedsUpdate(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,r){this.resolvedProperty.fromArray(t,r)}_setValue_fromArray_setNeedsUpdate(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,r){this.bind(),this.getValue(t,r)}_setValue_unbound(t,r){this.bind(),this.setValue(t,r)}bind(){let t=this.node;const r=this.parsedPath,l=r.objectName,d=r.propertyName;let p=r.propertyIndex;if(t||(t=m.findNode(this.rootNode,r.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(l){let M=r.objectIndex;switch(l){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let T=0;T<t.length;T++)if(t[T].name===M){M=T;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[l])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[l]}if(void 0!==M){if(void 0===t[M])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[M]}}const g=t[d];if(void 0===g)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+r.nodeName+"."+d+" but it wasn't found.",t);let y=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?y=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(y=this.Versioning.MatrixWorldNeedsUpdate);let b=this.BindingType.Direct;if(void 0!==p){if("morphTargetInfluences"===d){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[p]&&(p=t.morphTargetDictionary[p])}b=this.BindingType.ArrayElement,this.resolvedProperty=g,this.propertyIndex=p}else void 0!==g.fromArray&&void 0!==g.toArray?(b=this.BindingType.HasFromToArray,this.resolvedProperty=g):Array.isArray(g)?(b=this.BindingType.EntireArray,this.resolvedProperty=g):this.propertyName=d;this.getValue=this.GetterByBindingType[b],this.setValue=this.SetterByBindingTypeAndVersioning[b][y]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return m.Composite=Gd,m})();Xi.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Xi.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Xi.prototype.GetterByBindingType=[Xi.prototype._getValue_direct,Xi.prototype._getValue_array,Xi.prototype._getValue_arrayElement,Xi.prototype._getValue_toArray],Xi.prototype.SetterByBindingTypeAndVersioning=[[Xi.prototype._setValue_direct,Xi.prototype._setValue_direct_setNeedsUpdate,Xi.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Xi.prototype._setValue_array,Xi.prototype._setValue_array_setNeedsUpdate,Xi.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Xi.prototype._setValue_arrayElement,Xi.prototype._setValue_arrayElement_setNeedsUpdate,Xi.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Xi.prototype._setValue_fromArray,Xi.prototype._setValue_fromArray_setNeedsUpdate,Xi.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1),typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"150"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="150");class Yy{constructor(e,t,r){this.variables=[],this.currentTextureIndex=0;let l=wr;const d=new $f,p=new ad;p.position.z=1;const g={passThruTexture:{value:null}},y=T("uniform sampler2D passThruTexture;\n\nvoid main() {\n\n\tvec2 uv = gl_FragCoord.xy / resolution.xy;\n\n\tgl_FragColor = texture2D( passThruTexture, uv );\n\n}\n",g),b=new Tr(new ld(2,2),y);function M(F){F.defines.resolution="vec2( "+e.toFixed(1)+", "+t.toFixed(1)+" )"}function T(F,N){const L=new co({uniforms:N=N||{},vertexShader:"void main()\t{\n\n\tgl_Position = vec4( position, 1.0 );\n\n}\n",fragmentShader:F});return M(L),L}d.add(b),this.setDataType=function(F){return l=F,this},this.addVariable=function(F,N,L){const z={name:F,initialValueTexture:L,material:this.createShaderMaterial(N),dependencies:null,renderTargets:[],wrapS:null,wrapT:null,minFilter:fi,magFilter:fi};return this.variables.push(z),z},this.setVariableDependencies=function(F,N){F.dependencies=N},this.init=function(){if(!1===r.capabilities.isWebGL2&&!1===r.extensions.has("OES_texture_float"))return"No OES_texture_float support for float textures.";if(0===r.capabilities.maxVertexTextures)return"No support for vertex shader textures.";for(let F=0;F<this.variables.length;F++){const N=this.variables[F];N.renderTargets[0]=this.createRenderTarget(e,t,N.wrapS,N.wrapT,N.minFilter,N.magFilter),N.renderTargets[1]=this.createRenderTarget(e,t,N.wrapS,N.wrapT,N.minFilter,N.magFilter),this.renderTexture(N.initialValueTexture,N.renderTargets[0]),this.renderTexture(N.initialValueTexture,N.renderTargets[1]);const L=N.material,W=L.uniforms;if(null!==N.dependencies)for(let z=0;z<N.dependencies.length;z++){const G=N.dependencies[z];if(G.name!==N.name){let j=!1;for(let ee=0;ee<this.variables.length;ee++)if(G.name===this.variables[ee].name){j=!0;break}if(!j)return"Variable dependency not found. Variable="+N.name+", dependency="+G.name}W[G.name]={value:null},L.fragmentShader="\nuniform sampler2D "+G.name+";\n"+L.fragmentShader}}return this.currentTextureIndex=0,null},this.compute=function(){const F=this.currentTextureIndex,N=0===this.currentTextureIndex?1:0;for(let L=0,W=this.variables.length;L<W;L++){const z=this.variables[L];if(null!==z.dependencies){const G=z.material.uniforms;for(let j=0,ee=z.dependencies.length;j<ee;j++){const ie=z.dependencies[j];G[ie.name].value=ie.renderTargets[F].texture}}this.doRenderTarget(z.material,z.renderTargets[N])}this.currentTextureIndex=N},this.getCurrentRenderTarget=function(F){return F.renderTargets[this.currentTextureIndex]},this.getAlternateRenderTarget=function(F){return F.renderTargets[0===this.currentTextureIndex?1:0]},this.dispose=function(){b.geometry.dispose(),b.material.dispose();const F=this.variables;for(let N=0;N<F.length;N++){const L=F[N];L.initialValueTexture&&L.initialValueTexture.dispose();const W=L.renderTargets;for(let z=0;z<W.length;z++)W[z].dispose()}},this.addResolutionDefine=M,this.createShaderMaterial=T,this.createRenderTarget=function(F,N,L,W,z,G){return new Xa(F=F||e,N=N||t,{wrapS:L=L||Lt,wrapT:W=W||Lt,minFilter:z=z||fi,magFilter:G=G||fi,format:Ti,type:l,depthBuffer:!1})},this.createTexture=function(){const F=new Float32Array(e*t*4),N=new Sd(F,e,t,Ti,wr);return N.needsUpdate=!0,N},this.renderTexture=function(F,N){g.passThruTexture.value=F,this.doRenderTarget(y,N),g.passThruTexture.value=null},this.doRenderTarget=function(F,N){const L=r.getRenderTarget(),W=r.xr.enabled,z=r.shadowMap.autoUpdate,G=r.outputEncoding,j=r.toneMapping;r.xr.enabled=!1,r.shadowMap.autoUpdate=!1,r.outputEncoding=gs,r.toneMapping=0,b.material=F,r.setRenderTarget(N),r.render(d,p),b.material=y,r.xr.enabled=W,r.shadowMap.autoUpdate=z,r.outputEncoding=G,r.toneMapping=j,r.setRenderTarget(L)}}}var Qh=$(4650);let qy=(()=>{class m{constructor(){}init(t,r){const l=t*t;class d extends Zn{constructor(){super();const ct=3*l,Rt=3*ct,Oe=new pi(new Float32Array(3*Rt),3),en=new pi(new Float32Array(3*Rt),3),$t=new pi(new Float32Array(2*Rt),2),tn=new pi(new Float32Array(Rt),1);this.setAttribute("position",Oe),this.setAttribute("birdColor",en),this.setAttribute("reference",$t),this.setAttribute("birdVertex",tn);let mn=0;function xn(Ke){for(let xt=0;xt<Ke.length;xt++)Oe.array[mn++]=Ke[xt]}for(let Ke=0;Ke<l;Ke++)xn([0,-0,-20,0,4,-20,0,0,30]),xn([0,0,-15,-20,0,0,0,0,15]),xn([0,0,15,20,0,0,0,0,-15]);for(let Ke=0;Ke<3*ct;Ke++){const Ut=~~(~~(Ke/3)/3),Cn=Ut%t/t,Jt=~~(Ut/t)/t,En=new St(4473924+~~(Ke/9)/l*6710886);en.array[3*Ke+0]=En.r,en.array[3*Ke+1]=En.g,en.array[3*Ke+2]=En.b,$t.array[2*Ke]=Cn,$t.array[2*Ke+1]=Jt,tn.array[Ke]=Ke%9}this.scale(.2,.2,.2)}}let p,y,b,M,T=0,E=0,I=window.innerWidth/2,F=window.innerHeight/2;const N=800;let z,G,j,ee,ie,fe,W=performance.now();function Nt(){I=window.innerWidth/2,F=window.innerHeight/2,y.aspect=window.innerWidth/window.innerHeight,y.updateProjectionMatrix(),M.setSize(window.innerWidth,window.innerHeight)}function ft(It){!1!==It.isPrimary&&(T=It.clientX-I,E=It.clientY-F)}(function pt(){p=document.createElement("div"),r.appendChild(p),y=new Ar(75,window.innerWidth/window.innerHeight,1,3e3),y.position.z=350,b=new $f,b.background=new St(0),b.fog=new jf(16777215,100,1e3),M=new e0,M.setPixelRatio(window.devicePixelRatio),M.setSize(window.innerWidth,window.innerHeight),p.appendChild(M.domElement),function Fe(){z=new Yy(t,t,M),!1===M.capabilities.isWebGL2&&z.setDataType(Ss);const It=z.createTexture(),Re=z.createTexture();(function Ze(It){const Re=It.image.data;for(let ct=0,Rt=Re.length;ct<Rt;ct+=4){const Oe=Math.random()*N-400,en=Math.random()*N-400,$t=Math.random()*N-400;Re[ct+0]=Oe,Re[ct+1]=en,Re[ct+2]=$t,Re[ct+3]=1}})(It),function _t(It){const Re=It.image.data;for(let ct=0,Rt=Re.length;ct<Rt;ct+=4){const Oe=Math.random()-.5,en=Math.random()-.5,$t=Math.random()-.5;Re[ct+0]=10*Oe,Re[ct+1]=10*en,Re[ct+2]=10*$t,Re[ct+3]=1}}(Re),G=z.addVariable("textureVelocity","\n        \n    uniform float time;\n    uniform float testing;\n    uniform float delta; // about 0.016\n    uniform float separationDistance; // 20\n    uniform float alignmentDistance; // 40\n    uniform float cohesionDistance; //\n    uniform float freedomFactor;\n    uniform vec3 predator;\n    \n    const float width = resolution.x;\n    const float height = resolution.y;\n    \n    const float PI = 3.141592653589793;\n    const float PI_2 = PI * 2.0;\n    // const float VISION = PI * 0.55;\n    \n    float zoneRadius = 40.0;\n    float zoneRadiusSquared = 1600.0;\n    \n    float separationThresh = 0.45;\n    float alignmentThresh = 0.65;\n    \n    const float UPPER_BOUNDS = BOUNDS;\n    const float LOWER_BOUNDS = -UPPER_BOUNDS;\n    \n    const float SPEED_LIMIT = 9.0;\n    \n    float rand( vec2 co ){\n        return fract( sin( dot( co.xy, vec2(12.9898,78.233) ) ) * 43758.5453 );\n    }\n    \n    void main() {\n    \n        zoneRadius = separationDistance + alignmentDistance + cohesionDistance;\n        separationThresh = separationDistance / zoneRadius;\n        alignmentThresh = ( separationDistance + alignmentDistance ) / zoneRadius;\n        zoneRadiusSquared = zoneRadius * zoneRadius;\n    \n    \n        vec2 uv = gl_FragCoord.xy / resolution.xy;\n        vec3 birdPosition, birdVelocity;\n    \n        vec3 selfPosition = texture2D( texturePosition, uv ).xyz;\n        vec3 selfVelocity = texture2D( textureVelocity, uv ).xyz;\n    \n        float dist;\n        vec3 dir; // direction\n        float distSquared;\n    \n        float separationSquared = separationDistance * separationDistance;\n        float cohesionSquared = cohesionDistance * cohesionDistance;\n    \n        float f;\n        float percent;\n    \n        vec3 velocity = selfVelocity;\n    \n        float limit = SPEED_LIMIT;\n    \n        dir = predator * UPPER_BOUNDS - selfPosition;\n        dir.z = 0.;\n        // dir.z *= 0.6;\n        dist = length( dir );\n        distSquared = dist * dist;\n    \n        float preyRadius = 150.0;\n        float preyRadiusSq = preyRadius * preyRadius;\n    \n    \n        // move birds away from predator\n        if ( dist < preyRadius ) {\n    \n            f = ( distSquared / preyRadiusSq - 1.0 ) * delta * 100.;\n            velocity += normalize( dir ) * f;\n            limit += 5.0;\n        }\n    \n    \n        // if (testing == 0.0) {}\n        // if ( rand( uv + time ) < freedomFactor ) {}\n    \n    \n        // Attract flocks to the center\n        vec3 central = vec3( 0., 0., 0. );\n        dir = selfPosition - central;\n        dist = length( dir );\n    \n        dir.y *= 2.5;\n        velocity -= normalize( dir ) * delta * 5.;\n    \n        for ( float y = 0.0; y < height; y++ ) {\n            for ( float x = 0.0; x < width; x++ ) {\n    \n                vec2 ref = vec2( x + 0.5, y + 0.5 ) / resolution.xy;\n                birdPosition = texture2D( texturePosition, ref ).xyz;\n    \n                dir = birdPosition - selfPosition;\n                dist = length( dir );\n    \n                if ( dist < 0.0001 ) continue;\n    \n                distSquared = dist * dist;\n    \n                if ( distSquared > zoneRadiusSquared ) continue;\n    \n                percent = distSquared / zoneRadiusSquared;\n    \n                if ( percent < separationThresh ) { // low\n    \n                    // Separation - Move apart for comfort\n                    f = ( separationThresh / percent - 1.0 ) * delta;\n                    velocity -= normalize( dir ) * f;\n    \n                } else if ( percent < alignmentThresh ) { // high\n    \n                    // Alignment - fly the same direction\n                    float threshDelta = alignmentThresh - separationThresh;\n                    float adjustedPercent = ( percent - separationThresh ) / threshDelta;\n    \n                    birdVelocity = texture2D( textureVelocity, ref ).xyz;\n    \n                    f = ( 0.5 - cos( adjustedPercent * PI_2 ) * 0.5 + 0.5 ) * delta;\n                    velocity += normalize( birdVelocity ) * f;\n    \n                } else {\n    \n                    // Attraction / Cohesion - move closer\n                    float threshDelta = 1.0 - alignmentThresh;\n                    float adjustedPercent;\n                    if( threshDelta == 0. ) adjustedPercent = 1.;\n                    else adjustedPercent = ( percent - alignmentThresh ) / threshDelta;\n    \n                    f = ( 0.5 - ( cos( adjustedPercent * PI_2 ) * -0.5 + 0.5 ) ) * delta;\n    \n                    velocity += normalize( dir ) * f;\n    \n                }\n    \n            }\n    \n        }\n    \n    \n    \n        // this make tends to fly around than down or up\n        // if (velocity.y > 0.) velocity.y *= (1. - 0.2 * delta);\n    \n        // Speed Limits\n        if ( length( velocity ) > limit ) {\n            velocity = normalize( velocity ) * limit;\n        }\n    \n        gl_FragColor = vec4( velocity, 1.0 );\n    \n    }\n    ",Re),j=z.addVariable("texturePosition","   uniform float time;\n    uniform float delta;\n    \n    void main()\t{\n    \n        vec2 uv = gl_FragCoord.xy / resolution.xy;\n        vec4 tmpPos = texture2D( texturePosition, uv );\n        vec3 position = tmpPos.xyz;\n        vec3 velocity = texture2D( textureVelocity, uv ).xyz;\n    \n        float phase = tmpPos.w;\n    \n        phase = mod( ( phase + delta +\n            length( velocity.xz ) * delta * 3. +\n            max( velocity.y, 0.0 ) * delta * 6. ), 62.83 );\n    \n        gl_FragColor = vec4( position + velocity * delta * 15. , phase );\n    \n    }",It),z.setVariableDependencies(G,[j,G]),z.setVariableDependencies(j,[j,G]),ee=j.material.uniforms,ie=G.material.uniforms,ee.time={value:0},ee.delta={value:0},ie.time={value:1},ie.delta={value:0},ie.testing={value:1},ie.separationDistance={value:1},ie.alignmentDistance={value:1},ie.cohesionDistance={value:1},ie.freedomFactor={value:1},ie.predator={value:new ae},G.material.defines.BOUNDS=N.toFixed(2),G.wrapS=Qt,G.wrapT=Qt,j.wrapS=Qt,j.wrapT=Qt;const ct=z.init();null!==ct&&console.error(ct)}(),p.style.touchAction="none",p.addEventListener("pointermove",ft),window.addEventListener("resize",Nt);const It_alignment=20,It_cohesion=20,It_freedom=.75;ie.separationDistance.value=100,ie.alignmentDistance.value=It_alignment,ie.cohesionDistance.value=It_cohesion,ie.freedomFactor.value=It_freedom,function De(){const It=new d;fe={color:{value:new St(16720384)},texturePosition:{value:null},textureVelocity:{value:null},time:{value:1},delta:{value:0}};const Re=new co({uniforms:fe,vertexShader:"\n    attribute vec2 reference;\n    attribute float birdVertex;\n    \n    attribute vec3 birdColor;\n    \n    uniform sampler2D texturePosition;\n    uniform sampler2D textureVelocity;\n    \n    varying vec4 vColor;\n    varying float z;\n    \n    uniform float time;\n    \n    void main() {\n    \n        vec4 tmpPos = texture2D( texturePosition, reference );\n        vec3 pos = tmpPos.xyz;\n        vec3 velocity = normalize(texture2D( textureVelocity, reference ).xyz);\n    \n        vec3 newPosition = position;\n    \n        if ( birdVertex == 4.0 || birdVertex == 7.0 ) {\n            // flap wings\n            newPosition.y = sin( tmpPos.w ) * 5.;\n        }\n    \n        newPosition = mat3( modelMatrix ) * newPosition;\n    \n    \n        velocity.z *= -1.;\n        float xz = length( velocity.xz );\n        float xyz = 1.;\n        float x = sqrt( 1. - velocity.y * velocity.y );\n    \n        float cosry = velocity.x / xz;\n        float sinry = velocity.z / xz;\n    \n        float cosrz = x / xyz;\n        float sinrz = velocity.y / xyz;\n    \n        mat3 maty =  mat3(\n            cosry, 0, -sinry,\n            0    , 1, 0     ,\n            sinry, 0, cosry\n    \n        );\n    \n        mat3 matz =  mat3(\n            cosrz , sinrz, 0,\n            -sinrz, cosrz, 0,\n            0     , 0    , 1\n        );\n    \n        newPosition =  maty * matz * newPosition;\n        newPosition += pos;\n    \n        z = newPosition.z;\n    \n        vColor = vec4( birdColor, 1.0 );\n        gl_Position = projectionMatrix *  viewMatrix  * vec4( newPosition, 1.0 );\n    }\n    ",fragmentShader:"\n        \n    varying vec4 vColor;\n    varying float z;\n    \n    uniform vec3 color;\n    \n    void main() {\n        // Fake colors for now\n        float z2 = 0.2 + ( 1000. - z ) / 1000. * vColor.x;\n        gl_FragColor = vec4( z2, z2, z2, 1. );\n    \n    }\n    ",side:2}),ct=new Tr(It,Re);ct.rotation.y=Math.PI/2,ct.matrixAutoUpdate=!1,ct.updateMatrix(),b.add(ct)}()})(),function wt(){requestAnimationFrame(wt),function At(){const It=performance.now();let Re=(It-W)/1e3;Re>1&&(Re=1),W=It,ee.time.value=It,ee.delta.value=Re,ie.time.value=It,ie.delta.value=Re,fe.time.value=It,fe.delta.value=Re,ie.predator.value.set(.5*T/I,-.5*E/F,0),T=1e4,E=1e4,z.compute(),fe.texturePosition.value=z.getCurrentRenderTarget(j).texture,fe.textureVelocity.value=z.getCurrentRenderTarget(G).texture,M.render(b,y)}()}()}}return m.\u0275fac=function(t){return new(t||m)},m.\u0275prov=Qh.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},2340:(an,qe,$)=>{$.d(qe,{N:()=>U});const U={production:!0,version:"prod",serverUrl:"https://api.chucknorris.io",defaultLanguage:"en-US",supportedLanguages:["de-DE","en-US","es-ES"]}},3546:(an,qe,$)=>{var U=$(1481),v=$(4650),xe=$(6895),Te=($(2076),$(4128),$(4004));let oc=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=v.oAB({type:a}),a.\u0275inj=v.cJS({}),a})(),Cr=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=v.oAB({type:a}),a.\u0275inj=v.cJS({imports:[oc]}),a})(),Gi=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=v.oAB({type:a}),a.\u0275inj=v.cJS({imports:[Cr]}),a})();var zr=$(1380),$o=$(9646),Yo=$(9751),rf=$(4351),es=$(9300);class $a{}class Pi{}class On{constructor(c){this.normalizedNames=new Map,this.lazyUpdate=null,c?this.lazyInit="string"==typeof c?()=>{this.headers=new Map,c.split("\n").forEach(o=>{const f=o.indexOf(":");if(f>0){const x=o.slice(0,f),R=x.toLowerCase(),J=o.slice(f+1).trim();this.maybeSetNormalizedName(x,R),this.headers.has(R)?this.headers.get(R).push(J):this.headers.set(R,[J])}})}:()=>{this.headers=new Map,Object.keys(c).forEach(o=>{let f=c[o];const x=o.toLowerCase();"string"==typeof f&&(f=[f]),f.length>0&&(this.headers.set(x,f),this.maybeSetNormalizedName(o,x))})}:this.headers=new Map}has(c){return this.init(),this.headers.has(c.toLowerCase())}get(c){this.init();const o=this.headers.get(c.toLowerCase());return o&&o.length>0?o[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(c){return this.init(),this.headers.get(c.toLowerCase())||null}append(c,o){return this.clone({name:c,value:o,op:"a"})}set(c,o){return this.clone({name:c,value:o,op:"s"})}delete(c,o){return this.clone({name:c,value:o,op:"d"})}maybeSetNormalizedName(c,o){this.normalizedNames.has(o)||this.normalizedNames.set(o,c)}init(){this.lazyInit&&(this.lazyInit instanceof On?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(c=>this.applyUpdate(c)),this.lazyUpdate=null))}copyFrom(c){c.init(),Array.from(c.headers.keys()).forEach(o=>{this.headers.set(o,c.headers.get(o)),this.normalizedNames.set(o,c.normalizedNames.get(o))})}clone(c){const o=new On;return o.lazyInit=this.lazyInit&&this.lazyInit instanceof On?this.lazyInit:this,o.lazyUpdate=(this.lazyUpdate||[]).concat([c]),o}applyUpdate(c){const o=c.name.toLowerCase();switch(c.op){case"a":case"s":let f=c.value;if("string"==typeof f&&(f=[f]),0===f.length)return;this.maybeSetNormalizedName(c.name,o);const x=("a"===c.op?this.headers.get(o):void 0)||[];x.push(...f),this.headers.set(o,x);break;case"d":const R=c.value;if(R){let J=this.headers.get(o);if(!J)return;J=J.filter(ue=>-1===R.indexOf(ue)),0===J.length?(this.headers.delete(o),this.normalizedNames.delete(o)):this.headers.set(o,J)}else this.headers.delete(o),this.normalizedNames.delete(o)}}forEach(c){this.init(),Array.from(this.normalizedNames.keys()).forEach(o=>c(this.normalizedNames.get(o),this.headers.get(o)))}}class gt{encodeKey(c){return qd(c)}encodeValue(c){return qd(c)}decodeKey(c){return decodeURIComponent(c)}decodeValue(c){return decodeURIComponent(c)}}const Ku=/%(\d[a-f0-9])/gi,Qu={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function qd(a){return encodeURIComponent(a).replace(Ku,(c,o)=>Qu[o]??c)}function qo(a){return`${a}`}class As{constructor(c={}){if(this.updates=null,this.cloneFrom=null,this.encoder=c.encoder||new gt,c.fromString){if(c.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Ki(a,c){const o=new Map;return a.length>0&&a.replace(/^\?/,"").split("&").forEach(x=>{const R=x.indexOf("="),[J,ue]=-1==R?[c.decodeKey(x),""]:[c.decodeKey(x.slice(0,R)),c.decodeValue(x.slice(R+1))],ce=o.get(J)||[];ce.push(ue),o.set(J,ce)}),o}(c.fromString,this.encoder)}else c.fromObject?(this.map=new Map,Object.keys(c.fromObject).forEach(o=>{const f=c.fromObject[o],x=Array.isArray(f)?f.map(qo):[qo(f)];this.map.set(o,x)})):this.map=null}has(c){return this.init(),this.map.has(c)}get(c){this.init();const o=this.map.get(c);return o?o[0]:null}getAll(c){return this.init(),this.map.get(c)||null}keys(){return this.init(),Array.from(this.map.keys())}append(c,o){return this.clone({param:c,value:o,op:"a"})}appendAll(c){const o=[];return Object.keys(c).forEach(f=>{const x=c[f];Array.isArray(x)?x.forEach(R=>{o.push({param:f,value:R,op:"a"})}):o.push({param:f,value:x,op:"a"})}),this.clone(o)}set(c,o){return this.clone({param:c,value:o,op:"s"})}delete(c,o){return this.clone({param:c,value:o,op:"d"})}toString(){return this.init(),this.keys().map(c=>{const o=this.encoder.encodeKey(c);return this.map.get(c).map(f=>o+"="+this.encoder.encodeValue(f)).join("&")}).filter(c=>""!==c).join("&")}clone(c){const o=new As({encoder:this.encoder});return o.cloneFrom=this.cloneFrom||this,o.updates=(this.updates||[]).concat(c),o}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(c=>this.map.set(c,this.cloneFrom.map.get(c))),this.updates.forEach(c=>{switch(c.op){case"a":case"s":const o=("a"===c.op?this.map.get(c.param):void 0)||[];o.push(qo(c.value)),this.map.set(c.param,o);break;case"d":if(void 0===c.value){this.map.delete(c.param);break}{let f=this.map.get(c.param)||[];const x=f.indexOf(qo(c.value));-1!==x&&f.splice(x,1),f.length>0?this.map.set(c.param,f):this.map.delete(c.param)}}}),this.cloneFrom=this.updates=null)}}class ae{constructor(){this.map=new Map}set(c,o){return this.map.set(c,o),this}get(c){return this.map.has(c)||this.map.set(c,c.defaultValue()),this.map.get(c)}delete(c){return this.map.delete(c),this}has(c){return this.map.has(c)}keys(){return this.map.keys()}}function mc(a){return typeof ArrayBuffer<"u"&&a instanceof ArrayBuffer}function Xo(a){return typeof Blob<"u"&&a instanceof Blob}function ba(a){return typeof FormData<"u"&&a instanceof FormData}class Al{constructor(c,o,f,x){let R;if(this.url=o,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=c.toUpperCase(),function gc(a){switch(a){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||x?(this.body=void 0!==f?f:null,R=x):R=f,R&&(this.reportProgress=!!R.reportProgress,this.withCredentials=!!R.withCredentials,R.responseType&&(this.responseType=R.responseType),R.headers&&(this.headers=R.headers),R.context&&(this.context=R.context),R.params&&(this.params=R.params)),this.headers||(this.headers=new On),this.context||(this.context=new ae),this.params){const J=this.params.toString();if(0===J.length)this.urlWithParams=o;else{const ue=o.indexOf("?");this.urlWithParams=o+(-1===ue?"?":ue<o.length-1?"&":"")+J}}else this.params=new As,this.urlWithParams=o}serializeBody(){return null===this.body?null:mc(this.body)||Xo(this.body)||ba(this.body)||function _c(a){return typeof URLSearchParams<"u"&&a instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof As?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||ba(this.body)?null:Xo(this.body)?this.body.type||null:mc(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof As?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(c={}){const o=c.method||this.method,f=c.url||this.url,x=c.responseType||this.responseType,R=void 0!==c.body?c.body:this.body,J=void 0!==c.withCredentials?c.withCredentials:this.withCredentials,ue=void 0!==c.reportProgress?c.reportProgress:this.reportProgress;let ce=c.headers||this.headers,we=c.params||this.params;const Ge=c.context??this.context;return void 0!==c.setHeaders&&(ce=Object.keys(c.setHeaders).reduce((Pt,Bt)=>Pt.set(Bt,c.setHeaders[Bt]),ce)),c.setParams&&(we=Object.keys(c.setParams).reduce((Pt,Bt)=>Pt.set(Bt,c.setParams[Bt]),we)),new Al(o,f,R,{params:we,headers:ce,context:Ge,reportProgress:ue,responseType:x,withCredentials:J})}}var Ni=(()=>((Ni=Ni||{})[Ni.Sent=0]="Sent",Ni[Ni.UploadProgress=1]="UploadProgress",Ni[Ni.ResponseHeader=2]="ResponseHeader",Ni[Ni.DownloadProgress=3]="DownloadProgress",Ni[Ni.Response=4]="Response",Ni[Ni.User=5]="User",Ni))();class jc{constructor(c,o=200,f="OK"){this.headers=c.headers||new On,this.status=void 0!==c.status?c.status:o,this.statusText=c.statusText||f,this.url=c.url||null,this.ok=this.status>=200&&this.status<300}}class vc extends jc{constructor(c={}){super(c),this.type=Ni.ResponseHeader}clone(c={}){return new vc({headers:c.headers||this.headers,status:void 0!==c.status?c.status:this.status,statusText:c.statusText||this.statusText,url:c.url||this.url||void 0})}}class Ya extends jc{constructor(c={}){super(c),this.type=Ni.Response,this.body=void 0!==c.body?c.body:null}clone(c={}){return new Ya({body:void 0!==c.body?c.body:this.body,headers:c.headers||this.headers,status:void 0!==c.status?c.status:this.status,statusText:c.statusText||this.statusText,url:c.url||this.url||void 0})}}class ed extends jc{constructor(c){super(c,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${c.url||"(unknown url)"}`:`Http failure response for ${c.url||"(unknown url)"}: ${c.status} ${c.statusText}`,this.error=c.error||null}}function vi(a,c){return{body:c,headers:a.headers,context:a.context,observe:a.observe,params:a.params,reportProgress:a.reportProgress,responseType:a.responseType,withCredentials:a.withCredentials}}let ts=(()=>{class a{constructor(o){this.handler=o}request(o,f,x={}){let R;if(o instanceof Al)R=o;else{let ce,we;ce=x.headers instanceof On?x.headers:new On(x.headers),x.params&&(we=x.params instanceof As?x.params:new As({fromObject:x.params})),R=new Al(o,f,void 0!==x.body?x.body:null,{headers:ce,context:x.context,params:we,reportProgress:x.reportProgress,responseType:x.responseType||"json",withCredentials:x.withCredentials})}const J=(0,$o.of)(R).pipe((0,rf.b)(ce=>this.handler.handle(ce)));if(o instanceof Al||"events"===x.observe)return J;const ue=J.pipe((0,es.h)(ce=>ce instanceof Ya));switch(x.observe||"body"){case"body":switch(R.responseType){case"arraybuffer":return ue.pipe((0,Te.U)(ce=>{if(null!==ce.body&&!(ce.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return ce.body}));case"blob":return ue.pipe((0,Te.U)(ce=>{if(null!==ce.body&&!(ce.body instanceof Blob))throw new Error("Response is not a Blob.");return ce.body}));case"text":return ue.pipe((0,Te.U)(ce=>{if(null!==ce.body&&"string"!=typeof ce.body)throw new Error("Response is not a string.");return ce.body}));default:return ue.pipe((0,Te.U)(ce=>ce.body))}case"response":return ue;default:throw new Error(`Unreachable: unhandled observe type ${x.observe}}`)}}delete(o,f={}){return this.request("DELETE",o,f)}get(o,f={}){return this.request("GET",o,f)}head(o,f={}){return this.request("HEAD",o,f)}jsonp(o,f){return this.request("JSONP",o,{params:(new As).append(f,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(o,f={}){return this.request("OPTIONS",o,f)}patch(o,f,x={}){return this.request("PATCH",o,vi(x,f))}post(o,f,x={}){return this.request("POST",o,vi(x,f))}put(o,f,x={}){return this.request("PUT",o,vi(x,f))}}return a.\u0275fac=function(o){return new(o||a)(v.LFG($a))},a.\u0275prov=v.Yz7({token:a,factory:a.\u0275fac}),a})();class Li{constructor(c,o){this.next=c,this.interceptor=o}handle(c){return this.interceptor.intercept(c,this.next)}}const No=new v.OlP("HTTP_INTERCEPTORS");let qa=(()=>{class a{intercept(o,f){return f.handle(o)}}return a.\u0275fac=function(o){return new(o||a)},a.\u0275prov=v.Yz7({token:a,factory:a.\u0275fac}),a})();const Nl=/^\)\]\}',?\n/;let io=(()=>{class a{constructor(o){this.xhrFactory=o}handle(o){if("JSONP"===o.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Yo.y(f=>{const x=this.xhrFactory.build();if(x.open(o.method,o.urlWithParams),o.withCredentials&&(x.withCredentials=!0),o.headers.forEach((Mt,Mn)=>x.setRequestHeader(Mt,Mn.join(","))),o.headers.has("Accept")||x.setRequestHeader("Accept","application/json, text/plain, */*"),!o.headers.has("Content-Type")){const Mt=o.detectContentTypeHeader();null!==Mt&&x.setRequestHeader("Content-Type",Mt)}if(o.responseType){const Mt=o.responseType.toLowerCase();x.responseType="json"!==Mt?Mt:"text"}const R=o.serializeBody();let J=null;const ue=()=>{if(null!==J)return J;const Mt=x.statusText||"OK",Mn=new On(x.getAllResponseHeaders()),fn=function ns(a){return"responseURL"in a&&a.responseURL?a.responseURL:/^X-Request-URL:/m.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):null}(x)||o.url;return J=new vc({headers:Mn,status:x.status,statusText:Mt,url:fn}),J},ce=()=>{let{headers:Mt,status:Mn,statusText:fn,url:Hn}=ue(),Tn=null;204!==Mn&&(Tn=typeof x.response>"u"?x.responseText:x.response),0===Mn&&(Mn=Tn?200:0);let Gn=Mn>=200&&Mn<300;if("json"===o.responseType&&"string"==typeof Tn){const qi=Tn;Tn=Tn.replace(Nl,"");try{Tn=""!==Tn?JSON.parse(Tn):null}catch(ui){Tn=qi,Gn&&(Gn=!1,Tn={error:ui,text:Tn})}}Gn?(f.next(new Ya({body:Tn,headers:Mt,status:Mn,statusText:fn,url:Hn||void 0})),f.complete()):f.error(new ed({error:Tn,headers:Mt,status:Mn,statusText:fn,url:Hn||void 0}))},we=Mt=>{const{url:Mn}=ue(),fn=new ed({error:Mt,status:x.status||0,statusText:x.statusText||"Unknown Error",url:Mn||void 0});f.error(fn)};let Ge=!1;const Pt=Mt=>{Ge||(f.next(ue()),Ge=!0);let Mn={type:Ni.DownloadProgress,loaded:Mt.loaded};Mt.lengthComputable&&(Mn.total=Mt.total),"text"===o.responseType&&!!x.responseText&&(Mn.partialText=x.responseText),f.next(Mn)},Bt=Mt=>{let Mn={type:Ni.UploadProgress,loaded:Mt.loaded};Mt.lengthComputable&&(Mn.total=Mt.total),f.next(Mn)};return x.addEventListener("load",ce),x.addEventListener("error",we),x.addEventListener("timeout",we),x.addEventListener("abort",we),o.reportProgress&&(x.addEventListener("progress",Pt),null!==R&&x.upload&&x.upload.addEventListener("progress",Bt)),x.send(R),f.next({type:Ni.Sent}),()=>{x.removeEventListener("error",we),x.removeEventListener("abort",we),x.removeEventListener("load",ce),x.removeEventListener("timeout",we),o.reportProgress&&(x.removeEventListener("progress",Pt),null!==R&&x.upload&&x.upload.removeEventListener("progress",Bt)),x.readyState!==x.DONE&&x.abort()}})}}return a.\u0275fac=function(o){return new(o||a)(v.LFG(xe.JF))},a.\u0275prov=v.Yz7({token:a,factory:a.\u0275fac}),a})();const bc=new v.OlP("XSRF_COOKIE_NAME"),wa=new v.OlP("XSRF_HEADER_NAME");class ro{}let Da=(()=>{class a{constructor(o,f,x){this.doc=o,this.platform=f,this.cookieName=x,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const o=this.doc.cookie||"";return o!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,xe.Mx)(o,this.cookieName),this.lastCookieString=o),this.lastToken}}return a.\u0275fac=function(o){return new(o||a)(v.LFG(xe.K0),v.LFG(v.Lbi),v.LFG(bc))},a.\u0275prov=v.Yz7({token:a,factory:a.\u0275fac}),a})(),yo=(()=>{class a{constructor(o,f){this.tokenService=o,this.headerName=f}intercept(o,f){const x=o.url.toLowerCase();if("GET"===o.method||"HEAD"===o.method||x.startsWith("http://")||x.startsWith("https://"))return f.handle(o);const R=this.tokenService.getToken();return null!==R&&!o.headers.has(this.headerName)&&(o=o.clone({headers:o.headers.set(this.headerName,R)})),f.handle(o)}}return a.\u0275fac=function(o){return new(o||a)(v.LFG(ro),v.LFG(wa))},a.\u0275prov=v.Yz7({token:a,factory:a.\u0275fac}),a})(),Zo=(()=>{class a{constructor(o,f){this.backend=o,this.injector=f,this.chain=null}handle(o){if(null===this.chain){const f=this.injector.get(No,[]);this.chain=f.reduceRight((x,R)=>new Li(x,R),this.backend)}return this.chain.handle(o)}}return a.\u0275fac=function(o){return new(o||a)(v.LFG(Pi),v.LFG(v.zs3))},a.\u0275prov=v.Yz7({token:a,factory:a.\u0275fac}),a})(),Ma=(()=>{class a{static disable(){return{ngModule:a,providers:[{provide:yo,useClass:qa}]}}static withOptions(o={}){return{ngModule:a,providers:[o.cookieName?{provide:bc,useValue:o.cookieName}:[],o.headerName?{provide:wa,useValue:o.headerName}:[]]}}}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=v.oAB({type:a}),a.\u0275inj=v.cJS({providers:[yo,{provide:No,useExisting:yo,multi:!0},{provide:ro,useClass:Da},{provide:bc,useValue:"XSRF-TOKEN"},{provide:wa,useValue:"X-XSRF-TOKEN"}]}),a})(),xc=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=v.oAB({type:a}),a.\u0275inj=v.cJS({providers:[ts,{provide:$a,useClass:Zo},io,{provide:Pi,useExisting:io}],imports:[Ma.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),a})();var td=$(9770),Rl=$(2843),_s=$(8421),Ko=$(5577),vs=$(1144),ys=$(576),Ca=$(3268);const Sa=["addListener","removeListener"],nd=["addEventListener","removeEventListener"],Ol=["on","off"];function Sr(a,c,o,f){if((0,ys.m)(o)&&(f=o,o=void 0),f)return Sr(a,c,o).pipe((0,Ca.Z)(f));const[x,R]=function Rs(a){return(0,ys.m)(a.addEventListener)&&(0,ys.m)(a.removeEventListener)}(a)?nd.map(J=>ue=>a[J](c,ue,o)):function ni(a){return(0,ys.m)(a.addListener)&&(0,ys.m)(a.removeListener)}(a)?Sa.map(Is(a,c)):function so(a){return(0,ys.m)(a.on)&&(0,ys.m)(a.off)}(a)?Ol.map(Is(a,c)):[];if(!x&&(0,vs.z)(a))return(0,Ko.z)(J=>Sr(J,c,o))((0,_s.Xf)(a));if(!x)throw new TypeError("Invalid event target");return new Yo.y(J=>{const ue=(...ce)=>J.next(1<ce.length?ce:ce[0]);return x(ue),()=>R(ue)})}function Is(a,c){return o=>f=>a[o](c,f)}var Ja=$(7272),ir=$(7579),Os=$(5032);const oo=new Yo.y(Os.Z);var Dc=$(6451),Qo=$(3900),Zd=$(4033),Ka=$(4482);const Qa={connector:()=>new ir.x};function lr(a,c=Qa){const{connector:o}=c;return(0,Ka.e)((f,x)=>{const R=o();(0,_s.Xf)(a(function Yc(a){return new Yo.y(c=>a.subscribe(c))}(R))).subscribe(x),x.add(f.subscribe(R))})}var Ci=$(5698),Mc=$(8505),id=$(727);class qc extends id.w0{constructor(c,o){super()}schedule(c,o=0){return this}}const Ll={setInterval(a,c,...o){const{delegate:f}=Ll;return f?.setInterval?f.setInterval(a,c,...o):setInterval(a,c,...o)},clearInterval(a){const{delegate:c}=Ll;return(c?.clearInterval||clearInterval)(a)},delegate:void 0};var rd=$(8737),Ea=$(6063);class cr{constructor(c,o=cr.now){this.schedulerActionCtor=c,this.now=o}schedule(c,o=0,f){return new this.schedulerActionCtor(this,c).schedule(f,o)}}cr.now=Ea.l.now;const Or=new class rs extends cr{constructor(c,o=cr.now){super(c,o),this.actions=[],this._active=!1}flush(c){const{actions:o}=this;if(this._active)return void o.push(c);let f;this._active=!0;do{if(f=c.execute(c.state,c.delay))break}while(c=o.shift());if(this._active=!1,f){for(;c=o.shift();)c.unsubscribe();throw f}}}(class Jd extends qc{constructor(c,o){super(c,o),this.scheduler=c,this.work=o,this.pending=!1}schedule(c,o=0){var f;if(this.closed)return this;this.state=c;const x=this.id,R=this.scheduler;return null!=x&&(this.id=this.recycleAsyncId(R,x,o)),this.pending=!0,this.delay=o,this.id=null!==(f=this.id)&&void 0!==f?f:this.requestAsyncId(R,this.id,o),this}requestAsyncId(c,o,f=0){return Ll.setInterval(c.flush.bind(c,this),f)}recycleAsyncId(c,o,f=0){if(null!=f&&this.delay===f&&!1===this.pending)return o;null!=o&&Ll.clearInterval(o)}execute(c,o){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const f=this._execute(c,o);if(f)return f;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(c,o){let x,f=!1;try{this.work(c)}catch(R){f=!0,x=R||new Error("Scheduled action threw falsy error")}if(f)return this.unsubscribe(),x}unsubscribe(){if(!this.closed){const{id:c,scheduler:o}=this,{actions:f}=o;this.work=this.state=this.scheduler=null,this.pending=!1,(0,rd.P)(f,this),null!=c&&(this.id=this.recycleAsyncId(o,c,null)),this.delay=null,super.unsubscribe()}}}),Xc=Or;var _r=$(5403),kl=$(9718);function Ei(a,c){return c?o=>(0,Ja.z)(c.pipe((0,Ci.q)(1),function Fl(){return(0,Ka.e)((a,c)=>{a.subscribe((0,_r.x)(c,Os.Z))})}()),o.pipe(Ei(a))):(0,Ko.z)((o,f)=>(0,_s.Xf)(a(o,f)).pipe((0,Ci.q)(1),(0,kl.h)(o)))}var Kd=$(3532);function Zc(a=0,c,o=Xc){let f=-1;return null!=c&&((0,Kd.K)(c)?o=c:f=c),new Yo.y(x=>{let R=function Qd(a){return a instanceof Date&&!isNaN(a)}(a)?+a-o.now():a;R<0&&(R=0);let J=0;return o.schedule(function(){x.closed||(x.next(J++),0<=f?this.schedule(void 0,f):x.complete())},R)})}function bo(a,c=Or){const o=Zc(a,c);return Ei(()=>o)}const Jc="Service workers are disabled or not supported by this browser";class Cc{constructor(c){if(this.serviceWorker=c,c){const f=Sr(c,"controllerchange").pipe((0,Te.U)(()=>c.controller)),x=(0,td.P)(()=>(0,$o.of)(c.controller)),R=(0,Ja.z)(x,f);this.worker=R.pipe((0,es.h)(Ge=>!!Ge)),this.registration=this.worker.pipe((0,Qo.w)(()=>c.getRegistration()));const we=Sr(c,"message").pipe((0,Te.U)(Ge=>Ge.data)).pipe((0,es.h)(Ge=>Ge&&Ge.type)).pipe(function Pl(a){return a?c=>lr(a)(c):c=>function Io(a,c){const o=(0,ys.m)(a)?a:()=>a;return(0,ys.m)(c)?lr(c,{connector:o}):f=>new Zd.c(f,o)}(new ir.x)(c)}());we.connect(),this.events=we}else this.worker=this.events=this.registration=function Kc(a){return(0,td.P)(()=>(0,Rl._)(new Error(a)))}(Jc)}postMessage(c,o){return this.worker.pipe((0,Ci.q)(1),(0,Mc.b)(f=>{f.postMessage({action:c,...o})})).toPromise().then(()=>{})}postMessageWithOperation(c,o,f){const x=this.waitForOperationCompleted(f),R=this.postMessage(c,o);return Promise.all([R,x]).then(([,J])=>J)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(c){let o;return o="string"==typeof c?f=>f.type===c:f=>c.includes(f.type),this.events.pipe((0,es.h)(o))}nextEventOfType(c){return this.eventsOfType(c).pipe((0,Ci.q)(1))}waitForOperationCompleted(c){return this.eventsOfType("OPERATION_COMPLETED").pipe((0,es.h)(o=>o.nonce===c),(0,Ci.q)(1),(0,Te.U)(o=>{if(void 0!==o.result)return o.result;throw new Error(o.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let bs=(()=>{class a{constructor(o){if(this.sw=o,this.subscriptionChanges=new ir.x,!o.isEnabled)return this.messages=oo,this.notificationClicks=oo,void(this.subscription=oo);this.messages=this.sw.eventsOfType("PUSH").pipe((0,Te.U)(x=>x.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,Te.U)(x=>x.data)),this.pushManager=this.sw.registration.pipe((0,Te.U)(x=>x.pushManager));const f=this.pushManager.pipe((0,Qo.w)(x=>x.getSubscription()));this.subscription=(0,Dc.T)(f,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(o){if(!this.sw.isEnabled)return Promise.reject(new Error(Jc));const f={userVisibleOnly:!0};let x=this.decodeBase64(o.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),R=new Uint8Array(new ArrayBuffer(x.length));for(let J=0;J<x.length;J++)R[J]=x.charCodeAt(J);return f.applicationServerKey=R,this.pushManager.pipe((0,Qo.w)(J=>J.subscribe(f)),(0,Ci.q)(1)).toPromise().then(J=>(this.subscriptionChanges.next(J),J))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe((0,Ci.q)(1),(0,Qo.w)(f=>{if(null===f)throw new Error("Not subscribed to push notifications.");return f.unsubscribe().then(x=>{if(!x)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(Jc))}decodeBase64(o){return atob(o)}}return a.\u0275fac=function(o){return new(o||a)(v.LFG(Cc))},a.\u0275prov=v.Yz7({token:a,factory:a.\u0275fac}),a})(),Qc=(()=>{class a{constructor(o){if(this.sw=o,!o.isEnabled)return this.versionUpdates=oo,this.available=oo,this.activated=oo,void(this.unrecoverable=oo);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.available=this.versionUpdates.pipe((0,es.h)(f=>"VERSION_READY"===f.type),(0,Te.U)(f=>({type:"UPDATE_AVAILABLE",current:f.currentVersion,available:f.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Jc));const o=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:o},o)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Jc));const o=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:o},o)}}return a.\u0275fac=function(o){return new(o||a)(v.LFG(Cc))},a.\u0275prov=v.Yz7({token:a,factory:a.\u0275fac}),a})();class eu{}const St=new v.OlP("NGSW_REGISTER_SCRIPT");function Er(a,c,o,f){return()=>{if(!(0,xe.NF)(f)||!("serviceWorker"in navigator)||!1===o.enabled)return;let R;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof o.registrationStrategy)R=o.registrationStrategy();else{const[ue,...ce]=(o.registrationStrategy||"registerWhenStable:30000").split(":");switch(ue){case"registerImmediately":R=(0,$o.of)(null);break;case"registerWithDelay":R=ao(+ce[0]||0);break;case"registerWhenStable":R=ce[0]?(0,Dc.T)(ur(a),ao(+ce[0])):ur(a);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${o.registrationStrategy}`)}}a.get(v.R0b).runOutsideAngular(()=>R.pipe((0,Ci.q)(1)).subscribe(()=>navigator.serviceWorker.register(c,{scope:o.scope}).catch(ue=>console.error("Service worker registration failed with:",ue))))}}function ao(a){return(0,$o.of)(null).pipe(bo(a))}function ur(a){return a.get(v.z2F).isStable.pipe((0,es.h)(o=>o))}function tu(a,c){return new Cc((0,xe.NF)(c)&&!1!==a.enabled?navigator.serviceWorker:void 0)}let pi=(()=>{class a{static register(o,f={}){return{ngModule:a,providers:[{provide:St,useValue:o},{provide:eu,useValue:f},{provide:Cc,useFactory:tu,deps:[eu,v.Lbi]},{provide:v.ip1,useFactory:Er,deps:[v.zs3,St,eu,v.Lbi],multi:!0}]}}}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=v.oAB({type:a}),a.\u0275inj=v.cJS({providers:[bs,Qc]}),a})();var Ps=$(4463),eh=$(515);const{isArray:C}=Array;function S(a){return 1===a.length&&C(a[0])?a[0]:a}$(1135),$(9841);var Q=$(3269);function he(...a){const c=(0,Q.jO)(a),o=S(a);return o.length?new Yo.y(f=>{let x=o.map(()=>[]),R=o.map(()=>!1);f.add(()=>{x=R=null});for(let J=0;!f.closed&&J<o.length;J++)(0,_s.Xf)(o[J]).subscribe((0,_r.x)(f,ue=>{if(x[J].push(ue),x.every(ce=>ce.length)){const ce=x.map(we=>we.shift());f.next(c?c(...ce):ce),x.some((we,Ge)=>!we.length&&R[Ge])&&f.complete()}},()=>{R[J]=!0,!x[J].length&&f.complete()}));return()=>{x=R=null}}):eh.E}function ht(a){return(0,Ka.e)((c,o)=>{(0,_s.Xf)(a).subscribe((0,_r.x)(o,()=>o.complete(),Os.Z)),!o.closed&&c.subscribe(o)})}$(8675);var Zt=$(4671);function Ii(...a){const c=(0,Q.jO)(a);return(0,Ka.e)((o,f)=>{const x=a.length,R=new Array(x);let J=a.map(()=>!1),ue=!1;for(let ce=0;ce<x;ce++)(0,_s.Xf)(a[ce]).subscribe((0,_r.x)(f,we=>{R[ce]=we,!ue&&!J[ce]&&(J[ce]=!0,(ue=J.every(Zt.y))&&(J=null))},Os.Z));o.subscribe((0,_r.x)(f,ce=>{if(ue){const we=[ce,...R];f.next(c?c(...we):we)}}))})}Math,Math,Math;const r_=["*"],lv=["dialog"];function ph(a){return"string"==typeof a}function al(a){return null!=a}function na(a){return(a||document.body).getBoundingClientRect()}const Na={animation:!0,transitionTimerDelayMs:5},A_=()=>{},{transitionTimerDelayMs:N_}=Na,mh=new Map,uo=(a,c,o,f)=>{let x=f.context||{};const R=mh.get(c);if(R)switch(f.runningTransition){case"continue":return eh.E;case"stop":a.run(()=>R.transition$.complete()),x=Object.assign(R.context,x),mh.delete(c)}const J=o(c,f.animation,x)||A_;if(!f.animation||"none"===window.getComputedStyle(c).transitionProperty)return a.run(()=>J()),(0,$o.of)(void 0).pipe(function Yr(a){return c=>new Yo.y(o=>c.subscribe({next:J=>a.run(()=>o.next(J)),error:J=>a.run(()=>o.error(J)),complete:()=>a.run(()=>o.complete())}))}(a));const ue=new ir.x,ce=new ir.x,we=ue.pipe(function Pe(...a){return c=>(0,Ja.z)(c,(0,$o.of)(...a))}(!0));mh.set(c,{transition$:ue,complete:()=>{ce.next(),ce.complete()},context:x});const Ge=function ll(a){const{transitionDelay:c,transitionDuration:o}=window.getComputedStyle(a);return 1e3*(parseFloat(c)+parseFloat(o))}(c);return a.runOutsideAngular(()=>{const Pt=Sr(c,"transitionend").pipe(ht(we),(0,es.h)(({target:Mt})=>Mt===c));(function D(...a){return 1===(a=S(a)).length?(0,_s.Xf)(a[0]):new Yo.y(function P(a){return c=>{let o=[];for(let f=0;o&&!c.closed&&f<a.length;f++)o.push((0,_s.Xf)(a[f]).subscribe((0,_r.x)(c,x=>{if(o){for(let R=0;R<o.length;R++)R!==f&&o[R].unsubscribe();o=null}c.next(x)})))}}(a))})(Zc(Ge+N_).pipe(ht(we)),Pt,ce).pipe(ht(we)).subscribe(()=>{mh.delete(c),a.run(()=>{J(),ue.next(),ue.complete()})})}),ue.asObservable()};let uu=(()=>{class a{constructor(){this.animation=Na.animation}}return a.\u0275fac=function(o){return new(o||a)},a.\u0275prov=v.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),O_=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=v.oAB({type:a}),a.\u0275inj=v.cJS({imports:[xe.ez]}),a})(),dg=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=v.oAB({type:a}),a.\u0275inj=v.cJS({imports:[xe.ez]}),a})(),gg=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=v.oAB({type:a}),a.\u0275inj=v.cJS({imports:[xe.ez]}),a})(),$l=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=v.oAB({type:a}),a.\u0275inj=v.cJS({}),a})();var ki=(()=>{return(a=ki||(ki={}))[a.Tab=9]="Tab",a[a.Enter=13]="Enter",a[a.Escape=27]="Escape",a[a.Space=32]="Space",a[a.PageUp=33]="PageUp",a[a.PageDown=34]="PageDown",a[a.End=35]="End",a[a.Home=36]="Home",a[a.ArrowLeft=37]="ArrowLeft",a[a.ArrowUp=38]="ArrowUp",a[a.ArrowRight=39]="ArrowRight",a[a.ArrowDown=40]="ArrowDown",ki;var a})();typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const Ig=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function Kn(a){const c=Array.from(a.querySelectorAll(Ig)).filter(o=>-1!==o.tabIndex);return[c[0],c[c.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let Xf=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=v.oAB({type:a}),a.\u0275inj=v.cJS({imports:[xe.ez,Gi]}),a})(),l0=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=v.oAB({type:a}),a.\u0275inj=v.cJS({}),a})();class ws{constructor(c,o,f){this.nodes=c,this.viewRef=o,this.componentRef=f}}let Zg=(()=>{class a{constructor(o,f){this._el=o,this._zone=f}ngOnInit(){this._zone.onStable.asObservable().pipe((0,Ci.q)(1)).subscribe(()=>{uo(this._zone,this._el.nativeElement,(o,f)=>{f&&na(o),o.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return uo(this._zone,this._el.nativeElement,({classList:o})=>o.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return a.\u0275fac=function(o){return new(o||a)(v.Y36(v.SBq),v.Y36(v.R0b))},a.\u0275cmp=v.Xpm({type:a,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(o,f){2&o&&(v.Tol("modal-backdrop"+(f.backdropClass?" "+f.backdropClass:"")),v.ekj("show",!f.animation)("fade",f.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(o,f){},encapsulation:2}),a})();class vu{close(c){}dismiss(c){}}class Fh{constructor(c,o,f,x){this._windowCmptRef=c,this._contentRef=o,this._backdropCmptRef=f,this._beforeDismiss=x,this._closed=new ir.x,this._dismissed=new ir.x,this._hidden=new ir.x,c.instance.dismissEvent.subscribe(R=>{this.dismiss(R)}),this.result=new Promise((R,J)=>{this._resolve=R,this._reject=J}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(ht(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(ht(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(c){this._windowCmptRef&&(this._closed.next(c),this._resolve(c),this._removeModalElements())}_dismiss(c){this._dismissed.next(c),this._reject(c),this._removeModalElements()}dismiss(c){if(this._windowCmptRef)if(this._beforeDismiss){const o=this._beforeDismiss();!function Bf(a){return a&&a.then}(o)?!1!==o&&this._dismiss(c):o.then(f=>{!1!==f&&this._dismiss(c)},()=>{})}else this._dismiss(c)}_removeModalElements(){const c=this._windowCmptRef.instance.hide(),o=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,$o.of)(void 0);c.subscribe(()=>{const{nativeElement:f}=this._windowCmptRef.location;f.parentNode.removeChild(f),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),o.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:f}=this._backdropCmptRef.location;f.parentNode.removeChild(f),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),he(c,o).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var po=(()=>{return(a=po||(po={}))[a.BACKDROP_CLICK=0]="BACKDROP_CLICK",a[a.ESC=1]="ESC",po;var a})();let kh=(()=>{class a{constructor(o,f,x){this._document=o,this._elRef=f,this._zone=x,this._closed$=new ir.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new v.vpe,this.shown=new ir.x,this.hidden=new ir.x}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":ph(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(o){this.dismissEvent.emit(o)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe((0,Ci.q)(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:o}=this._elRef,f={animation:this.animation,runningTransition:"stop"},J=he(uo(this._zone,o,()=>o.classList.remove("show"),f),uo(this._zone,this._dialogEl.nativeElement,()=>{},f));return J.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),J}_show(){const o={animation:this.animation,runningTransition:"continue"};he(uo(this._zone,this._elRef.nativeElement,(R,J)=>{J&&na(R),R.classList.add("show")},o),uo(this._zone,this._dialogEl.nativeElement,()=>{},o)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:o}=this._elRef;this._zone.runOutsideAngular(()=>{Sr(o,"keydown").pipe(ht(this._closed$),(0,es.h)(x=>x.which===ki.Escape)).subscribe(x=>{this.keyboard?requestAnimationFrame(()=>{x.defaultPrevented||this._zone.run(()=>this.dismiss(po.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let f=!1;Sr(this._dialogEl.nativeElement,"mousedown").pipe(ht(this._closed$),(0,Mc.b)(()=>f=!1),(0,Qo.w)(()=>Sr(o,"mouseup").pipe(ht(this._closed$),(0,Ci.q)(1))),(0,es.h)(({target:x})=>o===x)).subscribe(()=>{f=!0}),Sr(o,"click").pipe(ht(this._closed$)).subscribe(({target:x})=>{o===x&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!f&&this._zone.run(()=>this.dismiss(po.BACKDROP_CLICK))),f=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:o}=this._elRef;if(!o.contains(document.activeElement)){const f=o.querySelector("[ngbAutofocus]"),x=Kn(o)[0];(f||x||o).focus()}}_restoreFocus(){const o=this._document.body,f=this._elWithFocus;let x;x=f&&f.focus&&o.contains(f)?f:o,this._zone.runOutsideAngular(()=>{setTimeout(()=>x.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&uo(this._zone,this._elRef.nativeElement,({classList:o})=>(o.add("modal-static"),()=>o.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return a.\u0275fac=function(o){return new(o||a)(v.Y36(xe.K0),v.Y36(v.SBq),v.Y36(v.R0b))},a.\u0275cmp=v.Xpm({type:a,selectors:[["ngb-modal-window"]],viewQuery:function(o,f){if(1&o&&v.Gf(lv,7),2&o){let x;v.iGM(x=v.CRH())&&(f._dialogEl=x.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(o,f){2&o&&(v.uIk("aria-modal",!0)("aria-labelledby",f.ariaLabelledBy)("aria-describedby",f.ariaDescribedBy),v.Tol("modal d-block"+(f.windowClass?" "+f.windowClass:"")),v.ekj("fade",f.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:r_,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(o,f){1&o&&(v.F$t(),v.TgZ(0,"div",0,1)(2,"div",2),v.Hsn(3),v.qZA()()),2&o&&v.Tol("modal-dialog"+(f.size?" modal-"+f.size:"")+(f.centered?" modal-dialog-centered":"")+f.fullscreenClass+(f.scrollable?" modal-dialog-scrollable":"")+(f.modalDialogClass?" "+f.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),a})(),Jf=(()=>{class a{constructor(o){this._document=o}hide(){const o=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),f=this._document.body,x=f.style,{overflow:R,paddingRight:J}=x;if(o>0){const ue=parseFloat(window.getComputedStyle(f).paddingRight);x.paddingRight=`${ue+o}px`}return x.overflow="hidden",()=>{o>0&&(x.paddingRight=J),x.overflow=R}}}return a.\u0275fac=function(o){return new(o||a)(v.LFG(xe.K0))},a.\u0275prov=v.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),Kf=(()=>{class a{constructor(o,f,x,R,J,ue){this._applicationRef=o,this._injector=f,this._document=x,this._scrollBar=R,this._rendererFactory=J,this._ngZone=ue,this._activeWindowCmptHasChanged=new ir.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new v.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const ce=this._windowCmpts[this._windowCmpts.length-1];((a,c,o,f=!1)=>{this._ngZone.runOutsideAngular(()=>{const x=Sr(c,"focusin").pipe(ht(o),(0,Te.U)(R=>R.target));Sr(c,"keydown").pipe(ht(o),(0,es.h)(R=>R.which===ki.Tab),Ii(x)).subscribe(([R,J])=>{const[ue,ce]=Kn(c);(J===ue||J===c)&&R.shiftKey&&(ce.focus(),R.preventDefault()),J===ce&&!R.shiftKey&&(ue.focus(),R.preventDefault())}),f&&Sr(c,"click").pipe(ht(o),Ii(x),(0,Te.U)(R=>R[1])).subscribe(R=>R.focus())})})(0,ce.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(ce.location.nativeElement)}})}_restoreScrollBar(){const o=this._scrollBarRestoreFn;o&&(this._scrollBarRestoreFn=null,o())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(o,f,x){const R=x.container instanceof HTMLElement?x.container:al(x.container)?this._document.querySelector(x.container):this._document.body,J=this._rendererFactory.createRenderer(null,null);if(!R)throw new Error(`The specified modal container "${x.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const ue=new vu,ce=this._getContentRef(x.injector||o,f,ue,x);let we=!1!==x.backdrop?this._attachBackdrop(R):void 0,Ge=this._attachWindowComponent(R,ce.nodes),Pt=new Fh(Ge,ce,we,x.beforeDismiss);return this._registerModalRef(Pt),this._registerWindowCmpt(Ge),Pt.hidden.pipe((0,Ci.q)(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(J.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),ue.close=Bt=>{Pt.close(Bt)},ue.dismiss=Bt=>{Pt.dismiss(Bt)},this._applyWindowOptions(Ge.instance,x),1===this._modalRefs.length&&J.addClass(this._document.body,"modal-open"),we&&we.instance&&(this._applyBackdropOptions(we.instance,x),we.changeDetectorRef.detectChanges()),Ge.changeDetectorRef.detectChanges(),Pt}get activeInstances(){return this._activeInstances}dismissAll(o){this._modalRefs.forEach(f=>f.dismiss(o))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(o){let f=(0,v.LMc)(Zg,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(f.hostView),o.appendChild(f.location.nativeElement),f}_attachWindowComponent(o,f){let x=(0,v.LMc)(kh,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:f});return this._applicationRef.attachView(x.hostView),o.appendChild(x.location.nativeElement),x}_applyWindowOptions(o,f){this._windowAttributes.forEach(x=>{al(f[x])&&(o[x]=f[x])})}_applyBackdropOptions(o,f){this._backdropAttributes.forEach(x=>{al(f[x])&&(o[x]=f[x])})}_getContentRef(o,f,x,R){return f?f instanceof v.Rgc?this._createFromTemplateRef(f,x):ph(f)?this._createFromString(f):this._createFromComponent(o,f,x,R):new ws([])}_createFromTemplateRef(o,f){const R=o.createEmbeddedView({$implicit:f,close(J){f.close(J)},dismiss(J){f.dismiss(J)}});return this._applicationRef.attachView(R),new ws([R.rootNodes],R)}_createFromString(o){const f=this._document.createTextNode(`${o}`);return new ws([[f]])}_createFromComponent(o,f,x,R){const J=v.zs3.create({providers:[{provide:vu,useValue:x}],parent:o}),ue=(0,v.LMc)(f,{environmentInjector:this._applicationRef.injector,elementInjector:J}),ce=ue.location.nativeElement;return R.scrollable&&ce.classList.add("component-host-scrollable"),this._applicationRef.attachView(ue.hostView),new ws([[ce]],ue.hostView,ue)}_setAriaHidden(o){const f=o.parentElement;f&&o!==this._document.body&&(Array.from(f.children).forEach(x=>{x!==o&&"SCRIPT"!==x.nodeName&&(this._ariaHiddenValues.set(x,x.getAttribute("aria-hidden")),x.setAttribute("aria-hidden","true"))}),this._setAriaHidden(f))}_revertAriaHidden(){this._ariaHiddenValues.forEach((o,f)=>{o?f.setAttribute("aria-hidden",o):f.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(o){const f=()=>{const x=this._modalRefs.indexOf(o);x>-1&&(this._modalRefs.splice(x,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(o),this._activeInstances.emit(this._modalRefs),o.result.then(f,f)}_registerWindowCmpt(o){this._windowCmpts.push(o),this._activeWindowCmptHasChanged.next(),o.onDestroy(()=>{const f=this._windowCmpts.indexOf(o);f>-1&&(this._windowCmpts.splice(f,1),this._activeWindowCmptHasChanged.next())})}}return a.\u0275fac=function(o){return new(o||a)(v.LFG(v.z2F),v.LFG(v.zs3),v.LFG(xe.K0),v.LFG(Jf),v.LFG(v.FYo),v.LFG(v.R0b))},a.\u0275prov=v.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),Jg=(()=>{class a{constructor(o){this._ngbConfig=o,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(o){this._animation=o}}return a.\u0275fac=function(o){return new(o||a)(v.LFG(uu))},a.\u0275prov=v.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),Kg=(()=>{class a{constructor(o,f,x){this._injector=o,this._modalStack=f,this._config=x}open(o,f={}){const x={...this._config,animation:this._config.animation,...f};return this._modalStack.open(this._injector,o,x)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(o){this._modalStack.dismissAll(o)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return a.\u0275fac=function(o){return new(o||a)(v.LFG(v.zs3),v.LFG(Kf),v.LFG(Jg))},a.\u0275prov=v.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),Qg=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=v.oAB({type:a}),a.\u0275inj=v.cJS({providers:[Kg]}),a})(),Vh=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=v.oAB({type:a}),a.\u0275inj=v.cJS({imports:[xe.ez]}),a})(),Nd=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=v.oAB({type:a}),a.\u0275inj=v.cJS({imports:[xe.ez]}),a})(),rm=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=v.oAB({type:a}),a.\u0275inj=v.cJS({imports:[xe.ez]}),a})(),ip=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=v.oAB({type:a}),a.\u0275inj=v.cJS({imports:[xe.ez]}),a})(),jh=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=v.oAB({type:a}),a.\u0275inj=v.cJS({imports:[xe.ez]}),a})(),Jl=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=v.oAB({type:a}),a.\u0275inj=v.cJS({imports:[xe.ez]}),a})(),am=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=v.oAB({type:a}),a.\u0275inj=v.cJS({imports:[xe.ez]}),a})(),Yh=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=v.oAB({type:a}),a.\u0275inj=v.cJS({}),a})();new v.OlP("live announcer delay",{providedIn:"root",factory:function aa(){return 100}});let Lc=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=v.oAB({type:a}),a.\u0275inj=v.cJS({imports:[xe.ez]}),a})(),hm=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=v.oAB({type:a}),a.\u0275inj=v.cJS({}),a})();const v0=[O_,dg,gg,$l,Xf,l0,Qg,Vh,hm,Nd,rm,ip,jh,Jl,am,Yh,Lc];let cp=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=v.oAB({type:a}),a.\u0275inj=v.cJS({imports:[v0,O_,dg,gg,$l,Xf,l0,Qg,Vh,hm,Nd,rm,ip,jh,Jl,am,Yh,Lc]}),a})();var Fc=$(2340);let y0=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=v.oAB({type:a}),a.\u0275inj=v.cJS({imports:[Ps.aw,xe.ez]}),a})(),fm=(()=>{class a{intercept(o,f){return/^(http|https):/i.test(o.url)||(o=o.clone({url:Fc.N.serverUrl+o.url})),f.handle(o)}}return a.\u0275fac=function(o){return new(o||a)},a.\u0275prov=v.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var up=$(262),hl=(()=>{return(a=hl||(hl={}))[a.Off=0]="Off",a[a.Error=1]="Error",a[a.Warning=2]="Warning",a[a.Info=3]="Info",a[a.Debug=4]="Debug",hl;var a})();class Lo{constructor(c){this.source=c}static enableProductionMode(){Lo.level=hl.Warning}debug(...c){this.log(console.log,hl.Debug,c)}info(...c){this.log(console.info,hl.Info,c)}warn(...c){this.log(console.warn,hl.Warning,c)}error(...c){this.log(console.error,hl.Error,c)}log(c,o,f){if(o<=Lo.level){const x=this.source?["["+this.source+"]"].concat(f):f;c.apply(console,x),Lo.outputs.forEach(R=>R.apply(R,[this.source,o,...f]))}}}Lo.level=hl.Debug,Lo.outputs=[];const Fo=new Lo("ErrorHandlerInterceptor");let kc=(()=>{class a{intercept(o,f){return f.handle(o).pipe((0,up.K)(x=>this.errorHandler(x)))}errorHandler(o){throw Fc.N.production||Fo.error("Request error",o),o}}return a.\u0275fac=function(o){return new(o||a)},a.\u0275prov=v.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),dp=(()=>{class a extends zr.wN{shouldDetach(o){return!1}store(o,f){}shouldAttach(o){return!1}retrieve(o){return null}shouldReuseRoute(o,f){return o.routeConfig===f.routeConfig||Boolean(o.routeConfig?.component&&o.routeConfig?.component===f.routeConfig?.component)}}return a.\u0275fac=function(){let c;return function(f){return(c||(c=v.n5z(a)))(f||a)}}(),a.\u0275prov=v.Yz7({token:a,factory:a.\u0275fac}),a})();const pm=v.GuJ,fp=Symbol("__destroy"),Ld=Symbol("__decoratorApplied");function Ql(a){return"string"==typeof a?Symbol(`__destroy__${a}`):fp}function fl(a,c){a[c]||(a[c]=new ir.x)}function gm(a,c){a[c]&&(a[c].next(),a[c].complete(),a[c]=null)}function pp(a){a instanceof id.w0&&a.unsubscribe()}function la(a,c){return function(){if(a&&a.call(this),gm(this,Ql()),c.arrayName&&function gp(a){Array.isArray(a)&&a.forEach(pp)}(this[c.arrayName]),c.checkProperties)for(const o in this)c.blackList?.includes(o)||pp(this[o])}}Symbol("CheckerHasBeenSet");var Fd=$(7520),go=$(9274);let Ru=(()=>{class a{constructor(o){this.birdService=o}ngOnInit(){let o=document.querySelector(".birds");this.birdService.init(30,o)}}return a.\u0275fac=function(o){return new(o||a)(v.Y36(go.P))},a.\u0275cmp=v.Xpm({type:a,selectors:[["app-home"]],decls:30,vars:0,consts:[[1,"birds"],[1,"home","page","show"],[1,"titles","flicker-1"],[1,"page-title","aos-animate","slide-in-left"],[1,"page-subtitle","aos-animate"],[1,"footer-menu","show"],[1,"menu-items"],["routerLink","/about",1,"menu-item","menu-work"],[1,"menu-item","menu-prototypes"],[1,"menu-item","menu-info"]],template:function(o,f){1&o&&(v.TgZ(0,"div",0),v._uU(1,"\n  "),v.TgZ(2,"div",1),v._uU(3,"\n      "),v.TgZ(4,"div",2),v._uU(5,"\n        "),v.TgZ(6,"div",3),v._uU(7,"ajayksanthosh"),v.qZA(),v._uU(8,"\n        "),v.TgZ(9,"div",4),v._uU(10,"Developer"),v.qZA(),v._uU(11,"\n      "),v.qZA(),v._uU(12,"\n    "),v.qZA(),v._uU(13,"\n    "),v.TgZ(14,"div",5),v._uU(15,"\n      "),v.TgZ(16,"ul",6),v._uU(17,"\n        "),v.TgZ(18,"li",7),v._uU(19,"work"),v.qZA(),v._uU(20,"\n        "),v.TgZ(21,"li",8),v._uU(22,"experience"),v.qZA(),v._uU(23,"\n        "),v.TgZ(24,"li",9),v._uU(25,"collobrate"),v.qZA(),v._uU(26,"\n        "),v._uU(27,"\n      "),v.qZA(),v._uU(28,"\n    "),v.qZA(),v._uU(29,"\n"),v.qZA())},dependencies:[zr.rH],styles:['@import"https://fonts.googleapis.com/css2?family=Rajdhani:wght@300&display=swap";*[_ngcontent-%COMP%]{font-family:Rajdhani,sans-serif;overflow:hidden}@media all and (max-width: 640px){.lil-gui.root[_ngcontent-%COMP%]{max-height:50%;max-width:80%;inset:auto auto 0 0}}#overlay[_ngcontent-%COMP%]{position:absolute;font-size:16px;z-index:2;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;flex-direction:column;background:rgba(0,0,0,.7)}#overlay[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:0;border:1px solid rgb(255,255,255);border-radius:4px;color:#fff;padding:12px 18px;text-transform:uppercase;cursor:pointer}#notSupported[_ngcontent-%COMP%]{width:50%;margin:20px auto auto;background-color:red;padding:10px}.page.show[_ngcontent-%COMP%]{z-index:100;opacity:1}.home[_ngcontent-%COMP%]   .titles[_ngcontent-%COMP%]{top:50%;left:50%;z-index:100;position:absolute;transform:translate(-50%,-50%);text-align:center;margin:0;padding:0}.home[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{text-transform:uppercase;text-align:center;pointer-events:none;font-size:6vw;letter-spacing:2.6vw;color:#0cf;text-indent:2.6vw;opacity:1;font-weight:100;top:0;left:auto;transform:none;padding:0;margin:0;position:relative;font-family:Rajdhani,sans-serif}.home[_ngcontent-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{text-transform:capitalize;text-align:right;pointer-events:none;font-size:1vw;letter-spacing:1.55vw;text-indent:1.8vw;top:0;left:auto;transform:none;padding:0;margin:0;position:relative;color:#fff}.page-subtitle[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;position:relative;white-space:nowrap;pointer-events:none;top:29vh;margin:0 auto;color:#ffffff80;text-transform:uppercase;letter-spacing:.5vw;font-size:.9vw;text-align:center}.flicker-1[_ngcontent-%COMP%]{animation:flicker-1 3s ease-out infinite both}@keyframes flicker-1{0%,to{opacity:1}41.99%{opacity:1}42%{opacity:0}43%{opacity:0}43.01%{opacity:1}47.99%{opacity:1}48%{opacity:0}49%{opacity:0}49.01%{opacity:1}}@keyframes slide-in-left{0%{transform:translate(-1000px);opacity:0}to{transform:translate(0);opacity:1}}.slide-in-left[_ngcontent-%COMP%]{animation:slide-in-left 1s cubic-bezier(.25,.46,.45,.94) both}@media only screen and (max-width: 767px){.home[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:7vw}.home[_ngcontent-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{font-size:3vw}}.footer-menu.show[_ngcontent-%COMP%]{opacity:1}.footer-menu[_ngcontent-%COMP%]{z-index:100;padding:0;margin:0;position:fixed;bottom:15vh;width:100%;text-align:center;opacity:0;transition:.4s all ease-in-out}.footer-menu[_ngcontent-%COMP%]   .menu-items[_ngcontent-%COMP%]{padding:0;margin:0}.footer-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{display:inline-block;cursor:pointer;color:#fff;text-transform:uppercase;letter-spacing:.2vw;text-indent:.2vw;font-size:1vw;opacity:.5;padding-right:4vw;padding-left:4vw;-webkit-user-select:none;user-select:none}.menu-item[_ngcontent-%COMP%]:hover{opacity:1}']}),a})(),gl=(()=>{class a{constructor(){}ngOnInit(){}}return a.\u0275fac=function(o){return new(o||a)},a.\u0275cmp=v.Xpm({type:a,selectors:[["app-shell"]],decls:3,vars:0,template:function(o,f){1&o&&(v._uU(0,"\n"),v._UZ(1,"router-outlet"),v._uU(2,"\n"))},dependencies:[zr.lC]}),a})();class mm{static childRoutes(c){return{path:"",component:gl,children:c}}}const b0=[mm.childRoutes([{path:"",redirectTo:"/home",pathMatch:"full"},{path:"home",component:Ru,data:{title:(0,Fd.J)("Home")}}])];let kd=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=v.oAB({type:a}),a.\u0275inj=v.cJS({imports:[zr.Bz.forChild(b0),zr.Bz]}),a})(),x0=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=v.oAB({type:a}),a.\u0275inj=v.cJS({imports:[xe.ez,Ps.aw,y0,kd]}),a})(),w0=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=v.oAB({type:a}),a.\u0275inj=v.cJS({imports:[xe.ez,Ps.aw,cp]}),a})();const D0=JSON.parse('{"APP_NAME":"prtflio","About":"\xdcber","Hello world !":"Hallo welt !","Home":"Startseite","Version":"Version"}'),M0=JSON.parse('{"APP_NAME":"prtflio","About":"About","Hello world !":"Hello world !","Home":"Home","Version":"Version"}'),_m=JSON.parse('{"APP_NAME":"prtflio","About":"Acerca de","Hello world !":"\xa1Hola Mundo!","Home":"Inicio","Version":"Versi\xf3n"}'),mp=new Lo("I18nService"),_p="language";let vm=(()=>{class a{constructor(o){this.translateService=o,o.setTranslation("de-DE",D0),o.setTranslation("en-US",M0),o.setTranslation("es-ES",_m)}init(o,f){this.defaultLanguage=o,this.supportedLanguages=f,this.language="",this.langChangeSubscription=this.translateService.onLangChange.subscribe(x=>{localStorage.setItem(_p,x.lang)})}destroy(){this.langChangeSubscription&&this.langChangeSubscription.unsubscribe()}set language(o){let f=o||localStorage.getItem(_p)||this.translateService.getBrowserCultureLang()||"",x=this.supportedLanguages.includes(f);f&&!x&&(f=f.split("-")[0],f=this.supportedLanguages.find(R=>R.startsWith(f))||"",x=Boolean(f)),(!f||!x)&&(f=this.defaultLanguage),mp.debug(`Language set to ${o=f}`),this.translateService.use(o)}get language(){return this.translateService.currentLang}}return a.\u0275fac=function(o){return new(o||a)(v.LFG(Ps.sK))},a.\u0275prov=v.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),yp=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=v.oAB({type:a}),a.\u0275inj=v.cJS({imports:[xe.ez,Ps.aw,cp,w0,zr.Bz]}),a})();var qh=$(655);const Xh=new Lo("App");let ml=class{constructor(c,o,f,x,R){this.router=c,this.activatedRoute=o,this.titleService=f,this.translateService=x,this.i18nService=R}ngOnInit(){Fc.N.production&&Lo.enableProductionMode(),Xh.debug("init"),this.i18nService.init(Fc.N.defaultLanguage,Fc.N.supportedLanguages);const c=this.router.events.pipe((0,es.h)(o=>o instanceof zr.m2));(0,Dc.T)(this.translateService.onLangChange,c).pipe((0,Te.U)(()=>{let o=this.activatedRoute;for(;o.firstChild;)o=o.firstChild;return o}),(0,es.h)(o=>"primary"===o.outlet),(0,Qo.w)(o=>o.data),function Bc(a,c){return o=>{const f=Ql(c);return"string"==typeof c?function ca(a,c,o){const f=a[c];fl(a,o),a[c]=function(){f.apply(this,arguments),gm(this,o),a[c]=f}}(a,c,f):fl(a,f),o.pipe(ht(a[f]))}}(this)).subscribe(o=>{const f=o.title;f&&this.titleService.setTitle(this.translateService.instant(f))})}ngOnDestroy(){this.i18nService.destroy()}};ml.\u0275fac=function(c){return new(c||ml)(v.Y36(zr.F0),v.Y36(zr.gz),v.Y36(U.Dx),v.Y36(Ps.sK),v.Y36(vm))},ml.\u0275cmp=v.Xpm({type:ml,selectors:[["app-root"]],decls:2,vars:0,template:function(c,o){1&c&&(v._UZ(0,"router-outlet"),v._uU(1,"\n"))},dependencies:[zr.lC]}),ml=(0,qh.gn)([function qr(a={}){return c=>{!function hp(a){return!!a[pm]}(c)?function Ks(a,c){a.prototype.ngOnDestroy=la(a.prototype.ngOnDestroy,c)}(c,a):function Tu(a,c){const o=a.\u0275pipe;o.onDestroy=la(o.onDestroy,c)}(c,a),function Oy(a){a.prototype[Ld]=!0}(c)}}()],ml);const S0=[mm.childRoutes([{path:"about",loadChildren:()=>$.e(10).then($.bind($,7010)).then(a=>a.AboutModule)}]),{path:"**",redirectTo:"",pathMatch:"full"}];let bp=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=v.oAB({type:a}),a.\u0275inj=v.cJS({imports:[zr.Bz.forRoot(S0,{preloadingStrategy:zr.wm}),zr.Bz]}),a})(),xp=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=v.oAB({type:a,bootstrap:[ml]}),a.\u0275inj=v.cJS({providers:[{provide:No,useClass:fm,multi:!0},{provide:No,useClass:kc,multi:!0},{provide:zr.wN,useClass:dp}],imports:[U.b2,pi.register("./ngsw-worker.js",{enabled:Fc.N.production}),Gi,xc,zr.Bz,Ps.aw.forRoot(),cp,y0,yp,x0,bp]}),a})();Fc.N.production&&(0,v.G48)(),U.q6().bootstrapModule(xp).catch(a=>console.error(a))},1135:(an,qe,$)=>{$.d(qe,{X:()=>v});var U=$(7579);class v extends U.x{constructor(Se){super(),this._value=Se}get value(){return this.getValue()}_subscribe(Se){const _e=super._subscribe(Se);return!_e.closed&&Se.next(this._value),_e}getValue(){const{hasError:Se,thrownError:_e,_value:Te}=this;if(Se)throw _e;return this._throwIfClosed(),Te}next(Se){super.next(this._value=Se)}}},9751:(an,qe,$)=>{$.d(qe,{y:()=>Ve});var U=$(930),v=$(727),xe=$(8822),Se=$(9635),_e=$(2416),Te=$(576),rt=$(2806);let Ve=(()=>{class Ue{constructor(at){at&&(this._subscribe=at)}lift(at){const ke=new Ue;return ke.source=this,ke.operator=at,ke}subscribe(at,ke,zt){const lt=function ze(Ue){return Ue&&Ue instanceof U.Lv||function dt(Ue){return Ue&&(0,Te.m)(Ue.next)&&(0,Te.m)(Ue.error)&&(0,Te.m)(Ue.complete)}(Ue)&&(0,v.Nn)(Ue)}(at)?at:new U.Hp(at,ke,zt);return(0,rt.x)(()=>{const{operator:Dt,source:sn}=this;lt.add(Dt?Dt.call(lt,sn):sn?this._subscribe(lt):this._trySubscribe(lt))}),lt}_trySubscribe(at){try{return this._subscribe(at)}catch(ke){at.error(ke)}}forEach(at,ke){return new(ke=Qe(ke))((zt,lt)=>{const Dt=new U.Hp({next:sn=>{try{at(sn)}catch($n){lt($n),Dt.unsubscribe()}},error:lt,complete:zt});this.subscribe(Dt)})}_subscribe(at){var ke;return null===(ke=this.source)||void 0===ke?void 0:ke.subscribe(at)}[xe.L](){return this}pipe(...at){return(0,Se.U)(at)(this)}toPromise(at){return new(at=Qe(at))((ke,zt)=>{let lt;this.subscribe(Dt=>lt=Dt,Dt=>zt(Dt),()=>ke(lt))})}}return Ue.create=Gt=>new Ue(Gt),Ue})();function Qe(Ue){var Gt;return null!==(Gt=Ue??_e.v.Promise)&&void 0!==Gt?Gt:Promise}},7579:(an,qe,$)=>{$.d(qe,{x:()=>rt});var U=$(9751),v=$(727);const Se=(0,$(3888).d)(Qe=>function(){Qe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var _e=$(8737),Te=$(2806);let rt=(()=>{class Qe extends U.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ze){const Ue=new Ve(this,this);return Ue.operator=ze,Ue}_throwIfClosed(){if(this.closed)throw new Se}next(ze){(0,Te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Ue of this.currentObservers)Ue.next(ze)}})}error(ze){(0,Te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ze;const{observers:Ue}=this;for(;Ue.length;)Ue.shift().error(ze)}})}complete(){(0,Te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ze}=this;for(;ze.length;)ze.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ze;return(null===(ze=this.observers)||void 0===ze?void 0:ze.length)>0}_trySubscribe(ze){return this._throwIfClosed(),super._trySubscribe(ze)}_subscribe(ze){return this._throwIfClosed(),this._checkFinalizedStatuses(ze),this._innerSubscribe(ze)}_innerSubscribe(ze){const{hasError:Ue,isStopped:Gt,observers:at}=this;return Ue||Gt?v.Lc:(this.currentObservers=null,at.push(ze),new v.w0(()=>{this.currentObservers=null,(0,_e.P)(at,ze)}))}_checkFinalizedStatuses(ze){const{hasError:Ue,thrownError:Gt,isStopped:at}=this;Ue?ze.error(Gt):at&&ze.complete()}asObservable(){const ze=new U.y;return ze.source=this,ze}}return Qe.create=(dt,ze)=>new Ve(dt,ze),Qe})();class Ve extends rt{constructor(dt,ze){super(),this.destination=dt,this.source=ze}next(dt){var ze,Ue;null===(Ue=null===(ze=this.destination)||void 0===ze?void 0:ze.next)||void 0===Ue||Ue.call(ze,dt)}error(dt){var ze,Ue;null===(Ue=null===(ze=this.destination)||void 0===ze?void 0:ze.error)||void 0===Ue||Ue.call(ze,dt)}complete(){var dt,ze;null===(ze=null===(dt=this.destination)||void 0===dt?void 0:dt.complete)||void 0===ze||ze.call(dt)}_subscribe(dt){var ze,Ue;return null!==(Ue=null===(ze=this.source)||void 0===ze?void 0:ze.subscribe(dt))&&void 0!==Ue?Ue:v.Lc}}},930:(an,qe,$)=>{$.d(qe,{Hp:()=>zt,Lv:()=>Ue});var U=$(576),v=$(727),xe=$(2416),Se=$(7849),_e=$(5032);const Te=Qe("C",void 0,void 0);function Qe(Tt,bt,Vt){return{kind:Tt,value:bt,error:Vt}}var dt=$(3410),ze=$(2806);class Ue extends v.w0{constructor(bt){super(),this.isStopped=!1,bt?(this.destination=bt,(0,v.Nn)(bt)&&bt.add(this)):this.destination=$n}static create(bt,Vt,Nn){return new zt(bt,Vt,Nn)}next(bt){this.isStopped?sn(function Ve(Tt){return Qe("N",Tt,void 0)}(bt),this):this._next(bt)}error(bt){this.isStopped?sn(function rt(Tt){return Qe("E",void 0,Tt)}(bt),this):(this.isStopped=!0,this._error(bt))}complete(){this.isStopped?sn(Te,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(bt){this.destination.next(bt)}_error(bt){try{this.destination.error(bt)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Gt=Function.prototype.bind;function at(Tt,bt){return Gt.call(Tt,bt)}class ke{constructor(bt){this.partialObserver=bt}next(bt){const{partialObserver:Vt}=this;if(Vt.next)try{Vt.next(bt)}catch(Nn){lt(Nn)}}error(bt){const{partialObserver:Vt}=this;if(Vt.error)try{Vt.error(bt)}catch(Nn){lt(Nn)}else lt(bt)}complete(){const{partialObserver:bt}=this;if(bt.complete)try{bt.complete()}catch(Vt){lt(Vt)}}}class zt extends Ue{constructor(bt,Vt,Nn){let qt;if(super(),(0,U.m)(bt)||!bt)qt={next:bt??void 0,error:Vt??void 0,complete:Nn??void 0};else{let jt;this&&xe.v.useDeprecatedNextContext?(jt=Object.create(bt),jt.unsubscribe=()=>this.unsubscribe(),qt={next:bt.next&&at(bt.next,jt),error:bt.error&&at(bt.error,jt),complete:bt.complete&&at(bt.complete,jt)}):qt=bt}this.destination=new ke(qt)}}function lt(Tt){xe.v.useDeprecatedSynchronousErrorHandling?(0,ze.O)(Tt):(0,Se.h)(Tt)}function sn(Tt,bt){const{onStoppedNotification:Vt}=xe.v;Vt&&dt.z.setTimeout(()=>Vt(Tt,bt))}const $n={closed:!0,next:_e.Z,error:function Dt(Tt){throw Tt},complete:_e.Z}},727:(an,qe,$)=>{$.d(qe,{Lc:()=>Te,w0:()=>_e,Nn:()=>rt});var U=$(576);const xe=(0,$(3888).d)(Qe=>function(ze){Qe(this),this.message=ze?`${ze.length} errors occurred during unsubscription:\n${ze.map((Ue,Gt)=>`${Gt+1}) ${Ue.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ze});var Se=$(8737);class _e{constructor(dt){this.initialTeardown=dt,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let dt;if(!this.closed){this.closed=!0;const{_parentage:ze}=this;if(ze)if(this._parentage=null,Array.isArray(ze))for(const at of ze)at.remove(this);else ze.remove(this);const{initialTeardown:Ue}=this;if((0,U.m)(Ue))try{Ue()}catch(at){dt=at instanceof xe?at.errors:[at]}const{_finalizers:Gt}=this;if(Gt){this._finalizers=null;for(const at of Gt)try{Ve(at)}catch(ke){dt=dt??[],ke instanceof xe?dt=[...dt,...ke.errors]:dt.push(ke)}}if(dt)throw new xe(dt)}}add(dt){var ze;if(dt&&dt!==this)if(this.closed)Ve(dt);else{if(dt instanceof _e){if(dt.closed||dt._hasParent(this))return;dt._addParent(this)}(this._finalizers=null!==(ze=this._finalizers)&&void 0!==ze?ze:[]).push(dt)}}_hasParent(dt){const{_parentage:ze}=this;return ze===dt||Array.isArray(ze)&&ze.includes(dt)}_addParent(dt){const{_parentage:ze}=this;this._parentage=Array.isArray(ze)?(ze.push(dt),ze):ze?[ze,dt]:dt}_removeParent(dt){const{_parentage:ze}=this;ze===dt?this._parentage=null:Array.isArray(ze)&&(0,Se.P)(ze,dt)}remove(dt){const{_finalizers:ze}=this;ze&&(0,Se.P)(ze,dt),dt instanceof _e&&dt._removeParent(this)}}_e.EMPTY=(()=>{const Qe=new _e;return Qe.closed=!0,Qe})();const Te=_e.EMPTY;function rt(Qe){return Qe instanceof _e||Qe&&"closed"in Qe&&(0,U.m)(Qe.remove)&&(0,U.m)(Qe.add)&&(0,U.m)(Qe.unsubscribe)}function Ve(Qe){(0,U.m)(Qe)?Qe():Qe.unsubscribe()}},2416:(an,qe,$)=>{$.d(qe,{v:()=>U});const U={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},4033:(an,qe,$)=>{$.d(qe,{c:()=>Te});var U=$(9751),v=$(727),xe=$(8343),Se=$(5403),_e=$(4482);class Te extends U.y{constructor(Ve,Qe){super(),this.source=Ve,this.subjectFactory=Qe,this._subject=null,this._refCount=0,this._connection=null,(0,_e.A)(Ve)&&(this.lift=Ve.lift)}_subscribe(Ve){return this.getSubject().subscribe(Ve)}getSubject(){const Ve=this._subject;return(!Ve||Ve.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:Ve}=this;this._subject=this._connection=null,Ve?.unsubscribe()}connect(){let Ve=this._connection;if(!Ve){Ve=this._connection=new v.w0;const Qe=this.getSubject();Ve.add(this.source.subscribe((0,Se.x)(Qe,void 0,()=>{this._teardown(),Qe.complete()},dt=>{this._teardown(),Qe.error(dt)},()=>this._teardown()))),Ve.closed&&(this._connection=null,Ve=v.w0.EMPTY)}return Ve}refCount(){return(0,xe.x)()(this)}}},9841:(an,qe,$)=>{$.d(qe,{a:()=>dt});var U=$(9751),v=$(4742),xe=$(2076),Se=$(4671),_e=$(3268),Te=$(3269),rt=$(1810),Ve=$(5403),Qe=$(9672);function dt(...Gt){const at=(0,Te.yG)(Gt),ke=(0,Te.jO)(Gt),{args:zt,keys:lt}=(0,v.D)(Gt);if(0===zt.length)return(0,xe.D)([],at);const Dt=new U.y(function ze(Gt,at,ke=Se.y){return zt=>{Ue(at,()=>{const{length:lt}=Gt,Dt=new Array(lt);let sn=lt,$n=lt;for(let Tt=0;Tt<lt;Tt++)Ue(at,()=>{const bt=(0,xe.D)(Gt[Tt],at);let Vt=!1;bt.subscribe((0,Ve.x)(zt,Nn=>{Dt[Tt]=Nn,Vt||(Vt=!0,$n--),$n||zt.next(ke(Dt.slice()))},()=>{--sn||zt.complete()}))},zt)},zt)}}(zt,at,lt?sn=>(0,rt.n)(lt,sn):Se.y));return ke?Dt.pipe((0,_e.Z)(ke)):Dt}function Ue(Gt,at,ke){Gt?(0,Qe.f)(ke,Gt,at):at()}},7272:(an,qe,$)=>{$.d(qe,{z:()=>_e});var U=$(8189),xe=$(3269),Se=$(2076);function _e(...Te){return function v(){return(0,U.J)(1)}()((0,Se.D)(Te,(0,xe.yG)(Te)))}},9770:(an,qe,$)=>{$.d(qe,{P:()=>xe});var U=$(9751),v=$(8421);function xe(Se){return new U.y(_e=>{(0,v.Xf)(Se()).subscribe(_e)})}},515:(an,qe,$)=>{$.d(qe,{E:()=>v});const v=new($(9751).y)(_e=>_e.complete())},4128:(an,qe,$)=>{$.d(qe,{D:()=>Ve});var U=$(9751),v=$(4742),xe=$(8421),Se=$(3269),_e=$(5403),Te=$(3268),rt=$(1810);function Ve(...Qe){const dt=(0,Se.jO)(Qe),{args:ze,keys:Ue}=(0,v.D)(Qe),Gt=new U.y(at=>{const{length:ke}=ze;if(!ke)return void at.complete();const zt=new Array(ke);let lt=ke,Dt=ke;for(let sn=0;sn<ke;sn++){let $n=!1;(0,xe.Xf)(ze[sn]).subscribe((0,_e.x)(at,Tt=>{$n||($n=!0,Dt--),zt[sn]=Tt},()=>lt--,void 0,()=>{(!lt||!$n)&&(Dt||at.next(Ue?(0,rt.n)(Ue,zt):zt),at.complete())}))}});return dt?Gt.pipe((0,Te.Z)(dt)):Gt}},2076:(an,qe,$)=>{$.d(qe,{D:()=>Nn});var U=$(8421),v=$(9672),xe=$(4482),Se=$(5403);function _e(qt,jt=0){return(0,xe.e)((ln,hn)=>{ln.subscribe((0,Se.x)(hn,_n=>(0,v.f)(hn,qt,()=>hn.next(_n),jt),()=>(0,v.f)(hn,qt,()=>hn.complete(),jt),_n=>(0,v.f)(hn,qt,()=>hn.error(_n),jt)))})}function Te(qt,jt=0){return(0,xe.e)((ln,hn)=>{hn.add(qt.schedule(()=>ln.subscribe(hn),jt))})}var Qe=$(9751),ze=$(2202),Ue=$(576);function at(qt,jt){if(!qt)throw new Error("Iterable cannot be null");return new Qe.y(ln=>{(0,v.f)(ln,jt,()=>{const hn=qt[Symbol.asyncIterator]();(0,v.f)(ln,jt,()=>{hn.next().then(_n=>{_n.done?ln.complete():ln.next(_n.value)})},0,!0)})})}var ke=$(3670),zt=$(8239),lt=$(1144),Dt=$(6495),sn=$(2206),$n=$(4532),Tt=$(3260);function Nn(qt,jt){return jt?function Vt(qt,jt){if(null!=qt){if((0,ke.c)(qt))return function rt(qt,jt){return(0,U.Xf)(qt).pipe(Te(jt),_e(jt))}(qt,jt);if((0,lt.z)(qt))return function dt(qt,jt){return new Qe.y(ln=>{let hn=0;return jt.schedule(function(){hn===qt.length?ln.complete():(ln.next(qt[hn++]),ln.closed||this.schedule())})})}(qt,jt);if((0,zt.t)(qt))return function Ve(qt,jt){return(0,U.Xf)(qt).pipe(Te(jt),_e(jt))}(qt,jt);if((0,sn.D)(qt))return at(qt,jt);if((0,Dt.T)(qt))return function Gt(qt,jt){return new Qe.y(ln=>{let hn;return(0,v.f)(ln,jt,()=>{hn=qt[ze.h](),(0,v.f)(ln,jt,()=>{let _n,gi;try{({value:_n,done:gi}=hn.next())}catch(Kt){return void ln.error(Kt)}gi?ln.complete():ln.next(_n)},0,!0)}),()=>(0,Ue.m)(hn?.return)&&hn.return()})}(qt,jt);if((0,Tt.L)(qt))return function bt(qt,jt){return at((0,Tt.Q)(qt),jt)}(qt,jt)}throw(0,$n.z)(qt)}(qt,jt):(0,U.Xf)(qt)}},8421:(an,qe,$)=>{$.d(qe,{Xf:()=>Gt});var U=$(655),v=$(1144),xe=$(8239),Se=$(9751),_e=$(3670),Te=$(2206),rt=$(4532),Ve=$(6495),Qe=$(3260),dt=$(576),ze=$(7849),Ue=$(8822);function Gt(Tt){if(Tt instanceof Se.y)return Tt;if(null!=Tt){if((0,_e.c)(Tt))return function at(Tt){return new Se.y(bt=>{const Vt=Tt[Ue.L]();if((0,dt.m)(Vt.subscribe))return Vt.subscribe(bt);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Tt);if((0,v.z)(Tt))return function ke(Tt){return new Se.y(bt=>{for(let Vt=0;Vt<Tt.length&&!bt.closed;Vt++)bt.next(Tt[Vt]);bt.complete()})}(Tt);if((0,xe.t)(Tt))return function zt(Tt){return new Se.y(bt=>{Tt.then(Vt=>{bt.closed||(bt.next(Vt),bt.complete())},Vt=>bt.error(Vt)).then(null,ze.h)})}(Tt);if((0,Te.D)(Tt))return Dt(Tt);if((0,Ve.T)(Tt))return function lt(Tt){return new Se.y(bt=>{for(const Vt of Tt)if(bt.next(Vt),bt.closed)return;bt.complete()})}(Tt);if((0,Qe.L)(Tt))return function sn(Tt){return Dt((0,Qe.Q)(Tt))}(Tt)}throw(0,rt.z)(Tt)}function Dt(Tt){return new Se.y(bt=>{(function $n(Tt,bt){var Vt,Nn,qt,jt;return(0,U.mG)(this,void 0,void 0,function*(){try{for(Vt=(0,U.KL)(Tt);!(Nn=yield Vt.next()).done;)if(bt.next(Nn.value),bt.closed)return}catch(ln){qt={error:ln}}finally{try{Nn&&!Nn.done&&(jt=Vt.return)&&(yield jt.call(Vt))}finally{if(qt)throw qt.error}}bt.complete()})})(Tt,bt).catch(Vt=>bt.error(Vt))})}},6451:(an,qe,$)=>{$.d(qe,{T:()=>Te});var U=$(8189),v=$(8421),xe=$(515),Se=$(3269),_e=$(2076);function Te(...rt){const Ve=(0,Se.yG)(rt),Qe=(0,Se._6)(rt,1/0),dt=rt;return dt.length?1===dt.length?(0,v.Xf)(dt[0]):(0,U.J)(Qe)((0,_e.D)(dt,Ve)):xe.E}},9646:(an,qe,$)=>{$.d(qe,{of:()=>xe});var U=$(3269),v=$(2076);function xe(...Se){const _e=(0,U.yG)(Se);return(0,v.D)(Se,_e)}},2843:(an,qe,$)=>{$.d(qe,{_:()=>xe});var U=$(9751),v=$(576);function xe(Se,_e){const Te=(0,v.m)(Se)?Se:()=>Se,rt=Ve=>Ve.error(Te());return new U.y(_e?Ve=>_e.schedule(rt,0,Ve):rt)}},5403:(an,qe,$)=>{$.d(qe,{x:()=>v});var U=$(930);function v(Se,_e,Te,rt,Ve){return new xe(Se,_e,Te,rt,Ve)}class xe extends U.Lv{constructor(_e,Te,rt,Ve,Qe,dt){super(_e),this.onFinalize=Qe,this.shouldUnsubscribe=dt,this._next=Te?function(ze){try{Te(ze)}catch(Ue){_e.error(Ue)}}:super._next,this._error=Ve?function(ze){try{Ve(ze)}catch(Ue){_e.error(Ue)}finally{this.unsubscribe()}}:super._error,this._complete=rt?function(){try{rt()}catch(ze){_e.error(ze)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var _e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Te}=this;super.unsubscribe(),!Te&&(null===(_e=this.onFinalize)||void 0===_e||_e.call(this))}}}},262:(an,qe,$)=>{$.d(qe,{K:()=>Se});var U=$(8421),v=$(5403),xe=$(4482);function Se(_e){return(0,xe.e)((Te,rt)=>{let dt,Ve=null,Qe=!1;Ve=Te.subscribe((0,v.x)(rt,void 0,void 0,ze=>{dt=(0,U.Xf)(_e(ze,Se(_e)(Te))),Ve?(Ve.unsubscribe(),Ve=null,dt.subscribe(rt)):Qe=!0})),Qe&&(Ve.unsubscribe(),Ve=null,dt.subscribe(rt))})}},4351:(an,qe,$)=>{$.d(qe,{b:()=>xe});var U=$(5577),v=$(576);function xe(Se,_e){return(0,v.m)(_e)?(0,U.z)(Se,_e,1):(0,U.z)(Se,1)}},9300:(an,qe,$)=>{$.d(qe,{h:()=>xe});var U=$(4482),v=$(5403);function xe(Se,_e){return(0,U.e)((Te,rt)=>{let Ve=0;Te.subscribe((0,v.x)(rt,Qe=>Se.call(_e,Qe,Ve++)&&rt.next(Qe)))})}},4004:(an,qe,$)=>{$.d(qe,{U:()=>xe});var U=$(4482),v=$(5403);function xe(Se,_e){return(0,U.e)((Te,rt)=>{let Ve=0;Te.subscribe((0,v.x)(rt,Qe=>{rt.next(Se.call(_e,Qe,Ve++))}))})}},9718:(an,qe,$)=>{$.d(qe,{h:()=>v});var U=$(4004);function v(xe){return(0,U.U)(()=>xe)}},8189:(an,qe,$)=>{$.d(qe,{J:()=>xe});var U=$(5577),v=$(4671);function xe(Se=1/0){return(0,U.z)(v.y,Se)}},5577:(an,qe,$)=>{$.d(qe,{z:()=>Ve});var U=$(4004),v=$(8421),xe=$(4482),Se=$(9672),_e=$(5403),rt=$(576);function Ve(Qe,dt,ze=1/0){return(0,rt.m)(dt)?Ve((Ue,Gt)=>(0,U.U)((at,ke)=>dt(Ue,at,Gt,ke))((0,v.Xf)(Qe(Ue,Gt))),ze):("number"==typeof dt&&(ze=dt),(0,xe.e)((Ue,Gt)=>function Te(Qe,dt,ze,Ue,Gt,at,ke,zt){const lt=[];let Dt=0,sn=0,$n=!1;const Tt=()=>{$n&&!lt.length&&!Dt&&dt.complete()},bt=Nn=>Dt<Ue?Vt(Nn):lt.push(Nn),Vt=Nn=>{at&&dt.next(Nn),Dt++;let qt=!1;(0,v.Xf)(ze(Nn,sn++)).subscribe((0,_e.x)(dt,jt=>{Gt?.(jt),at?bt(jt):dt.next(jt)},()=>{qt=!0},void 0,()=>{if(qt)try{for(Dt--;lt.length&&Dt<Ue;){const jt=lt.shift();ke?(0,Se.f)(dt,ke,()=>Vt(jt)):Vt(jt)}Tt()}catch(jt){dt.error(jt)}}))};return Qe.subscribe((0,_e.x)(dt,bt,()=>{$n=!0,Tt()})),()=>{zt?.()}}(Ue,Gt,Qe,ze)))}},8343:(an,qe,$)=>{$.d(qe,{x:()=>xe});var U=$(4482),v=$(5403);function xe(){return(0,U.e)((Se,_e)=>{let Te=null;Se._refCount++;const rt=(0,v.x)(_e,void 0,void 0,void 0,()=>{if(!Se||Se._refCount<=0||0<--Se._refCount)return void(Te=null);const Ve=Se._connection,Qe=Te;Te=null,Ve&&(!Qe||Ve===Qe)&&Ve.unsubscribe(),_e.unsubscribe()});Se.subscribe(rt),rt.closed||(Te=Se.connect())})}},3099:(an,qe,$)=>{$.d(qe,{B:()=>_e});var U=$(8421),v=$(7579),xe=$(930),Se=$(4482);function _e(rt={}){const{connector:Ve=(()=>new v.x),resetOnError:Qe=!0,resetOnComplete:dt=!0,resetOnRefCountZero:ze=!0}=rt;return Ue=>{let Gt,at,ke,zt=0,lt=!1,Dt=!1;const sn=()=>{at?.unsubscribe(),at=void 0},$n=()=>{sn(),Gt=ke=void 0,lt=Dt=!1},Tt=()=>{const bt=Gt;$n(),bt?.unsubscribe()};return(0,Se.e)((bt,Vt)=>{zt++,!Dt&&!lt&&sn();const Nn=ke=ke??Ve();Vt.add(()=>{zt--,0===zt&&!Dt&&!lt&&(at=Te(Tt,ze))}),Nn.subscribe(Vt),!Gt&&zt>0&&(Gt=new xe.Hp({next:qt=>Nn.next(qt),error:qt=>{Dt=!0,sn(),at=Te($n,Qe,qt),Nn.error(qt)},complete:()=>{lt=!0,sn(),at=Te($n,dt),Nn.complete()}}),(0,U.Xf)(bt).subscribe(Gt))})(Ue)}}function Te(rt,Ve,...Qe){if(!0===Ve)return void rt();if(!1===Ve)return;const dt=new xe.Hp({next:()=>{dt.unsubscribe(),rt()}});return(0,U.Xf)(Ve(...Qe)).subscribe(dt)}},8675:(an,qe,$)=>{$.d(qe,{O:()=>Se});var U=$(7272),v=$(3269),xe=$(4482);function Se(..._e){const Te=(0,v.yG)(_e);return(0,xe.e)((rt,Ve)=>{(Te?(0,U.z)(_e,rt,Te):(0,U.z)(_e,rt)).subscribe(Ve)})}},3900:(an,qe,$)=>{$.d(qe,{w:()=>Se});var U=$(8421),v=$(4482),xe=$(5403);function Se(_e,Te){return(0,v.e)((rt,Ve)=>{let Qe=null,dt=0,ze=!1;const Ue=()=>ze&&!Qe&&Ve.complete();rt.subscribe((0,xe.x)(Ve,Gt=>{Qe?.unsubscribe();let at=0;const ke=dt++;(0,U.Xf)(_e(Gt,ke)).subscribe(Qe=(0,xe.x)(Ve,zt=>Ve.next(Te?Te(Gt,zt,ke,at++):zt),()=>{Qe=null,Ue()}))},()=>{ze=!0,Ue()}))})}},5698:(an,qe,$)=>{$.d(qe,{q:()=>Se});var U=$(515),v=$(4482),xe=$(5403);function Se(_e){return _e<=0?()=>U.E:(0,v.e)((Te,rt)=>{let Ve=0;Te.subscribe((0,xe.x)(rt,Qe=>{++Ve<=_e&&(rt.next(Qe),_e<=Ve&&rt.complete())}))})}},8505:(an,qe,$)=>{$.d(qe,{b:()=>_e});var U=$(576),v=$(4482),xe=$(5403),Se=$(4671);function _e(Te,rt,Ve){const Qe=(0,U.m)(Te)||rt||Ve?{next:Te,error:rt,complete:Ve}:Te;return Qe?(0,v.e)((dt,ze)=>{var Ue;null===(Ue=Qe.subscribe)||void 0===Ue||Ue.call(Qe);let Gt=!0;dt.subscribe((0,xe.x)(ze,at=>{var ke;null===(ke=Qe.next)||void 0===ke||ke.call(Qe,at),ze.next(at)},()=>{var at;Gt=!1,null===(at=Qe.complete)||void 0===at||at.call(Qe),ze.complete()},at=>{var ke;Gt=!1,null===(ke=Qe.error)||void 0===ke||ke.call(Qe,at),ze.error(at)},()=>{var at,ke;Gt&&(null===(at=Qe.unsubscribe)||void 0===at||at.call(Qe)),null===(ke=Qe.finalize)||void 0===ke||ke.call(Qe)}))}):Se.y}},6063:(an,qe,$)=>{$.d(qe,{l:()=>U});const U={now:()=>(U.delegate||Date).now(),delegate:void 0}},3410:(an,qe,$)=>{$.d(qe,{z:()=>U});const U={setTimeout(v,xe,...Se){const{delegate:_e}=U;return _e?.setTimeout?_e.setTimeout(v,xe,...Se):setTimeout(v,xe,...Se)},clearTimeout(v){const{delegate:xe}=U;return(xe?.clearTimeout||clearTimeout)(v)},delegate:void 0}},2202:(an,qe,$)=>{$.d(qe,{h:()=>v});const v=function U(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(an,qe,$)=>{$.d(qe,{L:()=>U});const U="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(an,qe,$)=>{$.d(qe,{_6:()=>Te,jO:()=>Se,yG:()=>_e});var U=$(576),v=$(3532);function xe(rt){return rt[rt.length-1]}function Se(rt){return(0,U.m)(xe(rt))?rt.pop():void 0}function _e(rt){return(0,v.K)(xe(rt))?rt.pop():void 0}function Te(rt,Ve){return"number"==typeof xe(rt)?rt.pop():Ve}},4742:(an,qe,$)=>{$.d(qe,{D:()=>_e});const{isArray:U}=Array,{getPrototypeOf:v,prototype:xe,keys:Se}=Object;function _e(rt){if(1===rt.length){const Ve=rt[0];if(U(Ve))return{args:Ve,keys:null};if(function Te(rt){return rt&&"object"==typeof rt&&v(rt)===xe}(Ve)){const Qe=Se(Ve);return{args:Qe.map(dt=>Ve[dt]),keys:Qe}}}return{args:rt,keys:null}}},8737:(an,qe,$)=>{function U(v,xe){if(v){const Se=v.indexOf(xe);0<=Se&&v.splice(Se,1)}}$.d(qe,{P:()=>U})},3888:(an,qe,$)=>{function U(v){const Se=v(_e=>{Error.call(_e),_e.stack=(new Error).stack});return Se.prototype=Object.create(Error.prototype),Se.prototype.constructor=Se,Se}$.d(qe,{d:()=>U})},1810:(an,qe,$)=>{function U(v,xe){return v.reduce((Se,_e,Te)=>(Se[_e]=xe[Te],Se),{})}$.d(qe,{n:()=>U})},2806:(an,qe,$)=>{$.d(qe,{O:()=>Se,x:()=>xe});var U=$(2416);let v=null;function xe(_e){if(U.v.useDeprecatedSynchronousErrorHandling){const Te=!v;if(Te&&(v={errorThrown:!1,error:null}),_e(),Te){const{errorThrown:rt,error:Ve}=v;if(v=null,rt)throw Ve}}else _e()}function Se(_e){U.v.useDeprecatedSynchronousErrorHandling&&v&&(v.errorThrown=!0,v.error=_e)}},9672:(an,qe,$)=>{function U(v,xe,Se,_e=0,Te=!1){const rt=xe.schedule(function(){Se(),Te?v.add(this.schedule(null,_e)):this.unsubscribe()},_e);if(v.add(rt),!Te)return rt}$.d(qe,{f:()=>U})},4671:(an,qe,$)=>{function U(v){return v}$.d(qe,{y:()=>U})},1144:(an,qe,$)=>{$.d(qe,{z:()=>U});const U=v=>v&&"number"==typeof v.length&&"function"!=typeof v},2206:(an,qe,$)=>{$.d(qe,{D:()=>v});var U=$(576);function v(xe){return Symbol.asyncIterator&&(0,U.m)(xe?.[Symbol.asyncIterator])}},576:(an,qe,$)=>{function U(v){return"function"==typeof v}$.d(qe,{m:()=>U})},3670:(an,qe,$)=>{$.d(qe,{c:()=>xe});var U=$(8822),v=$(576);function xe(Se){return(0,v.m)(Se[U.L])}},6495:(an,qe,$)=>{$.d(qe,{T:()=>xe});var U=$(2202),v=$(576);function xe(Se){return(0,v.m)(Se?.[U.h])}},8239:(an,qe,$)=>{$.d(qe,{t:()=>v});var U=$(576);function v(xe){return(0,U.m)(xe?.then)}},3260:(an,qe,$)=>{$.d(qe,{L:()=>Se,Q:()=>xe});var U=$(655),v=$(576);function xe(_e){return(0,U.FC)(this,arguments,function*(){const rt=_e.getReader();try{for(;;){const{value:Ve,done:Qe}=yield(0,U.qq)(rt.read());if(Qe)return yield(0,U.qq)(void 0);yield yield(0,U.qq)(Ve)}}finally{rt.releaseLock()}})}function Se(_e){return(0,v.m)(_e?.getReader)}},3532:(an,qe,$)=>{$.d(qe,{K:()=>v});var U=$(576);function v(xe){return xe&&(0,U.m)(xe.schedule)}},4482:(an,qe,$)=>{$.d(qe,{A:()=>v,e:()=>xe});var U=$(576);function v(Se){return(0,U.m)(Se?.lift)}function xe(Se){return _e=>{if(v(_e))return _e.lift(function(Te){try{return Se(Te,this)}catch(rt){this.error(rt)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(an,qe,$)=>{$.d(qe,{Z:()=>Se});var U=$(4004);const{isArray:v}=Array;function Se(_e){return(0,U.U)(Te=>function xe(_e,Te){return v(Te)?_e(...Te):_e(Te)}(_e,Te))}},5032:(an,qe,$)=>{function U(){}$.d(qe,{Z:()=>U})},9635:(an,qe,$)=>{$.d(qe,{U:()=>xe,z:()=>v});var U=$(4671);function v(...Se){return xe(Se)}function xe(Se){return 0===Se.length?U.y:1===Se.length?Se[0]:function(Te){return Se.reduce((rt,Ve)=>Ve(rt),Te)}}},7849:(an,qe,$)=>{$.d(qe,{h:()=>xe});var U=$(2416),v=$(3410);function xe(Se){v.z.setTimeout(()=>{const{onUnhandledError:_e}=U.v;if(!_e)throw Se;_e(Se)})}},4532:(an,qe,$)=>{function U(v){return new TypeError(`You provided ${null!==v&&"object"==typeof v?"an invalid object":`'${v}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}$.d(qe,{z:()=>U})},655:(an,qe,$)=>{function _e(Ce,je,nt,et){var pn,yt=arguments.length,$e=yt<3?je:null===et?et=Object.getOwnPropertyDescriptor(je,nt):et;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)$e=Reflect.decorate(Ce,je,nt,et);else for(var Xe=Ce.length-1;Xe>=0;Xe--)(pn=Ce[Xe])&&($e=(yt<3?pn($e):yt>3?pn(je,nt,$e):pn(je,nt))||$e);return yt>3&&$e&&Object.defineProperty(je,nt,$e),$e}function Ue(Ce,je,nt,et){return new(nt||(nt=Promise))(function($e,pn){function Xe(He){try{oe(et.next(He))}catch(Le){pn(Le)}}function kt(He){try{oe(et.throw(He))}catch(Le){pn(Le)}}function oe(He){He.done?$e(He.value):function yt($e){return $e instanceof nt?$e:new nt(function(pn){pn($e)})}(He.value).then(Xe,kt)}oe((et=et.apply(Ce,je||[])).next())})}function Tt(Ce){return this instanceof Tt?(this.v=Ce,this):new Tt(Ce)}function bt(Ce,je,nt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var yt,et=nt.apply(Ce,je||[]),$e=[];return yt={},pn("next"),pn("throw"),pn("return"),yt[Symbol.asyncIterator]=function(){return this},yt;function pn(Ot){et[Ot]&&(yt[Ot]=function(vn){return new Promise(function(bi,Oi){$e.push([Ot,vn,bi,Oi])>1||Xe(Ot,vn)})})}function Xe(Ot,vn){try{!function kt(Ot){Ot.value instanceof Tt?Promise.resolve(Ot.value.v).then(oe,He):Le($e[0][2],Ot)}(et[Ot](vn))}catch(bi){Le($e[0][3],bi)}}function oe(Ot){Xe("next",Ot)}function He(Ot){Xe("throw",Ot)}function Le(Ot,vn){Ot(vn),$e.shift(),$e.length&&Xe($e[0][0],$e[0][1])}}function Nn(Ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var nt,je=Ce[Symbol.asyncIterator];return je?je.call(Ce):(Ce=function zt(Ce){var je="function"==typeof Symbol&&Symbol.iterator,nt=je&&Ce[je],et=0;if(nt)return nt.call(Ce);if(Ce&&"number"==typeof Ce.length)return{next:function(){return Ce&&et>=Ce.length&&(Ce=void 0),{value:Ce&&Ce[et++],done:!Ce}}};throw new TypeError(je?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ce),nt={},et("next"),et("throw"),et("return"),nt[Symbol.asyncIterator]=function(){return this},nt);function et($e){nt[$e]=Ce[$e]&&function(pn){return new Promise(function(Xe,kt){!function yt($e,pn,Xe,kt){Promise.resolve(kt).then(function(oe){$e({value:oe,done:Xe})},pn)}(Xe,kt,(pn=Ce[$e](pn)).done,pn.value)})}}}$.d(qe,{FC:()=>bt,KL:()=>Nn,gn:()=>_e,mG:()=>Ue,qq:()=>Tt})},6895:(an,qe,$)=>{$.d(qe,{Do:()=>$n,EM:()=>Wa,HT:()=>_e,JF:()=>ms,K0:()=>rt,Mx:()=>wl,NF:()=>El,O5:()=>Mr,S$:()=>lt,V_:()=>dt,Ye:()=>Tt,b0:()=>sn,bD:()=>Qr,ez:()=>Xu,q:()=>xe,sg:()=>$s,tP:()=>Ga,w_:()=>Te});var U=$(4650);let v=null;function xe(){return v}function _e(B){v||(v=B)}class Te{}const rt=new U.OlP("DocumentToken");let Ve=(()=>{class B{historyGo(V){throw new Error("Not implemented")}}return B.\u0275fac=function(V){return new(V||B)},B.\u0275prov=U.Yz7({token:B,factory:function(){return function Qe(){return(0,U.LFG)(ze)}()},providedIn:"platform"}),B})();const dt=new U.OlP("Location Initialized");let ze=(()=>{class B extends Ve{constructor(V){super(),this._doc=V,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return xe().getBaseHref(this._doc)}onPopState(V){const K=xe().getGlobalEventTarget(this._doc,"window");return K.addEventListener("popstate",V,!1),()=>K.removeEventListener("popstate",V)}onHashChange(V){const K=xe().getGlobalEventTarget(this._doc,"window");return K.addEventListener("hashchange",V,!1),()=>K.removeEventListener("hashchange",V)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(V){this.location.pathname=V}pushState(V,K,ge){Ue()?this._history.pushState(V,K,ge):this.location.hash=ge}replaceState(V,K,ge){Ue()?this._history.replaceState(V,K,ge):this.location.hash=ge}forward(){this._history.forward()}back(){this._history.back()}historyGo(V=0){this._history.go(V)}getState(){return this._history.state}}return B.\u0275fac=function(V){return new(V||B)(U.LFG(rt))},B.\u0275prov=U.Yz7({token:B,factory:function(){return function Gt(){return new ze((0,U.LFG)(rt))}()},providedIn:"platform"}),B})();function Ue(){return!!window.history.pushState}function at(B,Z){if(0==B.length)return Z;if(0==Z.length)return B;let V=0;return B.endsWith("/")&&V++,Z.startsWith("/")&&V++,2==V?B+Z.substring(1):1==V?B+Z:B+"/"+Z}function ke(B){const Z=B.match(/#|\?|$/),V=Z&&Z.index||B.length;return B.slice(0,V-("/"===B[V-1]?1:0))+B.slice(V)}function zt(B){return B&&"?"!==B[0]?"?"+B:B}let lt=(()=>{class B{historyGo(V){throw new Error("Not implemented")}}return B.\u0275fac=function(V){return new(V||B)},B.\u0275prov=U.Yz7({token:B,factory:function(){return(0,U.f3M)(sn)},providedIn:"root"}),B})();const Dt=new U.OlP("appBaseHref");let sn=(()=>{class B extends lt{constructor(V,K){super(),this._platformLocation=V,this._removeListenerFns=[],this._baseHref=K??this._platformLocation.getBaseHrefFromDOM()??(0,U.f3M)(rt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(V){this._removeListenerFns.push(this._platformLocation.onPopState(V),this._platformLocation.onHashChange(V))}getBaseHref(){return this._baseHref}prepareExternalUrl(V){return at(this._baseHref,V)}path(V=!1){const K=this._platformLocation.pathname+zt(this._platformLocation.search),ge=this._platformLocation.hash;return ge&&V?`${K}${ge}`:K}pushState(V,K,ge,Ae){const Ie=this.prepareExternalUrl(ge+zt(Ae));this._platformLocation.pushState(V,K,Ie)}replaceState(V,K,ge,Ae){const Ie=this.prepareExternalUrl(ge+zt(Ae));this._platformLocation.replaceState(V,K,Ie)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(V=0){this._platformLocation.historyGo?.(V)}}return B.\u0275fac=function(V){return new(V||B)(U.LFG(Ve),U.LFG(Dt,8))},B.\u0275prov=U.Yz7({token:B,factory:B.\u0275fac,providedIn:"root"}),B})(),$n=(()=>{class B extends lt{constructor(V,K){super(),this._platformLocation=V,this._baseHref="",this._removeListenerFns=[],null!=K&&(this._baseHref=K)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(V){this._removeListenerFns.push(this._platformLocation.onPopState(V),this._platformLocation.onHashChange(V))}getBaseHref(){return this._baseHref}path(V=!1){let K=this._platformLocation.hash;return null==K&&(K="#"),K.length>0?K.substring(1):K}prepareExternalUrl(V){const K=at(this._baseHref,V);return K.length>0?"#"+K:K}pushState(V,K,ge,Ae){let Ie=this.prepareExternalUrl(ge+zt(Ae));0==Ie.length&&(Ie=this._platformLocation.pathname),this._platformLocation.pushState(V,K,Ie)}replaceState(V,K,ge,Ae){let Ie=this.prepareExternalUrl(ge+zt(Ae));0==Ie.length&&(Ie=this._platformLocation.pathname),this._platformLocation.replaceState(V,K,Ie)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(V=0){this._platformLocation.historyGo?.(V)}}return B.\u0275fac=function(V){return new(V||B)(U.LFG(Ve),U.LFG(Dt,8))},B.\u0275prov=U.Yz7({token:B,factory:B.\u0275fac}),B})(),Tt=(()=>{class B{constructor(V){this._subject=new U.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=V;const K=this._locationStrategy.getBaseHref();this._baseHref=ke(Nn(K)),this._locationStrategy.onPopState(ge=>{this._subject.emit({url:this.path(!0),pop:!0,state:ge.state,type:ge.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(V=!1){return this.normalize(this._locationStrategy.path(V))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(V,K=""){return this.path()==this.normalize(V+zt(K))}normalize(V){return B.stripTrailingSlash(function Vt(B,Z){return B&&Z.startsWith(B)?Z.substring(B.length):Z}(this._baseHref,Nn(V)))}prepareExternalUrl(V){return V&&"/"!==V[0]&&(V="/"+V),this._locationStrategy.prepareExternalUrl(V)}go(V,K="",ge=null){this._locationStrategy.pushState(ge,"",V,K),this._notifyUrlChangeListeners(this.prepareExternalUrl(V+zt(K)),ge)}replaceState(V,K="",ge=null){this._locationStrategy.replaceState(ge,"",V,K),this._notifyUrlChangeListeners(this.prepareExternalUrl(V+zt(K)),ge)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(V=0){this._locationStrategy.historyGo?.(V)}onUrlChange(V){return this._urlChangeListeners.push(V),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(K=>{this._notifyUrlChangeListeners(K.url,K.state)})),()=>{const K=this._urlChangeListeners.indexOf(V);this._urlChangeListeners.splice(K,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(V="",K){this._urlChangeListeners.forEach(ge=>ge(V,K))}subscribe(V,K,ge){return this._subject.subscribe({next:V,error:K,complete:ge})}}return B.normalizeQueryParams=zt,B.joinWithSlash=at,B.stripTrailingSlash=ke,B.\u0275fac=function(V){return new(V||B)(U.LFG(lt))},B.\u0275prov=U.Yz7({token:B,factory:function(){return function bt(){return new Tt((0,U.LFG)(lt))}()},providedIn:"root"}),B})();function Nn(B){return B.replace(/\/index.html$/,"")}function wl(B,Z){Z=encodeURIComponent(Z);for(const V of B.split(";")){const K=V.indexOf("="),[ge,Ae]=-1==K?[V,""]:[V.slice(0,K),V.slice(K+1)];if(ge.trim()===Z)return decodeURIComponent(Ae)}return null}class zo{constructor(Z,V,K,ge){this.$implicit=Z,this.ngForOf=V,this.index=K,this.count=ge}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let $s=(()=>{class B{constructor(V,K,ge){this._viewContainer=V,this._template=K,this._differs=ge,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(V){this._ngForOf=V,this._ngForOfDirty=!0}set ngForTrackBy(V){this._trackByFn=V}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(V){V&&(this._template=V)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const V=this._ngForOf;!this._differ&&V&&(this._differ=this._differs.find(V).create(this.ngForTrackBy))}if(this._differ){const V=this._differ.diff(this._ngForOf);V&&this._applyChanges(V)}}_applyChanges(V){const K=this._viewContainer;V.forEachOperation((ge,Ae,Ie)=>{if(null==ge.previousIndex)K.createEmbeddedView(this._template,new zo(ge.item,this._ngForOf,-1,-1),null===Ie?void 0:Ie);else if(null==Ie)K.remove(null===Ae?void 0:Ae);else if(null!==Ae){const nn=K.get(Ae);K.move(nn,Ie),ar(nn,ge)}});for(let ge=0,Ae=K.length;ge<Ae;ge++){const nn=K.get(ge).context;nn.index=ge,nn.count=Ae,nn.ngForOf=this._ngForOf}V.forEachIdentityChange(ge=>{ar(K.get(ge.currentIndex),ge)})}static ngTemplateContextGuard(V,K){return!0}}return B.\u0275fac=function(V){return new(V||B)(U.Y36(U.s_b),U.Y36(U.Rgc),U.Y36(U.ZZ4))},B.\u0275dir=U.lG2({type:B,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),B})();function ar(B,Z){B.context.$implicit=Z.item}let Mr=(()=>{class B{constructor(V,K){this._viewContainer=V,this._context=new mr,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=K}set ngIf(V){this._context.$implicit=this._context.ngIf=V,this._updateView()}set ngIfThen(V){to("ngIfThen",V),this._thenTemplateRef=V,this._thenViewRef=null,this._updateView()}set ngIfElse(V){to("ngIfElse",V),this._elseTemplateRef=V,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(V,K){return!0}}return B.\u0275fac=function(V){return new(V||B)(U.Y36(U.s_b),U.Y36(U.Rgc))},B.\u0275dir=U.lG2({type:B,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),B})();class mr{constructor(){this.$implicit=null,this.ngIf=null}}function to(B,Z){if(Z&&!Z.createEmbeddedView)throw new Error(`${B} must be a TemplateRef, but received '${(0,U.AaK)(Z)}'.`)}let Ga=(()=>{class B{constructor(V){this._viewContainerRef=V,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(V){if(V.ngTemplateOutlet||V.ngTemplateOutletInjector){const K=this._viewContainerRef;if(this._viewRef&&K.remove(K.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:ge,ngTemplateOutletContext:Ae,ngTemplateOutletInjector:Ie}=this;this._viewRef=K.createEmbeddedView(ge,Ae,Ie?{injector:Ie}:void 0)}else this._viewRef=null}else this._viewRef&&V.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return B.\u0275fac=function(V){return new(V||B)(U.Y36(U.s_b))},B.\u0275dir=U.lG2({type:B,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[U.TTD]}),B})(),Xu=(()=>{class B{}return B.\u0275fac=function(V){return new(V||B)},B.\u0275mod=U.oAB({type:B}),B.\u0275inj=U.cJS({}),B})();const Qr="browser";function El(B){return B===Qr}let Wa=(()=>{class B{}return B.\u0275prov=(0,U.Yz7)({token:B,providedIn:"root",factory:()=>new Ts((0,U.LFG)(rt),window)}),B})();class Ts{constructor(Z,V){this.document=Z,this.window=V,this.offset=()=>[0,0]}setOffset(Z){this.offset=Array.isArray(Z)?()=>Z:Z}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(Z){this.supportsScrolling()&&this.window.scrollTo(Z[0],Z[1])}scrollToAnchor(Z){if(!this.supportsScrolling())return;const V=function Ju(B,Z){const V=B.getElementById(Z)||B.getElementsByName(Z)[0];if(V)return V;if("function"==typeof B.createTreeWalker&&B.body&&(B.body.createShadowRoot||B.body.attachShadow)){const K=B.createTreeWalker(B.body,NodeFilter.SHOW_ELEMENT);let ge=K.currentNode;for(;ge;){const Ae=ge.shadowRoot;if(Ae){const Ie=Ae.getElementById(Z)||Ae.querySelector(`[name="${Z}"]`);if(Ie)return Ie}ge=K.nextNode()}}return null}(this.document,Z);V&&(this.scrollToElement(V),V.focus())}setHistoryScrollRestoration(Z){if(this.supportScrollRestoration()){const V=this.window.history;V&&V.scrollRestoration&&(V.scrollRestoration=Z)}}scrollToElement(Z){const V=Z.getBoundingClientRect(),K=V.left+this.window.pageXOffset,ge=V.top+this.window.pageYOffset,Ae=this.offset();this.window.scrollTo(K-Ae[0],ge-Ae[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const Z=Zu(this.window.history)||Zu(Object.getPrototypeOf(this.window.history));return!(!Z||!Z.writable&&!Z.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Zu(B){return Object.getOwnPropertyDescriptor(B,"scrollRestoration")}class ms{}},4650:(an,qe,$)=>{$.d(qe,{$8M:()=>Jd,$Z:()=>Nc,AFp:()=>I1,AaK:()=>Ve,CHM:()=>Tl,CRH:()=>a1,CZH:()=>hy,CqO:()=>x,D6c:()=>Xw,EEQ:()=>Zs,EJc:()=>uw,EpF:()=>c,F$t:()=>Mt,F4k:()=>f,FYo:()=>g_,FiY:()=>co,G48:()=>Iw,Gf:()=>s1,GfV:()=>m_,Gpc:()=>ze,GuJ:()=>Rn,Hsn:()=>Mn,Ikx:()=>iy,JOm:()=>ia,KtG:()=>no,LFG:()=>vr,LMc:()=>Jw,LSH:()=>Sf,Lbi:()=>aw,Lck:()=>_i,MAs:()=>C0,MGl:()=>Hn,MMx:()=>Mo,NdJ:()=>R,OlP:()=>Ei,PXZ:()=>Cw,Q6J:()=>vp,QGY:()=>o,QP$:()=>Tm,Qsj:()=>pv,QtT:()=>Br,R0b:()=>bl,RDi:()=>ud,Rgc:()=>U0,SBq:()=>hh,SDv:()=>Ms,Sil:()=>hw,Suo:()=>o1,TTD:()=>za,TgZ:()=>qh,Tol:()=>wp,Udp:()=>Gd,VKq:()=>Wb,W1O:()=>d1,WLB:()=>jb,XFs:()=>on,Xpm:()=>yr,Xts:()=>Ef,Y36:()=>Ac,YKP:()=>hi,YNc:()=>Yv,Yjl:()=>Ua,Yz7:()=>oe,ZZ4:()=>bb,_Bn:()=>kn,_UZ:()=>ml,_Vd:()=>dh,_c5:()=>Yw,_uU:()=>Ep,aQg:()=>xb,c2e:()=>lw,cJS:()=>Le,cg1:()=>ry,dDg:()=>xw,dqk:()=>Lt,eFA:()=>W1,ekj:()=>Xi,eoX:()=>H1,f3M:()=>Gl,g9A:()=>O1,h0i:()=>Jn,hGG:()=>qw,hij:()=>A0,iGM:()=>r1,ifc:()=>Qt,ip1:()=>N1,kEZ:()=>$b,kL8:()=>jy,lG2:()=>Ss,lqb:()=>lu,lri:()=>V1,n5z:()=>id,oAB:()=>_o,oxw:()=>Pt,pQV:()=>Ba,qLn:()=>Aa,qOj:()=>up,qZA:()=>Xh,rWj:()=>U1,s9C:()=>fn,sBO:()=>Rw,sIi:()=>fl,s_b:()=>cy,soG:()=>fy,tb:()=>P1,tp0:()=>Ar,uIk:()=>Au,vHH:()=>ke,vpe:()=>Gu,wAp:()=>Vn,xp6:()=>Rg,z2F:()=>py,zSh:()=>Af,zs3:()=>hu});var U=$(7579),v=$(727),xe=$(9751),Se=$(6451),_e=$(3099);function Te(n){for(let i in n)if(n[i]===Te)return i;throw Error("Could not find renamed property on target object.")}function rt(n,i){for(const s in i)i.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=i[s])}function Ve(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ve).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const i=n.toString();if(null==i)return""+i;const s=i.indexOf("\n");return-1===s?i:i.substring(0,s)}function Qe(n,i){return null==n||""===n?null===i?"":i:null==i||""===i?n:n+" "+i}const dt=Te({__forward_ref__:Te});function ze(n){return n.__forward_ref__=ze,n.toString=function(){return Ve(this())},n}function Ue(n){return Gt(n)?n():n}function Gt(n){return"function"==typeof n&&n.hasOwnProperty(dt)&&n.__forward_ref__===ze}class ke extends Error{constructor(i,s){super(function zt(n,i){return`NG0${Math.abs(n)}${i?": "+i.trim():""}`}(i,s)),this.code=i}}function lt(n){return"string"==typeof n?n:null==n?"":String(n)}function bt(n,i){throw new ke(-201,!1)}function $e(n,i,s,u){throw new Error(`ASSERTION ERROR: ${n}`+(null==u?"":` [Expected=> ${s} ${u} ${i} <=Actual]`))}function oe(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Le(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ot(n){return vn(n,or)||vn(n,$i)}function vn(n,i){return n.hasOwnProperty(i)?n[i]:null}function ci(n){return n&&(n.hasOwnProperty(ji)||n.hasOwnProperty(xl))?n[ji]:null}const or=Te({\u0275prov:Te}),ji=Te({\u0275inj:Te}),$i=Te({ngInjectableDef:Te}),xl=Te({ngInjectorDef:Te});var on=(()=>((on=on||{})[on.Default=0]="Default",on[on.Host=1]="Host",on[on.Self=2]="Self",on[on.SkipSelf=4]="SkipSelf",on[on.Optional=8]="Optional",on))();let Ui;function Ur(n){const i=Ui;return Ui=n,i}function Eo(n,i,s){const u=Ot(n);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:s&on.Optional?null:void 0!==i?i:void bt(Ve(n))}function xr(n){return{toString:n}.toString()}var er=(()=>((er=er||{})[er.OnPush=0]="OnPush",er[er.Default=1]="Default",er))(),Qt=(()=>{return(n=Qt||(Qt={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Qt;var n})();const Lt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),yn={},Bn=[],pr=Te({\u0275cmp:Te}),Hs=Te({\u0275dir:Te}),Rn=Te({\u0275pipe:Te}),Ho=Te({\u0275mod:Te}),ii=Te({\u0275fac:Te}),Zr=Te({__NG_ELEMENT_ID__:Te});let Gs=0;function yr(n){return xr(()=>{const s=!0===n.standalone,u={},h={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===er.OnPush,directiveDefs:null,pipeDefs:null,standalone:s,dependencies:s&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||Bn,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Qt.Emulated,id:"c"+Gs++,styles:n.styles||Bn,_:null,setInput:null,schemas:n.schemas||null,tView:null},_=n.dependencies,w=n.features;return h.inputs=wr(n.inputs,u),h.outputs=wr(n.outputs),w&&w.forEach(A=>A(h)),h.directiveDefs=_?()=>("function"==typeof _?_():_).map(Qs).filter(Go):null,h.pipeDefs=_?()=>("function"==typeof _?_():_).map(tr).filter(Go):null,h})}function Qs(n){return mi(n)||Zi(n)}function Go(n){return null!==n}function _o(n){return xr(()=>({type:n.type,bootstrap:n.bootstrap||Bn,declarations:n.declarations||Bn,imports:n.imports||Bn,exports:n.exports||Bn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function wr(n,i){if(null==n)return yn;const s={};for(const u in n)if(n.hasOwnProperty(u)){let h=n[u],_=h;Array.isArray(h)&&(_=h[1],h=h[0]),s[h]=u,i&&(i[h]=_)}return s}const Ss=yr;function Ua(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function mi(n){return n[pr]||null}function Zi(n){return n[Hs]||null}function tr(n){return n[Rn]||null}function Ti(n,i){const s=n[Ho]||null;if(!s&&!0===i)throw new Error(`Type ${Ve(n)} does not have '\u0275mod' property.`);return s}function Mr(n){return Array.isArray(n)&&"object"==typeof n[1]}function mr(n){return Array.isArray(n)&&!0===n[1]}function to(n){return 0!=(8&n.flags)}function ga(n){return 2==(2&n.flags)}function ma(n){return 1==(1&n.flags)}function qs(n){return null!==n.template}function zu(n){return 0!=(256&n[2])}function Es(n,i){return n.hasOwnProperty(ii)?n[ii]:null}class va{constructor(i,s,u){this.previousValue=i,this.currentValue=s,this.firstChange=u}isFirstChange(){return this.firstChange}}function za(){return ya}function ya(n){return n.type.prototype.ngOnChanges&&(n.setInput=$d),cc}function cc(){const n=uc(this),i=n?.current;if(i){const s=n.previous;if(s===yn)n.previous=i;else for(let u in i)s[u]=i[u];n.current=null,this.ngOnChanges(i)}}function $d(n,i,s,u){const h=uc(n)||function zc(n,i){return n[Ao]=i}(n,{previous:yn,current:null}),_=h.current||(h.current={}),w=h.previous,A=this.declaredInputs[s],O=w[A];_[A]=new va(O&&O.currentValue,i,w===yn),n[u]=i}za.ngInherit=!0;const Ao="__ngSimpleChanges__";function uc(n){return n[Ao]||null}function Ji(n){for(;Array.isArray(n);)n=n[0];return n}function Wa(n,i){return Ji(i[n])}function Ts(n,i){return Ji(i[n.index])}function Ju(n,i){return n.data[i]}function ms(n,i){const s=i[n];return Mr(s)?s:s[0]}function B(n){return 4==(4&n[2])}function Z(n){return 64==(64&n[2])}function K(n,i){return null==i?null:n[i]}function ge(n){n[18]=0}function Ae(n,i){n[5]+=i;let s=n,u=n[3];for(;null!==u&&(1===i&&1===s[5]||-1===i&&0===s[5]);)u[5]+=i,s=u,u=u[3]}const Ie={lFrame:Al(null),bindingsEnabled:!0};function Cr(){return Ie.bindingsEnabled}function it(){return Ie.lFrame.lView}function ti(){return Ie.lFrame.tView}function Tl(n){return Ie.lFrame.contextLView=n,n[8]}function no(n){return Ie.lFrame.contextLView=null,n}function Yi(){let n=pc();for(;null!==n&&64===n.type;)n=n.parent;return n}function pc(){return Ie.lFrame.currentTNode}function ja(){const n=Ie.lFrame,i=n.currentTNode;return n.isParent?i:i.parent}function jo(n,i){const s=Ie.lFrame;s.currentTNode=n,s.isParent=i}function zr(){return Ie.lFrame.isParent}function $o(){Ie.lFrame.isParent=!1}function Pi(){const n=Ie.lFrame;let i=n.bindingRootIndex;return-1===i&&(i=n.bindingRootIndex=n.tView.bindingStartIndex),i}function gt(){return Ie.lFrame.bindingIndex++}function Ki(n){const i=Ie.lFrame,s=i.bindingIndex;return i.bindingIndex=i.bindingIndex+n,s}function Qu(n){Ie.lFrame.inI18n=n}function qd(n,i){const s=Ie.lFrame;s.bindingIndex=s.bindingRootIndex=n,As(i)}function As(n){Ie.lFrame.currentDirectiveIndex=n}function ae(){return Ie.lFrame.currentQueryIndex}function gc(n){Ie.lFrame.currentQueryIndex=n}function mc(n){const i=n[1];return 2===i.type?i.declTNode:1===i.type?n[6]:null}function Xo(n,i,s){if(s&on.SkipSelf){let h=i,_=n;for(;!(h=h.parent,null!==h||s&on.Host||(h=mc(_),null===h||(_=_[15],10&h.type))););if(null===h)return!1;i=h,n=_}const u=Ie.lFrame=_c();return u.currentTNode=i,u.lView=n,!0}function ba(n){const i=_c(),s=n[1];Ie.lFrame=i,i.currentTNode=s.firstChild,i.lView=n,i.tView=s,i.contextLView=n,i.bindingIndex=s.bindingStartIndex,i.inI18n=!1}function _c(){const n=Ie.lFrame,i=null===n?null:n.child;return null===i?Al(n):i}function Al(n){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=i),i}function Ni(){const n=Ie.lFrame;return Ie.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const jc=Ni;function vc(){const n=Ni();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function vi(){return Ie.lFrame.selectedIndex}function ts(n){Ie.lFrame.selectedIndex=n}function Li(){const n=Ie.lFrame;return Ju(n.tView,n.selectedIndex)}function yc(n,i){for(let s=i.directiveStart,u=i.directiveEnd;s<u;s++){const _=n.data[s].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:A,ngAfterViewInit:O,ngAfterViewChecked:H,ngOnDestroy:Y}=_;w&&(n.contentHooks||(n.contentHooks=[])).push(-s,w),A&&((n.contentHooks||(n.contentHooks=[])).push(s,A),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,A)),O&&(n.viewHooks||(n.viewHooks=[])).push(-s,O),H&&((n.viewHooks||(n.viewHooks=[])).push(s,H),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,H)),null!=Y&&(n.destroyHooks||(n.destroyHooks=[])).push(s,Y)}}function Xd(n,i,s){Pp(n,i,3,s)}function Za(n,i,s,u){(3&n[2])===s&&Pp(n,i,s,u)}function af(n,i){let s=n[2];(3&s)===i&&(s&=2047,s+=1,n[2]=s)}function Pp(n,i,s,u){const _=u??-1,w=i.length-1;let A=0;for(let O=void 0!==u?65535&n[18]:0;O<w;O++)if("number"==typeof i[O+1]){if(A=i[O],null!=u&&A>=u)break}else i[O]<0&&(n[18]+=65536),(A<_||-1==_)&&(Nl(n,s,i,O),n[18]=(4294901760&n[18])+O+2),O++}function Nl(n,i,s,u){const h=s[u]<0,_=s[u+1],A=n[h?-s[u]:s[u]];if(h){if(n[2]>>11<n[18]>>16&&(3&n[2])===i){n[2]+=2048;try{_.call(A)}finally{}}}else try{_.call(A)}finally{}}class io{constructor(i,s,u){this.factory=i,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=u}}function Ma(n,i,s){let u=0;for(;u<s.length;){const h=s[u];if("number"==typeof h){if(0!==h)break;u++;const _=s[u++],w=s[u++],A=s[u++];n.setAttribute(i,w,A,_)}else{const _=h,w=s[++u];Jo(_)?n.setProperty(i,_,w):n.setAttribute(i,_,w),u++}}return u}function xc(n){return 3===n||4===n||6===n}function Jo(n){return 64===n.charCodeAt(0)}function wc(n,i){if(null!==i&&0!==i.length)if(null===n||0===n.length)n=i.slice();else{let s=-1;for(let u=0;u<i.length;u++){const h=i[u];"number"==typeof h?s=h:0===s||td(n,s,h,null,-1===s||2===s?i[++u]:null)}}return n}function td(n,i,s,u,h){let _=0,w=n.length;if(-1===i)w=-1;else for(;_<n.length;){const A=n[_++];if("number"==typeof A){if(A===i){w=-1;break}if(A>i){w=_-1;break}}}for(;_<n.length;){const A=n[_];if("number"==typeof A)break;if(A===s){if(null===u)return void(null!==h&&(n[_+1]=h));if(u===n[_+1])return void(n[_+2]=h)}_++,null!==u&&_++,null!==h&&_++}-1!==w&&(n.splice(w,0,i),_=w+1),n.splice(_++,0,s),null!==u&&n.splice(_++,0,u),null!==h&&n.splice(_++,0,h)}function Rl(n){return-1!==n}function _s(n){return 32767&n}function vs(n,i){let s=function Ko(n){return n>>16}(n),u=i;for(;s>0;)u=u[15],s--;return u}let ys=!0;function Ca(n){const i=ys;return ys=n,i}let Sr=0;const Is={};function so(n,i){const s=Ja(n,i);if(-1!==s)return s;const u=i[1];u.firstCreatePass&&(n.injectorIndex=i.length,Rs(u.data,n),Rs(i,null),Rs(u.blueprint,null));const h=ir(n,i),_=n.injectorIndex;if(Rl(h)){const w=_s(h),A=vs(h,i),O=A[1].data;for(let H=0;H<8;H++)i[_+H]=A[w+H]|O[w+H]}return i[_+8]=h,_}function Rs(n,i){n.push(0,0,0,0,0,0,0,0,i)}function Ja(n,i){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===i[n.injectorIndex+8]?-1:n.injectorIndex}function ir(n,i){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,u=null,h=i;for(;null!==h;){if(u=rd(h),null===u)return-1;if(s++,h=h[15],-1!==u.injectorIndex)return u.injectorIndex|s<<16}return-1}function Os(n,i,s){!function ni(n,i,s){let u;"string"==typeof s?u=s.charCodeAt(0)||0:s.hasOwnProperty(Zr)&&(u=s[Zr]),null==u&&(u=s[Zr]=Sr++);const h=255&u;i.data[n+(h>>5)]|=1<<h}(n,i,s)}function is(n,i,s){if(s&on.Optional)return n;bt()}function Dc(n,i,s,u){if(s&on.Optional&&void 0===u&&(u=null),0==(s&(on.Self|on.Host))){const h=n[9],_=Ur(void 0);try{return h?h.get(i,u,s&on.Optional):Eo(i,u,s&on.Optional)}finally{Ur(_)}}return is(u,0,s)}function Qo(n,i,s,u=on.Default,h){if(null!==n){if(1024&i[2]){const w=function Ll(n,i,s,u,h){let _=n,w=i;for(;null!==_&&null!==w&&1024&w[2]&&!(256&w[2]);){const A=Zd(_,w,s,u|on.Self,Is);if(A!==Is)return A;let O=_.parent;if(!O){const H=w[21];if(H){const Y=H.get(s,Is,u);if(Y!==Is)return Y}O=rd(w),w=w[15]}_=O}return h}(n,i,s,u,Is);if(w!==Is)return w}const _=Zd(n,i,s,u,Is);if(_!==Is)return _}return Dc(i,s,u,h)}function Zd(n,i,s,u,h){const _=function lr(n){if("string"==typeof n)return n.charCodeAt(0)||0;const i=n.hasOwnProperty(Zr)?n[Zr]:void 0;return"number"==typeof i?i>=0?255&i:Mc:i}(s);if("function"==typeof _){if(!Xo(i,n,u))return u&on.Host?is(h,0,u):Dc(i,s,u,h);try{const w=_(u);if(null!=w||u&on.Optional)return w;bt()}finally{jc()}}else if("number"==typeof _){let w=null,A=Ja(n,i),O=-1,H=u&on.Host?i[16][6]:null;for((-1===A||u&on.SkipSelf)&&(O=-1===A?ir(n,i):i[A+8],-1!==O&&Pl(u,!1)?(w=i[1],A=_s(O),i=vs(O,i)):A=-1);-1!==A;){const Y=i[1];if(Io(_,A,Y.data)){const ne=Ka(A,i,s,w,u,H);if(ne!==Is)return ne}O=i[A+8],-1!==O&&Pl(u,i[1].data[A+8]===H)&&Io(_,A,i)?(w=Y,A=_s(O),i=vs(O,i)):A=-1}}return h}function Ka(n,i,s,u,h,_){const w=i[1],A=w.data[n+8],Y=Yc(A,w,s,null==u?ga(A)&&ys:u!=w&&0!=(3&A.type),h&on.Host&&_===A);return null!==Y?Qa(i,w,Y,A):Is}function Yc(n,i,s,u,h){const _=n.providerIndexes,w=i.data,A=1048575&_,O=n.directiveStart,Y=_>>20,me=h?A+Y:n.directiveEnd;for(let Me=u?A:A+Y;Me<me;Me++){const ot=w[Me];if(Me<O&&s===ot||Me>=O&&ot.type===s)return Me}if(h){const Me=w[O];if(Me&&qs(Me)&&Me.type===s)return O}return null}function Qa(n,i,s,u){let h=n[s];const _=i.data;if(function bc(n){return n instanceof io}(h)){const w=h;w.resolving&&function sn(n,i){const s=i?`. Dependency path: ${i.join(" > ")} > ${n}`:"";throw new ke(-200,`Circular dependency in DI detected for ${n}${s}`)}(function Dt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():lt(n)}(_[s]));const A=Ca(w.canSeeViewProviders);w.resolving=!0;const O=w.injectImpl?Ur(w.injectImpl):null;Xo(n,u,on.Default);try{h=n[s]=w.factory(void 0,_,n,u),i.firstCreatePass&&s>=u.directiveStart&&function Xa(n,i,s){const{ngOnChanges:u,ngOnInit:h,ngDoCheck:_}=i.type.prototype;if(u){const w=ya(i);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,w),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,w)}h&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,h),_&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,_),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,_))}(s,_[s],i)}finally{null!==O&&Ur(O),Ca(A),w.resolving=!1,jc()}}return h}function Io(n,i,s){return!!(s[i+(n>>5)]&1<<n)}function Pl(n,i){return!(n&on.Self||n&on.Host&&i)}class Ci{constructor(i,s){this._tNode=i,this._lView=s}get(i,s,u){return Qo(this._tNode,this._lView,i,u,s)}}function Mc(){return new Ci(Yi(),it())}function id(n){return xr(()=>{const i=n.prototype.constructor,s=i[ii]||qc(i),u=Object.prototype;let h=Object.getPrototypeOf(n.prototype).constructor;for(;h&&h!==u;){const _=h[ii]||qc(h);if(_&&_!==s)return _;h=Object.getPrototypeOf(h)}return _=>new _})}function qc(n){return Gt(n)?()=>{const i=qc(Ue(n));return i&&i()}:Es(n)}function rd(n){const i=n[1],s=i.type;return 2===s?i.declTNode:1===s?n[6]:null}function Jd(n){return function oo(n,i){if("class"===i)return n.classes;if("style"===i)return n.styles;const s=n.attrs;if(s){const u=s.length;let h=0;for(;h<u;){const _=s[h];if(xc(_))break;if(0===_)h+=2;else if("number"==typeof _)for(h++;h<u&&"string"==typeof s[h];)h++;else{if(_===i)return s[h+1];h+=2}}}return null}(Yi(),n)}const cr="__parameters__";function _r(n,i,s){return xr(()=>{const u=function Xc(n){return function(...s){if(n){const u=n(...s);for(const h in u)this[h]=u[h]}}}(i);function h(..._){if(this instanceof h)return u.apply(this,_),this;const w=new h(..._);return A.annotation=w,A;function A(O,H,Y){const ne=O.hasOwnProperty(cr)?O[cr]:Object.defineProperty(O,cr,{value:[]})[cr];for(;ne.length<=Y;)ne.push(null);return(ne[Y]=ne[Y]||[]).push(w),O}}return s&&(h.prototype=Object.create(s.prototype)),h.prototype.ngMetadataName=n,h.annotationCls=h,h})}class Ei{constructor(i,s){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=oe({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function pi(n,i){void 0===i&&(i=n);for(let s=0;s<n.length;s++){let u=n[s];Array.isArray(u)?(i===n&&(i=n.slice(0,s)),pi(u,i)):i!==n&&i.push(u)}return i}function Ps(n,i){n.forEach(s=>Array.isArray(s)?Ps(s,i):i(s))}function eh(n,i,s){i>=n.length?n.push(s):n.splice(i,0,s)}function C(n,i){return i>=n.length-1?n.pop():n.splice(i,1)[0]}function S(n,i){const s=[];for(let u=0;u<n;u++)s.push(i);return s}function Pe(n,i,s){let u=Pn(n,i);return u>=0?n[1|u]=s:(u=~u,function k(n,i,s,u){let h=n.length;if(h==i)n.push(s,u);else if(1===h)n.push(u,n[0]),n[0]=s;else{for(h--,n.push(n[h-1],n[h]);h>i;)n[h]=n[h-2],h--;n[i]=s,n[i+1]=u}}(n,u,i,s)),u}function ht(n,i){const s=Pn(n,i);if(s>=0)return n[1|s]}function Pn(n,i){return function Xn(n,i,s){let u=0,h=n.length>>s;for(;h!==u;){const _=u+(h-u>>1),w=n[_<<s];if(i===w)return _<<s;w>i?h=_:u=_+1}return~(h<<s)}(n,i,1)}const jr={},Xs="__NG_DI_FLAG__",$r="ngTempTokenPath",Bl=/\n/gm,Vl="__source";let Ul;function Tr(n){const i=Ul;return Ul=n,i}function sd(n,i=on.Default){if(void 0===Ul)throw new ke(-203,!1);return null===Ul?Eo(n,void 0,i):Ul.get(n,i&on.Optional?null:void 0,i)}function vr(n,i=on.Default){return(function So(){return Ui}()||sd)(Ue(n),i)}function Gl(n,i=on.Default){return"number"!=typeof i&&(i=0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)),vr(n,i)}function xs(n){const i=[];for(let s=0;s<n.length;s++){const u=Ue(n[s]);if(Array.isArray(u)){if(0===u.length)throw new ke(900,!1);let h,_=on.Default;for(let w=0;w<u.length;w++){const A=u[w],O=Lp(A);"number"==typeof O?-1===O?h=A.token:_|=O:h=A}i.push(vr(h,_))}else i.push(vr(u))}return i}function od(n,i){return n[Xs]=i,n.prototype[Xs]=i,n}function Lp(n){return n[Xs]}const co=od(_r("Optional"),8),Ar=od(_r("SkipSelf"),4);let df,su;function ud(n){df=n}function Ec(n){return function ff(){if(void 0===su&&(su=null,Lt.trustedTypes))try{su=Lt.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return su}()?.createHTML(n)||n}class oh{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Ro(n){return n instanceof oh?n.changingThisBreaksApplicationSecurity:n}class Hm{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const s=(new window.DOMParser).parseFromString(Ec(i),"text/html").body;return null===s?this.inertDocumentHelper.getInertBodyElement(i):(s.removeChild(s.firstChild),s)}catch{return null}}}class Gm{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const s=this.inertDocument.createElement("html");this.inertDocument.appendChild(s);const u=this.inertDocument.createElement("body");s.appendChild(u)}}getInertBodyElement(i){const s=this.inertDocument.createElement("template");if("content"in s)return s.innerHTML=Ec(i),s;const u=this.inertDocument.createElement("body");return u.innerHTML=Ec(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(i){const s=i.attributes;for(let h=s.length-1;0<h;h--){const w=s.item(h).name;("xmlns:ns1"===w||0===w.indexOf("ns1:"))&&i.removeAttribute(w)}let u=i.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const Wm=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,jm=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function ah(n){return(n=String(n)).match(Wm)||n.match(jm)?n:"unsafe:"+n}function Vp(n){return(n=String(n)).split(",").map(i=>ah(i.trim())).join(", ")}function sl(n){const i={};for(const s of n.split(","))i[s]=!0;return i}function lh(...n){const i={};for(const s of n)for(const u in s)s.hasOwnProperty(u)&&(i[u]=!0);return i}const vf=sl("area,br,col,hr,img,wbr"),yf=sl("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Up=sl("rp,rt"),xf=lh(vf,lh(yf,sl("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),lh(Up,sl("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),lh(Up,yf)),wf=sl("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Df=sl("srcset"),Mf=lh(wf,Df,sl("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),sl("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"));var Lr=(()=>((Lr=Lr||{})[Lr.NONE=0]="NONE",Lr[Lr.HTML=1]="HTML",Lr[Lr.STYLE=2]="STYLE",Lr[Lr.SCRIPT=3]="SCRIPT",Lr[Lr.URL=4]="URL",Lr[Lr.RESOURCE_URL=5]="RESOURCE_URL",Lr))();function Sf(n){const i=function fd(){const n=it();return n&&n[12]}();return i?i.sanitize(Lr.URL,n)||"":function hd(n,i){const s=function _f(n){return n instanceof oh&&n.getTypeName()||null}(n);if(null!=s&&s!==i){if("ResourceURL"===s&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===i}(n,"URL")?Ro(n):ah(lt(n))}const Ef=new Ei("ENVIRONMENT_INITIALIZER"),Gp=new Ei("INJECTOR",-1),s_=new Ei("INJECTOR_DEF_TYPES");class o_{get(i,s=jr){if(s===jr){const u=new Error(`NullInjectorError: No provider for ${Ve(i)}!`);throw u.name="NullInjectorError",u}return s}}function ev(...n){return{\u0275providers:a_(0,n)}}function a_(n,...i){const s=[],u=new Set;let h;return Ps(i,_=>{const w=_;Tf(w,s,[],u)&&(h||(h=[]),h.push(w))}),void 0!==h&&l_(h,s),s}function l_(n,i){for(let s=0;s<n.length;s++){const{providers:h}=n[s];Ps(h,_=>{i.push(_)})}}function Tf(n,i,s,u){if(!(n=Ue(n)))return!1;let h=null,_=ci(n);const w=!_&&mi(n);if(_||w){if(w&&!w.standalone)return!1;h=n}else{const O=n.ngModule;if(_=ci(O),!_)return!1;h=O}const A=u.has(h);if(w){if(A)return!1;if(u.add(h),w.dependencies){const O="function"==typeof w.dependencies?w.dependencies():w.dependencies;for(const H of O)Tf(H,i,s,u)}}else{if(!_)return!1;{if(null!=_.imports&&!A){let H;u.add(h);try{Ps(_.imports,Y=>{Tf(Y,i,s,u)&&(H||(H=[]),H.push(Y))})}finally{}void 0!==H&&l_(H,i)}if(!A){const H=Es(h)||(()=>new h);i.push({provide:h,useFactory:H,deps:Bn},{provide:s_,useValue:h,multi:!0},{provide:Ef,useValue:()=>vr(h),multi:!0})}const O=_.providers;null==O||A||Ps(O,Y=>{i.push(Y)})}}return h!==n&&void 0!==n.providers}const c_=Te({provide:String,useValue:Te});function zp(n){return null!==n&&"object"==typeof n&&c_ in n}function au(n){return"function"==typeof n}const Af=new Ei("Set Injector scope."),uh={},iv={};let Wp;function Nf(){return void 0===Wp&&(Wp=new o_),Wp}class lu{}class jp extends lu{constructor(i,s,u,h){super(),this.parent=s,this.source=u,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,$p(i,w=>this.processProvider(w)),this.records.set(Gp,pd(void 0,this)),h.has("environment")&&this.records.set(lu,pd(void 0,this));const _=this.records.get(Af);null!=_&&"string"==typeof _.value&&this.scopes.add(_.value),this.injectorDefTypes=new Set(this.get(s_.multi,Bn,on.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();for(const i of this._onDestroyHooks)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(i){this._onDestroyHooks.push(i)}runInContext(i){this.assertNotDestroyed();const s=Tr(this),u=Ur(void 0);try{return i()}finally{Tr(s),Ur(u)}}get(i,s=jr,u=on.Default){this.assertNotDestroyed();const h=Tr(this),_=Ur(void 0);try{if(!(u&on.SkipSelf)){let A=this.records.get(i);if(void 0===A){const O=function yy(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ei}(i)&&Ot(i);A=O&&this.injectableDefInScope(O)?pd(If(i),uh):null,this.records.set(i,A)}if(null!=A)return this.hydrate(i,A)}return(u&on.Self?Nf():this.parent).get(i,s=u&on.Optional&&s===jr?null:s)}catch(w){if("NullInjectorError"===w.name){if((w[$r]=w[$r]||[]).unshift(Ve(i)),h)throw w;return function Nm(n,i,s,u){const h=n[$r];throw i[Vl]&&h.unshift(i[Vl]),n.message=function Im(n,i,s,u=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let h=Ve(i);if(Array.isArray(i))h=i.map(Ve).join(" -> ");else if("object"==typeof i){let _=[];for(let w in i)if(i.hasOwnProperty(w)){let A=i[w];_.push(w+":"+("string"==typeof A?JSON.stringify(A):Ve(A)))}h=`{${_.join(", ")}}`}return`${s}${u?"("+u+")":""}[${h}]: ${n.replace(Bl,"\n  ")}`}("\n"+n.message,h,s,u),n.ngTokenPath=h,n[$r]=null,n}(w,i,"R3InjectorError",this.source)}throw w}finally{Ur(_),Tr(h)}}resolveInjectorInitializers(){const i=Tr(this),s=Ur(void 0);try{const u=this.get(Ef.multi,Bn,on.Self);for(const h of u)h()}finally{Tr(i),Ur(s)}}toString(){const i=[],s=this.records;for(const u of s.keys())i.push(Ve(u));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ke(205,!1)}processProvider(i){let s=au(i=Ue(i))?i:Ue(i&&i.provide);const u=function sv(n){return zp(n)?pd(void 0,n.useValue):pd(h_(n),uh)}(i);if(au(i)||!0!==i.multi)this.records.get(s);else{let h=this.records.get(s);h||(h=pd(void 0,uh,!0),h.factory=()=>xs(h.multi),this.records.set(s,h)),s=i,h.multi.push(i)}this.records.set(s,u)}hydrate(i,s){return s.value===uh&&(s.value=iv,s.value=s.factory()),"object"==typeof s.value&&s.value&&function av(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(i){if(!i.providedIn)return!1;const s=Ue(i.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}}function If(n){const i=Ot(n),s=null!==i?i.factory:Es(n);if(null!==s)return s;if(n instanceof Ei)throw new ke(204,!1);if(n instanceof Function)return function rv(n){const i=n.length;if(i>0)throw S(i,"?"),new ke(204,!1);const s=function bi(n){const i=n&&(n[or]||n[$i]);if(i){const s=function Oi(n){if(n.hasOwnProperty("name"))return n.name;const i=(""+n).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),i}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new ke(204,!1)}function h_(n,i,s){let u;if(au(n)){const h=Ue(n);return Es(h)||If(h)}if(zp(n))u=()=>Ue(n.useValue);else if(function d_(n){return!(!n||!n.useFactory)}(n))u=()=>n.useFactory(...xs(n.deps||[]));else if(function u_(n){return!(!n||!n.useExisting)}(n))u=()=>vr(Ue(n.useExisting));else{const h=Ue(n&&(n.useClass||n.provide));if(!function ov(n){return!!n.deps}(n))return Es(h)||If(h);u=()=>new h(...xs(n.deps))}return u}function pd(n,i,s=!1){return{factory:n,value:i,multi:s?[]:void 0}}function lv(n){return!!n.\u0275providers}function $p(n,i){for(const s of n)Array.isArray(s)?$p(s,i):lv(s)?$p(s.\u0275providers,i):i(s)}class f_{}class dv{resolveComponentFactory(i){throw function uv(n){const i=Error(`No component factory found for ${Ve(n)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=n,i}(i)}}let dh=(()=>{class n{}return n.NULL=new dv,n})();function hv(){return gd(Yi(),it())}function gd(n,i){return new hh(Ts(n,i))}let hh=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=hv,n})();function fv(n){return n instanceof hh?n.nativeElement:n}class g_{}let pv=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function gv(){const n=it(),s=ms(Yi().index,n);return(Mr(s)?s:n)[11]}(),n})(),mv=(()=>{class n{}return n.\u0275prov=oe({token:n,providedIn:"root",factory:()=>null}),n})();class m_{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const _v=new m_("14.1.3"),Yp={};function Pf(n){return n.ngOriginalError}class Aa{constructor(){this._console=console}handleError(i){const s=this._findOriginalError(i);this._console.error("ERROR",i),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(i){let s=i&&Pf(i);for(;s&&Pf(s);)s=Pf(s);return s||null}}const Kp=/^>|^->|<!--|-->|--!>|<!-$/g,x_=/(<|>)/;const fh=new Map;let Lf=0;function tg(n){return fh.get(n)||null}class C_{constructor(i,s,u){this.lViewId=i,this.nodeIndex=s,this.native=u}get lView(){return tg(this.lViewId)}}function Zs(n){let i=jl(n);if(i){if(Mr(i)){const s=i;let u,h,_;if(function S_(n){return n&&n.constructor&&n.constructor.\u0275cmp}(n)){if(u=function al(n,i){const s=n[1].components;if(s)for(let u=0;u<s.length;u++){const h=s[u];if(ms(h,n)[8]===i)return h}else if(ms(22,n)[8]===i)return 22;return-1}(s,n),-1==u)throw new Error("The provided component was not found in the application");h=n}else if(function ph(n){return n&&n.constructor&&n.constructor.\u0275dir}(n)){if(u=function Bf(n,i){let s=n[1].firstChild;for(;s;){const h=s.directiveEnd;for(let _=s.directiveStart;_<h;_++)if(n[_]===i)return s.index;s=gh(s)}return-1}(s,n),-1==u)throw new Error("The provided directive was not found in the application");_=function sg(n,i,s){const u=i[1].data[n];let h=u.directiveStart;return 0==h?Bn:(!s&&2&u.flags&&h++,i.slice(h,u.directiveEnd))}(u,s,!1)}else if(u=ta(s,n),-1==u)return null;const w=Ji(s[u]),A=jl(w),O=A&&!Array.isArray(A)?A:ng(s,u,w);if(h&&void 0===O.component&&(O.component=h,Js(O.component,O)),_&&void 0===O.directives){O.directives=_;for(let H=0;H<_.length;H++)Js(_[H],O)}Js(O.native,O),i=O}}else{const s=n;let u=s;for(;u=u.parentNode;){const h=jl(u);if(h){const _=Array.isArray(h)?h:h.lView;if(!_)return null;const w=ta(_,s);if(w>=0){const A=Ji(_[w]),O=ng(_,w,A);Js(A,O),i=O;break}}}}return i||null}function ng(n,i,s){return new C_(n[20],i,s)}const kf="__ngContext__";function Js(n,i){Mr(i)?(n[kf]=i[20],function eg(n){fh.set(n[20],n)}(i)):n[kf]=i}function jl(n){const i=n[kf];return"number"==typeof i?tg(i):i||null}function rg(n){const i=jl(n);return i?Mr(i)?i:i.lView:null}function ta(n,i){const s=n[1];for(let u=22;u<s.bindingStartIndex;u++)if(Ji(n[u])===i)return u;return-1}function gh(n){if(n.child)return n.child;if(n.next)return n.next;for(;n.parent&&!n.parent.next;)n=n.parent;return n.parent&&n.parent.next}const og=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(Lt))();function Na(n){return n instanceof Function?n():n}var ia=(()=>((ia=ia||{})[ia.Important=1]="Important",ia[ia.DashCase=2]="DashCase",ia))();let uu;function Vf(n,i){return uu(n,i)}function du(n){const i=n[3];return mr(i)?i[3]:i}function vh(n){return R_(n[13])}function yh(n){return R_(n[4])}function R_(n){for(;null!==n&&!mr(n);)n=n[4];return n}function vd(n,i,s,u,h){if(null!=u){let _,w=!1;mr(u)?_=u:Mr(u)&&(w=!0,u=u[0]);const A=Ji(u);0===n&&null!==s?null==h?ra(i,s,A):$l(i,s,A,h||null,!0):1===n&&null!==s?$l(i,s,A,h||null,!0):2===n?z_(i,A,w):3===n&&i.destroyNode(A),null!=_&&function Mv(n,i,s,u,h){const _=s[7];_!==Ji(s)&&vd(i,n,u,_,h);for(let A=10;A<s.length;A++){const O=s[A];Yl(O[1],O,n,i,u,_)}}(i,n,_,s,h)}}function ug(n,i){return n.createText(i)}function P_(n,i,s){n.setValue(i,s)}function dg(n,i){return n.createComment(function Wl(n){return n.replace(Kp,i=>i.replace(x_,"\u200b$1\u200b"))}(i))}function Ia(n,i,s){return n.createElement(i,s)}function fg(n,i){const s=n[9],u=s.indexOf(i),h=i[3];512&i[2]&&(i[2]&=-513,Ae(h,-1)),s.splice(u,1)}function xh(n,i){if(n.length<=10)return;const s=10+i,u=n[s];if(u){const h=u[17];null!==h&&h!==n&&fg(h,u),i>0&&(n[s-1][4]=u[4]);const _=C(n,10+i);!function hg(n,i){Yl(n,i,i[11],2,null,null),i[0]=null,i[6]=null}(u[1],u);const w=_[19];null!==w&&w.detachView(_[1]),u[3]=null,u[4]=null,u[2]&=-65}return u}function pg(n,i){if(!(128&i[2])){const s=i[11];s.destroyNode&&Yl(n,i,s,3,null,null),function L_(n){let i=n[13];if(!i)return cl(n[1],n);for(;i;){let s=null;if(Mr(i))s=i[13];else{const u=i[10];u&&(s=u)}if(!s){for(;i&&!i[4]&&i!==n;)Mr(i)&&cl(i[1],i),i=i[3];null===i&&(i=n),Mr(i)&&cl(i[1],i),s=i&&i[4]}i=s}}(i)}}function cl(n,i){if(!(128&i[2])){i[2]&=-65,i[2]|=128,function gg(n,i){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let u=0;u<s.length;u+=2){const h=i[s[u]];if(!(h instanceof io)){const _=s[u+1];if(Array.isArray(_))for(let w=0;w<_.length;w+=2){const A=h[_[w]],O=_[w+1];try{O.call(A)}finally{}}else try{_.call(h)}finally{}}}}(n,i),function xv(n,i){const s=n.cleanup,u=i[7];let h=-1;if(null!==s)for(let _=0;_<s.length-1;_+=2)if("string"==typeof s[_]){const w=s[_+1],A="function"==typeof w?w(i):Ji(i[w]),O=u[h=s[_+2]],H=s[_+3];"boolean"==typeof H?A.removeEventListener(s[_],O,H):H>=0?u[h=H]():u[h=-H].unsubscribe(),_+=2}else{const w=u[h=s[_+1]];s[_].call(w)}if(null!==u){for(let _=h+1;_<u.length;_++)(0,u[_])();i[7]=null}}(n,i),1===i[1].type&&i[11].destroy();const s=i[17];if(null!==s&&mr(i[3])){s!==i[3]&&fg(s,i);const u=i[19];null!==u&&u.detachView(n)}!function Ff(n){fh.delete(n[20])}(i)}}function B_(n,i,s){return V_(n,i.parent,s)}function V_(n,i,s){let u=i;for(;null!==u&&40&u.type;)u=(i=u).parent;if(null===u)return s[0];if(2&u.flags){const h=n.data[u.directiveStart].encapsulation;if(h===Qt.None||h===Qt.Emulated)return null}return Ts(u,s)}function $l(n,i,s,u,h){n.insertBefore(i,s,u,h)}function ra(n,i,s){n.appendChild(i,s)}function U_(n,i,s,u,h){null!==u?$l(n,i,s,u,h):ra(n,i,s)}function wh(n,i){return n.parentNode(i)}function Dh(n,i,s){return H_(n,i,s)}function _g(n,i,s){return 40&n.type?Ts(n,s):null}let vg,H_=_g;function G_(n,i){H_=n,vg=i}function Mh(n,i,s,u){const h=B_(n,u,i),_=i[11],A=Dh(u.parent||i[6],u,i);if(null!=h)if(Array.isArray(s))for(let O=0;O<s.length;O++)U_(_,h,s[O],A,!1);else U_(_,h,s,A,!1);void 0!==vg&&vg(_,u,i,s,h)}function Ch(n,i){if(null!==i){const s=i.type;if(3&s)return Ts(i,n);if(4&s)return bg(-1,n[i.index]);if(8&s){const u=i.child;if(null!==u)return Ch(n,u);{const h=n[i.index];return mr(h)?bg(-1,h):Ji(h)}}if(32&s)return Vf(i,n)()||Ji(n[i.index]);{const u=yg(n,i);return null!==u?Array.isArray(u)?u[0]:Ch(du(n[16]),u):Ch(n,i.next)}}return null}function yg(n,i){return null!==i?n[16][6].projection[i.projection]:null}function bg(n,i){const s=10+n+1;if(s<i.length){const u=i[s],h=u[1].firstChild;if(null!==h)return Ch(u,h)}return i[7]}function z_(n,i,s){const u=wh(n,i);u&&function wv(n,i,s,u){n.removeChild(i,s,u)}(n,u,i,s)}function xg(n,i,s,u,h,_,w){for(;null!=s;){const A=u[s.index],O=s.type;if(w&&0===i&&(A&&Js(Ji(A),u),s.flags|=4),64!=(64&s.flags))if(8&O)xg(n,i,s.child,u,h,_,!1),vd(i,n,h,A,_);else if(32&O){const H=Vf(s,u);let Y;for(;Y=H();)vd(i,n,h,Y,_);vd(i,n,h,A,_)}else 16&O?Dg(n,i,u,s,h,_):vd(i,n,h,A,_);s=w?s.projectionNext:s.next}}function Yl(n,i,s,u,h,_){xg(s,u,n.firstChild,i,h,_,!1)}function Dg(n,i,s,u,h,_){const w=s[16],O=w[6].projection[u.projection];if(Array.isArray(O))for(let H=0;H<O.length;H++)vd(i,n,h,O[H],_);else xg(n,i,O,w[3],h,_,!0)}function W_(n,i,s){n.setAttribute(i,"style",s)}function Mg(n,i,s){""===s?n.removeAttribute(i,"class"):n.setAttribute(i,"class",s)}function Cg(n,i,s){let u=n.length;for(;;){const h=n.indexOf(i,s);if(-1===h)return h;if(0===h||n.charCodeAt(h-1)<=32){const _=i.length;if(h+_===u||n.charCodeAt(h+_)<=32)return h}s=h+1}}const Sg="ng-template";function j_(n,i,s){let u=0;for(;u<n.length;){let h=n[u++];if(s&&"class"===h){if(h=n[u],-1!==Cg(h.toLowerCase(),i,0))return!0}else if(1===h){for(;u<n.length&&"string"==typeof(h=n[u++]);)if(h.toLowerCase()===i)return!0;return!1}}return!1}function $_(n){return 4===n.type&&n.value!==Sg}function Cv(n,i,s){return i===(4!==n.type||s?n.value:Sg)}function Sv(n,i,s){let u=4;const h=n.attrs||[],_=function Av(n){for(let i=0;i<n.length;i++)if(xc(n[i]))return i;return n.length}(h);let w=!1;for(let A=0;A<i.length;A++){const O=i[A];if("number"!=typeof O){if(!w)if(4&u){if(u=2|1&u,""!==O&&!Cv(n,O,s)||""===O&&1===i.length){if(ki(u))return!1;w=!0}}else{const H=8&u?O:i[++A];if(8&u&&null!==n.attrs){if(!j_(n.attrs,H,s)){if(ki(u))return!1;w=!0}continue}const ne=Ev(8&u?"class":O,h,$_(n),s);if(-1===ne){if(ki(u))return!1;w=!0;continue}if(""!==H){let me;me=ne>_?"":h[ne+1].toLowerCase();const Me=8&u?me:null;if(Me&&-1!==Cg(Me,H,0)||2&u&&H!==me){if(ki(u))return!1;w=!0}}}}else{if(!w&&!ki(u)&&!ki(O))return!1;if(w&&ki(O))continue;w=!1,u=O|1&u}}return ki(u)||w}function ki(n){return 0==(1&n)}function Ev(n,i,s,u){if(null===i)return-1;let h=0;if(u||!s){let _=!1;for(;h<i.length;){const w=i[h];if(w===n)return h;if(3===w||6===w)_=!0;else{if(1===w||2===w){let A=i[++h];for(;"string"==typeof A;)A=i[++h];continue}if(4===w)break;if(0===w){h+=4;continue}}h+=_?1:2}return-1}return function Sh(n,i){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const u=n[s];if("number"==typeof u)return-1;if(u===i)return s;s++}return-1}(i,n)}function Y_(n,i,s=!1){for(let u=0;u<i.length;u++)if(Sv(n,i[u],s))return!0;return!1}function Eg(n,i){e:for(let s=0;s<i.length;s++){const u=i[s];if(n.length===u.length){for(let h=0;h<n.length;h++)if(n[h]!==u[h])continue e;return!0}}return!1}function Tg(n,i){return n?":not("+i.trim()+")":i}function Ag(n){let i=n[0],s=1,u=2,h="",_=!1;for(;s<n.length;){let w=n[s];if("string"==typeof w)if(2&u){const A=n[++s];h+="["+w+(A.length>0?'="'+A+'"':"")+"]"}else 8&u?h+="."+w:4&u&&(h+=" "+w);else""!==h&&!ki(w)&&(i+=Tg(_,h),h=""),u=w,_=_||!ki(u);s++}return""!==h&&(i+=Tg(_,h)),i}const Kn={};function Rg(n){Og(ti(),it(),vi()+n,!1)}function Og(n,i,s,u){if(!u)if(3==(3&i[2])){const _=n.preOrderCheckHooks;null!==_&&Xd(i,_,s)}else{const _=n.preOrderHooks;null!==_&&Za(i,_,0,s)}ts(s)}function zf(n,i=null,s=null,u){const h=Bg(n,i,s,u);return h.resolveInjectorInitializers(),h}function Bg(n,i=null,s=null,u,h=new Set){const _=[s||Bn,ev(n)];return u=u||("object"==typeof n?void 0:Ve(n)),new jp(_,i||Nf(),u||null,h)}let hu=(()=>{class n{static create(s,u){if(Array.isArray(s))return zf({name:""},u,s,"");{const h=s.name??"";return zf({name:h},s.parent,s.providers,h)}}}return n.THROW_IF_NOT_FOUND=jr,n.NULL=new o_,n.\u0275prov=oe({token:n,providedIn:"any",factory:()=>vr(Gp)}),n.__NG_ELEMENT_ID__=-1,n})();function Ac(n,i=on.Default){const s=it();return null===s?vr(n,i):Qo(Yi(),s,Ue(n),i)}function Nc(){throw new Error("invalid")}function Cd(n,i){return n<<17|i<<2}function wo(n){return n>>17&32767}function Ic(n){return 2|n}function Ra(n){return(131068&n)>>2}function Nh(n,i){return-131069&n|i<<2}function Ih(n){return 1|n}function Kg(n,i){const s=n.contentQueries;if(null!==s)for(let u=0;u<s.length;u+=2){const h=s[u],_=s[u+1];if(-1!==_){const w=n.data[_];gc(h),w.contentQueries(2,i[_],_)}}}function ul(n,i,s,u,h,_,w,A,O,H,Y){const ne=i.blueprint.slice();return ne[0]=h,ne[2]=76|u,(null!==Y||n&&1024&n[2])&&(ne[2]|=1024),ge(ne),ne[3]=ne[15]=n,ne[8]=s,ne[10]=w||n&&n[10],ne[11]=A||n&&n[11],ne[12]=O||n&&n[12]||null,ne[9]=H||n&&n[9]||null,ne[6]=_,ne[20]=function yv(){return Lf++}(),ne[21]=Y,ne[16]=2==i.type?n[16]:ne,ne}function yu(n,i,s,u,h){let _=n.data[i];if(null===_)_=Bh(n,i,s,u,h),function Ku(){return Ie.lFrame.inI18n}()&&(_.flags|=64);else if(64&_.type){_.type=s,_.value=u,_.attrs=h;const w=ja();_.injectorIndex=null===w?-1:w.injectorIndex}return jo(_,!0),_}function Bh(n,i,s,u,h){const _=pc(),w=zr(),O=n.data[i]=function Gh(n,i,s,u,h,_){return{type:s,index:u,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?_:_&&_.parent,s,i,u,h);return null===n.firstChild&&(n.firstChild=O),null!==_&&(w?null==_.child&&null!==O.parent&&(_.child=O):null===_.next&&(_.next=O)),O}function Zl(n,i,s,u){if(0===s)return-1;const h=i.length;for(let _=0;_<s;_++)i.push(u),n.blueprint.push(u),n.data.push(null);return h}function bu(n,i,s){ba(i);try{const u=n.viewQuery;null!==u&&$h(1,u,s);const h=n.template;null!==h&&tm(n,i,h,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Kg(n,i),n.staticViewQueries&&$h(2,n.viewQuery,s);const _=n.components;null!==_&&function c0(n,i){for(let s=0;s<i.length;s++)sp(n,i[s])}(i,_)}catch(u){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),u}finally{i[2]&=-5,vc()}}function Pa(n,i,s,u){const h=i[2];if(128!=(128&h)){ba(i);try{ge(i),function Op(n){return Ie.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&tm(n,i,s,2,u);const w=3==(3&h);if(w){const H=n.preOrderCheckHooks;null!==H&&Xd(i,H,null)}else{const H=n.preOrderHooks;null!==H&&Za(i,H,0,null),af(i,0)}if(function Id(n){for(let i=vh(n);null!==i;i=yh(i)){if(!i[2])continue;const s=i[9];for(let u=0;u<s.length;u++){const h=s[u],_=h[3];0==(512&h[2])&&Ae(_,1),h[2]|=512}}}(i),function p0(n){for(let i=vh(n);null!==i;i=yh(i))for(let s=10;s<i.length;s++){const u=i[s],h=u[1];Z(u)&&Pa(h,u,h.template,u[8])}}(i),null!==n.contentQueries&&Kg(n,i),w){const H=n.contentCheckHooks;null!==H&&Xd(i,H)}else{const H=n.contentHooks;null!==H&&Za(i,H,1),af(i,1)}!function Jg(n,i){const s=n.hostBindingOpCodes;if(null!==s)try{for(let u=0;u<s.length;u++){const h=s[u];if(h<0)ts(~h);else{const _=h,w=s[++u],A=s[++u];qd(w,_),A(2,i[_])}}}finally{ts(-1)}}(n,i);const A=n.components;null!==A&&function Qg(n,i){for(let s=0;s<i.length;s++)Gv(n,i[s])}(i,A);const O=n.viewQuery;if(null!==O&&$h(2,O,u),w){const H=n.viewCheckHooks;null!==H&&Xd(i,H)}else{const H=n.viewHooks;null!==H&&Za(i,H,2),af(i,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),i[2]&=-41,512&i[2]&&(i[2]&=-513,Ae(i[3],-1))}finally{vc()}}}function em(n,i,s,u){const h=i[10],w=B(i);try{!w&&h.begin&&h.begin(),w&&bu(n,i,u),Pa(n,i,s,u)}finally{!w&&h.end&&h.end()}}function tm(n,i,s,u,h){const _=vi(),w=2&u;try{ts(-1),w&&i.length>22&&Og(n,i,22,!1),s(u,h)}finally{ts(_)}}function nm(n,i,s){!Cr()||(function kv(n,i,s,u){const h=s.directiveStart,_=s.directiveEnd;n.firstCreatePass||so(s,i),Js(u,i);const w=s.initialInputs;for(let A=h;A<_;A++){const O=n.data[A],H=qs(O);H&&Vv(i,s,O);const Y=Qa(i,n,A,s);Js(Y,i),null!==w&&Uv(0,A-h,Y,O,0,w),H&&(ms(s.index,i)[8]=Y)}}(n,i,s,Ts(s,i)),128==(128&s.flags)&&function d0(n,i,s){const u=s.directiveStart,h=s.directiveEnd,_=s.index,w=function qo(){return Ie.lFrame.currentDirectiveIndex}();try{ts(_);for(let A=u;A<h;A++){const O=n.data[A],H=i[A];As(A),(null!==O.hostBindings||0!==O.hostVars||null!==O.hostAttrs)&&Pc(O,H)}}finally{ts(-1),As(w)}}(n,i,s))}function Qf(n,i,s=Ts){const u=i.localNames;if(null!==u){let h=i.index+1;for(let _=0;_<u.length;_+=2){const w=u[_+1],A=-1===w?s(i,n):n[w];n[h++]=A}}}function Vh(n){const i=n.tView;return null===i||i.incompleteFirstPass?n.tView=Uh(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):i}function Uh(n,i,s,u,h,_,w,A,O,H){const Y=22+u,ne=Y+h,me=function Hh(n,i){const s=[];for(let u=0;u<i;u++)s.push(u<n?null:Kn);return s}(Y,ne),Me="function"==typeof H?H():H;return me[1]={type:n,blueprint:me,template:s,queries:null,viewQuery:A,declTNode:i,data:me.slice().fill(null,Y),bindingStartIndex:Y,expandoStartIndex:ne,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:O,consts:Me,incompleteFirstPass:!1}}function wu(n,i,s,u){const h=Yh(i);null===s?h.push(u):(h.push(s),n.firstCreatePass&&lm(n).push(u,h.length-1))}function Ad(n,i,s){for(let u in n)if(n.hasOwnProperty(u)){const h=n[u];(s=null===s?{}:s).hasOwnProperty(u)?s[u].push(i,h):s[u]=[i,h]}return s}function Oc(n,i){const u=i.directiveEnd,h=n.data,_=i.attrs,w=[];let A=null,O=null;for(let H=i.directiveStart;H<u;H++){const Y=h[H],ne=Y.inputs,me=null===_||$_(i)?null:Hv(ne,_);w.push(me),A=Ad(ne,H,A),O=Ad(Y.outputs,H,O)}null!==A&&(A.hasOwnProperty("class")&&(i.flags|=16),A.hasOwnProperty("style")&&(i.flags|=32)),i.initialInputs=w,i.inputs=A,i.outputs=O}function ls(n,i,s,u,h,_,w,A){const O=Ts(i,s);let Y,H=i.inputs;!A&&null!=H&&(Y=H[u])?(cm(n,s,Y,u,h),ga(i)&&Nd(s,i.index)):3&i.type&&(u=function im(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(u),h=null!=w?w(h,i.value||"",u):h,_.setProperty(O,u,h))}function Nd(n,i){const s=ms(i,n);16&s[2]||(s[2]|=32)}function Du(n,i,s,u){let h=!1;if(Cr()){const _=function Wh(n,i,s){const u=n.directiveRegistry;let h=null;if(u)for(let _=0;_<u.length;_++){const w=u[_];Y_(s,w.selectors,!1)&&(h||(h=[]),Os(so(s,i),n,w.type),qs(w)?(h0(n,s),h.unshift(w)):h.push(w))}return h}(n,i,s),w=null===u?null:{"":-1};if(null!==_){h=!0,f0(s,n.data.length,_.length);for(let Y=0;Y<_.length;Y++){const ne=_[Y];ne.providersResolver&&ne.providersResolver(ne)}let A=!1,O=!1,H=Zl(n,i,_.length,null);for(let Y=0;Y<_.length;Y++){const ne=_[Y];s.mergedAttrs=wc(s.mergedAttrs,ne.hostAttrs),ip(n,s,i,H,ne),Bv(H,ne,w),null!==ne.contentQueries&&(s.flags|=8),(null!==ne.hostBindings||null!==ne.hostAttrs||0!==ne.hostVars)&&(s.flags|=128);const me=ne.type.prototype;!A&&(me.ngOnChanges||me.ngOnInit||me.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),A=!0),!O&&(me.ngOnChanges||me.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),O=!0),H++}Oc(n,s)}w&&function rm(n,i,s){if(i){const u=n.localNames=[];for(let h=0;h<i.length;h+=2){const _=s[i[h+1]];if(null==_)throw new ke(-301,!1);u.push(i[h],_)}}}(s,u,w)}return s.mergedAttrs=wc(s.mergedAttrs,s.attrs),h}function np(n,i,s,u,h,_){const w=_.hostBindings;if(w){let A=n.hostBindingOpCodes;null===A&&(A=n.hostBindingOpCodes=[]);const O=~i.index;(function Mu(n){let i=n.length;for(;i>0;){const s=n[--i];if("number"==typeof s&&s<0)return s}return 0})(A)!=O&&A.push(O),A.push(u,h,w)}}function Pc(n,i){null!==n.hostBindings&&n.hostBindings(1,i)}function h0(n,i){i.flags|=2,(n.components||(n.components=[])).push(i.index)}function Bv(n,i,s){if(s){if(i.exportAs)for(let u=0;u<i.exportAs.length;u++)s[i.exportAs[u]]=n;qs(i)&&(s[""]=n)}}function f0(n,i,s){n.flags|=1,n.directiveStart=i,n.directiveEnd=i+s,n.providerIndexes=i}function ip(n,i,s,u,h){n.data[u]=h;const _=h.factory||(h.factory=Es(h.type)),w=new io(_,qs(h),Ac);n.blueprint[u]=w,s[u]=w,np(n,i,0,u,Zl(n,s,h.hostVars,Kn),h)}function Vv(n,i,s){const u=Ts(i,n),h=Vh(s),_=n[10],w=Jl(n,ul(n,h,null,s.onPush?32:16,u,i,_,_.createRenderer(u,s),null,null,null));n[i.index]=w}function jh(n,i,s,u,h,_,w){if(null==_)n.removeAttribute(i,h,s);else{const A=null==w?lt(_):w(_,u||"",h);n.setAttribute(i,h,A,s)}}function Uv(n,i,s,u,h,_){const w=_[i];if(null!==w){const A=u.setInput;for(let O=0;O<w.length;){const H=w[O++],Y=w[O++],ne=w[O++];null!==A?u.setInput(s,ne,H,Y):s[Y]=ne}}}function Hv(n,i){let s=null,u=0;for(;u<i.length;){const h=i[u];if(0!==h)if(5!==h){if("number"==typeof h)break;n.hasOwnProperty(h)&&(null===s&&(s=[]),s.push(h,n[h],i[u+1])),u+=2}else u+=2;else u+=4}return s}function rp(n,i,s,u){return new Array(n,!0,!1,i,null,0,u,s,null,null)}function Gv(n,i){const s=ms(i,n);if(Z(s)){const u=s[1];48&s[2]?Pa(u,s,u.template,s[8]):s[5]>0&&rr(s)}}function rr(n){for(let u=vh(n);null!==u;u=yh(u))for(let h=10;h<u.length;h++){const _=u[h];if(Z(_))if(512&_[2]){const w=_[1];Pa(w,_,w.template,_[8])}else _[5]>0&&rr(_)}const s=n[1].components;if(null!==s)for(let u=0;u<s.length;u++){const h=ms(s[u],n);Z(h)&&h[5]>0&&rr(h)}}function sp(n,i){const s=ms(i,n),u=s[1];(function g0(n,i){for(let s=i.length;s<n.blueprint.length;s++)i.push(n.blueprint[s])})(u,s),bu(u,s,s[8])}function Jl(n,i){return n[13]?n[14][4]=i:n[13]=i,n[14]=i,i}function Rd(n){for(;n;){n[2]|=32;const i=du(n);if(zu(n)&&!i)return n;n=i}return null}function om(n){!function Od(n){for(let i=0;i<n.components.length;i++){const s=n.components[i],u=rg(s);if(null!==u){const h=u[1];em(h,u,h.template,s)}}}(n[8])}function $h(n,i,s){gc(0),i(n,s)}const Kl=(()=>Promise.resolve(null))();function Yh(n){return n[7]||(n[7]=[])}function lm(n){return n.cleanup||(n.cleanup=[])}function m0(n,i){const s=n[9],u=s?s.get(Aa,null):null;u&&u.handleError(i)}function cm(n,i,s,u,h){for(let _=0;_<s.length;){const w=s[_++],A=s[_++],O=i[w],H=n.data[w];null!==H.setInput?H.setInput(O,h,u,A):O[A]=h}}function Cu(n,i,s){let u=s?n.styles:null,h=s?n.classes:null,_=0;if(null!==i)for(let w=0;w<i.length;w++){const A=i[w];"number"==typeof A?_=A:1==_?h=Qe(h,A):2==_&&(u=Qe(u,A+": "+i[++w]+";"))}s?n.styles=u:n.stylesWithoutHost=u,s?n.classes=h:n.classesWithoutHost=h}function Pd(n,i,s,u,h=!1){for(;null!==s;){const _=i[s.index];if(null!==_&&u.push(Ji(_)),mr(_))for(let A=10;A<_.length;A++){const O=_[A],H=O[1].firstChild;null!==H&&Pd(O[1],O,H,u)}const w=s.type;if(8&w)Pd(n,i,s.child,u);else if(32&w){const A=Vf(s,i);let O;for(;O=A();)u.push(O)}else if(16&w){const A=yg(i,s);if(Array.isArray(A))u.push(...A);else{const O=du(i[16]);Pd(O[1],O,A,u,!0)}}s=h?s.projectionNext:s.next}return u}class Su{constructor(i,s){this._lView=i,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,s=i[1];return Pd(s,i,s.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(mr(i)){const s=i[8],u=s?s.indexOf(this):-1;u>-1&&(xh(i,u),C(s,u))}this._attachedToViewContainer=!1}pg(this._lView[1],this._lView)}onDestroy(i){wu(this._lView[1],this._lView,null,i)}markForCheck(){Rd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function sm(n,i,s){const u=i[10];u.begin&&u.begin();try{Pa(n,i,n.template,s)}catch(h){throw m0(i,h),h}finally{u.end&&u.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ke(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function bh(n,i){Yl(n,i,i[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new ke(902,!1);this._appRef=i}}class Wv extends Su{constructor(i){super(i),this._view=i}detectChanges(){om(this._view)}checkNoChanges(){}get context(){return null}}class Lc extends dh{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const s=mi(i);return new Eu(s,this.ngModule)}}function lp(n){const i=[];for(let s in n)n.hasOwnProperty(s)&&i.push({propName:n[s],templateName:s});return i}class dm{constructor(i,s){this.injector=i,this.parentInjector=s}get(i,s,u){const h=this.injector.get(i,Yp,u);return h!==Yp||s===Yp?h:this.parentInjector.get(i,s,u)}}class Eu extends f_{constructor(i,s){super(),this.componentDef=i,this.ngModule=s,this.componentType=i.type,this.selector=function Ng(n){return n.map(Ag).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return lp(this.componentDef.inputs)}get outputs(){return lp(this.componentDef.outputs)}create(i,s,u,h){let _=(h=h||this.ngModule)instanceof lu?h:h?.injector;_&&null!==this.componentDef.getStandaloneInjector&&(_=this.componentDef.getStandaloneInjector(_)||_);const w=_?new dm(i,_):i,A=w.get(g_,null);if(null===A)throw new ke(407,!1);const O=w.get(mv,null),H=A.createRenderer(null,this.componentDef),Y=this.componentDef.selectors[0][0]||"div",ne=u?function Td(n,i,s){return n.selectRootElement(i,s===Qt.ShadowDom)}(H,u,this.componentDef.encapsulation):Ia(A.createRenderer(null,this.componentDef),Y,function um(n){const i=n.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(Y)),me=this.componentDef.onPush?288:272,Me=function cp(n,i){return{components:[],scheduler:n||og,clean:Kl,playerHandler:i||null,flags:0}}(),ot=Uh(0,null,null,1,0,null,null,null,null,null),Ct=ul(null,ot,Me,me,null,null,A,H,O,w,null);let Xt,dn;ba(Ct);try{const Yn=function hm(n,i,s,u,h,_){const w=s[1];s[22]=n;const O=yu(w,22,2,"#host",null),H=O.mergedAttrs=i.hostAttrs;null!==H&&(Cu(O,H,!0),null!==n&&(Ma(h,n,H),null!==O.classes&&Mg(h,n,O.classes),null!==O.styles&&W_(h,n,O.styles)));const Y=u.createRenderer(n,i),ne=ul(s,Vh(i),null,i.onPush?32:16,s[22],O,u,Y,_||null,null,null);return w.firstCreatePass&&(Os(so(O,s),w,i.type),h0(w,O),f0(O,s.length,1)),Jl(s,ne),s[22]=ne}(ne,this.componentDef,Ct,A,H);if(ne)if(u)Ma(H,ne,["ng-version",_v.full]);else{const{attrs:vt,classes:In}=function Ig(n){const i=[],s=[];let u=1,h=2;for(;u<n.length;){let _=n[u];if("string"==typeof _)2===h?""!==_&&i.push(_,n[++u]):8===h&&s.push(_);else{if(!ki(h))break;h=_}u++}return{attrs:i,classes:s}}(this.componentDef.selectors[0]);vt&&Ma(H,ne,vt),In&&In.length>0&&Mg(H,ne,In.join(" "))}if(dn=Ju(ot,22),void 0!==s){const vt=dn.projection=[];for(let In=0;In<this.ngContentSelectors.length;In++){const Si=s[In];vt.push(null!=Si?Array.from(Si):null)}}Xt=function v0(n,i,s,u,h){const _=s[1],w=function tp(n,i,s){const u=Yi();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),ip(n,u,i,Zl(n,i,1,null),s),Oc(n,u));const h=Qa(i,n,u.directiveStart,u);Js(h,i);const _=Ts(u,i);return _&&Js(_,i),h}(_,s,i);if(u.components.push(w),n[8]=w,null!==h)for(const O of h)O(w,i);if(i.contentQueries){const O=Yi();i.contentQueries(1,w,O.directiveStart)}const A=Yi();return!_.firstCreatePass||null===i.hostBindings&&null===i.hostAttrs||(ts(A.index),np(s[1],A,0,A.directiveStart,A.directiveEnd,i),Pc(i,w)),w}(Yn,this.componentDef,Ct,Me,[Fc]),bu(ot,Ct,null)}finally{vc()}return new _0(this.componentType,Xt,gd(dn,Ct),Ct,dn)}}class _0 extends class cv{}{constructor(i,s,u,h,_){super(),this.location=u,this._rootLView=h,this._tNode=_,this.instance=s,this.hostView=this.changeDetectorRef=new Wv(h),this.componentType=i}setInput(i,s){const u=this._tNode.inputs;let h;if(null!==u&&(h=u[i])){const _=this._rootLView;cm(_[1],_,h,i,s),Nd(_,this._tNode.index)}}get injector(){return new Ci(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function Fc(){const n=Yi();yc(it()[1],n)}function up(n){let i=function fm(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const u=[n];for(;i;){let h;if(qs(n))h=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new ke(903,!1);h=i.\u0275dir}if(h){if(s){u.push(h);const w=n;w.inputs=Lo(n.inputs),w.declaredInputs=Lo(n.declaredInputs),w.outputs=Lo(n.outputs);const A=h.hostBindings;A&&dp(n,A);const O=h.viewQuery,H=h.contentQueries;if(O&&Fo(n,O),H&&kc(n,H),rt(n.inputs,h.inputs),rt(n.declaredInputs,h.declaredInputs),rt(n.outputs,h.outputs),qs(h)&&h.data.animation){const Y=n.data;Y.animation=(Y.animation||[]).concat(h.data.animation)}}const _=h.features;if(_)for(let w=0;w<_.length;w++){const A=_[w];A&&A.ngInherit&&A(n),A===up&&(s=!1)}}i=Object.getPrototypeOf(i)}!function hl(n){let i=0,s=null;for(let u=n.length-1;u>=0;u--){const h=n[u];h.hostVars=i+=h.hostVars,h.hostAttrs=wc(h.hostAttrs,s=wc(s,h.hostAttrs))}}(u)}function Lo(n){return n===yn?{}:n===Bn?[]:n}function Fo(n,i){const s=n.viewQuery;n.viewQuery=s?(u,h)=>{i(u,h),s(u,h)}:i}function kc(n,i){const s=n.contentQueries;n.contentQueries=s?(u,h,_)=>{i(u,h,_),s(u,h,_)}:i}function dp(n,i){const s=n.hostBindings;n.hostBindings=s?(u,h)=>{i(u,h),s(u,h)}:i}let Ld=null;function Ql(){if(!Ld){const n=Lt.Symbol;if(n&&n.iterator)Ld=n.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<i.length;++s){const u=i[s];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(Ld=u)}}}return Ld}function fl(n){return!!gp(n)&&(Array.isArray(n)||!(n instanceof Map)&&Ql()in n)}function gp(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Ks(n,i,s){return n[i]=s}function qr(n,i,s){return!Object.is(n[i],s)&&(n[i]=s,!0)}function ec(n,i,s,u){const h=qr(n,i,s);return qr(n,i+1,u)||h}function Au(n,i,s,u){const h=it();return qr(h,gt(),i)&&(ti(),function dl(n,i,s,u,h,_){const w=Ts(n,i);jh(i[11],w,_,n.value,s,u,h)}(Li(),h,n,i,s,u)),Au}function Nu(n,i,s,u){return qr(n,gt(),s)?i+lt(s)+u:Kn}function Yv(n,i,s,u,h,_,w,A){const O=it(),H=ti(),Y=n+22,ne=H.firstCreatePass?function vm(n,i,s,u,h,_,w,A,O){const H=i.consts,Y=yu(i,n,4,w||null,K(H,A));Du(i,s,Y,K(H,O)),yc(i,Y);const ne=Y.tViews=Uh(2,Y,u,h,_,i.directiveRegistry,i.pipeRegistry,null,i.schemas,H);return null!==i.queries&&(i.queries.template(i,Y),ne.queries=i.queries.embeddedTView(Y)),Y}(Y,H,O,i,s,u,h,_,w):H.data[Y];jo(ne,!1);const me=O[11].createComment("");Mh(H,O,me,ne),Js(me,O),Jl(O,O[Y]=rp(me,O,me,ne)),ma(ne)&&nm(H,O,ne),null!=w&&Qf(O,ne,A)}function C0(n){return function fc(n,i){return n[i]}(function rf(){return Ie.lFrame.contextLView}(),22+n)}function vp(n,i,s){const u=it();return qr(u,gt(),i)&&ls(ti(),Li(),u,n,i,u[11],s,!1),vp}function Ou(n,i,s,u,h){const w=h?"class":"style";cm(n,s,i.inputs[w],w,u)}function qh(n,i,s,u){const h=it(),_=ti(),w=22+n,A=h[11],O=h[w]=Ia(A,i,function Fi(){return Ie.lFrame.currentNamespace}()),H=_.firstCreatePass?function yp(n,i,s,u,h,_,w){const A=i.consts,H=yu(i,n,2,h,K(A,_));return Du(i,s,H,K(A,w)),null!==H.attrs&&Cu(H,H.attrs,!1),null!==H.mergedAttrs&&Cu(H,H.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,H),H}(w,_,h,0,i,s,u):_.data[w];jo(H,!0);const Y=H.mergedAttrs;null!==Y&&Ma(A,O,Y);const ne=H.classes;null!==ne&&Mg(A,O,ne);const me=H.styles;return null!==me&&W_(A,O,me),64!=(64&H.flags)&&Mh(_,h,O,H),0===function ai(){return Ie.lFrame.elementDepthCount}()&&Js(O,h),function Un(){Ie.lFrame.elementDepthCount++}(),ma(H)&&(nm(_,h,H),function xu(n,i,s){if(to(i)){const h=i.directiveEnd;for(let _=i.directiveStart;_<h;_++){const w=n.data[_];w.contentQueries&&w.contentQueries(1,s[_],_)}}}(_,H,h)),null!==u&&Qf(h,H),qh}function Xh(){let n=Yi();zr()?$o():(n=n.parent,jo(n,!1));const i=n;!function si(){Ie.lFrame.elementDepthCount--}();const s=ti();return s.firstCreatePass&&(yc(s,n),to(n)&&s.queries.elementEnd(n)),null!=i.classesWithoutHost&&function yo(n){return 0!=(16&n.flags)}(i)&&Ou(s,i,it(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function Zo(n){return 0!=(32&n.flags)}(i)&&Ou(s,i,it(),i.stylesWithoutHost,!1),Xh}function ml(n,i,s,u){return qh(n,i,s,u),Xh(),ml}function c(){return it()}function o(n){return!!n&&"function"==typeof n.then}function f(n){return!!n&&"function"==typeof n.subscribe}const x=f;function R(n,i,s,u){const h=it(),_=ti(),w=Yi();return function ce(n,i,s,u,h,_,w,A){const O=ma(u),Y=n.firstCreatePass&&lm(n),ne=i[8],me=Yh(i);let Me=!0;if(3&u.type||A){const Xt=Ts(u,i),dn=A?A(Xt):Xt,Yn=me.length,vt=A?Si=>A(Ji(Si[u.index])):u.index;let In=null;if(!A&&O&&(In=function ue(n,i,s,u){const h=n.cleanup;if(null!=h)for(let _=0;_<h.length-1;_+=2){const w=h[_];if(w===s&&h[_+1]===u){const A=i[7],O=h[_+2];return A.length>O?A[O]:null}"string"==typeof w&&(_+=2)}return null}(n,i,h,u.index)),null!==In)(In.__ngLastListenerFn__||In).__ngNextListenerFn__=_,In.__ngLastListenerFn__=_,Me=!1;else{_=Ge(u,i,ne,_,!1);const Si=s.listen(dn,h,_);me.push(_,Si),Y&&Y.push(h,vt,Yn,Yn+1)}}else _=Ge(u,i,ne,_,!1);const ot=u.outputs;let Ct;if(Me&&null!==ot&&(Ct=ot[h])){const Xt=Ct.length;if(Xt)for(let dn=0;dn<Xt;dn+=2){const Ir=i[Ct[dn]][Ct[dn+1]].subscribe(_),Ip=me.length;me.push(_,Ir),Y&&Y.push(h,u.index,Ip,-(Ip+1))}}}(_,h,h[11],w,n,i,0,u),R}function we(n,i,s,u){try{return!1!==s(u)}catch(h){return m0(n,h),!1}}function Ge(n,i,s,u,h){return function _(w){if(w===Function)return u;Rd(2&n.flags?ms(n.index,i):i);let O=we(i,0,u,w),H=_.__ngNextListenerFn__;for(;H;)O=we(i,0,H,w)&&O,H=H.__ngNextListenerFn__;return h&&!1===O&&(w.preventDefault(),w.returnValue=!1),O}}function Pt(n=1){return function Ya(n){return(Ie.lFrame.contextLView=function ed(n,i){for(;n>0;)i=i[15],n--;return i}(n,Ie.lFrame.contextLView))[8]}(n)}function Bt(n,i){let s=null;const u=function Tv(n){const i=n.attrs;if(null!=i){const s=i.indexOf(5);if(0==(1&s))return i[s+1]}return null}(n);for(let h=0;h<i.length;h++){const _=i[h];if("*"!==_){if(null===u?Y_(n,_,!0):Eg(u,_))return h}else s=h}return s}function Mt(n){const i=it()[16][6];if(!i.projection){const u=i.projection=S(n?n.length:1,null),h=u.slice();let _=i.child;for(;null!==_;){const w=n?Bt(_,n):0;null!==w&&(h[w]?h[w].projectionNext=_:u[w]=_,h[w]=_),_=_.next}}}function Mn(n,i=0,s){const u=it(),h=ti(),_=yu(h,22+n,16,null,s||null);null===_.projection&&(_.projection=i),$o(),64!=(64&_.flags)&&function wg(n,i,s){Dg(i[11],0,i,s,B_(n,s,i),Dh(s.parent||i[6],s,i))}(h,u,_)}function fn(n,i,s){return Hn(n,"",i,"",s),fn}function Hn(n,i,s,u,h){const _=it(),w=Nu(_,i,s,u);return w!==Kn&&ls(ti(),Li(),_,n,w,_[11],h,!1),Hn}function us(n,i,s,u,h){const _=n[s+1],w=null===i;let A=u?wo(_):Ra(_),O=!1;for(;0!==A&&(!1===O||w);){const Y=n[A+1];Bs(n[A],i)&&(O=!0,n[A+1]=u?Ih(Y):Ic(Y)),A=u?wo(Y):Ra(Y)}O&&(n[s+1]=u?Ic(_):Ih(_))}function Bs(n,i){return null===n||null==i||(Array.isArray(n)?n[1]:n)===i||!(!Array.isArray(n)||"string"!=typeof i)&&Pn(n,i)>=0}const sr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function mo(n){return n.substring(sr.key,sr.keyEnd)}function Bd(n,i){const s=sr.textEnd;return s===i?-1:(i=sr.keyEnd=function Zh(n,i,s){for(;i<s&&n.charCodeAt(i)>32;)i++;return i}(n,sr.key=i,s),ka(n,i,s))}function ka(n,i,s){for(;i<s&&n.charCodeAt(i)<=32;)i++;return i}function Gd(n,i,s){return Bo(n,i,s,!1),Gd}function Xi(n,i){return Bo(n,i,null,!0),Xi}function wp(n){!function Vo(n,i,s,u){const h=ti(),_=Ki(2);h.firstUpdatePass&&T0(h,null,_,u);const w=it();if(s!==Kn&&qr(w,_,s)){const A=h.data[vi()];if(Vc(A,u)&&!ym(h,_)){let O=u?A.classesWithoutHost:A.stylesWithoutHost;null!==O&&(s=Qe(O,s||"")),Ou(h,A,w,s,u)}else!function Cp(n,i,s,u,h,_,w,A){h===Kn&&(h=Bn);let O=0,H=0,Y=0<h.length?h[0]:null,ne=0<_.length?_[0]:null;for(;null!==Y||null!==ne;){const me=O<h.length?h[O+1]:void 0,Me=H<_.length?_[H+1]:void 0;let Ct,ot=null;Y===ne?(O+=2,H+=2,me!==Me&&(ot=ne,Ct=Me)):null===ne||null!==Y&&Y<ne?(O+=2,ot=Y):(H+=2,ot=ne,Ct=Me),null!==ot&&Vu(n,i,s,u,ot,Ct,w,A),Y=O<h.length?h[O]:null,ne=H<_.length?_[H]:null}}(h,A,w,w[11],w[_+1],w[_+1]=function Mp(n,i,s){if(null==s||""===s)return Bn;const u=[],h=Ro(s);if(Array.isArray(h))for(let _=0;_<h.length;_++)n(u,h[_],!0);else if("object"==typeof h)for(const _ in h)h.hasOwnProperty(_)&&n(u,_,h[_]);else"string"==typeof h&&i(u,h);return u}(n,i,s),u,_)}}(Pe,yl,n,!0)}function yl(n,i){for(let s=function Fa(n){return function Pu(n){sr.key=0,sr.keyEnd=0,sr.value=0,sr.valueEnd=0,sr.textEnd=n.length}(n),Bd(n,ka(n,0,sr.textEnd))}(i);s>=0;s=Bd(i,s))Pe(n,mo(i),!0)}function Bo(n,i,s,u){const h=it(),_=ti(),w=Ki(2);_.firstUpdatePass&&T0(_,n,w,u),i!==Kn&&qr(h,w,i)&&Vu(_,_.data[vi()],h,h[11],n,h[w+1]=function Ib(n,i){return null==n||("string"==typeof i?n+=i:"object"==typeof n&&(n=Ve(Ro(n)))),n}(i,s),u,w)}function ym(n,i){return i>=n.expandoStartIndex}function T0(n,i,s,u){const h=n.data;if(null===h[s+1]){const _=h[vi()],w=ym(n,s);Vc(_,u)&&null===i&&!w&&(i=!1),i=function Xv(n,i,s,u){const h=function Ns(n){const i=Ie.lFrame.currentDirectiveIndex;return-1===i?null:n[i]}(n);let _=u?i.residualClasses:i.residualStyles;if(null===h)0===(u?i.classBindings:i.styleBindings)&&(s=Bu(s=Dp(null,n,i,s,u),i.attrs,u),_=null);else{const w=i.directiveStylingLast;if(-1===w||n[w]!==h)if(s=Dp(h,n,i,s,u),null===_){let O=function ku(n,i,s){const u=s?i.classBindings:i.styleBindings;if(0!==Ra(u))return n[wo(u)]}(n,i,u);void 0!==O&&Array.isArray(O)&&(O=Dp(null,n,i,O[1],u),O=Bu(O,i.attrs,u),function zd(n,i,s,u){n[wo(s?i.classBindings:i.styleBindings)]=u}(n,i,u,O))}else _=function Jh(n,i,s){let u;const h=i.directiveEnd;for(let _=1+i.directiveStylingLast;_<h;_++)u=Bu(u,n[_].hostAttrs,s);return Bu(u,i.attrs,s)}(n,i,u)}return void 0!==_&&(u?i.residualClasses=_:i.residualStyles=_),s}(h,_,i,u),function cs(n,i,s,u,h,_){let w=_?i.classBindings:i.styleBindings,A=wo(w),O=Ra(w);n[u]=s;let Y,H=!1;if(Array.isArray(s)){const ne=s;Y=ne[1],(null===Y||Pn(ne,Y)>0)&&(H=!0)}else Y=s;if(h)if(0!==O){const me=wo(n[A+1]);n[u+1]=Cd(me,A),0!==me&&(n[me+1]=Nh(n[me+1],u)),n[A+1]=function mu(n,i){return 131071&n|i<<17}(n[A+1],u)}else n[u+1]=Cd(A,0),0!==A&&(n[A+1]=Nh(n[A+1],u)),A=u;else n[u+1]=Cd(O,0),0===A?A=u:n[O+1]=Nh(n[O+1],u),O=u;H&&(n[u+1]=Ic(n[u+1])),us(n,Y,u,!0),us(n,Y,u,!1),function Fr(n,i,s,u,h){const _=h?n.residualClasses:n.residualStyles;null!=_&&"string"==typeof i&&Pn(_,i)>=0&&(s[u+1]=Ih(s[u+1]))}(i,Y,n,u,_),w=Cd(A,O),_?i.classBindings=w:i.styleBindings=w}(h,_,i,s,w,u)}}function Dp(n,i,s,u,h){let _=null;const w=s.directiveEnd;let A=s.directiveStylingLast;for(-1===A?A=s.directiveStart:A++;A<w&&(_=i[A],u=Bu(u,_.hostAttrs,h),_!==n);)A++;return null!==n&&(s.directiveStylingLast=A),u}function Bu(n,i,s){const u=s?1:2;let h=-1;if(null!==i)for(let _=0;_<i.length;_++){const w=i[_];"number"==typeof w?h=w:h===u&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Pe(n,w,!!s||i[++_]))}return void 0===n?null:n}function Vu(n,i,s,u,h,_,w,A){if(!(3&i.type))return;const O=n.data,H=O[A+1];Sp(function zg(n){return 1==(1&n)}(H)?Py(O,i,s,h,Ra(H),w):void 0)||(Sp(_)||function Gg(n){return 2==(2&n)}(H)&&(_=Py(O,null,s,h,A,w)),function Hf(n,i,s,u,h){if(i)h?n.addClass(s,u):n.removeClass(s,u);else{let _=-1===u.indexOf("-")?void 0:ia.DashCase;null==h?n.removeStyle(s,u,_):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),_|=ia.Important),n.setStyle(s,u,h,_))}}(u,w,Wa(vi(),s),h,_))}function Py(n,i,s,u,h,_){const w=null===i;let A;for(;h>0;){const O=n[h],H=Array.isArray(O),Y=H?O[1]:O,ne=null===Y;let me=s[h+1];me===Kn&&(me=ne?Bn:void 0);let Me=ne?ht(me,u):Y===u?me:void 0;if(H&&!Sp(Me)&&(Me=ht(O,u)),Sp(Me)&&(A=Me,w))return A;const ot=n[h+1];h=w?wo(ot):Ra(ot)}if(null!==i){let O=_?i.residualClasses:i.residualStyles;null!=O&&(A=ht(O,u))}return A}function Sp(n){return void 0!==n}function Vc(n,i){return 0!=(n.flags&(i?16:32))}function Ep(n,i=""){const s=it(),u=ti(),h=n+22,_=u.firstCreatePass?yu(u,h,1,i,null):u.data[h],w=s[h]=ug(s[11],i);Mh(u,s,w,_),jo(_,!1)}function A0(n,i,s){const u=it(),h=Nu(u,n,i,s);return h!==Kn&&function aa(n,i,s){const u=Wa(i,n);P_(n[11],u,s)}(u,vi(),h),A0}function iy(n,i,s){const u=it();return qr(u,gt(),i)&&ls(ti(),Li(),u,n,i,u[11],s,!0),iy}const Kh=void 0;var Hb=["en",[["a","p"],["AM","PM"],Kh],[["AM","PM"],Kh,Kh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Kh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Kh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Kh,"{1} 'at' {0}",Kh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Ub(n){const s=Math.floor(Math.abs(n)),u=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===u?1:5}];let Tp={};function ry(n){const i=function Gb(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=$y(i);if(s)return s;const u=i.split("-")[0];if(s=$y(u),s)return s;if("en"===u)return Hb;throw new ke(701,!1)}function jy(n){return ry(n)[Vn.PluralCase]}function $y(n){return n in Tp||(Tp[n]=Lt.ng&&Lt.ng.common&&Lt.ng.common.locales&&Lt.ng.common.locales[n]),Tp[n]}var Vn=(()=>((Vn=Vn||{})[Vn.LocaleId=0]="LocaleId",Vn[Vn.DayPeriodsFormat=1]="DayPeriodsFormat",Vn[Vn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Vn[Vn.DaysFormat=3]="DaysFormat",Vn[Vn.DaysStandalone=4]="DaysStandalone",Vn[Vn.MonthsFormat=5]="MonthsFormat",Vn[Vn.MonthsStandalone=6]="MonthsStandalone",Vn[Vn.Eras=7]="Eras",Vn[Vn.FirstDayOfWeek=8]="FirstDayOfWeek",Vn[Vn.WeekendRange=9]="WeekendRange",Vn[Vn.DateFormat=10]="DateFormat",Vn[Vn.TimeFormat=11]="TimeFormat",Vn[Vn.DateTimeFormat=12]="DateTimeFormat",Vn[Vn.NumberSymbols=13]="NumberSymbols",Vn[Vn.NumberFormats=14]="NumberFormats",Vn[Vn.CurrencyCode=15]="CurrencyCode",Vn[Vn.CurrencySymbol=16]="CurrencySymbol",Vn[Vn.CurrencyName=17]="CurrencyName",Vn[Vn.Currencies=18]="Currencies",Vn[Vn.Directionality=19]="Directionality",Vn[Vn.PluralCase=20]="PluralCase",Vn[Vn.ExtraData=21]="ExtraData",Vn))();const zb=["zero","one","two","few","many"],Qh="en-US",m={marker:"element"},e={marker:"ICU"};var t=(()=>((t=t||{})[t.SHIFT=2]="SHIFT",t[t.APPEND_EAGERLY=1]="APPEND_EAGERLY",t[t.COMMENT=2]="COMMENT",t))();let l=Qh;function d(n){(function yt(n,i){null==n&&$e(i,n,null,"!=")})(n,"Expected localeId to be defined"),"string"==typeof n&&(l=n.toLowerCase().replace(/_/g,"-"))}function g(n,i,s){const u=i.insertBeforeIndex,h=Array.isArray(u)?u[0]:u;return null===h?_g(n,0,s):Ji(s[h])}function y(n,i,s,u,h){const _=i.insertBeforeIndex;if(Array.isArray(_)){let w=u,A=null;if(3&i.type||(A=w,w=h),null!==w&&0==(2&i.flags))for(let O=1;O<_.length;O++)$l(n,w,s[_[O]],A,!1)}}function b(n,i){if(n.push(i),n.length>1)for(let s=n.length-2;s>=0;s--){const u=n[s];M(u)||T(u,i)&&null===E(u)&&I(u,i.index)}}function M(n){return!(64&n.type)}function T(n,i){return M(i)||n.index>i.index}function E(n){const i=n.insertBeforeIndex;return Array.isArray(i)?i[0]:i}function I(n,i){const s=n.insertBeforeIndex;Array.isArray(s)?s[0]=i:(G_(g,y),n.insertBeforeIndex=i)}function F(n,i){const s=n.data[i];return null===s||"string"==typeof s?null:s.hasOwnProperty("currentCaseLViewIndex")?s:s.value}function W(n,i,s){const u=Bh(n,s,64,null,null);return b(i,u),u}function z(n,i){const s=i[n.currentCaseLViewIndex];return null===s?s:s<0?~s:s}function G(n){return n>>>17}function j(n){return(131070&n)>>>1}let fe=0,X=0;function pt(n,i,s,u){const h=s[11];let w,_=null;for(let A=0;A<i.length;A++){const O=i[A];if("string"==typeof O){const H=i[++A];null===s[H]&&(s[H]=ug(h,O))}else if("number"==typeof O)switch(1&O){case 0:const H=G(O);let Y,ne;if(null===_&&(_=H,w=wh(h,u)),H===_?(Y=u,ne=w):(Y=null,ne=Ji(s[H])),null!==ne){const Ct=j(O);$l(h,ne,s[Ct],Y,!1);const dn=F(n,Ct);if(null!==dn&&"object"==typeof dn){const Yn=z(dn,s);null!==Yn&&pt(n,dn.create[Yn],s,s[dn.anchorIdx])}}break;case 1:const Me=i[++A],ot=i[++A];jh(h,Wa(O>>>1,s),null,null,Me,ot,null)}else switch(O){case e:const H=i[++A],Y=i[++A];null===s[Y]&&Js(s[Y]=dg(h,H),s);break;case m:const ne=i[++A],me=i[++A];null===s[me]&&Js(s[me]=Ia(h,ne,null),s)}}}function Fe(n,i,s,u,h){for(let _=0;_<s.length;_++){const w=s[_],A=s[++_];if(w&h){let O="";for(let H=_+1;H<=_+A;H++){const Y=s[H];if("string"==typeof Y)O+=Y;else if("number"==typeof Y)if(Y<0)O+=lt(i[u-Y]);else{const ne=Y>>>2;switch(3&Y){case 1:const me=s[++H],Me=s[++H],ot=n.data[ne];"string"==typeof ot?jh(i[11],i[ne],null,ot,me,O,Me):ls(n,ot,i,me,O,i[11],Me,!1);break;case 0:const Ct=i[ne];null!==Ct&&P_(i[11],Ct,O);break;case 2:Ze(n,F(n,ne),i,O);break;case 3:De(n,F(n,ne),u,i)}}}}else{const O=s[_+1];if(O>0&&3==(3&O)){const Y=F(n,O>>>2);i[Y.currentCaseLViewIndex]<0&&De(n,Y,u,i)}}_+=A}}function De(n,i,s,u){let h=u[i.currentCaseLViewIndex];if(null!==h){let _=fe;h<0&&(h=u[i.currentCaseLViewIndex]=~h,_=-1),Fe(n,u,i.update[h],s,_)}}function Ze(n,i,s,u){const h=function Nt(n,i){let s=n.cases.indexOf(i);if(-1===s)switch(n.type){case 1:{const u=function Yy(n,i){const s=jy(i)(parseInt(n,10)),u=zb[s];return void 0!==u?u:"other"}(i,function p(){return l}());s=n.cases.indexOf(u),-1===s&&"other"!==u&&(s=n.cases.indexOf("other"));break}case 0:s=n.cases.indexOf("other")}return-1===s?null:s}(i,u);if(z(i,s)!==h&&(_t(n,i,s),s[i.currentCaseLViewIndex]=null===h?null:~h,null!==h)){const w=s[i.anchorIdx];w&&pt(n,i.create[h],s,w)}}function _t(n,i,s){let u=z(i,s);if(null!==u){const h=i.remove[u];for(let _=0;_<h.length;_++){const w=h[_];if(w>0){const A=Wa(w,s);null!==A&&z_(s[11],A)}else _t(n,F(n,~w),s)}}}function ft(){const n=[];let s,u,i=-1;function _(A,O){i=0;const H=z(A,O);u=null!==H?A.remove[H]:Bn}function w(){if(i<u.length){const A=u[i++];return A>0?s[A]:(n.push(i,u),_(s[1].data[~A],s),w())}return 0===n.length?null:(u=n.pop(),i=n.pop(),w())}return function h(A,O){for(s=O;n.length;)n.pop();return _(A.value,O),w}}const Rt=/\ufffd(\d+):?\d*\ufffd/gi,en=/\ufffd(\d+)\ufffd/,$t=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,mn=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,xn=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,zn=/\uE500/g;function Ut(n,i,s,u,h,_,w){const A=Zl(n,u,1,null);let O=A<<t.SHIFT,H=ja();i===H&&(H=null),null===H&&(O|=t.APPEND_EAGERLY),w&&(O|=t.COMMENT,function I_(n){void 0===uu&&(uu=n())}(ft)),h.push(O,null===_?"":_);const Y=Bh(n,A,w?32:1,null===_?"":_,null);b(s,Y);const ne=Y.index;return jo(Y,!1),null!==H&&i!==H&&function L(n,i){let s=n.insertBeforeIndex;null===s?(G_(g,y),s=n.insertBeforeIndex=[null,i]):(function ln(n,i,s){n!=i&&$e(s,n,i,"==")}(Array.isArray(s),!0,"Expecting array here"),s.push(i))}(H,ne),Y}function Cn(n,i,s,u,h,_,w){const A=w.match(Rt),O=Ut(n,i,s,_,u,A?null:w,!1);A&&En(h,w,O.index,null,0,null)}function En(n,i,s,u,h,_){const w=n.length,A=w+1;n.push(null,null);const O=w+2,H=i.split(Rt);let Y=0;for(let ne=0;ne<H.length;ne++){const me=H[ne];if(1&ne){const Me=h+parseInt(me,10);n.push(-1-Me),Y|=Qn(Me)}else""!==me&&n.push(me)}return n.push(s<<2|(u?1:0)),u&&n.push(u,_),n[w]=Y,n[A]=n.length-O,Y}function Qn(n){return 1<<Math.min(n,31)}function Wi(n){let i,_,s="",u=0,h=!1;for(;null!==(i=mn.exec(n));)h?i[0]===`\ufffd/*${_}\ufffd`&&(u=i.index,h=!1):(s+=n.substring(u,i.index+i[0].length),_=i[1],h=!0);return s+=n.slice(u),s}function te(n,i,s,u,h,_){let w=0;const A={type:h.type,currentCaseLViewIndex:Zl(n,i,1,null),anchorIdx:_,cases:[],create:[],remove:[],update:[]};(function mt(n,i,s){n.push(Qn(i.mainBinding),2,-1-i.mainBinding,s<<2|2)})(s,h,_),function N(n,i,s){const u=n.data[i];null===u?n.data[i]=s:u.value=s}(n,_,A);const O=h.values;for(let H=0;H<O.length;H++){const Y=O[H],ne=[];for(let me=0;me<Y.length;me++){const Me=Y[me];if("string"!=typeof Me){const ot=ne.push(Me)-1;Y[me]=`\x3c!--\ufffd${ot}\ufffd--\x3e`}}w=Ht(n,A,i,s,u,h.cases[H],Y.join(""),ne)|w}w&&function Wn(n,i,s){n.push(i,1,s<<2|3)}(s,w,_)}function Je(n){const i=[],s=[];let u=1,h=0;const _=Ft(n=n.replace($t,function(w,A,O){return u="select"===O?0:1,h=parseInt(A.slice(1),10),""}));for(let w=0;w<_.length;){let A=_[w++].trim();1===u&&(A=A.replace(/\s*(?:=)?(\w+)\s*/,"$1")),A.length&&i.push(A);const O=Ft(_[w++]);i.length>s.length&&s.push(O)}return{type:u,mainBinding:h,cases:i,values:s}}function Ft(n){if(!n)return[];let i=0;const s=[],u=[],h=/[{}]/g;let _;for(h.lastIndex=0;_=h.exec(n);){const A=_.index;if("}"==_[0]){if(s.pop(),0==s.length){const O=n.substring(i,A);$t.test(O)?u.push(Je(O)):u.push(O),i=A+1}}else{if(0==s.length){const O=n.substring(i,A);u.push(O),i=A+1}s.push("{")}}const w=n.substring(i);return u.push(w),u}function Ht(n,i,s,u,h,_,w,A){const O=[],H=[],Y=[];i.cases.push(_),i.create.push(O),i.remove.push(H),i.update.push(Y);const me=function Bp(n){const i=new Gm(n);return function zm(){try{return!!(new window.DOMParser).parseFromString(Ec(""),"text/html")}catch{return!1}}()?new Hm(i):i}(function hf(){return void 0!==df?df:typeof document<"u"?document:void 0}()).getInertBodyElement(w),Me=function Cf(n){return"content"in n&&function Km(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}(me)||me;return Me?rn(n,i,s,u,O,H,Y,Me,h,A,0):0}function rn(n,i,s,u,h,_,w,A,O,H,Y){let ne=0,me=A.firstChild;for(;me;){const Me=Zl(n,s,1,null);switch(me.nodeType){case Node.ELEMENT_NODE:const ot=me,Ct=ot.tagName.toLowerCase();if(xf.hasOwnProperty(Ct)){Dn(h,m,Ct,O,Me),n.data[Me]=Ct;const vt=ot.attributes;for(let In=0;In<vt.length;In++){const Si=vt.item(In),Ir=Si.name.toLowerCase();Si.value.match(Rt)?Mf.hasOwnProperty(Ir)&&En(w,Si.value,Me,Si.name,0,wf[Ir]?ah:Df[Ir]?Vp:null):ei(h,Me,Si)}ne=rn(n,i,s,u,h,_,w,me,Me,H,Y+1)|ne,An(_,Me,Y)}break;case Node.TEXT_NODE:const Xt=me.textContent||"",dn=Xt.match(Rt);Dn(h,null,dn?"":Xt,O,Me),An(_,Me,Y),dn&&(ne=En(w,Xt,Me,null,0,null)|ne);break;case Node.COMMENT_NODE:const Yn=en.exec(me.textContent||"");if(Yn){const In=H[parseInt(Yn[1],10)];Dn(h,e,"",O,Me),te(n,s,u,O,In,Me),cn(_,Me,Y)}}me=me.nextSibling}return ne}function An(n,i,s){0===s&&n.push(i)}function cn(n,i,s){0===s&&(n.push(~i),n.push(i))}function Dn(n,i,s,u,h){null!==i&&n.push(i),n.push(s,h,function ie(n,i,s){return n|i<<17|s<<1}(0,u,h))}function ei(n,i,s){n.push(i<<1|1,s.name,s.value)}function wn(n,i,s=-1){const u=ti(),h=it(),_=22+n,w=K(u.consts,i),A=ja();u.firstCreatePass&&function xt(n,i,s,u,h,_){const w=ja(),A=[],O=[],H=[[]];h=function de(n,i){if(function hr(n){return-1===n}(i))return Wi(n);{const s=n.indexOf(`:${i}\ufffd`)+2+i.toString().length,u=n.search(new RegExp(`\ufffd\\/\\*\\d+:${i}\ufffd`));return Wi(n.substring(s,u))}}(h,_);const Y=function Ke(n){return n.replace(zn," ")}(h).split(xn);for(let ne=0;ne<Y.length;ne++){let me=Y[ne];if(0==(1&ne)){const Me=Ft(me);for(let ot=0;ot<Me.length;ot++){let Ct=Me[ot];if(0==(1&ot)){const Xt=Ct;""!==Xt&&Cn(n,w,H[0],A,O,s,Xt)}else{const Xt=Ct;if("object"!=typeof Xt)throw new Error(`Unable to parse ICU expression in "${h}" message.`);te(n,s,O,i,Xt,Ut(n,w,H[0],s,A,"",!0).index)}}}else{const Me=47===me.charCodeAt(0),Ct=(me.charCodeAt(Me?1:0),22+Number.parseInt(me.substring(Me?2:1)));if(Me)H.shift(),jo(ja(),!1);else{const Xt=W(n,H[0],Ct);H.unshift([]),jo(Xt,!0)}}}n.data[u]={create:A,update:O}}(u,null===A?0:A.index,h,_,w,s);const O=u.data[_],Y=V_(u,A===h[6]?null:A,h);(function We(n,i,s,u){const h=n[11];for(let _=0;_<i.length;_++){const w=i[_++],A=i[_],O=(w&t.COMMENT)===t.COMMENT,H=(w&t.APPEND_EAGERLY)===t.APPEND_EAGERLY,Y=w>>>t.SHIFT;let ne=n[Y];null===ne&&(ne=n[Y]=O?h.createComment(A):ug(h,A)),H&&null!==s&&$l(h,s,ne,u,!1)}})(h,O.create,Y,A&&8&A.type?h[A.index]:null),Qu(!0)}function Ms(n,i,s){wn(n,i,s),function fr(){Qu(!1)}()}function Ba(n){return function re(n){n&&(fe|=1<<Math.min(X,31)),X++}(qr(it(),gt(),n)),Ba}function Br(n){!function ve(n,i,s){if(X>0){const u=n.data[s];Fe(n,i,Array.isArray(u)?u:u.update,function On(){return Ie.lFrame.bindingIndex}()-X-1,fe)}fe=0,X=0}(ti(),it(),n+22)}function P0(n,i,s,u,h){if(n=Ue(n),Array.isArray(n))for(let _=0;_<n.length;_++)P0(n[_],i,s,u,h);else{const _=ti(),w=it();let A=au(n)?n:Ue(n.provide),O=h_(n);const H=Yi(),Y=1048575&H.providerIndexes,ne=H.directiveStart,me=H.providerIndexes>>20;if(au(n)||!n.multi){const Me=new io(O,h,Ac),ot=se(A,i,h?Y:Y+me,ne);-1===ot?(Os(so(H,w),_,A),L0(_,n,i.length),i.push(A),H.directiveStart++,H.directiveEnd++,h&&(H.providerIndexes+=1048576),s.push(Me),w.push(Me)):(s[ot]=Me,w[ot]=Me)}else{const Me=se(A,i,Y+me,ne),ot=se(A,i,Y,Y+me),Ct=Me>=0&&s[Me],Xt=ot>=0&&s[ot];if(h&&!Xt||!h&&!Ct){Os(so(H,w),_,A);const dn=function ut(n,i,s,u,h){const _=new io(n,s,Ac);return _.multi=[],_.index=i,_.componentProviders=0,sy(_,h,u&&!s),_}(h?tt:Be,s.length,h,u,O);!h&&Xt&&(s[ot].providerFactory=dn),L0(_,n,i.length,0),i.push(A),H.directiveStart++,H.directiveEnd++,h&&(H.providerIndexes+=1048576),s.push(dn),w.push(dn)}else L0(_,n,Me>-1?Me:ot,sy(s[h?ot:Me],O,!h&&u));!h&&u&&Xt&&s[ot].componentProviders++}}}function L0(n,i,s,u){const h=au(i),_=function nv(n){return!!n.useClass}(i);if(h||_){const O=(_?Ue(i.useClass):i).prototype.ngOnDestroy;if(O){const H=n.destroyHooks||(n.destroyHooks=[]);if(!h&&i.multi){const Y=H.indexOf(s);-1===Y?H.push(s,[u,O]):H[Y+1].push(u,O)}else H.push(s,O)}}}function sy(n,i,s){return s&&n.componentProviders++,n.multi.push(i)-1}function se(n,i,s,u){for(let h=s;h<u;h++)if(i[h]===n)return h;return-1}function Be(n,i,s,u){return Ne(this.multi,[])}function tt(n,i,s,u){const h=this.multi;let _;if(this.providerFactory){const w=this.providerFactory.componentProviders,A=Qa(s,s[1],this.providerFactory.index,u);_=A.slice(0,w),Ne(h,_);for(let O=w;O<A.length;O++)_.push(A[O])}else _=[],Ne(h,_);return _}function Ne(n,i){for(let s=0;s<n.length;s++)i.push((0,n[s])());return i}function kn(n,i=[]){return s=>{s.providersResolver=(u,h)=>function ic(n,i,s){const u=ti();if(u.firstCreatePass){const h=qs(n);P0(s,u.data,u.blueprint,h,!0),P0(i,u.data,u.blueprint,h,!1)}}(u,h?h(n):n,i)}}class Jn{}class hi{}function _i(n,i){return new xi(n,i??null)}class xi extends Jn{constructor(i,s){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Lc(this);const u=Ti(i);this._bootstrapComponents=Na(u.bootstrap),this._r3Injector=Bg(i,s,[{provide:Jn,useValue:this},{provide:dh,useValue:this.componentFactoryResolver}],Ve(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class yi extends hi{constructor(i){super(),this.moduleType=i}create(i){return new xi(this.moduleType,i)}}class ds extends Jn{constructor(i,s,u){super(),this.componentFactoryResolver=new Lc(this),this.instance=null;const h=new jp([...i,{provide:Jn,useValue:this},{provide:dh,useValue:this.componentFactoryResolver}],s||Nf(),u,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function Mo(n,i,s=null){return new ds(n,i,s).injector}function Wb(n,i,s,u){return function Yb(n,i,s,u,h,_){const w=i+s;return qr(n,w,h)?Ks(n,w+1,_?u.call(_,h):u(h)):B0(n,w+1)}(it(),Pi(),n,i,s,u)}function jb(n,i,s,u,h){return function qb(n,i,s,u,h,_,w){const A=i+s;return ec(n,A,h,_)?Ks(n,A+2,w?u.call(w,h,_):u(h,_)):B0(n,A+2)}(it(),Pi(),n,i,s,u,h)}function $b(n,i,s,u,h,_){return function Xb(n,i,s,u,h,_,w,A){const O=i+s;return function pl(n,i,s,u,h){const _=ec(n,i,s,u);return qr(n,i+2,h)||_}(n,O,h,_,w)?Ks(n,O+3,A?u.call(A,h,_,w):u(h,_,w)):B0(n,O+3)}(it(),Pi(),n,i,s,u,h,_)}function B0(n,i){const s=n[i];return s===Kn?void 0:s}function Jy(n){return i=>{setTimeout(n,void 0,i)}}const Gu=class Ex extends U.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,s,u){let h=i,_=s||(()=>null),w=u;if(i&&"object"==typeof i){const O=i;h=O.next?.bind(O),_=O.error?.bind(O),w=O.complete?.bind(O)}this.__isAsync&&(_=Jy(_),h&&(h=Jy(h)),w&&(w=Jy(w)));const A=super.subscribe({next:h,error:_,complete:w});return i instanceof v.w0&&i.add(A),A}};function Tx(){return this._results[Ql()]()}class Ky{constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=Ql(),u=Ky.prototype;u[s]||(u[s]=Tx)}get changes(){return this._changes||(this._changes=new Gu)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,s){return this._results.reduce(i,s)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,s){const u=this;u.dirty=!1;const h=pi(i);(this._changesDetected=!function tu(n,i,s){if(n.length!==i.length)return!1;for(let u=0;u<n.length;u++){let h=n[u],_=i[u];if(s&&(h=s(h),_=s(_)),_!==h)return!1}return!0}(u._results,h,s))&&(u._results=h,u.length=h.length,u.last=h[this.length-1],u.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let U0=(()=>{class n{}return n.__NG_ELEMENT_ID__=Ix,n})();const Ax=U0,Nx=class extends Ax{constructor(i,s,u){super(),this._declarationLView=i,this._declarationTContainer=s,this.elementRef=u}createEmbeddedView(i,s){const u=this._declarationTContainer.tViews,h=ul(this._declarationLView,u,i,16,null,u.declTNode,null,null,null,null,s||null);h[17]=this._declarationLView[this._declarationTContainer.index];const w=this._declarationLView[19];return null!==w&&(h[19]=w.createEmbeddedView(u)),bu(u,h,i),new Su(h)}};function Ix(){return ly(Yi(),it())}function ly(n,i){return 4&n.type?new Nx(i,n,gd(n,i)):null}let cy=(()=>{class n{}return n.__NG_ELEMENT_ID__=Rx,n})();function Rx(){return e1(Yi(),it())}const Ox=cy,Kb=class extends Ox{constructor(i,s,u){super(),this._lContainer=i,this._hostTNode=s,this._hostLView=u}get element(){return gd(this._hostTNode,this._hostLView)}get injector(){return new Ci(this._hostTNode,this._hostLView)}get parentInjector(){const i=ir(this._hostTNode,this._hostLView);if(Rl(i)){const s=vs(i,this._hostLView),u=_s(i);return new Ci(s[1].data[u+8],s)}return new Ci(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const s=Qb(this._lContainer);return null!==s&&s[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,s,u){let h,_;"number"==typeof u?h=u:null!=u&&(h=u.index,_=u.injector);const w=i.createEmbeddedView(s||{},_);return this.insert(w,h),w}createComponent(i,s,u,h,_){const w=i&&!function ao(n){return"function"==typeof n}(i);let A;if(w)A=s;else{const ne=s||{};A=ne.index,u=ne.injector,h=ne.projectableNodes,_=ne.environmentInjector||ne.ngModuleRef}const O=w?i:new Eu(mi(i)),H=u||this.parentInjector;if(!_&&null==O.ngModule){const me=(w?H:this.parentInjector).get(lu,null);me&&(_=me)}const Y=O.create(H,h,void 0,_);return this.insert(Y.hostView,A),Y}insert(i,s){const u=i._lView,h=u[1];if(function V(n){return mr(n[3])}(u)){const Y=this.indexOf(i);if(-1!==Y)this.detach(Y);else{const ne=u[3],me=new Kb(ne,ne[6],ne[3]);me.detach(me.indexOf(i))}}const _=this._adjustIndex(s),w=this._lContainer;!function F_(n,i,s,u){const h=10+u,_=s.length;u>0&&(s[h-1][4]=i),u<_-10?(i[4]=s[h],eh(s,10+u,i)):(s.push(i),i[4]=null),i[3]=s;const w=i[17];null!==w&&s!==w&&function k_(n,i){const s=n[9];i[16]!==i[3][3][16]&&(n[2]=!0),null===s?n[9]=[i]:s.push(i)}(w,i);const A=i[19];null!==A&&A.insertView(n),i[2]|=64}(h,u,w,_);const A=bg(_,w),O=u[11],H=wh(O,w[7]);return null!==H&&function yd(n,i,s,u,h,_){u[0]=h,u[6]=i,Yl(n,u,s,1,h,_)}(h,w[6],O,u,H,A),i.attachToViewContainerRef(),eh(Qy(w),_,i),i}move(i,s){return this.insert(i,s)}indexOf(i){const s=Qb(this._lContainer);return null!==s?s.indexOf(i):-1}remove(i){const s=this._adjustIndex(i,-1),u=xh(this._lContainer,s);u&&(C(Qy(this._lContainer),s),pg(u[1],u))}detach(i){const s=this._adjustIndex(i,-1),u=xh(this._lContainer,s);return u&&null!=C(Qy(this._lContainer),s)?new Su(u):null}_adjustIndex(i,s=0){return i??this.length+s}};function Qb(n){return n[8]}function Qy(n){return n[8]||(n[8]=[])}function e1(n,i){let s;const u=i[n.index];if(mr(u))s=u;else{let h;if(8&n.type)h=Ji(u);else{const _=i[11];h=_.createComment("");const w=Ts(n,i);$l(_,wh(_,w),h,function Dv(n,i){return n.nextSibling(i)}(_,w),!1)}i[n.index]=s=rp(u,i,h,n),Jl(i,s)}return new Kb(s,n,i)}class eb{constructor(i){this.queryList=i,this.matches=null}clone(){return new eb(this.queryList)}setDirty(){this.queryList.setDirty()}}class tb{constructor(i=[]){this.queries=i}createEmbeddedView(i){const s=i.queries;if(null!==s){const u=null!==i.contentQueries?i.contentQueries[0]:s.length,h=[];for(let _=0;_<u;_++){const w=s.getByIndex(_);h.push(this.queries[w.indexInDeclarationView].clone())}return new tb(h)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let s=0;s<this.queries.length;s++)null!==u1(i,s).matches&&this.queries[s].setDirty()}}class t1{constructor(i,s,u=null){this.predicate=i,this.flags=s,this.read=u}}class nb{constructor(i=[]){this.queries=i}elementStart(i,s){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(i,s)}elementEnd(i){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(i)}embeddedTView(i){let s=null;for(let u=0;u<this.length;u++){const h=null!==s?s.length:0,_=this.getByIndex(u).embeddedTView(i,h);_&&(_.indexInDeclarationView=u,null!==s?s.push(_):s=[_])}return null!==s?new nb(s):null}template(i,s){for(let u=0;u<this.queries.length;u++)this.queries[u].template(i,s)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class ib{constructor(i,s=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(i,s){this.isApplyingToNode(s)&&this.matchTNode(i,s)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,s){this.elementStart(i,s)}embeddedTView(i,s){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,s),new ib(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let u=i.parent;for(;null!==u&&8&u.type&&u.index!==s;)u=u.parent;return s===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(i,s){const u=this.metadata.predicate;if(Array.isArray(u))for(let h=0;h<u.length;h++){const _=u[h];this.matchTNodeWithReadOption(i,s,Fx(s,_)),this.matchTNodeWithReadOption(i,s,Yc(s,i,_,!1,!1))}else u===U0?4&s.type&&this.matchTNodeWithReadOption(i,s,-1):this.matchTNodeWithReadOption(i,s,Yc(s,i,u,!1,!1))}matchTNodeWithReadOption(i,s,u){if(null!==u){const h=this.metadata.read;if(null!==h)if(h===hh||h===cy||h===U0&&4&s.type)this.addMatch(s.index,-2);else{const _=Yc(s,i,h,!1,!1);null!==_&&this.addMatch(s.index,_)}else this.addMatch(s.index,u)}}addMatch(i,s){null===this.matches?this.matches=[i,s]:this.matches.push(i,s)}}function Fx(n,i){const s=n.localNames;if(null!==s)for(let u=0;u<s.length;u+=2)if(s[u]===i)return s[u+1];return null}function Bx(n,i,s,u){return-1===s?function kx(n,i){return 11&n.type?gd(n,i):4&n.type?ly(n,i):null}(i,n):-2===s?function Vx(n,i,s){return s===hh?gd(i,n):s===U0?ly(i,n):s===cy?e1(i,n):void 0}(n,i,u):Qa(n,n[1],s,i)}function n1(n,i,s,u){const h=i[19].queries[u];if(null===h.matches){const _=n.data,w=s.matches,A=[];for(let O=0;O<w.length;O+=2){const H=w[O];A.push(H<0?null:Bx(i,_[H],w[O+1],s.metadata.read))}h.matches=A}return h.matches}function rb(n,i,s,u){const h=n.queries.getByIndex(s),_=h.matches;if(null!==_){const w=n1(n,i,h,s);for(let A=0;A<_.length;A+=2){const O=_[A];if(O>0)u.push(w[A/2]);else{const H=_[A+1],Y=i[-O];for(let ne=10;ne<Y.length;ne++){const me=Y[ne];me[17]===me[3]&&rb(me[1],me,H,u)}if(null!==Y[9]){const ne=Y[9];for(let me=0;me<ne.length;me++){const Me=ne[me];rb(Me[1],Me,H,u)}}}}}return u}function r1(n){const i=it(),s=ti(),u=ae();gc(u+1);const h=u1(s,u);if(n.dirty&&B(i)===(2==(2&h.metadata.flags))){if(null===h.matches)n.reset([]);else{const _=h.crossesNgTemplate?rb(s,i,u,[]):n1(s,i,h,u);n.reset(_,fv),n.notifyOnChanges()}return!0}return!1}function s1(n,i,s){const u=ti();u.firstCreatePass&&(c1(u,new t1(n,i,s),-1),2==(2&i)&&(u.staticViewQueries=!0)),l1(u,it(),i)}function o1(n,i,s,u){const h=ti();if(h.firstCreatePass){const _=Yi();c1(h,new t1(i,s,u),_.index),function Hx(n,i){const s=n.contentQueries||(n.contentQueries=[]);i!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,i)}(h,n),2==(2&s)&&(h.staticContentQueries=!0)}l1(h,it(),s)}function a1(){return function Ux(n,i){return n[19].queries[i].queryList}(it(),ae())}function l1(n,i,s){const u=new Ky(4==(4&s));wu(n,i,u,u.destroy),null===i[19]&&(i[19]=new tb),i[19].queries.push(new eb(u))}function c1(n,i,s){null===n.queries&&(n.queries=new nb),n.queries.track(new ib(i,s))}function u1(n,i){return n.queries.getByIndex(i)}function d1(n,i){return ly(n,i)}function Tm(n){const i=mi(n)||Zi(n)||tr(n);return null!==i&&i.standalone}function dy(...n){}const N1=new Ei("Application Initializer");let hy=(()=>{class n{constructor(s){this.appInits=s,this.resolve=dy,this.reject=dy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,h)=>{this.resolve=u,this.reject=h})}runInitializers(){if(this.initialized)return;const s=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const _=this.appInits[h]();if(o(_))s.push(_);else if(x(_)){const w=new Promise((A,O)=>{_.subscribe({complete:A,error:O})});s.push(w)}}Promise.all(s).then(()=>{u()}).catch(h=>{this.reject(h)}),0===s.length&&u(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(vr(N1,8))},n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const I1=new Ei("AppId",{providedIn:"root",factory:function R1(){return`${cb()}${cb()}${cb()}`}});function cb(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const O1=new Ei("Platform Initializer"),aw=new Ei("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),P1=new Ei("appBootstrapListener");let lw=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const fy=new Ei("LocaleId",{providedIn:"root",factory:()=>Gl(fy,on.Optional|on.SkipSelf)||function cw(){return typeof $localize<"u"&&$localize.locale||Qh}()}),uw=new Ei("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class dw{constructor(i,s){this.ngModuleFactory=i,this.componentFactories=s}}let hw=(()=>{class n{compileModuleSync(s){return new yi(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const u=this.compileModuleSync(s),_=Na(Ti(s).declarations).reduce((w,A)=>{const O=mi(A);return O&&w.push(new Eu(O)),w},[]);return new dw(u,_)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const gw=(()=>Promise.resolve(0))();function ub(n){typeof Zone>"u"?gw.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class bl{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Gu(!1),this.onMicrotaskEmpty=new Gu(!1),this.onStable=new Gu(!1),this.onError=new Gu(!1),typeof Zone>"u")throw new ke(908,!1);Zone.assertZonePatched();const h=this;if(h._nesting=0,h._outer=h._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const _=Zone.AsyncStackTaggingZoneSpec;h._inner=h._inner.fork(new _("Angular"))}Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!u&&s,h.shouldCoalesceRunChangeDetection=u,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function mw(){let n=Lt.requestAnimationFrame,i=Lt.cancelAnimationFrame;if(typeof Zone<"u"&&n&&i){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const u=i[Zone.__symbol__("OriginalDelegate")];u&&(i=u)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function yw(n){const i=()=>{!function vw(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Lt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,hb(n),n.isCheckStableRunning=!0,db(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),hb(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,u,h,_,w,A)=>{try{return k1(n),s.invokeTask(h,_,w,A)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||n.shouldCoalesceRunChangeDetection)&&i(),B1(n)}},onInvoke:(s,u,h,_,w,A,O)=>{try{return k1(n),s.invoke(h,_,w,A,O)}finally{n.shouldCoalesceRunChangeDetection&&i(),B1(n)}},onHasTask:(s,u,h,_)=>{s.hasTask(h,_),u===h&&("microTask"==_.change?(n._hasPendingMicrotasks=_.microTask,hb(n),db(n)):"macroTask"==_.change&&(n.hasPendingMacrotasks=_.macroTask))},onHandleError:(s,u,h,_)=>(s.handleError(h,_),n.runOutsideAngular(()=>n.onError.emit(_)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!bl.isInAngularZone())throw new ke(909,!1)}static assertNotInAngularZone(){if(bl.isInAngularZone())throw new ke(909,!1)}run(i,s,u){return this._inner.run(i,s,u)}runTask(i,s,u,h){const _=this._inner,w=_.scheduleEventTask("NgZoneEvent: "+h,i,_w,dy,dy);try{return _.runTask(w,s,u)}finally{_.cancelTask(w)}}runGuarded(i,s,u){return this._inner.runGuarded(i,s,u)}runOutsideAngular(i){return this._outer.run(i)}}const _w={};function db(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function hb(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function k1(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function B1(n){n._nesting--,db(n)}class bw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Gu,this.onMicrotaskEmpty=new Gu,this.onStable=new Gu,this.onError=new Gu}run(i,s,u){return i.apply(s,u)}runGuarded(i,s,u){return i.apply(s,u)}runOutsideAngular(i){return i()}runTask(i,s,u,h){return i.apply(s,u)}}const V1=new Ei(""),U1=new Ei("");let fb,xw=(()=>{class n{constructor(s,u,h){this._ngZone=s,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,fb||(function ww(n){fb=n}(h),h.addToWindow(u)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{bl.assertNotInAngularZone(),ub(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ub(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(s)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,u,h){let _=-1;u&&u>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==_),s(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:s,timeoutId:_,updateCb:h})}whenStable(s,u,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,u,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,u,h){return[]}}return n.\u0275fac=function(s){return new(s||n)(vr(bl),vr(H1),vr(U1))},n.\u0275prov=oe({token:n,factory:n.\u0275fac}),n})(),H1=(()=>{class n{constructor(){this._applications=new Map}registerApplication(s,u){this._applications.set(s,u)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,u=!0){return fb?.findTestabilityInTree(this,s,u)??null}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),ef=null;const G1=new Ei("AllowMultipleToken"),pb=new Ei("PlatformDestroyListeners");class Cw{constructor(i,s){this.name=i,this.token=s}}function W1(n,i,s=[]){const u=`Platform: ${i}`,h=new Ei(u);return(_=[])=>{let w=gb();if(!w||w.injector.get(G1,!1)){const A=[...s,..._,{provide:h,useValue:!0}];n?n(A):function Sw(n){if(ef&&!ef.get(G1,!1))throw new ke(400,!1);ef=n;const i=n.get($1);(function z1(n){const i=n.get(O1,null);i&&i.forEach(s=>s())})(n)}(function j1(n=[],i){return hu.create({name:i,providers:[{provide:Af,useValue:"platform"},{provide:pb,useValue:new Set([()=>ef=null])},...n]})}(A,u))}return function Tw(n){const i=gb();if(!i)throw new ke(401,!1);return i}()}}function gb(){return ef?.get($1)??null}let $1=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,u){const h=function Aw(n,i){let s;return s="noop"===n?new bw:("zone.js"===n?void 0:n)||new bl(i),s}(u?.ngZone,function Y1(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(u)),_=[{provide:bl,useValue:h}];return h.run(()=>{const w=hu.create({providers:_,parent:this.injector,name:s.moduleType.name}),A=s.create(w),O=A.injector.get(Aa,null);if(!O)throw new ke(402,!1);return h.runOutsideAngular(()=>{const H=h.onError.subscribe({next:Y=>{O.handleError(Y)}});A.onDestroy(()=>{gy(this._modules,A),H.unsubscribe()})}),function q1(n,i,s){try{const u=s();return o(u)?u.catch(h=>{throw i.runOutsideAngular(()=>n.handleError(h)),h}):u}catch(u){throw i.runOutsideAngular(()=>n.handleError(u)),u}}(O,h,()=>{const H=A.injector.get(hy);return H.runInitializers(),H.donePromise.then(()=>(d(A.injector.get(fy,Qh)||Qh),this._moduleDoBootstrap(A),A))})})}bootstrapModule(s,u=[]){const h=X1({},u);return function Dw(n,i,s){const u=new yi(s);return Promise.resolve(u)}(0,0,s).then(_=>this.bootstrapModuleFactory(_,h))}_moduleDoBootstrap(s){const u=s.injector.get(py);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(h=>u.bootstrap(h));else{if(!s.instance.ngDoBootstrap)throw new ke(403,!1);s.instance.ngDoBootstrap(u)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ke(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const s=this._injector.get(pb,null);s&&(s.forEach(u=>u()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(vr(hu))},n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function X1(n,i){return Array.isArray(i)?i.reduce(X1,n):{...n,...i}}let py=(()=>{class n{constructor(s,u,h){this._zone=s,this._injector=u,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new xe.y(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),w=new xe.y(A=>{let O;this._zone.runOutsideAngular(()=>{O=this._zone.onStable.subscribe(()=>{bl.assertNotInAngularZone(),ub(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const H=this._zone.onUnstable.subscribe(()=>{bl.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{O.unsubscribe(),H.unsubscribe()}});this.isStable=(0,Se.T)(_,w.pipe((0,_e.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,u){const h=s instanceof f_;if(!this._injector.get(hy).done)throw!h&&Tm(s),new ke(405,false);let w;w=h?s:this._injector.get(dh).resolveComponentFactory(s),this.componentTypes.push(w.componentType);const A=function Mw(n){return n.isBoundToModule}(w)?void 0:this._injector.get(Jn),H=w.create(hu.NULL,[],u||w.selector,A),Y=H.location.nativeElement,ne=H.injector.get(V1,null);return ne?.registerApplication(Y),H.onDestroy(()=>{this.detachView(H.hostView),gy(this.components,H),ne?.unregisterApplication(Y)}),this._loadComponent(H),H}tick(){if(this._runningTick)throw new ke(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const u=s;this._views.push(u),u.attachToAppRef(this)}detachView(s){const u=s;gy(this._views,u),u.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(P1,[]).concat(this._bootstrapListeners).forEach(h=>h(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>gy(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new ke(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(s){return new(s||n)(vr(bl),vr(lu),vr(Aa))},n.\u0275prov=oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function gy(n,i){const s=n.indexOf(i);s>-1&&n.splice(s,1)}let J1=!0;function Iw(){J1=!1}let Rw=(()=>{class n{}return n.__NG_ELEMENT_ID__=Ow,n})();function Ow(n){return function Pw(n,i,s){if(ga(n)&&!s){const u=ms(n.index,i);return new Su(u,u)}return 47&n.type?new Su(i[16],i):null}(Yi(),it(),16==(16&n))}class nx{constructor(){}supports(i){return fl(i)}create(i){return new Uw(i)}}const Vw=(n,i)=>i;class Uw{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||Vw}forEachItem(i){let s;for(s=this._itHead;null!==s;s=s._next)i(s)}forEachOperation(i){let s=this._itHead,u=this._removalsHead,h=0,_=null;for(;s||u;){const w=!u||s&&s.currentIndex<rx(u,h,_)?s:u,A=rx(w,h,_),O=w.currentIndex;if(w===u)h--,u=u._nextRemoved;else if(s=s._next,null==w.previousIndex)h++;else{_||(_=[]);const H=A-h,Y=O-h;if(H!=Y){for(let me=0;me<H;me++){const Me=me<_.length?_[me]:_[me]=0,ot=Me+me;Y<=ot&&ot<H&&(_[me]=Me+1)}_[w.previousIndex]=Y-H}}A!==O&&i(w,A,O)}}forEachPreviousItem(i){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)i(s)}forEachAddedItem(i){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)i(s)}forEachMovedItem(i){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)i(s)}forEachRemovedItem(i){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)i(s)}forEachIdentityChange(i){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)i(s)}diff(i){if(null==i&&(i=[]),!fl(i))throw new ke(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let h,_,w,s=this._itHead,u=!1;if(Array.isArray(i)){this.length=i.length;for(let A=0;A<this.length;A++)_=i[A],w=this._trackByFn(A,_),null!==s&&Object.is(s.trackById,w)?(u&&(s=this._verifyReinsertion(s,_,w,A)),Object.is(s.item,_)||this._addIdentityChange(s,_)):(s=this._mismatch(s,_,w,A),u=!0),s=s._next}else h=0,function pp(n,i){if(Array.isArray(n))for(let s=0;s<n.length;s++)i(n[s]);else{const s=n[Ql()]();let u;for(;!(u=s.next()).done;)i(u.value)}}(i,A=>{w=this._trackByFn(h,A),null!==s&&Object.is(s.trackById,w)?(u&&(s=this._verifyReinsertion(s,A,w,h)),Object.is(s.item,A)||this._addIdentityChange(s,A)):(s=this._mismatch(s,A,w,h),u=!0),s=s._next,h++}),this.length=h;return this._truncate(s),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,s,u,h){let _;return null===i?_=this._itTail:(_=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(i.item,s)||this._addIdentityChange(i,s),this._reinsertAfter(i,_,h)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(u,h))?(Object.is(i.item,s)||this._addIdentityChange(i,s),this._moveAfter(i,_,h)):i=this._addAfter(new Hw(s,u),_,h),i}_verifyReinsertion(i,s,u,h){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==_?i=this._reinsertAfter(_,i._prev,h):i.currentIndex!=h&&(i.currentIndex=h,this._addToMoves(i,h)),i}_truncate(i){for(;null!==i;){const s=i._next;this._addToRemovals(this._unlink(i)),i=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,s,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const h=i._prevRemoved,_=i._nextRemoved;return null===h?this._removalsHead=_:h._nextRemoved=_,null===_?this._removalsTail=h:_._prevRemoved=h,this._insertAfter(i,s,u),this._addToMoves(i,u),i}_moveAfter(i,s,u){return this._unlink(i),this._insertAfter(i,s,u),this._addToMoves(i,u),i}_addAfter(i,s,u){return this._insertAfter(i,s,u),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,s,u){const h=null===s?this._itHead:s._next;return i._next=h,i._prev=s,null===h?this._itTail=i:h._prev=i,null===s?this._itHead=i:s._next=i,null===this._linkedRecords&&(this._linkedRecords=new ix),this._linkedRecords.put(i),i.currentIndex=u,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const s=i._prev,u=i._next;return null===s?this._itHead=u:s._next=u,null===u?this._itTail=s:u._prev=s,i}_addToMoves(i,s){return i.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ix),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,s){return i.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class Hw{constructor(i,s){this.item=i,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Gw{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,s){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===s||s<=u.currentIndex)&&Object.is(u.trackById,i))return u;return null}remove(i){const s=i._prevDup,u=i._nextDup;return null===s?this._head=u:s._nextDup=u,null===u?this._tail=s:u._prevDup=s,null===this._head}}class ix{constructor(){this.map=new Map}put(i){const s=i.trackById;let u=this.map.get(s);u||(u=new Gw,this.map.set(s,u)),u.add(i)}get(i,s){const h=this.map.get(i);return h?h.get(i,s):null}remove(i){const s=i.trackById;return this.map.get(s).remove(i)&&this.map.delete(s),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function rx(n,i,s){const u=n.previousIndex;if(null===u)return u;let h=0;return s&&u<s.length&&(h=s[u]),u+i+h}class sx{constructor(){}supports(i){return i instanceof Map||gp(i)}create(){return new zw}}class zw{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let s;for(s=this._mapHead;null!==s;s=s._next)i(s)}forEachPreviousItem(i){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)i(s)}forEachChangedItem(i){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)i(s)}forEachAddedItem(i){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)i(s)}forEachRemovedItem(i){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)i(s)}diff(i){if(i){if(!(i instanceof Map||gp(i)))throw new ke(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(i,(u,h)=>{if(s&&s.key===h)this._maybeAddToChanges(s,u),this._appendAfter=s,s=s._next;else{const _=this._getOrCreateRecordForKey(h,u);s=this._insertBeforeOrAppend(s,_)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let u=s;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,s){if(i){const u=i._prev;return s._next=i,s._prev=u,i._prev=s,u&&(u._next=s),i===this._mapHead&&(this._mapHead=s),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(i,s){if(this._records.has(i)){const h=this._records.get(i);this._maybeAddToChanges(h,s);const _=h._prev,w=h._next;return _&&(_._next=w),w&&(w._prev=_),h._next=null,h._prev=null,h}const u=new Ww(i);return this._records.set(i,u),u.currentValue=s,this._addToAdditions(u),u}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,s){Object.is(s,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=s,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,s){i instanceof Map?i.forEach(s):Object.keys(i).forEach(u=>s(i[u],u))}}class Ww{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ox(){return new bb([new nx])}let bb=(()=>{class n{constructor(s){this.factories=s}static create(s,u){if(null!=u){const h=u.factories.slice();s=s.concat(h)}return new n(s)}static extend(s){return{provide:n,useFactory:u=>n.create(s,u||ox()),deps:[[n,new Ar,new co]]}}find(s){const u=this.factories.find(h=>h.supports(s));if(null!=u)return u;throw new ke(901,!1)}}return n.\u0275prov=oe({token:n,providedIn:"root",factory:ox}),n})();function ax(){return new xb([new sx])}let xb=(()=>{class n{constructor(s){this.factories=s}static create(s,u){if(u){const h=u.factories.slice();s=s.concat(h)}return new n(s)}static extend(s){return{provide:n,useFactory:u=>n.create(s,u||ax()),deps:[[n,new Ar,new co]]}}find(s){const u=this.factories.find(h=>h.supports(s));if(u)return u;throw new ke(901,!1)}}return n.\u0275prov=oe({token:n,providedIn:"root",factory:ax}),n})();const Yw=W1(null,"core",[]);let qw=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(vr(py))},n.\u0275mod=_o({type:n}),n.\u0275inj=Le({}),n})();function Xw(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function Jw(n,i){const s=mi(n),u=i.elementInjector||Nf();return new Eu(s).create(u,i.projectableNodes,i.hostElement,i.environmentInjector)}},1481:(an,qe,$)=>{$.d(qe,{Dx:()=>Hi,b2:()=>Eo,q6:()=>on});var U=$(6895),v=$(4650);class xe extends U.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Se extends xe{static makeCurrent(){(0,U.HT)(new Se)}onAndCancel(pe,le,Ee){return pe.addEventListener(le,Ee,!1),()=>{pe.removeEventListener(le,Ee,!1)}}dispatchEvent(pe,le){pe.dispatchEvent(le)}remove(pe){pe.parentNode&&pe.parentNode.removeChild(pe)}createElement(pe,le){return(le=le||this.getDefaultDocument()).createElement(pe)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(pe){return pe.nodeType===Node.ELEMENT_NODE}isShadowRoot(pe){return pe instanceof DocumentFragment}getGlobalEventTarget(pe,le){return"window"===le?window:"document"===le?pe:"body"===le?pe.body:null}getBaseHref(pe){const le=function Te(){return _e=_e||document.querySelector("base"),_e?_e.getAttribute("href"):null}();return null==le?null:function Ve(be){rt=rt||document.createElement("a"),rt.setAttribute("href",be);const pe=rt.pathname;return"/"===pe.charAt(0)?pe:`/${pe}`}(le)}resetBaseElement(){_e=null}getUserAgent(){return window.navigator.userAgent}getCookie(pe){return(0,U.Mx)(document.cookie,pe)}}let rt,_e=null;const Qe=new v.OlP("TRANSITION_ID"),ze=[{provide:v.ip1,useFactory:function dt(be,pe,le){return()=>{le.get(v.CZH).donePromise.then(()=>{const Ee=(0,U.q)(),Ye=pe.querySelectorAll(`style[ng-transition="${be}"]`);for(let bn=0;bn<Ye.length;bn++)Ee.remove(Ye[bn])})}},deps:[Qe,U.K0,v.zs3],multi:!0}];let Gt=(()=>{class be{build(){return new XMLHttpRequest}}return be.\u0275fac=function(le){return new(le||be)},be.\u0275prov=v.Yz7({token:be,factory:be.\u0275fac}),be})();const at=new v.OlP("EventManagerPlugins");let ke=(()=>{class be{constructor(le,Ee){this._zone=Ee,this._eventNameToPlugin=new Map,le.forEach(Ye=>Ye.manager=this),this._plugins=le.slice().reverse()}addEventListener(le,Ee,Ye){return this._findPluginFor(Ee).addEventListener(le,Ee,Ye)}addGlobalEventListener(le,Ee,Ye){return this._findPluginFor(Ee).addGlobalEventListener(le,Ee,Ye)}getZone(){return this._zone}_findPluginFor(le){const Ee=this._eventNameToPlugin.get(le);if(Ee)return Ee;const Ye=this._plugins;for(let bn=0;bn<Ye.length;bn++){const qn=Ye[bn];if(qn.supports(le))return this._eventNameToPlugin.set(le,qn),qn}throw new Error(`No event manager plugin found for event ${le}`)}}return be.\u0275fac=function(le){return new(le||be)(v.LFG(at),v.LFG(v.R0b))},be.\u0275prov=v.Yz7({token:be,factory:be.\u0275fac}),be})();class zt{constructor(pe){this._doc=pe}addGlobalEventListener(pe,le,Ee){const Ye=(0,U.q)().getGlobalEventTarget(this._doc,pe);if(!Ye)throw new Error(`Unsupported event target ${Ye} for event ${le}`);return this.addEventListener(Ye,le,Ee)}}let lt=(()=>{class be{constructor(){this._stylesSet=new Set}addStyles(le){const Ee=new Set;le.forEach(Ye=>{this._stylesSet.has(Ye)||(this._stylesSet.add(Ye),Ee.add(Ye))}),this.onStylesAdded(Ee)}onStylesAdded(le){}getAllStyles(){return Array.from(this._stylesSet)}}return be.\u0275fac=function(le){return new(le||be)},be.\u0275prov=v.Yz7({token:be,factory:be.\u0275fac}),be})(),Dt=(()=>{class be extends lt{constructor(le){super(),this._doc=le,this._hostNodes=new Map,this._hostNodes.set(le.head,[])}_addStylesToHost(le,Ee,Ye){le.forEach(bn=>{const qn=this._doc.createElement("style");qn.textContent=bn,Ye.push(Ee.appendChild(qn))})}addHost(le){const Ee=[];this._addStylesToHost(this._stylesSet,le,Ee),this._hostNodes.set(le,Ee)}removeHost(le){const Ee=this._hostNodes.get(le);Ee&&Ee.forEach(sn),this._hostNodes.delete(le)}onStylesAdded(le){this._hostNodes.forEach((Ee,Ye)=>{this._addStylesToHost(le,Ye,Ee)})}ngOnDestroy(){this._hostNodes.forEach(le=>le.forEach(sn))}}return be.\u0275fac=function(le){return new(le||be)(v.LFG(U.K0))},be.\u0275prov=v.Yz7({token:be,factory:be.\u0275fac}),be})();function sn(be){(0,U.q)().remove(be)}const $n={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Tt=/%COMP%/g;function hn(be,pe,le){for(let Ee=0;Ee<pe.length;Ee++){let Ye=pe[Ee];Array.isArray(Ye)?hn(be,Ye,le):(Ye=Ye.replace(Tt,be),le.push(Ye))}return le}function _n(be){return pe=>{if("__ngUnwrap__"===pe)return be;!1===be(pe)&&(pe.preventDefault(),pe.returnValue=!1)}}let Kt=(()=>{class be{constructor(le,Ee,Ye){this.eventManager=le,this.sharedStylesHost=Ee,this.appId=Ye,this.rendererByCompId=new Map,this.defaultRenderer=new Ce(le)}createRenderer(le,Ee){if(!le||!Ee)return this.defaultRenderer;switch(Ee.encapsulation){case v.ifc.Emulated:{let Ye=this.rendererByCompId.get(Ee.id);return Ye||(Ye=new yt(this.eventManager,this.sharedStylesHost,Ee,this.appId),this.rendererByCompId.set(Ee.id,Ye)),Ye.applyToHost(le),Ye}case 1:case v.ifc.ShadowDom:return new $e(this.eventManager,this.sharedStylesHost,le,Ee);default:if(!this.rendererByCompId.has(Ee.id)){const Ye=hn(Ee.id,Ee.styles,[]);this.sharedStylesHost.addStyles(Ye),this.rendererByCompId.set(Ee.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return be.\u0275fac=function(le){return new(le||be)(v.LFG(ke),v.LFG(Dt),v.LFG(v.AFp))},be.\u0275prov=v.Yz7({token:be,factory:be.\u0275fac}),be})();class Ce{constructor(pe){this.eventManager=pe,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(pe,le){return le?document.createElementNS($n[le]||le,pe):document.createElement(pe)}createComment(pe){return document.createComment(pe)}createText(pe){return document.createTextNode(pe)}appendChild(pe,le){(et(pe)?pe.content:pe).appendChild(le)}insertBefore(pe,le,Ee){pe&&(et(pe)?pe.content:pe).insertBefore(le,Ee)}removeChild(pe,le){pe&&pe.removeChild(le)}selectRootElement(pe,le){let Ee="string"==typeof pe?document.querySelector(pe):pe;if(!Ee)throw new Error(`The selector "${pe}" did not match any elements`);return le||(Ee.textContent=""),Ee}parentNode(pe){return pe.parentNode}nextSibling(pe){return pe.nextSibling}setAttribute(pe,le,Ee,Ye){if(Ye){le=Ye+":"+le;const bn=$n[Ye];bn?pe.setAttributeNS(bn,le,Ee):pe.setAttribute(le,Ee)}else pe.setAttribute(le,Ee)}removeAttribute(pe,le,Ee){if(Ee){const Ye=$n[Ee];Ye?pe.removeAttributeNS(Ye,le):pe.removeAttribute(`${Ee}:${le}`)}else pe.removeAttribute(le)}addClass(pe,le){pe.classList.add(le)}removeClass(pe,le){pe.classList.remove(le)}setStyle(pe,le,Ee,Ye){Ye&(v.JOm.DashCase|v.JOm.Important)?pe.style.setProperty(le,Ee,Ye&v.JOm.Important?"important":""):pe.style[le]=Ee}removeStyle(pe,le,Ee){Ee&v.JOm.DashCase?pe.style.removeProperty(le):pe.style[le]=""}setProperty(pe,le,Ee){pe[le]=Ee}setValue(pe,le){pe.nodeValue=le}listen(pe,le,Ee){return"string"==typeof pe?this.eventManager.addGlobalEventListener(pe,le,_n(Ee)):this.eventManager.addEventListener(pe,le,_n(Ee))}}function et(be){return"TEMPLATE"===be.tagName&&void 0!==be.content}class yt extends Ce{constructor(pe,le,Ee,Ye){super(pe),this.component=Ee;const bn=hn(Ye+"-"+Ee.id,Ee.styles,[]);le.addStyles(bn),this.contentAttr=function jt(be){return"_ngcontent-%COMP%".replace(Tt,be)}(Ye+"-"+Ee.id),this.hostAttr=function ln(be){return"_nghost-%COMP%".replace(Tt,be)}(Ye+"-"+Ee.id)}applyToHost(pe){super.setAttribute(pe,this.hostAttr,"")}createElement(pe,le){const Ee=super.createElement(pe,le);return super.setAttribute(Ee,this.contentAttr,""),Ee}}class $e extends Ce{constructor(pe,le,Ee,Ye){super(pe),this.sharedStylesHost=le,this.hostEl=Ee,this.shadowRoot=Ee.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const bn=hn(Ye.id,Ye.styles,[]);for(let qn=0;qn<bn.length;qn++){const gn=document.createElement("style");gn.textContent=bn[qn],this.shadowRoot.appendChild(gn)}}nodeOrShadowRoot(pe){return pe===this.hostEl?this.shadowRoot:pe}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(pe,le){return super.appendChild(this.nodeOrShadowRoot(pe),le)}insertBefore(pe,le,Ee){return super.insertBefore(this.nodeOrShadowRoot(pe),le,Ee)}removeChild(pe,le){return super.removeChild(this.nodeOrShadowRoot(pe),le)}parentNode(pe){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(pe)))}}let pn=(()=>{class be extends zt{constructor(le){super(le)}supports(le){return!0}addEventListener(le,Ee,Ye){return le.addEventListener(Ee,Ye,!1),()=>this.removeEventListener(le,Ee,Ye)}removeEventListener(le,Ee,Ye){return le.removeEventListener(Ee,Ye)}}return be.\u0275fac=function(le){return new(le||be)(v.LFG(U.K0))},be.\u0275prov=v.Yz7({token:be,factory:be.\u0275fac}),be})();const Xe=["alt","control","meta","shift"],oe={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},He={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Le={alt:be=>be.altKey,control:be=>be.ctrlKey,meta:be=>be.metaKey,shift:be=>be.shiftKey};let Ot=(()=>{class be extends zt{constructor(le){super(le)}supports(le){return null!=be.parseEventName(le)}addEventListener(le,Ee,Ye){const bn=be.parseEventName(Ee),qn=be.eventCallback(bn.fullKey,Ye,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,U.q)().onAndCancel(le,bn.domEventName,qn))}static parseEventName(le){const Ee=le.toLowerCase().split("."),Ye=Ee.shift();if(0===Ee.length||"keydown"!==Ye&&"keyup"!==Ye)return null;const bn=be._normalizeKey(Ee.pop());let qn="";if(Xe.forEach(gr=>{const Jr=Ee.indexOf(gr);Jr>-1&&(Ee.splice(Jr,1),qn+=gr+".")}),qn+=bn,0!=Ee.length||0===bn.length)return null;const gn={};return gn.domEventName=Ye,gn.fullKey=qn,gn}static getEventFullKey(le){let Ee="",Ye=function vn(be){let pe=be.key;if(null==pe){if(pe=be.keyIdentifier,null==pe)return"Unidentified";pe.startsWith("U+")&&(pe=String.fromCharCode(parseInt(pe.substring(2),16)),3===be.location&&He.hasOwnProperty(pe)&&(pe=He[pe]))}return oe[pe]||pe}(le);return Ye=Ye.toLowerCase()," "===Ye?Ye="space":"."===Ye&&(Ye="dot"),Xe.forEach(bn=>{bn!=Ye&&(0,Le[bn])(le)&&(Ee+=bn+".")}),Ee+=Ye,Ee}static eventCallback(le,Ee,Ye){return bn=>{be.getEventFullKey(bn)===le&&Ye.runGuarded(()=>Ee(bn))}}static _normalizeKey(le){return"esc"===le?"escape":le}}return be.\u0275fac=function(le){return new(le||be)(v.LFG(U.K0))},be.\u0275prov=v.Yz7({token:be,factory:be.\u0275fac}),be})();const on=(0,v.eFA)(v._c5,"browser",[{provide:v.Lbi,useValue:U.bD},{provide:v.g9A,useValue:function or(){Se.makeCurrent()},multi:!0},{provide:U.K0,useFactory:function $i(){return(0,v.RDi)(document),document},deps:[]}]),Ui=new v.OlP(""),So=[{provide:v.rWj,useClass:class Ue{addToWindow(pe){v.dqk.getAngularTestability=(Ee,Ye=!0)=>{const bn=pe.findTestabilityInTree(Ee,Ye);if(null==bn)throw new Error("Could not find testability for element.");return bn},v.dqk.getAllAngularTestabilities=()=>pe.getAllTestabilities(),v.dqk.getAllAngularRootElements=()=>pe.getAllRootElements(),v.dqk.frameworkStabilizers||(v.dqk.frameworkStabilizers=[]),v.dqk.frameworkStabilizers.push(Ee=>{const Ye=v.dqk.getAllAngularTestabilities();let bn=Ye.length,qn=!1;const gn=function(gr){qn=qn||gr,bn--,0==bn&&Ee(qn)};Ye.forEach(function(gr){gr.whenStable(gn)})})}findTestabilityInTree(pe,le,Ee){return null==le?null:pe.getTestability(le)??(Ee?(0,U.q)().isShadowRoot(le)?this.findTestabilityInTree(pe,le.host,!0):this.findTestabilityInTree(pe,le.parentElement,!0):null)}},deps:[]},{provide:v.lri,useClass:v.dDg,deps:[v.R0b,v.eoX,v.rWj]},{provide:v.dDg,useClass:v.dDg,deps:[v.R0b,v.eoX,v.rWj]}],Ur=[{provide:v.zSh,useValue:"root"},{provide:v.qLn,useFactory:function ji(){return new v.qLn},deps:[]},{provide:at,useClass:pn,multi:!0,deps:[U.K0,v.R0b,v.Lbi]},{provide:at,useClass:Ot,multi:!0,deps:[U.K0]},{provide:Kt,useClass:Kt,deps:[ke,Dt,v.AFp]},{provide:v.FYo,useExisting:Kt},{provide:lt,useExisting:Dt},{provide:Dt,useClass:Dt,deps:[U.K0]},{provide:ke,useClass:ke,deps:[at,v.R0b]},{provide:U.JF,useClass:Gt,deps:[]},[]];let Eo=(()=>{class be{constructor(le){}static withServerTransition(le){return{ngModule:be,providers:[{provide:v.AFp,useValue:le.appId},{provide:Qe,useExisting:v.AFp},ze]}}}return be.\u0275fac=function(le){return new(le||be)(v.LFG(Ui,12))},be.\u0275mod=v.oAB({type:be}),be.\u0275inj=v.cJS({providers:[...Ur,...So],imports:[U.ez,v.hGG]}),be})(),Hi=(()=>{class be{constructor(le){this._doc=le}getTitle(){return this._doc.title}setTitle(le){this._doc.title=le||""}}return be.\u0275fac=function(le){return new(le||be)(v.LFG(U.K0))},be.\u0275prov=v.Yz7({token:be,factory:function(le){let Ee=null;return Ee=le?new le:function ha(){return new Hi((0,v.LFG)(U.K0))}(),Ee},providedIn:"root"}),be})();typeof window<"u"&&window},1380:(an,qe,$)=>{$.d(qe,{gz:()=>Gr,m2:()=>mr,wm:()=>rd,wN:()=>Ol,F0:()=>lr,rH:()=>Ci,Bz:()=>Qd,lC:()=>Ji});var U=$(4650);const xe=(0,$(3888).d)(C=>function(){C(this),this.name="EmptyError",this.message="no elements in sequence"});var Se=$(2076),_e=$(9646),Te=$(1135),rt=$(9841),Ve=$(7272),Qe=$(9770),dt=$(9635),ze=$(2843),Ue=$(9751),Gt=$(515),at=$(4033),ke=$(7579),zt=$(6895),lt=$(9300),Dt=$(5698),sn=$(4482),$n=$(5403);function Tt(C){return(0,sn.e)((S,D)=>{let P=!1;S.subscribe((0,$n.x)(D,k=>{P=!0,D.next(k)},()=>{P||D.next(C),D.complete()}))})}function bt(C=Vt){return(0,sn.e)((S,D)=>{let P=!1;S.subscribe((0,$n.x)(D,k=>{P=!0,D.next(k)},()=>P?D.complete():D.error(C())))})}function Vt(){return new xe}var Nn=$(4671);function qt(C,S){const D=arguments.length>=2;return P=>P.pipe(C?(0,lt.h)((k,q)=>C(k,q,P)):Nn.y,(0,Dt.q)(1),D?Tt(S):bt(()=>new xe))}function jt(C,S,D,P,k){return(q,Q)=>{let he=D,Pe=S,ht=0;q.subscribe((0,$n.x)(Q,Pn=>{const Zt=ht++;Pe=he?C(Pe,Pn,Zt):(he=!0,Pn),P&&Q.next(Pe)},k&&(()=>{he&&Q.next(Pe),Q.complete()})))}}function ln(C,S){return(0,sn.e)(jt(C,S,arguments.length>=2,!0))}function hn(C){return C<=0?()=>Gt.E:(0,sn.e)((S,D)=>{let P=[];S.subscribe((0,$n.x)(D,k=>{P.push(k),C<P.length&&P.shift()},()=>{for(const k of P)D.next(k);D.complete()},void 0,()=>{P=null}))})}function _n(C,S){const D=arguments.length>=2;return P=>P.pipe(C?(0,lt.h)((k,q)=>C(k,q,P)):Nn.y,hn(1),D?Tt(S):bt(()=>new xe))}function Kt(C){return(0,sn.e)((S,D)=>{try{S.subscribe(D)}finally{D.add(C)}})}var Ce=$(4004),je=$(3900),nt=$(8675),et=$(5577),yt=$(4351),$e=$(8505),pn=$(262),Xe=$(9718),kt=$(8343),oe=$(8189),He=$(1481);const Le="primary";class Ot{constructor(S){this.params=S||{}}has(S){return Object.prototype.hasOwnProperty.call(this.params,S)}get(S){if(this.has(S)){const D=this.params[S];return Array.isArray(D)?D[0]:D}return null}getAll(S){if(this.has(S)){const D=this.params[S];return Array.isArray(D)?D:[D]}return[]}get keys(){return Object.keys(this.params)}}function vn(C){return new Ot(C)}function bi(C,S,D){const P=D.path.split("/");if(P.length>C.length||"full"===D.pathMatch&&(S.hasChildren()||P.length<C.length))return null;const k={};for(let q=0;q<P.length;q++){const Q=P[q],he=C[q];if(Q.startsWith(":"))k[Q.substring(1)]=he;else if(Q!==he.path)return null}return{consumed:C.slice(0,P.length),posParams:k}}function ci(C,S){const D=C?Object.keys(C):void 0,P=S?Object.keys(S):void 0;if(!D||!P||D.length!=P.length)return!1;let k;for(let q=0;q<D.length;q++)if(k=D[q],!or(C[k],S[k]))return!1;return!0}function or(C,S){if(Array.isArray(C)&&Array.isArray(S)){if(C.length!==S.length)return!1;const D=[...C].sort(),P=[...S].sort();return D.every((k,q)=>P[q]===k)}return C===S}function ji(C){return Array.prototype.concat.apply([],C)}function $i(C){return C.length>0?C[C.length-1]:null}function on(C,S){for(const D in C)C.hasOwnProperty(D)&&S(C[D],D)}function Ui(C){return(0,U.CqO)(C)?C:(0,U.QGY)(C)?(0,Se.D)(Promise.resolve(C)):(0,_e.of)(C)}const Eo={exact:function ha(C,S,D){if(!Hs(C.segments,S.segments)||!fa(C.segments,S.segments,D)||C.numberOfChildren!==S.numberOfChildren)return!1;for(const P in S.children)if(!C.children[P]||!ha(C.children[P],S.children[P],D))return!1;return!0},subset:Qt},Us={exact:function er(C,S){return ci(C,S)},subset:function Hi(C,S){return Object.keys(S).length<=Object.keys(C).length&&Object.keys(S).every(D=>or(C[D],S[D]))},ignored:()=>!0};function xr(C,S,D){return Eo[D.paths](C.root,S.root,D.matrixParams)&&Us[D.queryParams](C.queryParams,S.queryParams)&&!("exact"===D.fragment&&C.fragment!==S.fragment)}function Qt(C,S,D){return Lt(C,S,S.segments,D)}function Lt(C,S,D,P){if(C.segments.length>D.length){const k=C.segments.slice(0,D.length);return!(!Hs(k,D)||S.hasChildren()||!fa(k,D,P))}if(C.segments.length===D.length){if(!Hs(C.segments,D)||!fa(C.segments,D,P))return!1;for(const k in S.children)if(!C.children[k]||!Qt(C.children[k],S.children[k],P))return!1;return!0}{const k=D.slice(0,C.segments.length),q=D.slice(C.segments.length);return!!(Hs(C.segments,k)&&fa(C.segments,k,P)&&C.children[Le])&&Lt(C.children[Le],S,q,P)}}function fa(C,S,D){return S.every((P,k)=>Us[D](C[k].parameters,P.parameters))}class fi{constructor(S,D,P){this.root=S,this.queryParams=D,this.fragment=P}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=vn(this.queryParams)),this._queryParamMap}toString(){return Zr.serialize(this)}}class yn{constructor(S,D){this.segments=S,this.children=D,this.parent=null,on(D,(P,k)=>P.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Gs(this)}}class Bn{constructor(S,D){this.path=S,this.parameters=D}get parameterMap(){return this._parameterMap||(this._parameterMap=vn(this.parameters)),this._parameterMap}toString(){return Ss(this)}}function Hs(C,S){return C.length===S.length&&C.every((D,P)=>D.path===S[P].path)}let Ho=(()=>{class C{}return C.\u0275fac=function(D){return new(D||C)},C.\u0275prov=U.Yz7({token:C,factory:function(){return new ii},providedIn:"root"}),C})();class ii{parse(S){const D=new ri(S);return new fi(D.parseRootSegment(),D.parseQueryParams(),D.parseFragment())}serialize(S){const D=`/${yr(S.root,!0)}`,P=function mi(C){const S=Object.keys(C).map(D=>{const P=C[D];return Array.isArray(P)?P.map(k=>`${Qs(D)}=${Qs(k)}`).join("&"):`${Qs(D)}=${Qs(P)}`}).filter(D=>!!D);return S.length?`?${S.join("&")}`:""}(S.queryParams);return`${D}${P}${"string"==typeof S.fragment?`#${function Go(C){return encodeURI(C)}(S.fragment)}`:""}`}}const Zr=new ii;function Gs(C){return C.segments.map(S=>Ss(S)).join("/")}function yr(C,S){if(!C.hasChildren())return Gs(C);if(S){const D=C.children[Le]?yr(C.children[Le],!1):"",P=[];return on(C.children,(k,q)=>{q!==Le&&P.push(`${q}:${yr(k,!1)}`)}),P.length>0?`${D}(${P.join("//")})`:D}{const D=function Rn(C,S){let D=[];return on(C.children,(P,k)=>{k===Le&&(D=D.concat(S(P,k)))}),on(C.children,(P,k)=>{k!==Le&&(D=D.concat(S(P,k)))}),D}(C,(P,k)=>k===Le?[yr(C.children[Le],!1)]:[`${k}:${yr(P,!1)}`]);return 1===Object.keys(C.children).length&&null!=C.children[Le]?`${Gs(C)}/${D[0]}`:`${Gs(C)}/(${D.join("//")})`}}function zs(C){return encodeURIComponent(C).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Qs(C){return zs(C).replace(/%3B/gi,";")}function _o(C){return zs(C).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Rr(C){return decodeURIComponent(C)}function wr(C){return Rr(C.replace(/\+/g,"%20"))}function Ss(C){return`${_o(C.path)}${function Ua(C){return Object.keys(C).map(S=>`;${_o(S)}=${_o(C[S])}`).join("")}(C.parameters)}`}const Zi=/^[^\/()?;=#]+/;function tr(C){const S=C.match(Zi);return S?S[0]:""}const Ti=/^[^=?&#]+/,Wt=/^[^&#]+/;class ri{constructor(S){this.url=S,this.remaining=S}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new yn([],{}):new yn([],this.parseChildren())}parseQueryParams(){const S={};if(this.consumeOptional("?"))do{this.parseQueryParam(S)}while(this.consumeOptional("&"));return S}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const S=[];for(this.peekStartsWith("(")||S.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),S.push(this.parseSegment());let D={};this.peekStartsWith("/(")&&(this.capture("/"),D=this.parseParens(!0));let P={};return this.peekStartsWith("(")&&(P=this.parseParens(!1)),(S.length>0||Object.keys(D).length>0)&&(P[Le]=new yn(S,D)),P}parseSegment(){const S=tr(this.remaining);if(""===S&&this.peekStartsWith(";"))throw new U.vHH(4009,!1);return this.capture(S),new Bn(Rr(S),this.parseMatrixParams())}parseMatrixParams(){const S={};for(;this.consumeOptional(";");)this.parseParam(S);return S}parseParam(S){const D=tr(this.remaining);if(!D)return;this.capture(D);let P="";if(this.consumeOptional("=")){const k=tr(this.remaining);k&&(P=k,this.capture(P))}S[Rr(D)]=Rr(P)}parseQueryParam(S){const D=function hs(C){const S=C.match(Ti);return S?S[0]:""}(this.remaining);if(!D)return;this.capture(D);let P="";if(this.consumeOptional("=")){const Q=function Sn(C){const S=C.match(Wt);return S?S[0]:""}(this.remaining);Q&&(P=Q,this.capture(P))}const k=wr(D),q=wr(P);if(S.hasOwnProperty(k)){let Q=S[k];Array.isArray(Q)||(Q=[Q],S[k]=Q),Q.push(q)}else S[k]=q}parseParens(S){const D={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const P=tr(this.remaining),k=this.remaining[P.length];if("/"!==k&&")"!==k&&";"!==k)throw new U.vHH(4010,!1);let q;P.indexOf(":")>-1?(q=P.slice(0,P.indexOf(":")),this.capture(q),this.capture(":")):S&&(q=Le);const Q=this.parseChildren();D[q]=1===Object.keys(Q).length?Q[Le]:new yn([],Q),this.consumeOptional("//")}return D}peekStartsWith(S){return this.remaining.startsWith(S)}consumeOptional(S){return!!this.peekStartsWith(S)&&(this.remaining=this.remaining.substring(S.length),!0)}capture(S){if(!this.consumeOptional(S))throw new U.vHH(4011,!1)}}function be(C){return C.segments.length>0?new yn([],{[Le]:C}):C}function pe(C){const S={};for(const P of Object.keys(C.children)){const q=pe(C.children[P]);(q.segments.length>0||q.hasChildren())&&(S[P]=q)}return function le(C){if(1===C.numberOfChildren&&C.children[Le]){const S=C.children[Le];return new yn(C.segments.concat(S.segments),S.children)}return C}(new yn(C.segments,S))}function Ee(C){return C instanceof fi}function gr(C,S,D,P,k){if(0===D.length)return fs(S.root,S.root,S.root,P,k);const q=function js(C){if("string"==typeof C[0]&&1===C.length&&"/"===C[0])return new pa(!0,0,C);let S=0,D=!1;const P=C.reduce((k,q,Q)=>{if("object"==typeof q&&null!=q){if(q.outlets){const he={};return on(q.outlets,(Pe,ht)=>{he[ht]="string"==typeof Pe?Pe.split("/"):Pe}),[...k,{outlets:he}]}if(q.segmentPath)return[...k,q.segmentPath]}return"string"!=typeof q?[...k,q]:0===Q?(q.split("/").forEach((he,Pe)=>{0==Pe&&"."===he||(0==Pe&&""===he?D=!0:".."===he?S++:""!=he&&k.push(he))}),k):[...k,q]},[]);return new pa(D,S,P)}(D);return q.toRoot()?fs(S.root,S.root,new yn([],{}),P,k):function Q(Pe){const ht=function rc(C,S,D,P){if(C.isAbsolute)return new br(S.root,!0,0);if(-1===P)return new br(D,D===S.root,0);return function Di(C,S,D){let P=C,k=S,q=D;for(;q>k;){if(q-=k,P=P.parent,!P)throw new U.vHH(4005,!1);k=P.segments.length}return new br(P,!1,k-q)}(D,P+(Jr(C.commands[0])?0:1),C.numberOfDoubleDots)}(q,S,C.snapshot?._urlSegment,Pe),Pn=ht.processChildren?To(ht.segmentGroup,ht.index,q.commands):Dl(ht.segmentGroup,ht.index,q.commands);return fs(S.root,ht.segmentGroup,Pn,P,k)}(C.snapshot?._lastPathIndex)}function Jr(C){return"object"==typeof C&&null!=C&&!C.outlets&&!C.segmentPath}function Ws(C){return"object"==typeof C&&null!=C&&C.outlets}function fs(C,S,D,P,k){let Q,q={};P&&on(P,(Pe,ht)=>{q[ht]=Array.isArray(Pe)?Pe.map(Pn=>`${Pn}`):`${Pe}`}),Q=C===S?D:Dr(C,S,D);const he=be(pe(Q));return new fi(he,q,k)}function Dr(C,S,D){const P={};return on(C.children,(k,q)=>{P[q]=k===S?D:Dr(k,S,D)}),new yn(C.segments,P)}class pa{constructor(S,D,P){if(this.isAbsolute=S,this.numberOfDoubleDots=D,this.commands=P,S&&P.length>0&&Jr(P[0]))throw new U.vHH(4003,!1);const k=P.find(Ws);if(k&&k!==$i(P))throw new U.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class br{constructor(S,D,P){this.segmentGroup=S,this.processChildren=D,this.index=P}}function Dl(C,S,D){if(C||(C=new yn([],{})),0===C.segments.length&&C.hasChildren())return To(C,S,D);const P=function Ha(C,S,D){let P=0,k=S;const q={match:!1,pathIndex:0,commandIndex:0};for(;k<C.segments.length;){if(P>=D.length)return q;const Q=C.segments[k],he=D[P];if(Ws(he))break;const Pe=`${he}`,ht=P<D.length-1?D[P+1]:null;if(k>0&&void 0===Pe)break;if(Pe&&ht&&"object"==typeof ht&&void 0===ht.outlets){if(!ar(Pe,ht,Q))return q;P+=2}else{if(!ar(Pe,{},Q))return q;P++}k++}return{match:!0,pathIndex:k,commandIndex:P}}(C,S,D),k=D.slice(P.commandIndex);if(P.match&&P.pathIndex<C.segments.length){const q=new yn(C.segments.slice(0,P.pathIndex),{});return q.children[Le]=new yn(C.segments.slice(P.pathIndex),C.children),To(q,0,k)}return P.match&&0===k.length?new yn(C.segments,{}):P.match&&!C.hasChildren()?ps(C,S,D):P.match?To(C,0,k):ps(C,S,D)}function To(C,S,D){if(0===D.length)return new yn(C.segments,{});{const P=function wl(C){return Ws(C[0])?C[0].outlets:{[Le]:C}}(D),k={};return on(P,(q,Q)=>{"string"==typeof q&&(q=[q]),null!==q&&(k[Q]=Dl(C.children[Q],S,q))}),on(C.children,(q,Q)=>{void 0===P[Q]&&(k[Q]=q)}),new yn(C.segments,k)}}function ps(C,S,D){const P=C.segments.slice(0,S);let k=0;for(;k<D.length;){const q=D[k];if(Ws(q)){const Pe=zo(q.outlets);return new yn(P,Pe)}if(0===k&&Jr(D[0])){P.push(new Bn(C.segments[S].path,$s(D[0]))),k++;continue}const Q=Ws(q)?q.outlets[Le]:`${q}`,he=k<D.length-1?D[k+1]:null;Q&&he&&Jr(he)?(P.push(new Bn(Q,$s(he))),k+=2):(P.push(new Bn(Q,{})),k++)}return new yn(P,{})}function zo(C){const S={};return on(C,(D,P)=>{"string"==typeof D&&(D=[D]),null!==D&&(S[P]=ps(new yn([],{}),0,D))}),S}function $s(C){const S={};return on(C,(D,P)=>S[P]=`${D}`),S}function ar(C,S,D){return C==D.path&&ci(S,D.parameters)}class Ys{constructor(S,D){this.id=S,this.url=D}}class Mr extends Ys{constructor(S,D,P="imperative",k=null){super(S,D),this.type=0,this.navigationTrigger=P,this.restoredState=k}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class mr extends Ys{constructor(S,D,P){super(S,D),this.urlAfterRedirects=P,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class to extends Ys{constructor(S,D,P,k){super(S,D),this.reason=P,this.code=k,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ga extends Ys{constructor(S,D,P,k){super(S,D),this.error=P,this.target=k,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ma extends Ys{constructor(S,D,P,k){super(S,D),this.urlAfterRedirects=P,this.state=k,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qs extends Ys{constructor(S,D,P,k){super(S,D),this.urlAfterRedirects=P,this.state=k,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zu extends Ys{constructor(S,D,P,k,q){super(S,D),this.urlAfterRedirects=P,this.state=k,this.shouldActivate=q,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class tf extends Ys{constructor(S,D,P,k){super(S,D),this.urlAfterRedirects=P,this.state=k,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sc extends Ys{constructor(S,D,P,k){super(S,D),this.urlAfterRedirects=P,this.state=k,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wu{constructor(S){this.route=S,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ml{constructor(S){this.route=S,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ga{constructor(S){this.snapshot=S,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ju{constructor(S){this.snapshot=S,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hr{constructor(S){this.snapshot=S,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _a{constructor(S){this.snapshot=S,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Cl{constructor(S,D,P){this.routerEvent=S,this.position=D,this.anchor=P,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class oc{constructor(S){this._root=S}get root(){return this._root.value}parent(S){const D=this.pathFromRoot(S);return D.length>1?D[D.length-2]:null}children(S){const D=Yu(S,this._root);return D?D.children.map(P=>P.value):[]}firstChild(S){const D=Yu(S,this._root);return D&&D.children.length>0?D.children[0].value:null}siblings(S){const D=Gc(S,this._root);return D.length<2?[]:D[D.length-2].children.map(k=>k.value).filter(k=>k!==S)}pathFromRoot(S){return Gc(S,this._root).map(D=>D.value)}}function Yu(C,S){if(C===S.value)return S;for(const D of S.children){const P=Yu(C,D);if(P)return P}return null}function Gc(C,S){if(C===S.value)return[S];for(const D of S.children){const P=Gc(C,D);if(P.length)return P.unshift(S),P}return[]}class Wo{constructor(S,D){this.value=S,this.children=D}toString(){return`TreeNode(${this.value})`}}function gs(C){const S={};return C&&C.children.forEach(D=>S[D.value.outlet]=D),S}class Ai extends oc{constructor(S,D){super(S),this.snapshot=D,va(this,S)}toString(){return this.snapshot.toString()}}function qu(C,S){const D=function ac(C,S){const Q=new Kr([],{},{},"",{},Le,S,null,C.root,-1,{});return new Es("",new Wo(Q,[]))}(C,S),P=new Te.X([new Bn("",{})]),k=new Te.X({}),q=new Te.X({}),Q=new Te.X({}),he=new Te.X(""),Pe=new Gr(P,k,Q,he,q,Le,S,D.root);return Pe.snapshot=D.root,new Ai(new Wo(Pe,[]),D)}class Gr{constructor(S,D,P,k,q,Q,he,Pe){this.url=S,this.params=D,this.queryParams=P,this.fragment=k,this.data=q,this.outlet=Q,this.component=he,this._futureSnapshot=Pe}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ce.U)(S=>vn(S)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ce.U)(S=>vn(S)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function lc(C,S="emptyOnly"){const D=C.pathFromRoot;let P=0;if("always"!==S)for(P=D.length-1;P>=1;){const k=D[P],q=D[P-1];if(k.routeConfig&&""===k.routeConfig.path)P--;else{if(q.component)break;P--}}return function nf(C){return C.reduce((S,D)=>({params:{...S.params,...D.params},data:{...S.data,...D.data},resolve:{...D.data,...S.resolve,...D.routeConfig?.data,...D._resolvedData}}),{params:{},data:{},resolve:{}})}(D.slice(P))}class Kr{constructor(S,D,P,k,q,Q,he,Pe,ht,Pn,Zt,Xn){this.url=S,this.params=D,this.queryParams=P,this.fragment=k,this.data=q,this.outlet=Q,this.component=he,this.routeConfig=Pe,this._urlSegment=ht,this._lastPathIndex=Pn,this._correctedLastPathIndex=Xn??Pn,this._resolve=Zt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=vn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=vn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(P=>P.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Es extends oc{constructor(S,D){super(D),this.url=S,va(this,D)}toString(){return za(this._root)}}function va(C,S){S.value._routerState=C,S.children.forEach(D=>va(C,D))}function za(C){const S=C.children.length>0?` { ${C.children.map(za).join(", ")} } `:"";return`${C.value}${S}`}function ya(C){if(C.snapshot){const S=C.snapshot,D=C._futureSnapshot;C.snapshot=D,ci(S.queryParams,D.queryParams)||C.queryParams.next(D.queryParams),S.fragment!==D.fragment&&C.fragment.next(D.fragment),ci(S.params,D.params)||C.params.next(D.params),function Oi(C,S){if(C.length!==S.length)return!1;for(let D=0;D<C.length;++D)if(!ci(C[D],S[D]))return!1;return!0}(S.url,D.url)||C.url.next(D.url),ci(S.data,D.data)||C.data.next(D.data)}else C.snapshot=C._futureSnapshot,C.data.next(C._futureSnapshot.data)}function cc(C,S){const D=ci(C.params,S.params)&&function pr(C,S){return Hs(C,S)&&C.every((D,P)=>ci(D.parameters,S[P].parameters))}(C.url,S.url);return D&&!(!C.parent!=!S.parent)&&(!C.parent||cc(C.parent,S.parent))}function Ao(C,S,D){if(D&&C.shouldReuseRoute(S.value,D.value.snapshot)){const P=D.value;P._futureSnapshot=S.value;const k=function uc(C,S,D){return S.children.map(P=>{for(const k of D.children)if(C.shouldReuseRoute(P.value,k.value.snapshot))return Ao(C,P,k);return Ao(C,P)})}(C,S,D);return new Wo(P,k)}{if(C.shouldAttach(S.value)){const q=C.retrieve(S.value);if(null!==q){const Q=q.route;return Q.value._futureSnapshot=S.value,Q.children=S.children.map(he=>Ao(C,he)),Q}}const P=function zc(C){return new Gr(new Te.X(C.url),new Te.X(C.params),new Te.X(C.queryParams),new Te.X(C.fragment),new Te.X(C.data),C.outlet,C.component,C)}(S.value),k=S.children.map(q=>Ao(C,q));return new Wo(P,k)}}const dc="ngNavigationCancelingError";function Xu(C,S){const{redirectTo:D,navigationBehaviorOptions:P}=Ee(S)?{redirectTo:S,navigationBehaviorOptions:void 0}:S,k=Qr(!1,0,S);return k.url=D,k.navigationBehaviorOptions=P,k}function Qr(C,S,D){const P=new Error("NavigationCancelingError: "+(C||""));return P[dc]=!0,P.cancellationCode=S,D&&(P.url=D),P}function hc(C){return Yd(C)&&Ee(C.url)}function Yd(C){return C&&C[dc]}class Sl{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new El,this.attachRef=null}}let El=(()=>{class C{constructor(){this.contexts=new Map}onChildOutletCreated(D,P){const k=this.getOrCreateContext(D);k.outlet=P,this.contexts.set(D,k)}onChildOutletDestroyed(D){const P=this.getContext(D);P&&(P.outlet=null,P.attachRef=null)}onOutletDeactivated(){const D=this.contexts;return this.contexts=new Map,D}onOutletReAttached(D){this.contexts=D}getOrCreateContext(D){let P=this.getContext(D);return P||(P=new Sl,this.contexts.set(D,P)),P}getContext(D){return this.contexts.get(D)||null}}return C.\u0275fac=function(D){return new(D||C)},C.\u0275prov=U.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();const Wc=!1;let Ji=(()=>{class C{constructor(D,P,k,q,Q){this.parentContexts=D,this.location=P,this.changeDetector=q,this.environmentInjector=Q,this.activated=null,this._activatedRoute=null,this.activateEvents=new U.vpe,this.deactivateEvents=new U.vpe,this.attachEvents=new U.vpe,this.detachEvents=new U.vpe,this.name=k||Le,D.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const D=this.parentContexts.getContext(this.name);D&&D.route&&(D.attachRef?this.attach(D.attachRef,D.route):this.activateWith(D.route,D.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new U.vHH(4012,Wc);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new U.vHH(4012,Wc);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new U.vHH(4012,Wc);this.location.detach();const D=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(D.instance),D}attach(D,P){this.activated=D,this._activatedRoute=P,this.location.insert(D.hostView),this.attachEvents.emit(D.instance)}deactivate(){if(this.activated){const D=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(D)}}activateWith(D,P){if(this.isActivated)throw new U.vHH(4013,Wc);this._activatedRoute=D;const k=this.location,Q=D._futureSnapshot.component,he=this.parentContexts.getOrCreateContext(this.name).children,Pe=new vo(D,he,k.injector);if(P&&function Rp(C){return!!C.resolveComponentFactory}(P)){const ht=P.resolveComponentFactory(Q);this.activated=k.createComponent(ht,k.length,Pe)}else this.activated=k.createComponent(Q,{index:k.length,injector:Pe,environmentInjector:P??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return C.\u0275fac=function(D){return new(D||C)(U.Y36(El),U.Y36(U.s_b),U.$8M("name"),U.Y36(U.sBO),U.Y36(U.lqb))},C.\u0275dir=U.lG2({type:C,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),C})();class vo{constructor(S,D,P){this.route=S,this.childContexts=D,this.parent=P}get(S,D){return S===Gr?this.route:S===El?this.childContexts:this.parent.get(S,D)}}let Wa=(()=>{class C{}return C.\u0275fac=function(D){return new(D||C)},C.\u0275cmp=U.Xpm({type:C,selectors:[["ng-component"]],decls:1,vars:0,template:function(D,P){1&D&&U._UZ(0,"router-outlet")},dependencies:[Ji],encapsulation:2}),C})();function Ts(C,S){return C.providers&&!C._injector&&(C._injector=(0,U.MMx)(C.providers,S,`Route: ${C.path}`)),C._injector??S}function ge(C){const S=C.children&&C.children.map(ge),D=S?{...C,children:S}:{...C};return!D.component&&!D.loadComponent&&(S||D.loadChildren)&&D.outlet&&D.outlet!==Le&&(D.component=Wa),D}function Ae(C){return C.outlet||Le}function Ie(C,S){const D=C.filter(P=>Ae(P)===S);return D.push(...C.filter(P=>Ae(P)!==S)),D}function nn(C){if(!C)return null;if(C.routeConfig?._injector)return C.routeConfig._injector;for(let S=C.parent;S;S=S.parent){const D=S.routeConfig;if(D?._loadedInjector)return D._loadedInjector;if(D?._injector)return D._injector}return null}class ai{constructor(S,D,P,k){this.routeReuseStrategy=S,this.futureState=D,this.currState=P,this.forwardEvent=k}activate(S){const D=this.futureState._root,P=this.currState?this.currState._root:null;this.deactivateChildRoutes(D,P,S),ya(this.futureState.root),this.activateChildRoutes(D,P,S)}deactivateChildRoutes(S,D,P){const k=gs(D);S.children.forEach(q=>{const Q=q.value.outlet;this.deactivateRoutes(q,k[Q],P),delete k[Q]}),on(k,(q,Q)=>{this.deactivateRouteAndItsChildren(q,P)})}deactivateRoutes(S,D,P){const k=S.value,q=D?D.value:null;if(k===q)if(k.component){const Q=P.getContext(k.outlet);Q&&this.deactivateChildRoutes(S,D,Q.children)}else this.deactivateChildRoutes(S,D,P);else q&&this.deactivateRouteAndItsChildren(D,P)}deactivateRouteAndItsChildren(S,D){S.value.component&&this.routeReuseStrategy.shouldDetach(S.value.snapshot)?this.detachAndStoreRouteSubtree(S,D):this.deactivateRouteAndOutlet(S,D)}detachAndStoreRouteSubtree(S,D){const P=D.getContext(S.value.outlet),k=P&&S.value.component?P.children:D,q=gs(S);for(const Q of Object.keys(q))this.deactivateRouteAndItsChildren(q[Q],k);if(P&&P.outlet){const Q=P.outlet.detach(),he=P.children.onOutletDeactivated();this.routeReuseStrategy.store(S.value.snapshot,{componentRef:Q,route:S,contexts:he})}}deactivateRouteAndOutlet(S,D){const P=D.getContext(S.value.outlet),k=P&&S.value.component?P.children:D,q=gs(S);for(const Q of Object.keys(q))this.deactivateRouteAndItsChildren(q[Q],k);P&&P.outlet&&(P.outlet.deactivate(),P.children.onOutletDeactivated(),P.attachRef=null,P.resolver=null,P.route=null)}activateChildRoutes(S,D,P){const k=gs(D);S.children.forEach(q=>{this.activateRoutes(q,k[q.value.outlet],P),this.forwardEvent(new _a(q.value.snapshot))}),S.children.length&&this.forwardEvent(new ju(S.value.snapshot))}activateRoutes(S,D,P){const k=S.value,q=D?D.value:null;if(ya(k),k===q)if(k.component){const Q=P.getOrCreateContext(k.outlet);this.activateChildRoutes(S,D,Q.children)}else this.activateChildRoutes(S,D,P);else if(k.component){const Q=P.getOrCreateContext(k.outlet);if(this.routeReuseStrategy.shouldAttach(k.snapshot)){const he=this.routeReuseStrategy.retrieve(k.snapshot);this.routeReuseStrategy.store(k.snapshot,null),Q.children.onOutletReAttached(he.contexts),Q.attachRef=he.componentRef,Q.route=he.route.value,Q.outlet&&Q.outlet.attach(he.componentRef,he.route.value),ya(he.route.value),this.activateChildRoutes(S,null,Q.children)}else{const he=nn(k.snapshot),Pe=he?.get(U._Vd)??null;Q.attachRef=null,Q.route=k,Q.resolver=Pe,Q.injector=he,Q.outlet&&Q.outlet.activateWith(k,Q.injector),this.activateChildRoutes(S,null,Q.children)}}else this.activateChildRoutes(S,null,P)}}class Un{constructor(S){this.path=S,this.route=this.path[this.path.length-1]}}class si{constructor(S,D){this.component=S,this.route=D}}function Cr(C,S,D){const P=C._root;return it(P,S?S._root:null,D,[P.value])}function nr(C,S,D){return(nn(S)??D).get(C)}function it(C,S,D,P,k={canDeactivateChecks:[],canActivateChecks:[]}){const q=gs(S);return C.children.forEach(Q=>{(function ti(C,S,D,P,k={canDeactivateChecks:[],canActivateChecks:[]}){const q=C.value,Q=S?S.value:null,he=D?D.getContext(C.value.outlet):null;if(Q&&q.routeConfig===Q.routeConfig){const Pe=function Tl(C,S,D){if("function"==typeof D)return D(C,S);switch(D){case"pathParamsChange":return!Hs(C.url,S.url);case"pathParamsOrQueryParamsChange":return!Hs(C.url,S.url)||!ci(C.queryParams,S.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!cc(C,S)||!ci(C.queryParams,S.queryParams);default:return!cc(C,S)}}(Q,q,q.routeConfig.runGuardsAndResolvers);Pe?k.canActivateChecks.push(new Un(P)):(q.data=Q.data,q._resolvedData=Q._resolvedData),it(C,S,q.component?he?he.children:null:D,P,k),Pe&&he&&he.outlet&&he.outlet.isActivated&&k.canDeactivateChecks.push(new si(he.outlet.component,Q))}else Q&&no(S,he,k),k.canActivateChecks.push(new Un(P)),it(C,null,q.component?he?he.children:null:D,P,k)})(Q,q[Q.value.outlet],D,P.concat([Q.value]),k),delete q[Q.value.outlet]}),on(q,(Q,he)=>no(Q,D.getContext(he),k)),k}function no(C,S,D){const P=gs(C),k=C.value;on(P,(q,Q)=>{no(q,k.component?S?S.children.getContext(Q):null:S,D)}),D.canDeactivateChecks.push(new si(k.component&&S&&S.outlet&&S.outlet.isActivated?S.outlet.component:null,k))}function Yi(C){return"function"==typeof C}function $a(C){return C instanceof xe||"EmptyError"===C?.name}const Pi=Symbol("INITIAL_VALUE");function On(){return(0,je.w)(C=>(0,rt.a)(C.map(S=>S.pipe((0,Dt.q)(1),(0,nt.O)(Pi)))).pipe((0,Ce.U)(S=>{for(const D of S)if(!0!==D){if(D===Pi)return Pi;if(!1===D||D instanceof fi)return D}return!0}),(0,lt.h)(S=>S!==Pi),(0,Dt.q)(1)))}function ae(C){return(0,dt.z)((0,$e.b)(S=>{if(Ee(S))throw Xu(0,S)}),(0,Ce.U)(S=>!0===S))}const mc={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Xo(C,S,D,P,k){const q=ba(C,S,D);return q.matched?function gc(C,S,D,P){const k=S.canMatch;if(!k||0===k.length)return(0,_e.of)(!0);const q=k.map(Q=>{const he=C.get(Q),Pe=function Yo(C){return C&&Yi(C.canMatch)}(he)?he.canMatch(S,D):he(S,D);return Ui(Pe)});return(0,_e.of)(q).pipe(On(),ae())}(P=Ts(S,P),S,D).pipe((0,Ce.U)(Q=>!0===Q?q:{...mc})):(0,_e.of)(q)}function ba(C,S,D){if(""===S.path)return"full"===S.pathMatch&&(C.hasChildren()||D.length>0)?{...mc}:{matched:!0,consumedSegments:[],remainingSegments:D,parameters:{},positionalParamSegments:{}};const k=(S.matcher||bi)(D,C,S);if(!k)return{...mc};const q={};on(k.posParams,(he,Pe)=>{q[Pe]=he.path});const Q=k.consumed.length>0?{...q,...k.consumed[k.consumed.length-1].parameters}:q;return{matched:!0,consumedSegments:k.consumed,remainingSegments:D.slice(k.consumed.length),parameters:Q,positionalParamSegments:k.posParams??{}}}function _c(C,S,D,P,k="corrected"){if(D.length>0&&function jc(C,S,D){return D.some(P=>Ya(C,S,P)&&Ae(P)!==Le)}(C,D,P)){const Q=new yn(S,function Ni(C,S,D,P){const k={};k[Le]=P,P._sourceSegment=C,P._segmentIndexShift=S.length;for(const q of D)if(""===q.path&&Ae(q)!==Le){const Q=new yn([],{});Q._sourceSegment=C,Q._segmentIndexShift=S.length,k[Ae(q)]=Q}return k}(C,S,P,new yn(D,C.children)));return Q._sourceSegment=C,Q._segmentIndexShift=S.length,{segmentGroup:Q,slicedSegments:[]}}if(0===D.length&&function vc(C,S,D){return D.some(P=>Ya(C,S,P))}(C,D,P)){const Q=new yn(C.segments,function Al(C,S,D,P,k,q){const Q={};for(const he of P)if(Ya(C,D,he)&&!k[Ae(he)]){const Pe=new yn([],{});Pe._sourceSegment=C,Pe._segmentIndexShift="legacy"===q?C.segments.length:S.length,Q[Ae(he)]=Pe}return{...k,...Q}}(C,S,D,P,C.children,k));return Q._sourceSegment=C,Q._segmentIndexShift=S.length,{segmentGroup:Q,slicedSegments:D}}const q=new yn(C.segments,C.children);return q._sourceSegment=C,q._segmentIndexShift=S.length,{segmentGroup:q,slicedSegments:D}}function Ya(C,S,D){return(!(C.hasChildren()||S.length>0)||"full"!==D.pathMatch)&&""===D.path}function ed(C,S,D,P){return!!(Ae(C)===P||P!==Le&&Ya(S,D,C))&&("**"===C.path||ba(S,C,D).matched)}function vi(C,S,D){return 0===S.length&&!C.children[D]}const ts=!1;class Li{constructor(S){this.segmentGroup=S||null}}class No{constructor(S){this.urlTree=S}}function qa(C){return(0,ze._)(new Li(C))}function sf(C){return(0,ze._)(new No(C))}class yc{constructor(S,D,P,k,q){this.injector=S,this.configLoader=D,this.urlSerializer=P,this.urlTree=k,this.config=q,this.allowRedirects=!0}apply(){const S=_c(this.urlTree.root,[],[],this.config).segmentGroup,D=new yn(S.segments,S.children);return this.expandSegmentGroup(this.injector,this.config,D,Le).pipe((0,Ce.U)(q=>this.createUrlTree(pe(q),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,pn.K)(q=>{if(q instanceof No)return this.allowRedirects=!1,this.match(q.urlTree);throw q instanceof Li?this.noMatchError(q):q}))}match(S){return this.expandSegmentGroup(this.injector,this.config,S.root,Le).pipe((0,Ce.U)(k=>this.createUrlTree(pe(k),S.queryParams,S.fragment))).pipe((0,pn.K)(k=>{throw k instanceof Li?this.noMatchError(k):k}))}noMatchError(S){return new U.vHH(4002,ts)}createUrlTree(S,D,P){const k=be(S);return new fi(k,D,P)}expandSegmentGroup(S,D,P,k){return 0===P.segments.length&&P.hasChildren()?this.expandChildren(S,D,P).pipe((0,Ce.U)(q=>new yn([],q))):this.expandSegment(S,P,D,P.segments,k,!0)}expandChildren(S,D,P){const k=[];for(const q of Object.keys(P.children))"primary"===q?k.unshift(q):k.push(q);return(0,Se.D)(k).pipe((0,yt.b)(q=>{const Q=P.children[q],he=Ie(D,q);return this.expandSegmentGroup(S,he,Q,q).pipe((0,Ce.U)(Pe=>({segment:Pe,outlet:q})))}),ln((q,Q)=>(q[Q.outlet]=Q.segment,q),{}),_n())}expandSegment(S,D,P,k,q,Q){return(0,Se.D)(P).pipe((0,yt.b)(he=>this.expandSegmentAgainstRoute(S,D,P,he,k,q,Q).pipe((0,pn.K)(ht=>{if(ht instanceof Li)return(0,_e.of)(null);throw ht}))),qt(he=>!!he),(0,pn.K)((he,Pe)=>{if($a(he))return vi(D,k,q)?(0,_e.of)(new yn([],{})):qa(D);throw he}))}expandSegmentAgainstRoute(S,D,P,k,q,Q,he){return ed(k,D,q,Q)?void 0===k.redirectTo?this.matchSegmentAgainstRoute(S,D,k,q,Q):he&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(S,D,P,k,q,Q):qa(D):qa(D)}expandSegmentAgainstRouteUsingRedirect(S,D,P,k,q,Q){return"**"===k.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(S,P,k,Q):this.expandRegularSegmentAgainstRouteUsingRedirect(S,D,P,k,q,Q)}expandWildCardWithParamsAgainstRouteUsingRedirect(S,D,P,k){const q=this.applyRedirectCommands([],P.redirectTo,{});return P.redirectTo.startsWith("/")?sf(q):this.lineralizeSegments(P,q).pipe((0,et.z)(Q=>{const he=new yn(Q,{});return this.expandSegment(S,he,D,Q,k,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(S,D,P,k,q,Q){const{matched:he,consumedSegments:Pe,remainingSegments:ht,positionalParamSegments:Pn}=ba(D,k,q);if(!he)return qa(D);const Zt=this.applyRedirectCommands(Pe,k.redirectTo,Pn);return k.redirectTo.startsWith("/")?sf(Zt):this.lineralizeSegments(k,Zt).pipe((0,et.z)(Xn=>this.expandSegment(S,D,P,Xn.concat(ht),Q,!1)))}matchSegmentAgainstRoute(S,D,P,k,q){return"**"===P.path?(S=Ts(P,S),P.loadChildren?(P._loadedRoutes?(0,_e.of)({routes:P._loadedRoutes,injector:P._loadedInjector}):this.configLoader.loadChildren(S,P)).pipe((0,Ce.U)(he=>(P._loadedRoutes=he.routes,P._loadedInjector=he.injector,new yn(k,{})))):(0,_e.of)(new yn(k,{}))):Xo(D,P,k,S).pipe((0,je.w)(({matched:Q,consumedSegments:he,remainingSegments:Pe})=>Q?this.getChildConfig(S=P._injector??S,P,k).pipe((0,et.z)(Pn=>{const Zt=Pn.injector??S,Xn=Pn.routes,{segmentGroup:Pr,slicedSegments:Ii}=_c(D,he,Pe,Xn),Zn=new yn(Pr.segments,Pr.children);if(0===Ii.length&&Zn.hasChildren())return this.expandChildren(Zt,Xn,Zn).pipe((0,Ce.U)(nu=>new yn(he,nu)));if(0===Xn.length&&0===Ii.length)return(0,_e.of)(new yn(he,{}));const lo=Ae(P)===q;return this.expandSegment(Zt,Zn,Xn,Ii,lo?Le:q,!0).pipe((0,Ce.U)(Wr=>new yn(he.concat(Wr.segments),Wr.children)))})):qa(D)))}getChildConfig(S,D,P){return D.children?(0,_e.of)({routes:D.children,injector:S}):D.loadChildren?void 0!==D._loadedRoutes?(0,_e.of)({routes:D._loadedRoutes,injector:D._loadedInjector}):function Ns(C,S,D,P){const k=S.canLoad;if(void 0===k||0===k.length)return(0,_e.of)(!0);const q=k.map(Q=>{const he=C.get(Q),Pe=function ja(C){return C&&Yi(C.canLoad)}(he)?he.canLoad(S,D):he(S,D);return Ui(Pe)});return(0,_e.of)(q).pipe(On(),ae())}(S,D,P).pipe((0,et.z)(k=>k?this.configLoader.loadChildren(S,D).pipe((0,$e.b)(q=>{D._loadedRoutes=q.routes,D._loadedInjector=q.injector})):function Fi(C){return(0,ze._)(Qr(ts,3))}())):(0,_e.of)({routes:[],injector:S})}lineralizeSegments(S,D){let P=[],k=D.root;for(;;){if(P=P.concat(k.segments),0===k.numberOfChildren)return(0,_e.of)(P);if(k.numberOfChildren>1||!k.children[Le])return(0,ze._)(new U.vHH(4e3,ts));k=k.children[Le]}}applyRedirectCommands(S,D,P){return this.applyRedirectCreateUrlTree(D,this.urlSerializer.parse(D),S,P)}applyRedirectCreateUrlTree(S,D,P,k){const q=this.createSegmentGroup(S,D.root,P,k);return new fi(q,this.createQueryParams(D.queryParams,this.urlTree.queryParams),D.fragment)}createQueryParams(S,D){const P={};return on(S,(k,q)=>{if("string"==typeof k&&k.startsWith(":")){const he=k.substring(1);P[q]=D[he]}else P[q]=k}),P}createSegmentGroup(S,D,P,k){const q=this.createSegments(S,D.segments,P,k);let Q={};return on(D.children,(he,Pe)=>{Q[Pe]=this.createSegmentGroup(S,he,P,k)}),new yn(q,Q)}createSegments(S,D,P,k){return D.map(q=>q.path.startsWith(":")?this.findPosParam(S,q,k):this.findOrReturn(q,P))}findPosParam(S,D,P){const k=P[D.path.substring(1)];if(!k)throw new U.vHH(4001,ts);return k}findOrReturn(S,D){let P=0;for(const k of D){if(k.path===S.path)return D.splice(P),k;P++}return S}}class af{}class ns{constructor(S,D,P,k,q,Q,he,Pe){this.injector=S,this.rootComponentType=D,this.config=P,this.urlTree=k,this.url=q,this.paramsInheritanceStrategy=Q,this.relativeLinkResolution=he,this.urlSerializer=Pe}recognize(){const S=_c(this.urlTree.root,[],[],this.config.filter(D=>void 0===D.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,S,Le).pipe((0,Ce.U)(D=>{if(null===D)return null;const P=new Kr([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Le,this.rootComponentType,null,this.urlTree.root,-1,{}),k=new Wo(P,D),q=new Es(this.url,k);return this.inheritParamsAndData(q._root),q}))}inheritParamsAndData(S){const D=S.value,P=lc(D,this.paramsInheritanceStrategy);D.params=Object.freeze(P.params),D.data=Object.freeze(P.data),S.children.forEach(k=>this.inheritParamsAndData(k))}processSegmentGroup(S,D,P,k){return 0===P.segments.length&&P.hasChildren()?this.processChildren(S,D,P):this.processSegment(S,D,P,P.segments,k)}processChildren(S,D,P){return(0,Se.D)(Object.keys(P.children)).pipe((0,yt.b)(k=>{const q=P.children[k],Q=Ie(D,k);return this.processSegmentGroup(S,Q,q,k)}),ln((k,q)=>k&&q?(k.push(...q),k):null),function gi(C,S=!1){return(0,sn.e)((D,P)=>{let k=0;D.subscribe((0,$n.x)(P,q=>{const Q=C(q,k++);(Q||S)&&P.next(q),!Q&&P.complete()}))})}(k=>null!==k),Tt(null),_n(),(0,Ce.U)(k=>{if(null===k)return null;const q=ro(k);return function io(C){C.sort((S,D)=>S.value.outlet===Le?-1:D.value.outlet===Le?1:S.value.outlet.localeCompare(D.value.outlet))}(q),q}))}processSegment(S,D,P,k,q){return(0,Se.D)(D).pipe((0,yt.b)(Q=>this.processSegmentAgainstRoute(Q._injector??S,Q,P,k,q)),qt(Q=>!!Q),(0,pn.K)(Q=>{if($a(Q))return vi(P,k,q)?(0,_e.of)([]):(0,_e.of)(null);throw Q}))}processSegmentAgainstRoute(S,D,P,k,q){if(D.redirectTo||!ed(D,P,k,q))return(0,_e.of)(null);let Q;if("**"===D.path){const he=k.length>0?$i(k).parameters:{},Pe=Zo(P)+k.length,ht=new Kr(k,he,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,$c(D),Ae(D),D.component??D._loadedComponent??null,D,yo(P),Pe,Ma(D),Pe);Q=(0,_e.of)({snapshot:ht,consumedSegments:[],remainingSegments:[]})}else Q=Xo(P,D,k,S).pipe((0,Ce.U)(({matched:he,consumedSegments:Pe,remainingSegments:ht,parameters:Pn})=>{if(!he)return null;const Zt=Zo(P)+Pe.length;return{snapshot:new Kr(Pe,Pn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,$c(D),Ae(D),D.component??D._loadedComponent??null,D,yo(P),Zt,Ma(D),Zt),consumedSegments:Pe,remainingSegments:ht}}));return Q.pipe((0,je.w)(he=>{if(null===he)return(0,_e.of)(null);const{snapshot:Pe,consumedSegments:ht,remainingSegments:Pn}=he;S=D._injector??S;const Zt=D._loadedInjector??S,Xn=function bc(C){return C.children?C.children:C.loadChildren?C._loadedRoutes:[]}(D),{segmentGroup:Pr,slicedSegments:Ii}=_c(P,ht,Pn,Xn.filter(lo=>void 0===lo.redirectTo),this.relativeLinkResolution);if(0===Ii.length&&Pr.hasChildren())return this.processChildren(Zt,Xn,Pr).pipe((0,Ce.U)(lo=>null===lo?null:[new Wo(Pe,lo)]));if(0===Xn.length&&0===Ii.length)return(0,_e.of)([new Wo(Pe,[])]);const Zn=Ae(D)===q;return this.processSegment(Zt,Xn,Pr,Ii,Zn?Le:q).pipe((0,Ce.U)(lo=>null===lo?null:[new Wo(Pe,lo)]))}))}}function wa(C){const S=C.value.routeConfig;return S&&""===S.path&&void 0===S.redirectTo}function ro(C){const S=[],D=new Set;for(const P of C){if(!wa(P)){S.push(P);continue}const k=S.find(q=>P.value.routeConfig===q.value.routeConfig);void 0!==k?(k.children.push(...P.children),D.add(k)):S.push(P)}for(const P of D){const k=ro(P.children);S.push(new Wo(P.value,k))}return S.filter(P=>!D.has(P))}function yo(C){let S=C;for(;S._sourceSegment;)S=S._sourceSegment;return S}function Zo(C){let S=C,D=S._segmentIndexShift??0;for(;S._sourceSegment;)S=S._sourceSegment,D+=S._segmentIndexShift??0;return D-1}function $c(C){return C.data||{}}function Ma(C){return C.resolve||{}}const Jo=Symbol("RouteTitle");function vs(C){return"string"==typeof C.title||null===C.title}function ys(C){return(0,je.w)(S=>{const D=C(S);return D?(0,Se.D)(D).pipe((0,Ce.U)(()=>S)):(0,_e.of)(S)})}let Ca=(()=>{class C{buildTitle(D){let P,k=D.root;for(;void 0!==k;)P=this.getResolvedTitleForRoute(k)??P,k=k.children.find(q=>q.outlet===Le);return P}getResolvedTitleForRoute(D){return D.data[Jo]}}return C.\u0275fac=function(D){return new(D||C)},C.\u0275prov=U.Yz7({token:C,factory:function(){return(0,U.f3M)(Sa)},providedIn:"root"}),C})(),Sa=(()=>{class C extends Ca{constructor(D){super(),this.title=D}updateTitle(D){const P=this.buildTitle(D);void 0!==P&&this.title.setTitle(P)}}return C.\u0275fac=function(D){return new(D||C)(U.LFG(He.Dx))},C.\u0275prov=U.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();class Ol{}class Is extends class Sr{shouldDetach(S){return!1}store(S,D){}shouldAttach(S){return!1}retrieve(S){return null}shouldReuseRoute(S,D){return S.routeConfig===D.routeConfig}}{}const so=new U.OlP("",{providedIn:"root",factory:()=>({})}),Ja=new U.OlP("ROUTES");let ir=(()=>{class C{constructor(D,P){this.injector=D,this.compiler=P,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(D){if(this.componentLoaders.get(D))return this.componentLoaders.get(D);if(D._loadedComponent)return(0,_e.of)(D._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(D);const P=Ui(D.loadComponent()).pipe((0,$e.b)(q=>{this.onLoadEndListener&&this.onLoadEndListener(D),D._loadedComponent=q}),Kt(()=>{this.componentLoaders.delete(D)})),k=new at.c(P,()=>new ke.x).pipe((0,kt.x)());return this.componentLoaders.set(D,k),k}loadChildren(D,P){if(this.childrenLoaders.get(P))return this.childrenLoaders.get(P);if(P._loadedRoutes)return(0,_e.of)({routes:P._loadedRoutes,injector:P._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(P);const q=this.loadModuleFactoryOrRoutes(P.loadChildren).pipe((0,Ce.U)(he=>{this.onLoadEndListener&&this.onLoadEndListener(P);let Pe,ht,Pn=!1;Array.isArray(he)?ht=he:(Pe=he.create(D).injector,ht=ji(Pe.get(Ja,[],U.XFs.Self|U.XFs.Optional)));return{routes:ht.map(ge),injector:Pe}}),Kt(()=>{this.childrenLoaders.delete(P)})),Q=new at.c(q,()=>new ke.x).pipe((0,kt.x)());return this.childrenLoaders.set(P,Q),Q}loadModuleFactoryOrRoutes(D){return Ui(D()).pipe((0,et.z)(P=>P instanceof U.YKP||Array.isArray(P)?(0,_e.of)(P):(0,Se.D)(this.compiler.compileModuleAsync(P))))}}return C.\u0275fac=function(D){return new(D||C)(U.LFG(U.zs3),U.LFG(U.Sil))},C.\u0275prov=U.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();class Os{}class oo{shouldProcessUrl(S){return!0}extract(S){return S}merge(S,D){return S}}function Dc(C){throw C}function Qo(C,S,D){return S.parse("/")}const Zd={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ka={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Qa(){const C=(0,U.f3M)(Ho),S=(0,U.f3M)(El),D=(0,U.f3M)(zt.Ye),P=(0,U.f3M)(U.zs3),k=(0,U.f3M)(U.Sil),q=(0,U.f3M)(Ja,{optional:!0})??[],Q=(0,U.f3M)(so,{optional:!0})??{},he=(0,U.f3M)(Sa),Pe=(0,U.f3M)(Ca,{optional:!0}),ht=(0,U.f3M)(Os,{optional:!0}),Pn=(0,U.f3M)(Ol,{optional:!0}),Zt=new lr(null,C,S,D,P,k,ji(q));return ht&&(Zt.urlHandlingStrategy=ht),Pn&&(Zt.routeReuseStrategy=Pn),Zt.titleStrategy=Pe??he,function Yc(C,S){C.errorHandler&&(S.errorHandler=C.errorHandler),C.malformedUriErrorHandler&&(S.malformedUriErrorHandler=C.malformedUriErrorHandler),C.onSameUrlNavigation&&(S.onSameUrlNavigation=C.onSameUrlNavigation),C.paramsInheritanceStrategy&&(S.paramsInheritanceStrategy=C.paramsInheritanceStrategy),C.relativeLinkResolution&&(S.relativeLinkResolution=C.relativeLinkResolution),C.urlUpdateStrategy&&(S.urlUpdateStrategy=C.urlUpdateStrategy),C.canceledNavigationResolution&&(S.canceledNavigationResolution=C.canceledNavigationResolution)}(Q,Zt),Zt}let lr=(()=>{class C{constructor(D,P,k,q,Q,he,Pe){this.rootComponentType=D,this.urlSerializer=P,this.rootContexts=k,this.location=q,this.config=Pe,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ke.x,this.errorHandler=Dc,this.malformedUriErrorHandler=Qo,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,_e.of)(void 0),this.urlHandlingStrategy=new oo,this.routeReuseStrategy=new Is,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=Q.get(ir),this.configLoader.onLoadEndListener=Xn=>this.triggerEvent(new Ml(Xn)),this.configLoader.onLoadStartListener=Xn=>this.triggerEvent(new Wu(Xn)),this.ngModule=Q.get(U.h0i),this.console=Q.get(U.c2e);const Zt=Q.get(U.R0b);this.isNgZoneEnabled=Zt instanceof U.R0b&&U.R0b.isInAngularZone(),this.resetConfig(Pe),this.currentUrlTree=function Ur(){return new fi(new yn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=qu(this.currentUrlTree,this.rootComponentType),this.transitions=new Te.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(D){const P=this.events;return D.pipe((0,lt.h)(k=>0!==k.id),(0,Ce.U)(k=>({...k,extractedUrl:this.urlHandlingStrategy.extract(k.rawUrl)})),(0,je.w)(k=>{let q=!1,Q=!1;return(0,_e.of)(k).pipe((0,$e.b)(he=>{this.currentNavigation={id:he.id,initialUrl:he.rawUrl,extractedUrl:he.extractedUrl,trigger:he.source,extras:he.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,je.w)(he=>{const Pe=this.browserUrlTree.toString(),ht=!this.navigated||he.extractedUrl.toString()!==Pe||Pe!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||ht)&&this.urlHandlingStrategy.shouldProcessUrl(he.rawUrl))return Pl(he.source)&&(this.browserUrlTree=he.extractedUrl),(0,_e.of)(he).pipe((0,je.w)(Zt=>{const Xn=this.transitions.getValue();return P.next(new Mr(Zt.id,this.serializeUrl(Zt.extractedUrl),Zt.source,Zt.restoredState)),Xn!==this.transitions.getValue()?Gt.E:Promise.resolve(Zt)}),function Xd(C,S,D,P){return(0,je.w)(k=>function Xa(C,S,D,P,k){return new yc(C,S,D,P,k).apply()}(C,S,D,k.extractedUrl,P).pipe((0,Ce.U)(q=>({...k,urlAfterRedirects:q}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,$e.b)(Zt=>{this.currentNavigation={...this.currentNavigation,finalUrl:Zt.urlAfterRedirects},k.urlAfterRedirects=Zt.urlAfterRedirects}),function xc(C,S,D,P,k,q){return(0,et.z)(Q=>function Nl(C,S,D,P,k,q,Q="emptyOnly",he="legacy"){return new ns(C,S,D,P,k,Q,he,q).recognize().pipe((0,je.w)(Pe=>null===Pe?function Pp(C){return new Ue.y(S=>S.error(C))}(new af):(0,_e.of)(Pe)))}(C,S,D,Q.urlAfterRedirects,P.serialize(Q.urlAfterRedirects),P,k,q).pipe((0,Ce.U)(he=>({...Q,targetSnapshot:he}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,$e.b)(Zt=>{if(k.targetSnapshot=Zt.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!Zt.extras.skipLocationChange){const Pr=this.urlHandlingStrategy.merge(Zt.urlAfterRedirects,Zt.rawUrl);this.setBrowserUrl(Pr,Zt)}this.browserUrlTree=Zt.urlAfterRedirects}const Xn=new ma(Zt.id,this.serializeUrl(Zt.extractedUrl),this.serializeUrl(Zt.urlAfterRedirects),Zt.targetSnapshot);P.next(Xn)}));if(ht&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Xn,extractedUrl:Pr,source:Ii,restoredState:Zn,extras:lo}=he,Ls=new Mr(Xn,this.serializeUrl(Pr),Ii,Zn);P.next(Ls);const Wr=qu(Pr,this.rootComponentType).snapshot;return k={...he,targetSnapshot:Wr,urlAfterRedirects:Pr,extras:{...lo,skipLocationChange:!1,replaceUrl:!1}},(0,_e.of)(k)}return this.rawUrlTree=he.rawUrl,he.resolve(null),Gt.E}),(0,$e.b)(he=>{const Pe=new qs(he.id,this.serializeUrl(he.extractedUrl),this.serializeUrl(he.urlAfterRedirects),he.targetSnapshot);this.triggerEvent(Pe)}),(0,Ce.U)(he=>k={...he,guards:Cr(he.targetSnapshot,he.currentSnapshot,this.rootContexts)}),function Op(C,S){return(0,et.z)(D=>{const{targetSnapshot:P,currentSnapshot:k,guards:{canActivateChecks:q,canDeactivateChecks:Q}}=D;return 0===Q.length&&0===q.length?(0,_e.of)({...D,guardsResult:!0}):function gt(C,S,D,P){return(0,Se.D)(C).pipe((0,et.z)(k=>function As(C,S,D,P,k){const q=S&&S.routeConfig?S.routeConfig.canDeactivate:null;if(!q||0===q.length)return(0,_e.of)(!0);const Q=q.map(he=>{const Pe=nr(he,S,k);return Ui(function $o(C){return C&&Yi(C.canDeactivate)}(Pe)?Pe.canDeactivate(C,S,D,P):Pe(C,S,D,P)).pipe(qt())});return(0,_e.of)(Q).pipe(On())}(k.component,k.route,D,S,P)),qt(k=>!0!==k,!0))}(Q,P,k,C).pipe((0,et.z)(he=>he&&function pc(C){return"boolean"==typeof C}(he)?function Ki(C,S,D,P){return(0,Se.D)(S).pipe((0,yt.b)(k=>(0,Ve.z)(function Qu(C,S){return null!==C&&S&&S(new Ga(C)),(0,_e.of)(!0)}(k.route.parent,P),function Ku(C,S){return null!==C&&S&&S(new Hr(C)),(0,_e.of)(!0)}(k.route,P),function qo(C,S,D){const P=S[S.length-1],q=S.slice(0,S.length-1).reverse().map(Q=>function Gi(C){const S=C.routeConfig?C.routeConfig.canActivateChild:null;return S&&0!==S.length?{node:C,guards:S}:null}(Q)).filter(Q=>null!==Q).map(Q=>(0,Qe.P)(()=>{const he=Q.guards.map(Pe=>{const ht=nr(Pe,Q.node,D);return Ui(function zr(C){return C&&Yi(C.canActivateChild)}(ht)?ht.canActivateChild(P,C):ht(P,C)).pipe(qt())});return(0,_e.of)(he).pipe(On())}));return(0,_e.of)(q).pipe(On())}(C,k.path,D),function qd(C,S,D){const P=S.routeConfig?S.routeConfig.canActivate:null;if(!P||0===P.length)return(0,_e.of)(!0);const k=P.map(q=>(0,Qe.P)(()=>{const Q=nr(q,S,D);return Ui(function jo(C){return C&&Yi(C.canActivate)}(Q)?Q.canActivate(S,C):Q(S,C)).pipe(qt())}));return(0,_e.of)(k).pipe(On())}(C,k.route,D))),qt(k=>!0!==k,!0))}(P,q,C,S):(0,_e.of)(he)),(0,Ce.U)(he=>({...D,guardsResult:he})))})}(this.ngModule.injector,he=>this.triggerEvent(he)),(0,$e.b)(he=>{if(k.guardsResult=he.guardsResult,Ee(he.guardsResult))throw Xu(0,he.guardsResult);const Pe=new zu(he.id,this.serializeUrl(he.extractedUrl),this.serializeUrl(he.urlAfterRedirects),he.targetSnapshot,!!he.guardsResult);this.triggerEvent(Pe)}),(0,lt.h)(he=>!!he.guardsResult||(this.restoreHistory(he),this.cancelNavigationTransition(he,"",3),!1)),ys(he=>{if(he.guards.canActivateChecks.length)return(0,_e.of)(he).pipe((0,$e.b)(Pe=>{const ht=new tf(Pe.id,this.serializeUrl(Pe.extractedUrl),this.serializeUrl(Pe.urlAfterRedirects),Pe.targetSnapshot);this.triggerEvent(ht)}),(0,je.w)(Pe=>{let ht=!1;return(0,_e.of)(Pe).pipe(function wc(C,S){return(0,et.z)(D=>{const{targetSnapshot:P,guards:{canActivateChecks:k}}=D;if(!k.length)return(0,_e.of)(D);let q=0;return(0,Se.D)(k).pipe((0,yt.b)(Q=>function td(C,S,D,P){const k=C.routeConfig,q=C._resolve;return void 0!==k?.title&&!vs(k)&&(q[Jo]=k.title),function Rl(C,S,D,P){const k=function _s(C){return[...Object.keys(C),...Object.getOwnPropertySymbols(C)]}(C);if(0===k.length)return(0,_e.of)({});const q={};return(0,Se.D)(k).pipe((0,et.z)(Q=>function Ko(C,S,D,P){const k=nr(C,S,P);return Ui(k.resolve?k.resolve(S,D):k(S,D))}(C[Q],S,D,P).pipe(qt(),(0,$e.b)(he=>{q[Q]=he}))),hn(1),(0,Xe.h)(q),(0,pn.K)(Q=>$a(Q)?Gt.E:(0,ze._)(Q)))}(q,C,S,P).pipe((0,Ce.U)(Q=>(C._resolvedData=Q,C.data=lc(C,D).resolve,k&&vs(k)&&(C.data[Jo]=k.title),null)))}(Q.route,P,C,S)),(0,$e.b)(()=>q++),hn(1),(0,et.z)(Q=>q===k.length?(0,_e.of)(D):Gt.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,$e.b)({next:()=>ht=!0,complete:()=>{ht||(this.restoreHistory(Pe),this.cancelNavigationTransition(Pe,"",2))}}))}),(0,$e.b)(Pe=>{const ht=new sc(Pe.id,this.serializeUrl(Pe.extractedUrl),this.serializeUrl(Pe.urlAfterRedirects),Pe.targetSnapshot);this.triggerEvent(ht)}))}),ys(he=>{const Pe=ht=>{const Pn=[];ht.routeConfig?.loadComponent&&!ht.routeConfig._loadedComponent&&Pn.push(this.configLoader.loadComponent(ht.routeConfig).pipe((0,$e.b)(Zt=>{ht.component=Zt}),(0,Ce.U)(()=>{})));for(const Zt of ht.children)Pn.push(...Pe(Zt));return Pn};return(0,rt.a)(Pe(he.targetSnapshot.root)).pipe(Tt(),(0,Dt.q)(1))}),ys(()=>this.afterPreactivation()),(0,Ce.U)(he=>{const Pe=function $d(C,S,D){const P=Ao(C,S._root,D?D._root:void 0);return new Ai(P,S)}(this.routeReuseStrategy,he.targetSnapshot,he.currentRouterState);return k={...he,targetRouterState:Pe}}),(0,$e.b)(he=>{this.currentUrlTree=he.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(he.urlAfterRedirects,he.rawUrl),this.routerState=he.targetRouterState,"deferred"===this.urlUpdateStrategy&&(he.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,he),this.browserUrlTree=he.urlAfterRedirects)}),((C,S,D)=>(0,Ce.U)(P=>(new ai(S,P.targetRouterState,P.currentRouterState,D).activate(C),P)))(this.rootContexts,this.routeReuseStrategy,he=>this.triggerEvent(he)),(0,$e.b)({next(){q=!0},complete(){q=!0}}),Kt(()=>{q||Q||this.cancelNavigationTransition(k,"",1),this.currentNavigation?.id===k.id&&(this.currentNavigation=null)}),(0,pn.K)(he=>{if(Q=!0,Yd(he)){hc(he)||(this.navigated=!0,this.restoreHistory(k,!0));const Pe=new to(k.id,this.serializeUrl(k.extractedUrl),he.message,he.cancellationCode);if(P.next(Pe),hc(he)){const ht=this.urlHandlingStrategy.merge(he.url,this.rawUrlTree),Pn={skipLocationChange:k.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Pl(k.source)};this.scheduleNavigation(ht,"imperative",null,Pn,{resolve:k.resolve,reject:k.reject,promise:k.promise})}else k.resolve(!1)}else{this.restoreHistory(k,!0);const Pe=new ga(k.id,this.serializeUrl(k.extractedUrl),he,k.targetSnapshot??void 0);P.next(Pe);try{k.resolve(this.errorHandler(he))}catch(ht){k.reject(ht)}}return Gt.E}))}))}resetRootComponentType(D){this.rootComponentType=D,this.routerState.root.component=this.rootComponentType}setTransition(D){this.transitions.next({...this.transitions.value,...D})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(D=>{const P="popstate"===D.type?"popstate":"hashchange";"popstate"===P&&setTimeout(()=>{const k={replaceUrl:!0},q=D.state?.navigationId?D.state:null;if(q){const he={...q};delete he.navigationId,delete he.\u0275routerPageId,0!==Object.keys(he).length&&(k.state=he)}const Q=this.parseUrl(D.url);this.scheduleNavigation(Q,P,q,k)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(D){this.events.next(D)}resetConfig(D){this.config=D.map(ge),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(D,P={}){const{relativeTo:k,queryParams:q,fragment:Q,queryParamsHandling:he,preserveFragment:Pe}=P,ht=k||this.routerState.root,Pn=Pe?this.currentUrlTree.fragment:Q;let Zt=null;switch(he){case"merge":Zt={...this.currentUrlTree.queryParams,...q};break;case"preserve":Zt=this.currentUrlTree.queryParams;break;default:Zt=q||null}return null!==Zt&&(Zt=this.removeEmptyProps(Zt)),gr(ht,this.currentUrlTree,D,Zt,Pn??null)}navigateByUrl(D,P={skipLocationChange:!1}){const k=Ee(D)?D:this.parseUrl(D),q=this.urlHandlingStrategy.merge(k,this.rawUrlTree);return this.scheduleNavigation(q,"imperative",null,P)}navigate(D,P={skipLocationChange:!1}){return function Io(C){for(let S=0;S<C.length;S++){if(null==C[S])throw new U.vHH(4008,false)}}(D),this.navigateByUrl(this.createUrlTree(D,P),P)}serializeUrl(D){return this.urlSerializer.serialize(D)}parseUrl(D){let P;try{P=this.urlSerializer.parse(D)}catch(k){P=this.malformedUriErrorHandler(k,this.urlSerializer,D)}return P}isActive(D,P){let k;if(k=!0===P?{...Zd}:!1===P?{...Ka}:P,Ee(D))return xr(this.currentUrlTree,D,k);const q=this.parseUrl(D);return xr(this.currentUrlTree,q,k)}removeEmptyProps(D){return Object.keys(D).reduce((P,k)=>{const q=D[k];return null!=q&&(P[k]=q),P},{})}processNavigations(){this.navigations.subscribe(D=>{this.navigated=!0,this.lastSuccessfulId=D.id,this.currentPageId=D.targetPageId,this.events.next(new mr(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),D.resolve(!0)},D=>{this.console.warn(`Unhandled Navigation Error: ${D}`)})}scheduleNavigation(D,P,k,q,Q){if(this.disposed)return Promise.resolve(!1);let he,Pe,ht;Q?(he=Q.resolve,Pe=Q.reject,ht=Q.promise):ht=new Promise((Xn,Pr)=>{he=Xn,Pe=Pr});const Pn=++this.navigationId;let Zt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(k=this.location.getState()),Zt=k&&k.\u0275routerPageId?k.\u0275routerPageId:q.replaceUrl||q.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):Zt=0,this.setTransition({id:Pn,targetPageId:Zt,source:P,restoredState:k,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:D,extras:q,resolve:he,reject:Pe,promise:ht,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),ht.catch(Xn=>Promise.reject(Xn))}setBrowserUrl(D,P){const k=this.urlSerializer.serialize(D),q={...P.extras.state,...this.generateNgRouterState(P.id,P.targetPageId)};this.location.isCurrentPathEqualTo(k)||P.extras.replaceUrl?this.location.replaceState(k,"",q):this.location.go(k,"",q)}restoreHistory(D,P=!1){if("computed"===this.canceledNavigationResolution){const k=this.currentPageId-D.targetPageId;"popstate"!==D.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===k?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===k&&(this.resetState(D),this.browserUrlTree=D.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(k)}else"replace"===this.canceledNavigationResolution&&(P&&this.resetState(D),this.resetUrlToCurrentUrlTree())}resetState(D){this.routerState=D.currentRouterState,this.currentUrlTree=D.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,D.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(D,P,k){const q=new to(D.id,this.serializeUrl(D.extractedUrl),P,k);this.triggerEvent(q),D.resolve(!1)}generateNgRouterState(D,P){return"computed"===this.canceledNavigationResolution?{navigationId:D,\u0275routerPageId:P}:{navigationId:D}}}return C.\u0275fac=function(D){U.$Z()},C.\u0275prov=U.Yz7({token:C,factory:function(){return Qa()},providedIn:"root"}),C})();function Pl(C){return"imperative"!==C}let Ci=(()=>{class C{constructor(D,P,k,q,Q){this.router=D,this.route=P,this.tabIndexAttribute=k,this.renderer=q,this.el=Q,this.commands=null,this.onChanges=new ke.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(D){if(null!=this.tabIndexAttribute)return;const P=this.renderer,k=this.el.nativeElement;null!==D?P.setAttribute(k,"tabindex",D):P.removeAttribute(k,"tabindex")}ngOnChanges(D){this.onChanges.next(this)}set routerLink(D){null!=D?(this.commands=Array.isArray(D)?D:[D],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const D={skipLocationChange:(0,U.D6c)(this.skipLocationChange),replaceUrl:(0,U.D6c)(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,D),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:(0,U.D6c)(this.preserveFragment)})}}return C.\u0275fac=function(D){return new(D||C)(U.Y36(lr),U.Y36(Gr),U.$8M("tabindex"),U.Y36(U.Qsj),U.Y36(U.SBq))},C.\u0275dir=U.lG2({type:C,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(D,P){1&D&&U.NdJ("click",function(){return P.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[U.TTD]}),C})();class Ll{}let rd=(()=>{class C{preload(D,P){return P().pipe((0,pn.K)(()=>(0,_e.of)(null)))}}return C.\u0275fac=function(D){return new(D||C)},C.\u0275prov=U.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})(),Ea=(()=>{class C{constructor(D,P,k,q,Q){this.router=D,this.injector=k,this.preloadingStrategy=q,this.loader=Q}setUpPreloading(){this.subscription=this.router.events.pipe((0,lt.h)(D=>D instanceof mr),(0,yt.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(D,P){const k=[];for(const q of P){q.providers&&!q._injector&&(q._injector=(0,U.MMx)(q.providers,D,`Route: ${q.path}`));const Q=q._injector??D,he=q._loadedInjector??Q;q.loadChildren&&!q._loadedRoutes&&void 0===q.canLoad||q.loadComponent&&!q._loadedComponent?k.push(this.preloadConfig(Q,q)):(q.children||q._loadedRoutes)&&k.push(this.processRoutes(he,q.children??q._loadedRoutes))}return(0,Se.D)(k).pipe((0,oe.J)())}preloadConfig(D,P){return this.preloadingStrategy.preload(P,()=>{let k;k=P.loadChildren&&void 0===P.canLoad?this.loader.loadChildren(D,P):(0,_e.of)(null);const q=k.pipe((0,et.z)(Q=>null===Q?(0,_e.of)(void 0):(P._loadedRoutes=Q.routes,P._loadedInjector=Q.injector,this.processRoutes(Q.injector??D,Q.routes))));if(P.loadComponent&&!P._loadedComponent){const Q=this.loader.loadComponent(P);return(0,Se.D)([q,Q]).pipe((0,oe.J)())}return q})}}return C.\u0275fac=function(D){return new(D||C)(U.LFG(lr),U.LFG(U.Sil),U.LFG(U.lqb),U.LFG(Ll),U.LFG(ir))},C.\u0275prov=U.Yz7({token:C,factory:C.\u0275fac}),C})();const cr=new U.OlP("");let rs=(()=>{class C{constructor(D,P,k={}){this.router=D,this.viewportScroller=P,this.options=k,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},k.scrollPositionRestoration=k.scrollPositionRestoration||"disabled",k.anchorScrolling=k.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(D=>{D instanceof Mr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=D.navigationTrigger,this.restoredId=D.restoredState?D.restoredState.navigationId:0):D instanceof mr&&(this.lastId=D.id,this.scheduleScrollEvent(D,this.router.parseUrl(D.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(D=>{D instanceof Cl&&(D.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(D.position):D.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(D.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(D,P){this.router.triggerEvent(new Cl(D,"popstate"===this.lastSource?this.store[this.restoredId]:null,P))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return C.\u0275fac=function(D){U.$Z()},C.\u0275prov=U.Yz7({token:C,factory:C.\u0275fac}),C})();const _r=new U.OlP("ROUTER_FORROOT_GUARD"),Fl=new U.OlP(""),kl=[zt.Ye,{provide:Ho,useClass:ii},{provide:lr,useFactory:Qa},El,{provide:Gr,useFactory:function Ei(C){return C.routerState.root},deps:[lr]},ir];function Kd(){return new U.PXZ("Router",lr)}let Qd=(()=>{class C{constructor(D){}static forRoot(D,P){return{ngModule:C,providers:[kl,[],Cc(D),{provide:_r,useFactory:Kc,deps:[[lr,new U.FiY,new U.tp0]]},{provide:so,useValue:P||{}},P?.useHash?{provide:zt.S$,useClass:zt.Do}:{provide:zt.S$,useClass:zt.b0},{provide:cr,useFactory:()=>{const C=(0,U.f3M)(lr),S=(0,U.f3M)(zt.EM),D=(0,U.f3M)(so);return D.scrollOffset&&S.setOffset(D.scrollOffset),new rs(C,S,D)}},P?.preloadingStrategy?Ps(P.preloadingStrategy):[],{provide:U.PXZ,multi:!0,useFactory:Kd},P?.initialNavigation?eu(P):[],[{provide:Qc,useFactory:bs},{provide:U.tb,multi:!0,useExisting:Qc}]]}}static forChild(D){return{ngModule:C,providers:[Cc(D)]}}}return C.\u0275fac=function(D){return new(D||C)(U.LFG(_r,8))},C.\u0275mod=U.oAB({type:C}),C.\u0275inj=U.cJS({}),C})();function Kc(C){return"guarded"}function Cc(C){return[{provide:Ja,multi:!0,useValue:C}]}function bs(){const C=(0,U.f3M)(U.zs3);return S=>{const D=C.get(U.z2F);if(S!==D.components[0])return;const P=C.get(lr),k=C.get(Er);1===C.get(ur)&&P.initialNavigation(),C.get(Fl,null,U.XFs.Optional)?.setUpPreloading(),C.get(cr,null,U.XFs.Optional)?.init(),P.resetRootComponentType(D.componentTypes[0]),k.next(),k.complete()}}const Qc=new U.OlP("");function eu(C){return["disabled"===C.initialNavigation?[{provide:U.ip1,multi:!0,useFactory:()=>{const C=(0,U.f3M)(lr);return()=>{C.setUpLocationChangeListener()}}},{provide:ur,useValue:2}]:[],"enabledBlocking"===C.initialNavigation?[{provide:ur,useValue:0},{provide:U.ip1,multi:!0,deps:[U.zs3],useFactory:C=>{const S=C.get(zt.V_,Promise.resolve(null));let D=!1;return()=>S.then(()=>new Promise(k=>{const q=C.get(lr),Q=C.get(Er);(function P(k){C.get(lr).events.pipe((0,lt.h)(Q=>Q instanceof mr||Q instanceof to||Q instanceof ga),(0,Ce.U)(Q=>Q instanceof mr||Q instanceof to&&(0===Q.code||1===Q.code)&&null),(0,lt.h)(Q=>null!==Q),(0,Dt.q)(1)).subscribe(()=>{k()})})(()=>{k(!0),D=!0}),q.afterPreactivation=()=>(k(!0),D||Q.closed?(0,_e.of)(void 0):Q),q.initialNavigation()}))}}]:[]]}const Er=new U.OlP("",{factory:()=>new ke.x}),ur=new U.OlP("",{providedIn:"root",factory:()=>1});function Ps(C){return[Ea,{provide:Fl,useExisting:Ea},{provide:Ll,useExisting:C}]}},4463:(an,qe,$)=>{$.d(qe,{aw:()=>pn,sK:()=>et});var U=$(4650),v=$(9751),xe=$(576);function Se(Xe){return!!Xe&&(Xe instanceof v.y||(0,xe.m)(Xe.lift)&&(0,xe.m)(Xe.subscribe))}var _e=$(9646),Te=$(4128),rt=$(7272),Ve=$(9770),Qe=$(7579),dt=$(6063);class ze extends Qe.x{constructor(kt=1/0,oe=1/0,He=dt.l){super(),this._bufferSize=kt,this._windowTime=oe,this._timestampProvider=He,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=oe===1/0,this._bufferSize=Math.max(1,kt),this._windowTime=Math.max(1,oe)}next(kt){const{isStopped:oe,_buffer:He,_infiniteTimeWindow:Le,_timestampProvider:Ot,_windowTime:vn}=this;oe||(He.push(kt),!Le&&He.push(Ot.now()+vn)),this._trimBuffer(),super.next(kt)}_subscribe(kt){this._throwIfClosed(),this._trimBuffer();const oe=this._innerSubscribe(kt),{_infiniteTimeWindow:He,_buffer:Le}=this,Ot=Le.slice();for(let vn=0;vn<Ot.length&&!kt.closed;vn+=He?1:2)kt.next(Ot[vn]);return this._checkFinalizedStatuses(kt),oe}_trimBuffer(){const{_bufferSize:kt,_timestampProvider:oe,_buffer:He,_infiniteTimeWindow:Le}=this,Ot=(Le?1:2)*kt;if(kt<1/0&&Ot<He.length&&He.splice(0,He.length-Ot),!Le){const vn=oe.now();let bi=0;for(let Oi=1;Oi<He.length&&He[Oi]<=vn;Oi+=2)bi=Oi;bi&&He.splice(0,bi+1)}}}var Ue=$(3099);function Gt(Xe,kt,oe){let He,Le=!1;return Xe&&"object"==typeof Xe?({bufferSize:He=1/0,windowTime:kt=1/0,refCount:Le=!1,scheduler:oe}=Xe):He=Xe??1/0,(0,Ue.B)({connector:()=>new ze(He,kt,oe),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Le})}var at=$(5698),ke=$(4004),zt=$(4351),lt=$(3900);class Dt{}let sn=(()=>{class Xe extends Dt{getTranslation(oe){return(0,_e.of)({})}}return Xe.\u0275fac=function(){let kt;return function(He){return(kt||(kt=U.n5z(Xe)))(He||Xe)}}(),Xe.\u0275prov=U.Yz7({token:Xe,factory:Xe.\u0275fac}),Xe})();class $n{}let Tt=(()=>{class Xe{handle(oe){return oe.key}}return Xe.\u0275fac=function(oe){return new(oe||Xe)},Xe.\u0275prov=U.Yz7({token:Xe,factory:Xe.\u0275fac}),Xe})();function Vt(Xe){return typeof Xe<"u"&&null!==Xe}function Nn(Xe){return Xe&&"object"==typeof Xe&&!Array.isArray(Xe)}function qt(Xe,kt){let oe=Object.assign({},Xe);return Nn(Xe)&&Nn(kt)&&Object.keys(kt).forEach(He=>{Nn(kt[He])?He in Xe?oe[He]=qt(Xe[He],kt[He]):Object.assign(oe,{[He]:kt[He]}):Object.assign(oe,{[He]:kt[He]})}),oe}class jt{}let ln=(()=>{class Xe extends jt{constructor(){super(...arguments),this.templateMatcher=/{{\s?([^{}\s]*)\s?}}/g}interpolate(oe,He){let Le;return Le="string"==typeof oe?this.interpolateString(oe,He):"function"==typeof oe?this.interpolateFunction(oe,He):oe,Le}getValue(oe,He){let Le="string"==typeof He?He.split("."):[He];He="";do{He+=Le.shift(),!Vt(oe)||!Vt(oe[He])||"object"!=typeof oe[He]&&Le.length?Le.length?He+=".":oe=void 0:(oe=oe[He],He="")}while(Le.length);return oe}interpolateFunction(oe,He){return oe(He)}interpolateString(oe,He){return He?oe.replace(this.templateMatcher,(Le,Ot)=>{let vn=this.getValue(He,Ot);return Vt(vn)?vn:Le}):oe}}return Xe.\u0275fac=function(){let kt;return function(He){return(kt||(kt=U.n5z(Xe)))(He||Xe)}}(),Xe.\u0275prov=U.Yz7({token:Xe,factory:Xe.\u0275fac}),Xe})();class hn{}let _n=(()=>{class Xe extends hn{compile(oe,He){return oe}compileTranslations(oe,He){return oe}}return Xe.\u0275fac=function(){let kt;return function(He){return(kt||(kt=U.n5z(Xe)))(He||Xe)}}(),Xe.\u0275prov=U.Yz7({token:Xe,factory:Xe.\u0275fac}),Xe})();class gi{constructor(){this.currentLang=this.defaultLang,this.translations={},this.langs=[],this.onTranslationChange=new U.vpe,this.onLangChange=new U.vpe,this.onDefaultLangChange=new U.vpe}}const Kt=new U.OlP("USE_STORE"),Ce=new U.OlP("USE_DEFAULT_LANG"),je=new U.OlP("DEFAULT_LANGUAGE"),nt=new U.OlP("USE_EXTEND");let et=(()=>{class Xe{constructor(oe,He,Le,Ot,vn,bi=!0,Oi=!1,ci=!1,or){this.store=oe,this.currentLoader=He,this.compiler=Le,this.parser=Ot,this.missingTranslationHandler=vn,this.useDefaultLang=bi,this.isolate=Oi,this.extend=ci,this.pending=!1,this._onTranslationChange=new U.vpe,this._onLangChange=new U.vpe,this._onDefaultLangChange=new U.vpe,this._langs=[],this._translations={},this._translationRequests={},or&&this.setDefaultLang(or)}get onTranslationChange(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}get onLangChange(){return this.isolate?this._onLangChange:this.store.onLangChange}get onDefaultLangChange(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}get defaultLang(){return this.isolate?this._defaultLang:this.store.defaultLang}set defaultLang(oe){this.isolate?this._defaultLang=oe:this.store.defaultLang=oe}get currentLang(){return this.isolate?this._currentLang:this.store.currentLang}set currentLang(oe){this.isolate?this._currentLang=oe:this.store.currentLang=oe}get langs(){return this.isolate?this._langs:this.store.langs}set langs(oe){this.isolate?this._langs=oe:this.store.langs=oe}get translations(){return this.isolate?this._translations:this.store.translations}set translations(oe){this.isolate?this._translations=oe:this.store.translations=oe}setDefaultLang(oe){if(oe===this.defaultLang)return;let He=this.retrieveTranslations(oe);typeof He<"u"?(null==this.defaultLang&&(this.defaultLang=oe),He.pipe((0,at.q)(1)).subscribe(Le=>{this.changeDefaultLang(oe)})):this.changeDefaultLang(oe)}getDefaultLang(){return this.defaultLang}use(oe){if(oe===this.currentLang)return(0,_e.of)(this.translations[oe]);let He=this.retrieveTranslations(oe);return typeof He<"u"?(this.currentLang||(this.currentLang=oe),He.pipe((0,at.q)(1)).subscribe(Le=>{this.changeLang(oe)}),He):(this.changeLang(oe),(0,_e.of)(this.translations[oe]))}retrieveTranslations(oe){let He;return(typeof this.translations[oe]>"u"||this.extend)&&(this._translationRequests[oe]=this._translationRequests[oe]||this.getTranslation(oe),He=this._translationRequests[oe]),He}getTranslation(oe){this.pending=!0;const He=this.currentLoader.getTranslation(oe).pipe(Gt(1),(0,at.q)(1));return this.loadingTranslations=He.pipe((0,ke.U)(Le=>this.compiler.compileTranslations(Le,oe)),Gt(1),(0,at.q)(1)),this.loadingTranslations.subscribe({next:Le=>{this.translations[oe]=this.extend&&this.translations[oe]?{...Le,...this.translations[oe]}:Le,this.updateLangs(),this.pending=!1},error:Le=>{this.pending=!1}}),He}setTranslation(oe,He,Le=!1){He=this.compiler.compileTranslations(He,oe),this.translations[oe]=(Le||this.extend)&&this.translations[oe]?qt(this.translations[oe],He):He,this.updateLangs(),this.onTranslationChange.emit({lang:oe,translations:this.translations[oe]})}getLangs(){return this.langs}addLangs(oe){oe.forEach(He=>{-1===this.langs.indexOf(He)&&this.langs.push(He)})}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResult(oe,He,Le){let Ot;if(He instanceof Array){let vn={},bi=!1;for(let Oi of He)vn[Oi]=this.getParsedResult(oe,Oi,Le),Se(vn[Oi])&&(bi=!0);if(bi){const Oi=He.map(ci=>Se(vn[ci])?vn[ci]:(0,_e.of)(vn[ci]));return(0,Te.D)(Oi).pipe((0,ke.U)(ci=>{let or={};return ci.forEach((ji,$i)=>{or[He[$i]]=ji}),or}))}return vn}if(oe&&(Ot=this.parser.interpolate(this.parser.getValue(oe,He),Le)),typeof Ot>"u"&&null!=this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(Ot=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],He),Le)),typeof Ot>"u"){let vn={key:He,translateService:this};typeof Le<"u"&&(vn.interpolateParams=Le),Ot=this.missingTranslationHandler.handle(vn)}return typeof Ot<"u"?Ot:He}get(oe,He){if(!Vt(oe)||!oe.length)throw new Error('Parameter "key" required');if(this.pending)return this.loadingTranslations.pipe((0,zt.b)(Le=>Se(Le=this.getParsedResult(Le,oe,He))?Le:(0,_e.of)(Le)));{let Le=this.getParsedResult(this.translations[this.currentLang],oe,He);return Se(Le)?Le:(0,_e.of)(Le)}}getStreamOnTranslationChange(oe,He){if(!Vt(oe)||!oe.length)throw new Error('Parameter "key" required');return(0,rt.z)((0,Ve.P)(()=>this.get(oe,He)),this.onTranslationChange.pipe((0,lt.w)(Le=>{const Ot=this.getParsedResult(Le.translations,oe,He);return"function"==typeof Ot.subscribe?Ot:(0,_e.of)(Ot)})))}stream(oe,He){if(!Vt(oe)||!oe.length)throw new Error('Parameter "key" required');return(0,rt.z)((0,Ve.P)(()=>this.get(oe,He)),this.onLangChange.pipe((0,lt.w)(Le=>{const Ot=this.getParsedResult(Le.translations,oe,He);return Se(Ot)?Ot:(0,_e.of)(Ot)})))}instant(oe,He){if(!Vt(oe)||!oe.length)throw new Error('Parameter "key" required');let Le=this.getParsedResult(this.translations[this.currentLang],oe,He);if(Se(Le)){if(oe instanceof Array){let Ot={};return oe.forEach((vn,bi)=>{Ot[oe[bi]]=oe[bi]}),Ot}return oe}return Le}set(oe,He,Le=this.currentLang){this.translations[Le][oe]=this.compiler.compile(He,Le),this.updateLangs(),this.onTranslationChange.emit({lang:Le,translations:this.translations[Le]})}changeLang(oe){this.currentLang=oe,this.onLangChange.emit({lang:oe,translations:this.translations[oe]}),null==this.defaultLang&&this.changeDefaultLang(oe)}changeDefaultLang(oe){this.defaultLang=oe,this.onDefaultLangChange.emit({lang:oe,translations:this.translations[oe]})}reloadLang(oe){return this.resetLang(oe),this.getTranslation(oe)}resetLang(oe){this._translationRequests[oe]=void 0,this.translations[oe]=void 0}getBrowserLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let oe=window.navigator.languages?window.navigator.languages[0]:null;return oe=oe||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,typeof oe>"u"?void 0:(-1!==oe.indexOf("-")&&(oe=oe.split("-")[0]),-1!==oe.indexOf("_")&&(oe=oe.split("_")[0]),oe)}getBrowserCultureLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let oe=window.navigator.languages?window.navigator.languages[0]:null;return oe=oe||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,oe}}return Xe.\u0275fac=function(oe){return new(oe||Xe)(U.LFG(gi),U.LFG(Dt),U.LFG(hn),U.LFG(jt),U.LFG($n),U.LFG(Ce),U.LFG(Kt),U.LFG(nt),U.LFG(je))},Xe.\u0275prov=U.Yz7({token:Xe,factory:Xe.\u0275fac}),Xe})(),pn=(()=>{class Xe{static forRoot(oe={}){return{ngModule:Xe,providers:[oe.loader||{provide:Dt,useClass:sn},oe.compiler||{provide:hn,useClass:_n},oe.parser||{provide:jt,useClass:ln},oe.missingTranslationHandler||{provide:$n,useClass:Tt},gi,{provide:Kt,useValue:oe.isolate},{provide:Ce,useValue:oe.useDefaultLang},{provide:nt,useValue:oe.extend},{provide:je,useValue:oe.defaultLanguage},et]}}static forChild(oe={}){return{ngModule:Xe,providers:[oe.loader||{provide:Dt,useClass:sn},oe.compiler||{provide:hn,useClass:_n},oe.parser||{provide:jt,useClass:ln},oe.missingTranslationHandler||{provide:$n,useClass:Tt},{provide:Kt,useValue:oe.isolate},{provide:Ce,useValue:oe.useDefaultLang},{provide:nt,useValue:oe.extend},{provide:je,useValue:oe.defaultLanguage},et]}}}return Xe.\u0275fac=function(oe){return new(oe||Xe)},Xe.\u0275mod=U.oAB({type:Xe}),Xe.\u0275inj=U.cJS({}),Xe})()}},an=>{an(an.s=3546)}]);